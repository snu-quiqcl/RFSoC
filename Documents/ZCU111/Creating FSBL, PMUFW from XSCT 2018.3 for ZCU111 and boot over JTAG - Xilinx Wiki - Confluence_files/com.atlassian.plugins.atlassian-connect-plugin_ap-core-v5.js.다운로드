WRMCB=function(e){var c=console;if(c&&c.log&&c.error){c.log('Error running batched script.');c.error(e);}}
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:ap-core-v5', location = 'v5/js/core/connect-host.js' */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).connectHost=t()}(this,(function(){"use strict";var e=function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;e.__proto__=t};function t(){}t.prototype=Object.create(null);function n(){n.init.call(this)}n.EventEmitter=n;n.usingDomains=!1;n.prototype.domain=void 0;n.prototype._events=void 0;n.prototype._maxListeners=void 0;n.defaultMaxListeners=10;n.init=function(){this.domain=null;n.usingDomains&&undefined.active;if(!this._events||this._events===Object.getPrototypeOf(this)._events){this._events=new t;this._eventsCount=0}this._maxListeners=this._maxListeners||void 0};n.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');this._maxListeners=e;return this};function i(e){return void 0===e._maxListeners?n.defaultMaxListeners:e._maxListeners}n.prototype.getMaxListeners=function(){return i(this)};function o(e,t,n){if(t)e.call(n);else for(var i=e.length,o=f(e,i),r=0;r<i;++r)o[r].call(n)}function r(e,t,n,i){if(t)e.call(n,i);else for(var o=e.length,r=f(e,o),a=0;a<o;++a)r[a].call(n,i)}function a(e,t,n,i,o){if(t)e.call(n,i,o);else for(var r=e.length,a=f(e,r),s=0;s<r;++s)a[s].call(n,i,o)}function s(e,t,n,i,o,r){if(t)e.call(n,i,o,r);else for(var a=e.length,s=f(e,a),d=0;d<a;++d)s[d].call(n,i,o,r)}function d(e,t,n,i){if(t)e.apply(n,i);else for(var o=e.length,r=f(e,o),a=0;a<o;++a)r[a].apply(n,i)}n.prototype.emit=function(e){var t,n,i,c,l,u,f,p="error"===e;if(u=this._events)p=p&&null==u.error;else if(!p)return!1;f=this.domain;if(p){t=arguments[1];if(!f){if(t instanceof Error)throw t;var g=new Error('Uncaught, unspecified "error" event. ('+t+")");g.context=t;throw g}t||(t=new Error('Uncaught, unspecified "error" event'));t.domainEmitter=this;t.domain=f;t.domainThrown=!1;f.emit("error",t);return!1}if(!(n=u[e]))return!1;var h="function"==typeof n;switch(i=arguments.length){case 1:o(n,h,this);break;case 2:r(n,h,this,arguments[1]);break;case 3:a(n,h,this,arguments[1],arguments[2]);break;case 4:s(n,h,this,arguments[1],arguments[2],arguments[3]);break;default:c=new Array(i-1);for(l=1;l<i;l++)c[l-1]=arguments[l];d(n,h,this,c)}return!0};function c(e,n,o,r){var a,s,d,c;if("function"!=typeof o)throw new TypeError('"listener" argument must be a function');if(s=e._events){if(s.newListener){e.emit("newListener",n,o.listener?o.listener:o);s=e._events}d=s[n]}else{s=e._events=new t;e._eventsCount=0}if(d){"function"==typeof d?d=s[n]=r?[o,d]:[d,o]:r?d.unshift(o):d.push(o);if(!d.warned&&(a=i(e))&&a>0&&d.length>a){d.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+d.length+" "+n+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning";l.emitter=e;l.type=n;l.count=d.length;c=l,"function"==typeof console.warn?console.warn(c):console.log(c)}}else{d=s[n]=o;++e._eventsCount}return e}n.prototype.addListener=function(e,t){return c(this,e,t,!1)};n.prototype.on=n.prototype.addListener;n.prototype.prependListener=function(e,t){return c(this,e,t,!0)};function l(e,t,n){var i=!1;function o(){e.removeListener(t,o);if(!i){i=!0;n.apply(e,arguments)}}o.listener=n;return o}n.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');this.on(e,l(this,e,t));return this};n.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');this.prependListener(e,l(this,e,t));return this};n.prototype.removeListener=function(e,n){var i,o,r,a,s;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if(!(o=this._events))return this;if(!(i=o[e]))return this;if(i===n||i.listener&&i.listener===n)if(0==--this._eventsCount)this._events=new t;else{delete o[e];o.removeListener&&this.emit("removeListener",e,i.listener||n)}else if("function"!=typeof i){r=-1;for(a=i.length;a-- >0;)if(i[a]===n||i[a].listener&&i[a].listener===n){s=i[a].listener;r=a;break}if(r<0)return this;if(1===i.length){i[0]=void 0;if(0==--this._eventsCount){this._events=new t;return this}delete o[e]}else!function(e,t){for(var n=t,i=n+1,o=e.length;i<o;n+=1,i+=1)e[n]=e[i];e.pop()}(i,r);o.removeListener&&this.emit("removeListener",e,s||n)}return this};n.prototype.removeAllListeners=function(e){var n,i;if(!(i=this._events))return this;if(!i.removeListener){if(0===arguments.length){this._events=new t;this._eventsCount=0}else i[e]&&(0==--this._eventsCount?this._events=new t:delete i[e]);return this}if(0===arguments.length){for(var o,r=Object.keys(i),a=0;a<r.length;++a)"removeListener"!==(o=r[a])&&this.removeAllListeners(o);this.removeAllListeners("removeListener");this._events=new t;this._eventsCount=0;return this}if("function"==typeof(n=i[e]))this.removeListener(e,n);else if(n)do{this.removeListener(e,n[n.length-1])}while(n[0]);return this};n.prototype.listeners=function(e){var t,n,i=this._events;n=i&&(t=i[e])?"function"==typeof t?[t.listener||t]:function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(t):[];return n};n.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):u.call(e,t)};n.prototype.listenerCount=u;function u(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}n.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};function f(e,t){for(var n=new Array(t);t--;)n[t]=e[t];return n}var p,g=function(t){e(n,t);function n(){var e;(e=t.call(this)||this).setMaxListeners(20);return e}var i=n.prototype;i.dispatch=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.emit.apply(this,["before:"+e].concat(n));this.emit.apply(this,arguments);this.emit.apply(this,["after:"+e].concat(n))};i.registerOnce=function(e,t){if("string"!=typeof e)throw"ACJS: event name must be string";this.once(e,t)};i.register=function(e,t){if("string"!=typeof e)throw"ACJS: event name must be string";this.on(e,t)};i.unregister=function(e,t){if("string"!=typeof e)throw"ACJS: event name must be string";this.removeListener(e,t)};return n}(n),h=new g,m=window.AJS&&window.AJS.$||function(){},y=[];if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window){var v=new IntersectionObserver((function(e){e.forEach((function(e){var t=e.intersectionRatio,n=e.target;if(t>0){v.unobserve(n);!function(e){y=y.filter((function(t){var n=t.element,i=t.callback;if(n===e){i();return!1}return!0}))}(n)}}))}),{threshold:.25});p=v.observe.bind(v)}function _(e){if(AJS&&AJS.DarkFeatures&&AJS.DarkFeatures.isEnabled&&AJS.DarkFeatures.isEnabled(e))return!0;var t,n,i=window.featureFlags||(t="fe-feature-flags",null===(n=document.querySelector("meta[name='ajs-"+t+"']"))?void 0:n.getAttribute("content")||void 0);if(!i)return!1;var o={};try{o="object"==typeof i?i:JSON.parse(i)}catch(e){return!1}return!(!o[e]||"boolean"!=typeof o[e].value)&&o[e].value}var x={getBooleanFeatureFlag:_,isSetBlockDisplayFlagEnabled:function(){return _("com.atlassian.connect.acjs.onecloud-1878-set-block-display")}};var b=function(){function e(){this._addons={}}var t=e.prototype;t._track=function(e,t){var n=window,i="connect.addon."+e;(t=t||{}).version=n._AP&&n._AP.version?n._AP.version:void 0;t.userAgent=n.navigator.userAgent;if(!n.AJS)return!1;if(n.AJS.Analytics)n.AJS.Analytics.triggerPrivacyPolicySafeEvent(i,t);else{if(!n.AJS.trigger)return!1;AJS.trigger("analyticsEvent",{name:i,data:t})}return!0};t._trackGasV3=function(e,t){try{window.require("ac/analytics").emitGasV3(e,t)}catch(e){window.Confluence||window.__karma__||console.info("Connect GasV3 catch",e)}};t._time=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()};t.trackLoadingStarted=function(e){if(this._addons&&e&&e.id){e.startLoading=this._time();this._addons[e.id]=e}else console.error("ACJS: cannot track loading analytics",this._addons,e)};t.trackLoadingEnded=function(e){var t=this;if(this._addons&&e&&this._addons[e.id]){var n,i=e.url,o=void 0!==i&&-1===i.indexOf("xdm_e="),r=this._time()-this._addons[e.id].startLoading,a=this.getIframeLoadApdex(r);try{n=Object.keys(JSON.parse(this._addons[e.id].$el[0].name).api).sort().toString()}catch(e){n="error"}var s={addonKey:e.addon_key,moduleKey:e.key,moduleType:e.options?e.options.moduleType:void 0,moduleLocation:e.options?e.options.moduleLocation:void 0,pearApp:e.options&&"true"===e.options.pearApp?"true":"false",iframeLoadMillis:r,iframeLoadApdex:a,iframeIsCacheable:o,value:r>2e4?"x":Math.ceil(r/100),api:n};"function"==typeof window.requestIdleCallback?window.requestIdleCallback((function(){return t._track("iframe.performance.load",s)}),{timeout:100}):this._track("iframe.performance.load",s)}else console.error("ACJS: cannot track loading end analytics",this._addons,e)};t.getIframeLoadApdex=function(e){return e<=300?1:e<=1200?.5:0};t.trackLoadingTimeout=function(e){var t=window.navigator.onLine;"boolean"!=typeof t&&(t="not-supported");this._track("iframe.performance.timeout",{addonKey:e.addon_key,moduleKey:e.key,moduleType:e.options?e.options.moduleType:void 0,moduleLocation:e.options?e.options.moduleLocation:void 0,pearApp:e.options&&"true"===e.options.pearApp?"true":"false",connectedStatus:t.toString()});this.trackLoadingEnded(e)};t.trackLoadingCancel=function(e){this._track("iframe.performance.cancel",{addonKey:e.addon_key,moduleKey:e.key,moduleType:e.options?e.options.moduleType:void 0,moduleLocation:e.options?e.options.moduleLocation:void 0,pearApp:e.options&&"true"===e.options.pearApp?"true":"false"})};t.trackUseOfDeprecatedMethod=function(e,t){this._track("jsapi.deprecated",{addonKey:t.addon_key,moduleKey:t.key,methodUsed:e})};t.trackMultipleDialogOpening=function(e,t){this._track("jsapi.dialog.multiple",{addonKey:t.addon_key,moduleKey:t.key,dialogType:e})};t.trackVisible=function(e){this._track("iframe.is_visible",{addonKey:e.addon_key,moduleKey:e.key,moduleType:e.options?e.options.moduleType:void 0,pearApp:e.options&&"true"===e.options.pearApp?"true":"false"})};t.trackIframePerformance=function(e,t){this._trackGasV3("operational",{source:t.addon_key,action:"iframeRendered",actionSubject:"connectAddon",actionSubjectId:t.addon_key,attributes:{key:t.key,pearApp:this._getPearApp(t),moduleType:this._getModuleType(t),iframeIsCacheable:this._isCacheable(t),moduleLocation:this._getModuleLocation(t),domainLookupTime:e.domainLookupTime,connectionTime:e.connectionTime,decodedBodySize:e.decodedBodySize,domContentLoadedTime:e.domContentLoadedTime,fetchTime:e.fetchTime}})};t.dispatch=function(e,t){this._track(e,t)};t.trackExternal=function(e,t){this._track(e,t)};t._resetAnalyticsDueToUnreliable=function(e){if(!e)throw new Error("Cannot reset analytics due to no extension id");if(this._addons[e]){clearTimeout(this._addons[e]);delete this._addons[e]}else console.info("Cannot clear analytics, cache does not contain extension id")};t._isCacheable=function(e){var t=e.url;return void 0!==t&&-1===t.indexOf("xdm_e=")};t._getModuleType=function(e){return e.options?e.options.moduleType:void 0};t._getModuleLocation=function(e){return e.options?e.options.moduleLocation:void 0};t._getPearApp=function(e){return e.options&&"true"===e.options.pearApp};t.trackGasV3Visible=function(e){this._trackGasV3("operational",{action:"iframeViewed",actionSubject:"connectAddon",actionSubjectId:e.addon_key,attributes:{moduleType:this._getModuleType(e),iframeIsCacheable:this._isCacheable(e),moduleKey:e.key,moduleLocation:this._getModuleLocation(e),pearApp:this._getPearApp(e)},source:e.addon_key})};t.trackGasV3ContentResolver=function(e,t){if(n=5,100*Math.random()<=n){var n,i=t.extension,o=t.attrs,r=e?"contentResolverSucceeded":"contentResolverFailed";this._trackGasV3("operational",{action:r,actionSubject:"connectAddon",actionSubjectId:i.addon_key,attributes:Object.assign({},o,{moduleType:this._getModuleType(i),moduleKey:i.key,moduleLocation:this._getModuleLocation(i),pearApp:this._getPearApp(i)}),source:i.addon_key})}};t.trackGasV3LoadingEnded=function(e){var t=this._time()-this._addons[e.id].startLoading;this._trackGasV3("operational",{action:"iframeLoaded",actionSubject:"connectAddon",actionSubjectId:e.addon_key,attributes:{moduleType:this._getModuleType(e),iframeIsCacheable:this._isCacheable(e),iframeLoadMillis:t,moduleKey:e.key,moduleLocation:this._getModuleLocation(e),pearApp:this._getPearApp(e)},source:e.addon_key})};t.trackGasV3LoadingTimeout=function(e){this._trackGasV3("operational",{action:"iframeTimeout",actionSubject:"connectAddon",actionSubjectId:e.addon_key,attributes:{moduleType:this._getModuleType(e),iframeIsCacheable:this._isCacheable(e),moduleKey:e.key,moduleLocation:this._getModuleLocation(e),pearApp:this._getPearApp(e)},source:e.addon_key})};return e}(),w=new b;m.fn&&h.register("iframe-create",(function(e){w.trackLoadingStarted(e.extension)}));h.register("iframe-bridge-start",(function(e){w.trackLoadingStarted(e.extension)}));h.register("iframe-bridge-established",(function(e){w.trackLoadingEnded(e.extension);!function(e,t){if("function"==typeof t&&e instanceof Element){y.push({element:e,callback:t});p(e)}}(document.getElementById(e.extension.id),(function(){h.dispatch("iframe-visible",e.extension);w.trackVisible(e.extension);w.trackGasV3Visible(e.extension)}))}));h.register("iframe-bridge-established",(function(e){w.trackGasV3LoadingEnded(e.extension)}));h.register("iframe-bridge-timeout",(function(e){w.trackLoadingTimeout(e.extension)}));h.register("iframe-bridge-cancelled",(function(e){w.trackLoadingCancel(e.extension)}));h.register("analytics-deprecated-method-used",(function(e){w.trackUseOfDeprecatedMethod(e.methodUsed,e.extension)}));h.register("analytics-iframe-performance",(function(e){w.trackIframePerformance(e.metrics,e.extension)}));h.register("iframe-destroyed",(function(e){w._resetAnalyticsDueToUnreliable(e.extension.extension_id)}));h.register("analytics-external-event-track",(function(e){w.trackExternal(e.eventName,e.values)}));h.register("analytics-content-resolver-track",(function(e){var t=e.success,n=e.extra;w.trackGasV3ContentResolver(t,n)}));h.register("iframe-bridge-timeout",(function(e){w.trackGasV3LoadingTimeout(e.extension)}));var k=function(e,t){h.dispatch("iframe-bridge-timeout",{$el:e,extension:t})},E=function(e,t){h.dispatch("iframe-bridge-cancelled",{$el:e,extension:t})},A="ap-status-indicator",C='<div class="ap-loading"><div class="small-spinner"></div>Loading app...</div>',I='<div class="ap-load-timeout"><div class="small-spinner"></div>App is not responding. Wait or <a href="#" class="ap-btn-cancel">cancel</a>?</div>',O="App failed to load.",S=new(function(){function e(){this._stateRegistry={}}var t=e.prototype;t._loadingContainer=function(e){return e.find(".ap-status-indicator")};t.render=function(){var e=document.createElement("div");e.classList.add(A);e.innerHTML=C;var t=m(e);this._startSpinner(t);return t};t._startSpinner=function(e){setTimeout((function(){var t=e.find(".small-spinner");t.length&&t.spin&&t.spin({lines:12,length:3,width:2,radius:3,trail:60,speed:1.5,zIndex:1})}),10)};t.hide=function(e,t){this._clearTimeout(t);this._loadingContainer(e)[0].style.display="none"};t.cancelled=function(e,t){var n=O;this._loadingContainer(e).empty().text(n)};t._setupTimeout=function(e,t){this._stateRegistry[t.id]=setTimeout((function(){k(e,t)}),12e3)};t._clearTimeout=function(e){if(this._stateRegistry[e]){clearTimeout(this._stateRegistry[e]);delete this._stateRegistry[e]}};t.timeout=function(e,t){var n=m(I),i=this._loadingContainer(e);i.empty().append(n);this._startSpinner(i);m("a.ap-btn-cancel",i).click((function(){E(e,t)}));this._clearTimeout(t);return i};return e}());h.register("iframe-create",(function(e){e.extension.options.noDom||S._setupTimeout(e.$el.parents(".ap-iframe-container"),e.extension)}));h.register("iframe-bridge-established",(function(e){e.extension.options.noDom||S.hide(e.$el.parents(".ap-iframe-container"),e.extension.id)}));h.register("iframe-bridge-timeout",(function(e){e.extension.options.noDom||S.timeout(e.$el,e.extension.id)}));h.register("iframe-bridge-cancelled",(function(e){e.extension.options.noDom||S.cancelled(e.$el,e.extension.id)}));h.register("iframe-destroyed",(function(e){S._clearTimeout(e.extension.extension_id)}));var P=function(e,t){if(null==e)return{};var n,i,o={},r=Object.keys(e);for(i=0;i<r.length;i++){n=r[i];t.indexOf(n)>=0||(o[n]=e[n])}return o};function T(e,t){M=T=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return T(e,t)}var M=T,D=M;function L(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return!0}catch(e){return!1}}function j(e,t,n){F=j=L()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var o=new(Function.bind.apply(e,i));n&&D(o,n.prototype);return o};return j.apply(null,arguments)}var F=j,B=F,N="[Simple-XDM] ",$=Function.prototype.bind,R={locationOrigin:function(){return window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")},randomString:function(){return Math.floor(1e9*Math.random()).toString(16)},isString:function(e){return"string"==typeof e||e instanceof String},argumentsToArray:function(e){return Array.prototype.slice.call(e)},argumentNames:function(e){return e.toString().replace(/((\/\/.*$)|(\/\*[^]*?\*\/))/gm,"").replace(/[^(]+\(([^)]*)[^]+/,"$1").match(/([^\s,]+)/g)||[]},hasCallback:function(e){var t=e.length;return t>0&&"function"==typeof e[t-1]},error:function(e){if(window.console&&window.console.error){var t=[];if("string"==typeof e){t.push(N+e);t=t.concat(Array.prototype.slice.call(arguments,1))}else{t.push(N);t=t.concat(Array.prototype.slice.call(arguments))}window.console.error.apply(null,t)}},warn:function(e){window.console&&console.warn(N+e)},log:function(e){window.console&&window.console.log(N+e)},_bind:function(e,t){return $&&t.bind===$?t.bind(e):function(){return t.apply(e,arguments)}},throttle:function(e,t,n){var i=0;return function(){var o=Date.now();if(o-i>t){i=o;e.apply(n,arguments)}}},each:function(e,t){var n,i;if(e)if(null!=(n=e.length)&&"function"!=typeof e){i=0;for(;i<n&&!1!==t.call(e[i],i,e[i]);)i+=1}else for(i in e)if(e.hasOwnProperty(i)&&!1===t.call(e[i],i,e[i]))break},extend:function(e){var t=arguments,n=[].slice.call(t,1,t.length);n.forEach((function(t){"object"==typeof t&&Object.getOwnPropertyNames(t).forEach((function(n){e[n]=t[n]}))}));return e},sanitizeStructuredClone:function(e){var t=[Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer],n=[Error,Node],i=R.warn,o=[];return function e(r){if("function"==typeof r){i("A function was detected and removed from the message.");return null}if(n.some((function(e){if(r instanceof e){i(e.name+" object was detected and removed from the message.");return!0}return!1})))return{};if(r&&"object"==typeof r&&t.every((function(e){return!(r instanceof e)}))){var a;if(Array.isArray(r))a=r.map((function(t){return e(t)}));else{if(o.indexOf(r)>-1){i("A circular reference was detected and removed from the message.");return null}o.push(r);a={};for(var s in r)if(r.hasOwnProperty(s)){var d=e(r[s]);null!==d&&(a[s]=d)}o.pop()}return a}return r}(e)},getOrigin:function(e,t){if("function"==typeof URL)try{return new URL(e,t).origin}catch(e){}var n=document.implementation.createHTMLDocument("");if(t){var i=n.createElement("base");i.href=t;n.head.appendChild(i)}var o=n.createElement("a");o.href=e;n.body.appendChild(o);var r=o.protocol+"//"+o.hostname;e.match(/\/\/[^/]+:[0-9]+\//)&&(r+=o.port?":"+o.port:"");return r}},J=function(t){e(i,t);var n=i.prototype;n._padUndefinedArguments=function(e,t){return e.length>=t?e:e.concat(new Array(t-e.length))};function i(e){var n;e=e||{};(n=t.call(this,e)||this)._registeredExtensions=e.extensions||{};n._registeredAPIModules={};n._registeredAPIModules._globals={};n._pendingCallbacks={};n._keycodeCallbacks={};n._clickHandler=null;n._pendingEvents={};n._messageHandlers={init:n._handleInit,req:n._handleRequest,resp:n._handleResponse,broadcast:n._handleBroadcast,event_query:n._handleEventQuery,key_triggered:n._handleKeyTriggered,addon_clicked:n._handleAddonClick,get_host_offset:n._getHostOffset,unload:n._handleUnload,sub:n._handleSubInit};return n}n._verifyAPI=function(e,t){var n=e.data.targets;if(n){var i=this.getApiSpec(),o=!1;!function e(t,n){Object.getOwnPropertyNames(n).forEach((function(i){"object"==typeof n[i]&&t[i]?e(t[i],n[i]):"parent"===n[i]&&t[i]&&(o=!0)}))}(i,n);e.source.postMessage({type:"api_tamper",tampered:o},t.extension.url)}};n._handleInit=function(e,t){e.source.postMessage({type:"init_received"},t.extension.url);this._registeredExtensions[t.extension_id].source=e.source;if(t.initCallback){t.initCallback(e.data.eid);delete t.initCallback}e.data.targets&&this._verifyAPI(e,t)};n._handleSubInit=function(e,t){var n=t.extension.options.noSub||this._getBooleanFeatureFlag&&this._getBooleanFeatureFlag("com.atlassian.connect.resolve_inner_iframe_url"),i=e.data;n?R.error("Sub-Extension requested by ["+t.extension.addon_key+"] but feature is disabled"):this.registerExtension(i.ext.id,{extension:i.ext});this._registeredRequestNotifier&&this._registeredRequestNotifier.call(null,{sub:i.ext,type:i.type,addon_key:t.extension.addon_key,key:t.extension.key,extension_id:t.extension_id,blocked:n})};n._getHostOffset=function(e,t){var n=e.source,i=null,o=t||window;o===o.top&&"function"==typeof o.getHostOffsetFunctionOverride&&(i=o.getHostOffsetFunctionOverride(n));if("number"!=typeof i){i=0;for(;!this._hasSameOrigin(n);){i++;n=n.parent}}e.source.postMessage({hostFrameOffset:i},e.origin)};n._hasSameOrigin=function(e){if(e===e.top)return!0;try{var t="test_var_"+Math.random().toString(16).substr(2);e[t]=!0;return e[t]}catch(e){}return!1};n._handleResponse=function(e){var t=e.data,n=this._pendingCallbacks[t.mid];if(n){delete this._pendingCallbacks[t.mid];n.apply(window,t.args)}};n.registerRequestNotifier=function(e){this._registeredRequestNotifier=e};n._handleRequest=function(e,t){function n(){var n=R.sanitizeStructuredClone(R.argumentsToArray(arguments));e.source.postMessage({mid:e.data.mid,type:"resp",forPlugin:!0,args:n},t.extension.url)}var i=e.data,o=this._registeredAPIModules[i.mod],r=this.getRegisteredExtensions(t.extension)[0];if(o){var a=i.fn;if(i._cls){var s=o[i._cls],d=i.mod+"-"+i._cls+"-";n._id=i._id;if("constructor"===a){if(!s._construct){s.constructor.prototype._destroy=function(){delete this._context._proxies[d+this._id]};s._construct=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=B(s.constructor,t),o=t[t.length-1];i._id=o._id;i._context=o._context;i._context._proxies[d+i._id]=i;return i}}o=s;a="_construct"}else o=r._proxies[d+i._id]}var c=o[a];if(c){var l=i.args,u=c.length-1;"_construct"===a&&(u=o.constructor.length-1);n._context=r;(l=this._padUndefinedArguments(l,u)).push(n);var f=c.apply(o,l);c.returnsPromise&&("object"!=typeof f&&"function"!=typeof f||"function"!=typeof f.then?n("Defined module method did not return a promise."):f.then((function(e){n(void 0,e)})).catch((function(e){n(e=e instanceof Error?e.message:e)})));this._registeredRequestNotifier&&this._registeredRequestNotifier.call(null,{module:i.mod,fn:i.fn,type:i.type,addon_key:t.extension.addon_key,key:t.extension.key,extension_id:t.extension_id})}}};n._handleBroadcast=function(e,t){var n=e.data;this.dispatch(n.etyp,(function(e){return e.extension.addon_key===t.extension.addon_key&&e.extension_id!==t.extension_id}),n.evnt,null,null)};n._handleKeyTriggered=function(e,t){var n=e.data,i=this._keycodeKey(n.keycode,n.modifiers,t.extension_id),o=this._keycodeCallbacks[i];o&&o.forEach((function(e){e.call(null,{addon_key:t.extension.addon_key,key:t.extension.key,extension_id:t.extension_id,keycode:n.keycode,modifiers:n.modifiers})}),this)};n.defineAPIModule=function(e,t){t=t||"_globals";this._registeredAPIModules[t]=R.extend({},this._registeredAPIModules[t]||{},e);return this._registeredAPIModules};n.isAPIModuleDefined=function(e){return void 0!==this._registeredAPIModules[e]};n._pendingEventKey=function(e,t){var n=e.addon_key||"global";e.key&&(n=n+"@@"+e.key);return n=n+"@@"+t};n.queueEvent=function(e,t,n,i){if(this._findRegistrations(t).some((function(e){return void 0!==e.registered_events}),this))this.dispatch(e,t,n,i);else{this._cleanupInvalidEvents();var o=(new Date).getTime();this._pendingEvents[this._pendingEventKey(t,o)]={type:e,targetSpec:t,event:n,callback:i,time:o,uid:R.randomString()}}};n._cleanupInvalidEvents=function(){var e=this,t=(new Date).getTime();Object.keys(this._pendingEvents).forEach((function(n){var i=e._pendingEvents[n];t-i.time<=3e4||delete e._pendingEvents[n]}))};n._handleEventQuery=function(e,t){var n=this,i={},o=(new Date).getTime();Object.keys(this._pendingEvents).forEach((function(r){var a=n._pendingEvents[r],s=o-a.time<=3e4,d=!a.targetSpec||0!==n._findRegistrations(a.targetSpec).length;d&&a.targetSpec.key&&(d=a.targetSpec.addon_key===t.extension.addon_key&&a.targetSpec.key===t.extension.key);if(s&&d){i[r]=a;a.targetSpec=a.targetSpec||{};n.dispatch(a.type,a.targetSpec,a.event,a.callback,e.source)}else s||delete n._pendingEvents[r]}));this._registeredExtensions[t.extension_id].registered_events=e.data.args;return i};n._handleUnload=function(e,t){if(t){t.extension_id&&this._registeredExtensions[t.extension_id]&&delete this._registeredExtensions[t.extension_id].source;t.unloadCallback&&t.unloadCallback(e.data.eid)}};n.dispatch=function(e,t,n,i,o){function r(t,n){if(t.source&&t.source.postMessage){var o;if(i){o=R.randomString();this._pendingCallbacks[o]=i}t.source.postMessage({type:"evt",mid:o,etyp:e,evnt:n},t.extension.url)}}this._findRegistrations(t||{}).forEach((function(e){o&&!e.source&&(e.source=o);e.source&&R._bind(this,r)(e,n)}),this)};n._findRegistrations=function(e){var t=this;if(0===this._registeredExtensions.length){R.error("no registered extensions",this._registeredExtensions);return[]}var n=Object.getOwnPropertyNames(e),i=Object.getOwnPropertyNames(this._registeredExtensions).map((function(e){return t._registeredExtensions[e]}));return e instanceof Function?i.filter(e):i.filter((function(t){return n.every((function(n){return t.extension[n]===e[n]}))}))};n.registerExtension=function(e,t){t._proxies={};t.extension_id=e;this._registeredExtensions[e]=t};n._keycodeKey=function(e,t,n){var i=e;if(t){"string"==typeof t&&(t=[t]);t.sort();t.forEach((function(e){i+="$$"+e}),this)}return i+"__"+n};n.registerKeyListener=function(e,t,n,i){"string"==typeof n&&(n=[n]);var o=this._registeredExtensions[e],r=this._keycodeKey(t,n,e);if(!this._keycodeCallbacks[r]){this._keycodeCallbacks[r]=[];o.source.postMessage({type:"key_listen",keycode:t,modifiers:n,action:"add"},o.extension.url)}this._keycodeCallbacks[r].push(i)};n.unregisterKeyListener=function(e,t,n,i){var o=this._keycodeKey(t,n,e),r=this._keycodeCallbacks[o],a=this._registeredExtensions[e];if(r){if(i){var s=r.indexOf(i);this._keycodeCallbacks[o].splice(s,1)}else delete this._keycodeCallbacks[o];a.source&&a.source.postMessage&&a.source.postMessage({type:"key_listen",keycode:t,modifiers:n,action:"remove"},a.extension.url)}};n.registerClickHandler=function(e){if("function"!=typeof e)throw new Error("callback must be a function");if(null!==this._clickHandler)throw new Error("ClickHandler already registered");this._clickHandler=e};n._handleAddonClick=function(e,t){"function"==typeof this._clickHandler&&this._clickHandler({addon_key:t.extension.addon_key,key:t.extension.key,extension_id:t.extension_id})};n.unregisterClickHandler=function(){this._clickHandler=null};n.getApiSpec=function(e){var t=this;function n(e){return Object.getOwnPropertyNames(e).reduce((function(t,i){var o=e[i];switch(typeof o){case"function":t[i]={args:R.argumentNames(o),returnsPromise:o.returnsPromise||!1};break;case"object":o.hasOwnProperty("constructor")&&(t[i]=n(o))}return t}),{})}return Object.getOwnPropertyNames(this._registeredAPIModules).reduce((function(i,o){var r=t._registeredAPIModules[o];void 0!==r.addonKey&&r.addonKey!==e||(i[o]=n(r));return i}),{})};n._originEqual=function(e,t){function n(e){return"string"==typeof e&&e.length>0}var i=R.getOrigin(e);return!!(n(e)&&n(t)&&n(i))&&t===i};n._checkOrigin=function(e,t){var n=t&&!t.source&&["init"].indexOf(e.data.type)>-1,i=t&&e.source===t.source,o=t&&this._originEqual(t.extension.url,e.origin)&&(n||i);"get_host_offset"===e.data.type&&window===window.top&&(o=!0);"unload"!==e.data.type||!i&&void 0!==e.source||(o=!0);return o};n.getRegisteredExtensions=function(e){return e?this._findRegistrations(e):this._registeredExtensions};n.unregisterExtension=function(e){var t=this._findRegistrations(e);0!==t.length&&t.forEach((function(e){var t=this;Object.keys(this._pendingEvents).forEach((function(n){var i=t._pendingEvents[n].targetSpec||{};i.addon_key===e.extension.addon_key&&i.key===e.extension.key&&delete t._pendingEvents[n]}));delete this._registeredExtensions[e.extension_id]}),this)};n.setFeatureFlagGetter=function(e){this._getBooleanFeatureFlag=e};return i}(function(){function e(e){var t=e||{};this._registerListener(t.listenOn)}var t=e.prototype;t._registerListener=function(e){e&&e.addEventListener||(e=window);e.addEventListener("message",R._bind(this,this._receiveMessage),!1)};t._receiveMessage=function(e){var t,n=this._messageHandlers[e.data.type],i=e.data.eid;i&&this._registeredExtensions&&(t=this._registeredExtensions[i]);if(!n||!this._checkOrigin(e,t))return!1;n.call(this,e,t)};return e}()),z=function(){function e(){this._xdm=new J}var t=e.prototype;t.dispatch=function(e,t,n,i){this._xdm.queueEvent(e,t,n,i);return this.getExtensions(t)};t.broadcast=function(e,t,n){this._xdm.dispatch(e,t,n,null,null);return this.getExtensions(t)};t._createId=function(e){if(!e.addon_key||!e.key)throw Error("Extensions require addon_key and key");return e.addon_key+"__"+e.key+"__"+R.randomString()};t.create=function(e,t,n){var i=this.registerExtension(e,t,n),o=e.options||{},r={extension_id:i,api:this._xdm.getApiSpec(e.addon_key),origin:R.locationOrigin(),options:o};return{id:i,name:JSON.stringify(r),src:e.url}};t.registerRequestNotifier=function(e){this._xdm.registerRequestNotifier(e)};t.registerExtension=function(e,t,n){var i=this._createId(e);this._xdm.registerExtension(i,{extension:e,initCallback:t,unloadCallback:n});return i};t.registerKeyListener=function(e,t,n,i){this._xdm.registerKeyListener(e,t,n,i)};t.unregisterKeyListener=function(e,t,n,i){this._xdm.unregisterKeyListener(e,t,n,i)};t.registerClickHandler=function(e){this._xdm.registerClickHandler(e)};t.unregisterClickHandler=function(){this._xdm.unregisterClickHandler()};t.defineModule=function(e,t,n){this._xdm.defineAPIModule(t,e,n)};t.isModuleDefined=function(e){return this._xdm.isAPIModuleDefined(e)};t.defineGlobals=function(e){this._xdm.defineAPIModule(e)};t.getExtensions=function(e){return this._xdm.getRegisteredExtensions(e)};t.unregisterExtension=function(e){return this._xdm.unregisterExtension(e)};t.returnsPromise=function(e){e.returnsPromise=!0};t.setFeatureFlagGetter=function(e){this._xdm.setFeatureFlagGetter(e)};t.registerExistingExtension=function(e,t){return this._xdm.registerExtension(e,t)};return e}(),H=new z,K=function(e,t,n){H.dispatch(e,t,n);h.dispatch("event-dispatch",{type:e,targetSpec:t,event:n})},U=function(e,t,n){h.dispatch("event-public-dispatch",{type:e,event:t,sender:n});var i=n.options||{};i.contextJwt;i.url;var o=P(i,["contextJwt","url"]);H.dispatch(e,{},{sender:{addonKey:n.addon_key,key:n.key,options:R.sanitizeStructuredClone(o)},event:t})};function q(e){if(!e)throw new Error("No selector to escape");return e.replace(/[!"#$%&'()*+,.\/:;<=>?@[\\\]^`{|}~]/g,"\\$&")}var V={escapeSelector:q,stringToDimension:function(e){var t=!1,n="px";if("string"==typeof e){t=e.indexOf("%")===e.length-1;e=parseInt(e,10);t&&(n="%")}if(!isNaN(e))return e+n},getIframeByExtensionId:function(e){return m("iframe#"+q(e))},first:function(e,t){return t?e.slice(0,t):e[0]},last:function(e){return e[e.length-1]},pick:function(e,t){return"object"!=typeof e?{}:Object.keys(e).filter((function(e){return t.indexOf(e)>=0})).reduce((function(t,n){var i;return Object.assign(t,((i={})[n]=e[n],i))}),{})},debounce:function(e,t){var n;return function(){var i=this,o=[].slice.call(arguments);function r(){n=null;e.apply(i,o)}n&&clearTimeout(n);n=setTimeout(r,t||50)}},isSupported:function(e,t,n,i){return e&&e[t]&&e[t].supports?e[t].supports(n):i},extend:Object.assign},W={emit:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var o=V.last(n);n=V.first(n,-1);K(e,{addon_key:o._context.extension.addon_key},n)},emitPublic:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var o=V.last(n),r=o._context.extension;n=V.first(n,-1);U(e,n,r)},emitToDataProvider:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=V.last(t);i._context.extension;t=V.first(t,-1);K("dataProviderEvent",{addon_key:i._context.extension.addon_key},t)}},G=function(e,t){h.dispatch("dialog-extension-open",{extension:e,options:t})},X=function(){h.dispatch("dialog-close-active",{})},Y=function(e,t){h.dispatch("dialog-button-add",{button:{text:e.text,identifier:e.identifier,data:{userButton:!0}},extension:t})},Q={close:function(e){h.dispatch("dialog-close",{dialog:e.dialog,extension:e.extension,customData:e.customData})},closeActive:function(e){h.dispatch("dialog-close-active",e)},clickButton:function(e,t,n){h.dispatch("dialog-button-click",{identifier:e,$el:t,extension:n})},toggleButton:function(e){h.dispatch("dialog-button-toggle",e)},toggleButtonVisibility:function(e){h.dispatch("dialog-button-toggle-visibility",e)}},Z=function(e){H.registerKeyListener(e.extension_id,e.key,e.modifiers,e.callback);h.dispatch("dom-event-register",e)},ee=function(e){H.unregisterKeyListener(e.extension_id,e.key,e.modifiers,e.callback);h.dispatch("dom-event-unregister",e)},te=function(e){window.addEventListener("keydown",(function(t){t.keyCode===e.keyCode&&e.callback()}))},ne=function(e){H.registerClickHandler((function(t){var n=document.getElementById(t.extension_id);n&&e(n)}))},ie=function(){H.unregisterClickHandler()},oe=new(function(){function e(){}e.prototype.randomIdentifier=function(){return Math.random().toString(16).substring(7)};return e}()),re=new(function(){function e(){}var t=e.prototype;t._maxDimension=function(e,t){var n=V.stringToDimension(e),i=parseInt(n,10),o=parseInt(t,10);return n.indexOf("%")>-1&&i>=100||i>o?"100%":n};t._closeOnEscape=function(e){return!1!==e.closeOnEscape};t._size=function(e){var t=e.size;"x-large"===e.size&&(t="xlarge");"maximum"!==e.size&&"100%"===e.width&&"100%"===e.height&&(t="fullscreen");return t};t._header=function(e){var t="";switch(typeof e){case"string":t=e;break;case"object":t=e.value}return t};t._hint=function(e){return"string"==typeof e?e:""};t._chrome=function(e){var t=!1;"boolean"==typeof e.chrome&&(t=e.chrome);"fullscreen"===e.size&&(t=!0);"maximum"===e.size&&(t=!1);return t};t._width=function(e){if(!e.size)return e.width?this._maxDimension(e.width,m(window).width()):"50%"};t._height=function(e){if(!e.size)return e.height?this._maxDimension(e.height,m(window).height()):"50%"};t._actions=function(e){var t=[];(e=e||{}).actions||(t=[{name:"submit",identifier:"submit",text:e.submitText||"Submit",type:"primary",disabled:!0},{name:"cancel",identifier:"cancel",text:e.cancelText||"Cancel",type:"link",immutable:!0}]);e.buttons&&(t=t.concat(this._buttons(e)));return t};t._id=function(e){"string"!=typeof e&&(e=Math.random().toString(36).substring(2,8));return e};t._buttons=function(e){var t=[];e.buttons&&Array.isArray(e.buttons)&&e.buttons.forEach((function(e){var n,i,o=!1;e.text&&"string"==typeof e.text&&(n=e.text);i=e.identifier&&"string"==typeof e.identifier?e.identifier:oe.randomIdentifier();e.disabled&&!0===e.disabled&&(o=!0);t.push({text:n,identifier:i,type:"secondary",custom:!0,disabled:o})}));return t};t._onHide=function(e){return"function"==typeof e.onHide?e.onHide:function(){}};t.sanitizeOptions=function(e){e=e||{};var t={chrome:this._chrome(e),header:this._header(e.header),hint:this._hint(e.hint),width:this._width(e),height:this._height(e),$content:e.$content,extension:e.extension,actions:this._actions(e),id:this._id(e.id),size:e.size,closeOnEscape:this._closeOnEscape(e),onHide:this._onHide(e)};t.size=this._size(t);return t};t.moduleOptionsFromGlobal=function(e,t){return!!(window._AP&&window._AP.dialogModules&&window._AP.dialogModules[e]&&window._AP.dialogModules[e][t])&&V.extend({},{chrome:!0},window._AP.dialogModules[e][t].options)};t.trackMultipleDialogOpening=function(e,t){var n,i=this._size(t);if(m(".ap-aui-dialog2:visible").length){n=m("#macro-browser-dialog").length||AJS.Confluence&&AJS.Confluence.Editor&&AJS.Confluence.Editor.currentEditMode?"fullscreen"===i?"connect-macro-multiple-fullscreen":"connect-macro-multiple":"connect-multiple";w.trackMultipleDialogOpening(n,e)}};t.assertActiveDialogOrThrow=function(e,t){if(!e.isActiveDialog(t))throw new Error("Failed to find an active dialog for: "+t)};return e}()),ae={notifyIframeCreated:function(e,t){h.dispatch("iframe-create",{$el:e,extension:t})},notifyBridgeEstablished:function(e,t){h.dispatch("iframe-bridge-established",{$el:e,extension:t})},notifyIframeDestroyed:function(e){"string"==typeof e&&(e={id:e});H.getExtensions(e).forEach((function(e){h.dispatch("iframe-destroyed",{extension:e});H.unregisterExtension({id:e.extension_id})}),this)},notifyUnloaded:function(e,t){h.dispatch("iframe-unload",{$el:e,extension:t})}},se={},de=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))},ce="%[a-f0-9]{2}",le=new RegExp("("+ce+")|([^%]+?)","gi"),ue=new RegExp("("+ce+")+","gi");function fe(e,t){try{return[decodeURIComponent(e.join(""))]}catch(e){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),i=e.slice(t);return Array.prototype.concat.call([],fe(n),fe(i))}function pe(e){try{return decodeURIComponent(e)}catch(i){for(var t=e.match(le)||[],n=1;n<t.length;n++)t=(e=fe(t,n).join("")).match(le)||[];return e}}var ge=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{e=e.replace(/\+/g," ");return decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},n=ue.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(e){var i=pe(n[0]);i!==n[0]&&(t[n[0]]=i)}n=ue.exec(e)}t["%C2"]="�";for(var o=Object.keys(t),r=0;r<o.length;r++){var a=o[r];e=e.replace(new RegExp(a,"g"),t[a])}return e}(e)}},he=function(e,t){if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];var n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]},me=function(e,t){for(var n={},i=Object.keys(e),o=Array.isArray(t),r=0;r<i.length;r++){var a=i[r],s=e[a];(o?-1!==t.indexOf(a):t(a,s,e))&&(n[a]=s)}return n};!function(e){const t=de,n=ge,i=he,o=me,r=Symbol("encodeFragmentIdentifier");function a(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function s(e,n){return n.encode?n.strict?t(e):encodeURIComponent(e):e}function d(e,t){return t.decode?n(e):e}function c(e){return Array.isArray(e)?e.sort():"object"==typeof e?c(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function l(e){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t));return e}function u(e){const t=(e=l(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function f(e,t){t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase());return e}function p(e,t){a((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const n=function(e){let t;switch(e.arrayFormat){case"index":return(e,n,i)=>{t=/\[(\d*)\]$/.exec(e);e=e.replace(/\[\d*\]$/,"");if(t){void 0===i[e]&&(i[e]={});i[e][t[1]]=n}else i[e]=n};case"bracket":return(e,n,i)=>{t=/(\[\])$/.exec(e);e=e.replace(/\[\]$/,"");t?void 0!==i[e]?i[e]=[].concat(i[e],n):i[e]=[n]:i[e]=n};case"colon-list-separator":return(e,n,i)=>{t=/(:list)$/.exec(e);e=e.replace(/:list$/,"");t?void 0!==i[e]?i[e]=[].concat(i[e],n):i[e]=[n]:i[e]=n};case"comma":case"separator":return(t,n,i)=>{const o="string"==typeof n&&n.includes(e.arrayFormatSeparator),r="string"==typeof n&&!o&&d(n,e).includes(e.arrayFormatSeparator);n=r?d(n,e):n;const a=o||r?n.split(e.arrayFormatSeparator).map((t=>d(t,e))):null===n?n:d(n,e);i[t]=a};case"bracket-separator":return(t,n,i)=>{const o=/(\[\])$/.test(t);t=t.replace(/\[\]$/,"");if(!o){i[t]=n?d(n,e):n;return}const r=null===n?[]:n.split(e.arrayFormatSeparator).map((t=>d(t,e)));void 0!==i[t]?i[t]=[].concat(i[t],r):i[t]=r};default:return(e,t,n)=>{void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t),o=Object.create(null);if("string"!=typeof e)return o;if(!(e=e.trim().replace(/^[?#&]/,"")))return o;for(const r of e.split("&")){if(""===r)continue;let[e,a]=i(t.decode?r.replace(/\+/g," "):r,"=");a=void 0===a?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?a:d(a,t);n(d(e,t),a,o)}for(const e of Object.keys(o)){const n=o[e];if("object"==typeof n&&null!==n)for(const e of Object.keys(n))n[e]=f(n[e],t);else o[e]=f(n,t)}return!1===t.sort?o:(!0===t.sort?Object.keys(o).sort():Object.keys(o).sort(t.sort)).reduce(((e,t)=>{const n=o[t];Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=c(n):e[t]=n;return e}),Object.create(null))}e.extract=u;e.parse=p;e.stringify=(e,t)=>{if(!e)return"";a((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const n=n=>t.skipNull&&null==e[n]||t.skipEmptyString&&""===e[n],i=function(e){switch(e.arrayFormat){case"index":return t=>(n,i)=>{const o=n.length;return void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?n:null===i?[...n,[s(t,e),"[",o,"]"].join("")]:[...n,[s(t,e),"[",s(o,e),"]=",s(i,e)].join("")]};case"bracket":return t=>(n,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?n:null===i?[...n,[s(t,e),"[]"].join("")]:[...n,[s(t,e),"[]=",s(i,e)].join("")];case"colon-list-separator":return t=>(n,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?n:null===i?[...n,[s(t,e),":list="].join("")]:[...n,[s(t,e),":list=",s(i,e)].join("")];case"comma":case"separator":case"bracket-separator":{const t="bracket-separator"===e.arrayFormat?"[]=":"=";return n=>(i,o)=>{if(void 0===o||e.skipNull&&null===o||e.skipEmptyString&&""===o)return i;o=null===o?"":o;return 0===i.length?[[s(n,e),t,s(o,e)].join("")]:[[i,s(o,e)].join(e.arrayFormatSeparator)]}}default:return t=>(n,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?n:null===i?[...n,s(t,e)]:[...n,[s(t,e),"=",s(i,e)].join("")]}}(t),o={};for(const t of Object.keys(e))n(t)||(o[t]=e[t]);const r=Object.keys(o);!1!==t.sort&&r.sort(t.sort);return r.map((n=>{const o=e[n];return void 0===o?"":null===o?s(n,t):Array.isArray(o)?0===o.length&&"bracket-separator"===t.arrayFormat?s(n,t)+"[]":o.reduce(i(n),[]).join("&"):s(n,t)+"="+s(o,t)})).filter((e=>e.length>0)).join("&")};e.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[n,o]=i(e,"#");return Object.assign({url:n.split("?")[0]||"",query:p(u(e),t)},t&&t.parseFragmentIdentifier&&o?{fragmentIdentifier:d(o,t)}:{})};e.stringifyUrl=(t,n)=>{n=Object.assign({encode:!0,strict:!0,[r]:!0},n);const i=l(t.url).split("?")[0]||"",o=e.extract(t.url),a=e.parse(o,{sort:!1}),d=Object.assign(a,t.query);let c=e.stringify(d,n);c&&(c=`?${c}`);let u=function(e){let t="";const n=e.indexOf("#");-1!==n&&(t=e.slice(n));return t}(t.url);t.fragmentIdentifier&&(u=`#${n[r]?s(t.fragmentIdentifier,n):t.fragmentIdentifier}`);return`${i}${c}${u}`};e.pick=(t,n,i)=>{i=Object.assign({parseFragmentIdentifier:!0,[r]:!1},i);const{url:a,query:s,fragmentIdentifier:d}=e.parseUrl(t,i);return e.stringifyUrl({url:a,query:o(s,n),fragmentIdentifier:d},i)};e.exclude=(t,n,i)=>{const o=Array.isArray(n)?e=>!n.includes(e):(e,t)=>!n(e,t);return e.pick(t,o,i)}}(se);for(var ye=function(e){for(var t,n=function(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");-1===n&&(n=t);return[n,n===t?0:4-n%4]}(e),i=n[0],o=n[1],r=new xe(function(e,t,n){return 3*(t+n)/4-n}(0,i,o)),a=0,s=o>0?i-4:i,d=0;d<s;d+=4){t=_e[e.charCodeAt(d)]<<18|_e[e.charCodeAt(d+1)]<<12|_e[e.charCodeAt(d+2)]<<6|_e[e.charCodeAt(d+3)];r[a++]=t>>16&255;r[a++]=t>>8&255;r[a++]=255&t}if(2===o){t=_e[e.charCodeAt(d)]<<2|_e[e.charCodeAt(d+1)]>>4;r[a++]=255&t}if(1===o){t=_e[e.charCodeAt(d)]<<10|_e[e.charCodeAt(d+1)]<<4|_e[e.charCodeAt(d+2)]>>2;r[a++]=t>>8&255;r[a++]=255&t}return r},ve=[],_e=[],xe="undefined"!=typeof Uint8Array?Uint8Array:Array,be="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",we=0,ke=be.length;we<ke;++we){ve[we]=be[we];_e[be.charCodeAt(we)]=we}_e["-".charCodeAt(0)]=62;_e["_".charCodeAt(0)]=63;function Ee(e){var t=4-e.length%4;1===t?e+="=":2===t&&(e+="==");return(new TextDecoder).decode(ye(e))}var Ae=60;function Ce(e){if(null===e||""===e)throw"Invalid JWT: must be neither null nor empty-string.";var t=e.indexOf("."),n=e.indexOf(".",t+1);if(t<0||n<=t)throw'Invalid JWT: must contain 2 period (".") characters.';var i=e.substring(t+1,n);if(null===i||""===i)throw"Invalid JWT: encoded claims must be neither null nor empty-string.";var o=Ee.call(window,i);return JSON.parse(o)}h.register("jwt-skew-set",(function(e){Ae=e.skew}));var Ie={parseJwtIssuer:function(e){return Ce(e).iss},parseJwtClaims:Ce,isJwtExpired:function(e,t){void 0===t&&(t=Ae);var n=Ce(e),i=0,o=Math.floor(Date.now()/1e3);n&&n.exp&&(i=n.exp);return i-t<o}};function Oe(e){return se.parse(se.extract(e)).jwt}var Se={hasJwt:function(e){return Oe(e)&&0!==Oe(e).length},isJwtExpired:function(e){var t=Oe(e);return Ie.isJwtExpired(t)}},Pe=function(e){h.dispatch("content-resolver-register-by-extension",e)},Te=function(e){if(!e.resolver)throw Error("ACJS: No content resolver supplied");var t=e.resolver.call(null,V.extend({classifier:"json"},e.extension));t.fail((function(t,n){h.dispatch("jwt-url-refreshed-failed",{extension:e.extension,$container:e.$container,errorText:n.text})}));t.done((function(t){var n={};if("object"==typeof t)n=t;else if("string"==typeof t)try{n=JSON.parse(t)}catch(e){console.error("ACJS: invalid response from content resolver")}e.extension.url=n.url;V.extend(e.extension.options,n.options);h.dispatch("jwt-url-refreshed",{extension:e.extension,$container:e.$container,url:e.extension.url})}));h.dispatch("jwt-url-refresh-request",{data:e})},Me=function(e){"number"==typeof e?h.dispatch("jwt-skew-set",{skew:e}):console.error("ACJS: invalid JWT clock skew set")},De=function(e){var t={};if(e&&"object"==typeof e){e.width&&(t.width=V.stringToDimension(e.width));e.height&&(t.height=V.stringToDimension(e.height));if("string"==typeof e.sandbox){var n=document.createElement("iframe");t.sandbox=e.sandbox.split(" ").filter((function(e){return V.isSupported(n,"sandbox",e,!0)})).join(" ")}}return t},Le=new(function(){function e(){this.store={}}var t=e.prototype;t.set=function(e,t){if(t){var n={};n[e]=t}else n=e;V.extend(this.store,n)};t.get=function(e){return e?this.store[e]:V.extend({},this.store)};return e}()),je=!1,Fe="com.codebarrel.addons.automation";var Be=!1;function Ne(e){return{addon_key:e.addon_key,key:e.key,url:e.url,options:e.options}}var $e={createSimpleXdmExtension:function(e){var t=Ne(e),n=Le.get();e.options=t.options=V.extend({},t.options);e.options.globalOptions=n;!function(e){e===Fe&&function(){if(!je){je=!0;var e={getPerformanceTiming:function(e){return new Promise((function(n,i){t(e)||i(new Error("This is a restricted API"));n(JSON.parse(JSON.stringify(window.performance.timing)))}))},getPerformanceNavigationTiming:function(e){return new Promise((function(n,i){t(e)||i(new Error("This is a restricted API"));window.PerformanceNavigationTiming||n(void 0);var o=window.performance.getEntriesByType("navigation");n(JSON.parse(JSON.stringify(o)))}))}};H.returnsPromise(e.getPerformanceTiming);H.returnsPromise(e.getPerformanceNavigationTiming);H.defineModule("_performance",e)}function t(e){return e._context.extension.addon_key===Fe}}();!function(){if(!Be){Be=!0;var e={getBooleanFeatureFlag:function(e){return new Promise((function(t,n){0===e.indexOf("com.atlassian.connect.acjs.iframe.")?t(_(e)):n(new Error("Only allowlisted flags can be accessed from the iframe."))}))}};H.returnsPromise(e.getBooleanFeatureFlag);H.defineModule("_featureFlag",e)}}()}(e.addon_key);var i=H.create(t,(function(){e.options.noDOM||(e.$el=m(document.getElementById(e.id)));ae.notifyBridgeEstablished(e.$el,e)}),(function(){ae.notifyUnloaded(e.$el,e)}));t.id=i.id;e.id=i.id;V.extend(i,De(e.options));return{iframeAttributes:i,extension:e}},extensionConfigSanitizer:Ne},Re=new(function(){function e(){this._contentResolver=!1}var t=e.prototype;t.setContentResolver=function(e){this._contentResolver=e};t.resize=function(e,t,n){e=V.stringToDimension(e);t=V.stringToDimension(t);n.css({width:e,height:t});n.trigger("resized",{width:e,height:t})};t.simpleXdmExtension=function(e,t){!e.url||Se.hasJwt(e.url)&&Se.isJwtExpired(e.url)?this._contentResolver?Te({extension:e,resolver:this._contentResolver,$container:t}):console.error("JWT is expired and no content resolver was specified"):this._appendExtension(t,this._simpleXdmCreate(e))};t._simpleXdmCreate=function(e){var t=$e.createSimpleXdmExtension(e);e.id=t.iframeAttributes.id;e.$el=this.render(t.iframeAttributes);return e};t._appendExtension=function(e,t){var n=e.find("iframe");n.length>0&&n.destroy();t.options.hideIframeUntilLoad&&t.$el.css({visibility:"hidden"}).load((function(){t.$el.css({visibility:""})}));e.prepend(t.$el);ae.notifyIframeCreated(t.$el,t)};t._appendExtensionError=function(e,t){var n=m('<div class="connect-resolve-error"></div>'),i=m("<p />").text(t);n.append('<p class="error">Error: The content resolver threw the following error:</p>');n.append(i);e.prepend(n)};t.resolverResponse=function(e){var t=this._simpleXdmCreate(e.extension);this._appendExtension(e.$container,t)};t.resolverFailResponse=function(e){this._appendExtensionError(e.$container,e.errorText)};t.render=function(e){(e=e||{}).referrerpolicy="no-referrer";return m("<iframe />").attr(e).addClass("ap-iframe")};return e}());h.register("iframe-resize",(function(e){Re.resize(e.width,e.height,e.$el)}));h.register("content-resolver-register-by-extension",(function(e){Re.setContentResolver(e.callback)}));h.register("jwt-url-refreshed",(function(e){Re.resolverResponse(e)}));h.register("jwt-url-refreshed-failed",(function(e){Re.resolverFailResponse(e)}));h.register("after:iframe-bridge-established",(function(e){e.extension.options.noDom?e.extension.options.bridgeEstablished=!0:e.$el[0].bridgeEstablished=!0}));var Je=function(e){h.dispatch("button-clicked",{$el:e})},ze=function(e,t){h.dispatch("button-toggle",{$el:e,disabled:t})},He=function(e,t){h.dispatch("button-toggle-visibility",{$el:e,hidden:t})},Ke=["primary","link","secondary"],Ue=0,qe=function(){function e(){this.AP_BUTTON_CLASS="ap-aui-button"}var t=e.prototype;t.setType=function(e,t){t&&Ke.indexOf(t)>=0&&e.addClass("aui-button-"+t);return e};t.setDisabled=function(e,t){void 0===t||e.data("immutable")||e.attr("aria-disabled",t);return e};t.setHidden=function(e,t){void 0===t||e.data("immutable")||e.toggle(!t);return e};t._setId=function(e,t){if(!t){t="ap-button-"+Ue;Ue++}e.attr("id",t);return e};t._additionalClasses=function(e,t){if(t){"string"!=typeof t&&(t=t.join(" "));e.addClass(t)}return e};t.getName=function(e){return m(e).data("name")};t.getText=function(e){return m(e).text()};t.getIdentifier=function(e){return m(e).data("identifier")};t.isVisible=function(e){return m(e).is(":visible")};t.isEnabled=function(e){return!("true"===m(e).attr("aria-disabled"))};t.render=function(e){var t=m("<button />");e=e||{};t.addClass("aui-button "+this.AP_BUTTON_CLASS);t.text(e.text);t.data(e.data);t.data({name:e.name||e.identifier,identifier:e.identifier||oe.randomIdentifier(),immutable:e.immutable||!1});this._additionalClasses(t,e.additionalClasses);this.setType(t,e.type);this.setDisabled(t,e.disabled||!1);this._setId(t,e.id);return t};return e}(),Ve=new qe;m((function(){m("body").on("click","."+Ve.AP_BUTTON_CLASS,(function(e){var t=m(e.target).closest("."+Ve.AP_BUTTON_CLASS);"true"!==t.attr("aria-disabled")&&Je(t)}))}));h.register("button-toggle",(function(e){Ve.setDisabled(e.$el,e.disabled)}));h.register("button-toggle-visibility",(function(e){Ve.setHidden(e.$el,e.hidden)}));var We=["ap-iframe-container"],Ge=new(function(){function e(){}var t=e.prototype;t.createExtension=function(e,t){var n=this._renderContainer();t&&!1===t.loadingIndicator||n.append(this._renderLoadingIndicator());Re.simpleXdmExtension(e,n);return n};t._renderContainer=function(e){var t=m("<div />").attr(e||{});t.addClass(We.join(" "));return t};t._renderLoadingIndicator=function(){return S.render()};return e}());h.register("iframe-create",(function(e){var t="embedded-"+e.extension.id;e.extension.$el.parents(".ap-iframe-container").attr("id",t)}));function Xe(e){return Ge.createExtension(e)}var Ye=function(e,t){var n={};if(t){n.methods=t;n.name=e}else n.methods=e;h.dispatch("module-define-custom",n)},Qe=function(e,t){h.dispatch("analytics-deprecated-method-used",{methodUsed:e,extension:t})},Ze=function(e){h.dispatch("iframe-bridge-start",{extension:e})},et=function(e,t){h.dispatch("analytics-external-event-track",{eventName:e,values:t})},tt=function(e,t){h.dispatch("analytics-content-resolver-track",{success:e,extra:t})},nt=function(e,t){e&&Object.getOwnPropertyNames(e).length>0&&h.dispatch("analytics-iframe-performance",{metrics:e,extension:t})};function it(e){var t=e.attr("class"),n=t?t.match(/ap-plugin-key-([^\s]*)/):null;return!!Array.isArray(n)&&n[1]}function ot(e){var t=e.attr("class"),n=t?t.match(/ap-module-key-([^\s]*)/):null;return!!Array.isArray(n)&&n[1]}function rt(e){return it(e)+"__"+ot(e)}function at(e,t,n){var i=e+"Modules";if(window._AP&&window._AP[i]&&window._AP[i][t]&&window._AP[i][t][n])return V.extend({},window._AP[i][t][n].options)}function st(e,t){var n=it(t),i=function(e){var t=e.attr("class"),n=t?t.match(/ap-target-key-([^\s]*)/):null;return!!Array.isArray(n)&&n[1]}(t);return at(e,n,i)}function dt(e){var t,n=e.attr("href"),i={};n||(n=e.find("a").attr("href"));if(n){var o=n.indexOf("#");if(o>=0){var r=n.substring(o+1);try{t=JSON.parse(decodeURI(r))}catch(e){console.error("ACJS: cannot decode webitem anchor")}t&&window._AP&&window._AP._convertConnectOptions?i=window._AP._convertConnectOptions(t):console.error("ACJS: cannot convert webitem url to connect iframe options")}else{var a=rt(e),s=e.hasClass("ap-inline-dialog")?"inlineDialog":"dialog",d=st(s,e);!d&&window._AP&&window._AP[s+"Options"]&&(d=V.extend({},window._AP[s+"Options"][a])||{});if(!d){d={};console.warn("no webitem "+s+"Options for "+a)}d.productContext=d.productContext||{};var c=se.parse(se.extract(n));V.extend(d.productContext,c);i={addon_key:it(e),key:ot(e),options:d}}}return i}var ct={sanitizeTriggers:function(e){var t;Array.isArray(e)?t=e.join(" "):"string"==typeof e&&(t=e.trim());return t},uniqueId:function(){return"webitem-"+Math.floor(1e9*Math.random()).toString(16)},getExtensionKey:it,getKey:ot,getOptionsForWebItem:function(e){var t=rt(e),n=e.hasClass("ap-inline-dialog")?"inlineDialog":"dialog",i=st(n,e);!i&&window._AP&&window._AP[n+"Options"]&&(i=V.extend({},window._AP[n+"Options"][t])||{});if(!i){i={};console.warn("no webitem "+n+"Options for "+t)}i.productContext=i.productContext||{};i.structuredContext=i.structuredContext||{};var o=dt(e);if(o&&o.options){V.extend(i.productContext,o.options.productContext);V.extend(i.structuredContext,o.options.structuredContext);i.contextJwt=o.options.contextJwt}return i},getModuleOptionsByAddonAndModuleKey:at,getConfigFromTarget:dt},lt=new function(){var e=this;this._providers={};this.registerProvider=function(t,n){e._providers[t]=n};this.getProvider=function(t){return e._providers[t]}},ut=new(function(){function e(){this.moduleNamesToModules=new Map}e.prototype.registerModule=function(e,t){var n=e.getModuleRegistrationName();this.moduleNamesToModules.set(n,e)};e.prototype.getModuleByName=function(e){return this.moduleNamesToModules.get(e)};e.prototype.getProviderByModuleName=function(e){var t=this.moduleNamesToModules.get(e);return t&&t.isEnabled()?t.getProvider():void 0};return e}()),ft=function(){function e(){var e=this;this.create=function(e){return Xe($e.extensionConfigSanitizer(e))};this.dialog={create:function(e,t){var n=ct.getModuleOptionsByAddonAndModuleKey("dialog",e.addon_key,e.key),i=V.extend({},n||{},t);G(e,i)},close:function(t,n){var i=e.getFrameworkAdaptor().getProviderByModuleName("dialog");if(i){re.assertActiveDialogOrThrow(i,t);K("dialog.close",{addon_key:t},n);i.close()}else X()}};this.registerContentResolver={resolveByExtension:function(t){e._contentResolver=t;Pe({callback:t})}};this.getContentResolver=function(){return e._contentResolver};this.registerProvider=function(e,t){lt.registerProvider(e,t)};this.getProvider=function(e){return lt.getProvider(e)};this.frameworkAdaptor=ut}var t=e.prototype;t.createExtension=function(e){e.options=e.options||{};e.options.noDom=!0;var t=$e.createSimpleXdmExtension(e);Ze(t.extension);return t};t.registerExistingExtension=function(e,t){return H.registerExistingExtension(e,t)};t.setFrameworkAdaptor=function(e){this.frameworkAdaptor=e};t.getFrameworkAdaptor=function(){return this.frameworkAdaptor};t._cleanExtension=function(e){return V.pick(e,["id","addon_key","key","options","url"])};t.onIframeEstablished=function(e){e._wrapper=function(t){e.call({},{$el:t.$el,extension:this._cleanExtension(t.extension)})}.bind(this);h.register("after:iframe-bridge-established",e._wrapper)};t.offIframeEstablished=function(e){if(!e._wrapper)throw new Error("cannot unregister event dispatch listener without _wrapper reference");h.unregister("after:iframe-bridge-established",e._wrapper)};t.onIframeUnload=function(e){var t=this;h.register("after:iframe-unload",(function(n){e.call({},{$el:n.$el,extension:t._cleanExtension(n.extension)})}))};t.onPublicEventDispatched=function(e){e._wrapper=function(t){e.call({},{type:t.type,event:t.event,extension:this._cleanExtension(t.sender)})}.bind(this);h.register("after:event-public-dispatch",e._wrapper)};t.offPublicEventDispatched=function(e){if(!e._wrapper)throw new Error("cannot unregister event dispatch listener without _wrapper reference");h.unregister("after:event-public-dispatch",e._wrapper)};t.onKeyEvent=function(e,t,n,i){Z({extension_id:e,key:t,modifiers:n,callback:i})};t.offKeyEvent=function(e,t,n,i){ee({extension_id:e,key:t,modifiers:n,callback:i})};t.onFrameClick=function(e){if("function"!=typeof e)throw new Error("handleIframeClick must be a function");ne(e)};t.offFrameClick=function(){ie()};t.destroy=function(e){ae.notifyIframeDestroyed({id:e})};t.defineModule=function(e,t){Ye(e,t)};t.isModuleDefined=function(e){return H.isModuleDefined(e)};t.broadcastEvent=function(e,t,n){K(e,t,n)};t.getExtensions=function(e){return H.getExtensions(e)};t.trackDeprecatedMethodUsed=function(e,t){Qe(e,t)};t.trackAnalyticsEvent=function(e,t){et(e,t)};t.trackContentResolverEvent=function(e,t){tt(e,t)};t.setJwtClockSkew=function(e){Me(e)};t.isJwtExpired=function(e,t){return t?Ie.isJwtExpired(e):Se.isJwtExpired(e)};t.hasJwt=function(e){return Se.hasJwt(e)};t.getBooleanFeatureFlag=function(e){return _(e)};t.setExtensionConfigurationOptions=function(e,t){Le.set(e,t)};t.getExtensionConfigurationOption=function(e){return Le.get(e)};t.onIframeTimeout=function(e){e._wrapper=function(t){e.call({},{extension:this._cleanExtension(t.extension)})}.bind(this);h.register("after:iframe-bridge-timeout",e._wrapper)};t.offIframeTimeout=function(e){if(!e._wrapper)throw new Error("cannot unregister event dispatch listener without _wrapper reference");h.unregister("after:iframe-bridge-timeout",e._wrapper)};t.onIframePerformanceTelemetry=function(e){e._wrapper=function(t){e.call({},{metrics:t.metrics,extension:this._cleanExtension(t.extension)})}.bind(this);h.register("after:analytics-iframe-performance",e._wrapper)};t.offIframePerformanceTelemetry=function(e){if(!e._wrapper)throw new Error("cannot unregister event dispatch listener without _wrapper reference");h.unregister("after:analytics-iframe-performance",e._wrapper)};t.onIframeVisible=function(e){e._wrapper=function(t){e.call({},{extension:this._cleanExtension(t)})}.bind(this);h.register("after:iframe-visible",e._wrapper)};t.offIframeVisible=function(e){if(!e._wrapper)throw new Error("cannot unregister event dispatch listener without _wrapper reference");h.unregister("after:iframe-visible",e._wrapper)};t.onContentResolverEvent=function(e){e._wrapper=function(t){e.call({},t)}.bind(this);h.register("after:analytics-content-resolver-track",e._wrapper)};t.offContentResolverEvent=function(e){if(!e._wrapper)throw new Error("cannot unregister event dispatch listener without _wrapper reference");h.unregister("after:analytics-content-resolver-track",e._wrapper)};return e}(),pt=new ft,gt="ap-dialog-",ht="ap-aui-dialog2",mt=new RegExp("^ap-dialog-[0-9A-Za-z]+$"),yt=["small","medium","large","xlarge","fullscreen","maximum"],vt="ap-aui-dialog-button",_t="aui-dialog2-footer-actions";function xt(){var e=AJS.LayerManager.global.getTopLayer();if(e&&mt.test(e.attr("id"))){var t=AJS.dialog2(e);t._id=t.$el.attr("id").replace(gt,"");return t}}function bt(e){var t=e.find(".header-control-panel");t.length||(t=e.find(".aui-dialog2-footer-actions"));return t}function wt(e,t){return bt(t).find(".aui-button").filter((function(){return Ve.getIdentifier(this)===e}))}var kt=function(){function e(){}var t=e.prototype;t._renderHeaderCloseBtn=function(){var e=m("<a />").addClass("aui-dialog2-header-close"),t=m("<span />").addClass("aui-icon aui-icon-small aui-iconfont-close-dialog").text("Close");e.append(t);return e};t._renderFullScreenHeader=function(e,t){var n=m("<div />").addClass("header-title-container aui-item expanded"),i=m("<div />").append(m("<span />").addClass("header-title").text(t.header||""));n.append(i);e.append(n).append(this._renderHeaderActions(t.actions,t.extension));return e};t._renderHeader=function(e){var t=m("<header />").addClass("aui-dialog2-header");if("fullscreen"===e.size)return this._renderFullScreenHeader(t,e);if(e.header){var n=m("<h2 />").addClass("aui-dialog2-header-main").text(e.header);t.append(n)}t.append(this._renderHeaderCloseBtn());return t};t._renderHeaderActions=function(e,t){var n=m("<div />").addClass("aui-item header-control-panel");e[0].additionalClasses=["aui-icon","aui-icon-small","aui-iconfont-success"];e[1].additionalClasses=["aui-icon","aui-icon-small","aui-iconfont-close-dialog"];this._renderActionButtons(e,t).forEach((function(e){n.append(e)}));return n};t._renderContent=function(e){var t=m("<div />").addClass("aui-dialog2-content");e&&t.append(e);return t};t._renderFooter=function(e){var t=m("<footer />").addClass("aui-dialog2-footer");if("fullscreen"!==e.size){var n=this._renderFooterActions(e.actions,e.extension);t.append(n)}if(e.hint){var i=m("<div />").addClass("aui-dialog2-footer-hint").text(e.hint);t.append(i)}return t};t._renderActionButtons=function(e,t){var n=this,i=[];[].concat(e).forEach((function(e){i.push(n._renderDialogButton({text:e.text,name:e.name,type:e.type,additionalClasses:e.additionalClasses,custom:e.custom||!1,identifier:e.identifier,immutable:e.immutable,disabled:e.disabled||!1},t))}));return i};t._renderFooterActions=function(e,t){var n=m("<div />").addClass(_t);this._renderActionButtons(e,t).forEach((function(e){n.append(e)}));return n};t._renderDialogButton=function(e,t){e.additionalClasses=e.additionalClasses||[];e.additionalClasses.push(vt);e.custom&&e.additionalClasses.push("ap-dialog-custom-button");var n=Ve.render(e);n.extension=t;return n};t.render=function(e){var t=V.extend({},e),n=re.sanitizeOptions(e),i=m("<section />").attr({role:"dialog",id:gt+n.id});i.attr("data-aui-modal","true");i.data({"aui-remove-on-hide":!0,extension:n.extension});i.addClass("aui-layer aui-dialog2 "+ht);yt.indexOf(n.size)>=0&&i.addClass("aui-dialog2-"+n.size);if("fullscreen"===n.size||"maximum"===n.size){n.chrome&&i.addClass("ap-header-controls");i.addClass("aui-dialog2-maximum")}i.append(this._renderContent(n.$content));if(n.chrome){i.prepend(this._renderHeader({header:n.header,actions:n.actions,size:n.size}));i.append(this._renderFooter({extension:n.extension,actions:n.actions,hint:n.hint,size:n.size}))}else i.addClass("aui-dialog2-chromeless");var o=AJS.dialog2(i);o._id=n.id;"fullscreen"===n.size&&(n.height=n.width="100%");n.size&&"fullscreen"!==n.size||AJS.layer(i).changeSize(n.width,n.height);n.onHide&&o.on("hide",n.onHide);o.show();o.$el.data("extension",n.extension);o.$el.data("originalOptions",t);return i};t.setIframeDimensions=function(e){Re.resize("100%","100%",e)};t.getActive=function(){return xt()};t.buttonIsEnabled=function(e){var t=xt();if(t){var n=wt(e,t.$el);return Ve.isEnabled(n)}};t.buttonIsVisible=function(e){var t=xt();if(t){var n=wt(e,t.$el);return Ve.isVisible(n)}};t.getByExtension=function(e){var t;if("function"==typeof e)t=e;else{var n=Object.getOwnPropertyNames(e);t=function(t){var i=m(t).data("extension");return n.every((function(t){return i[t]===e[t]}))}}return m("."+ht).toArray().filter(t).map((function(e){return AJS.dialog2(e)}))};t.addButton=function(e,t){t.custom=!0;var n=this._renderDialogButton(t,e),i=this.getByExtension({addon_key:e.addon_key,key:e.key})[0].$el;bt(i).append(n);return i};return e}(),Et=new kt;h.register("iframe-bridge-established",(function(e){if(e.extension.options.isDialog){var t,n=pt.getFrameworkAdaptor().getProviderByModuleName("dialog");if(n){t=n.close;n.setButtonDisabled("submit",!1)}else{Q.toggleButton({identifier:"submit",enabled:!0});t=function(){Q.close({dialog:xt(),extension:e.extension})}}if(!e.extension.options.preventDialogCloseOnEscape){Z({extension_id:e.extension.id,key:27,callback:t});h.registerOnce("dialog-close",(function(t){ee({extension_id:e.extension.id,key:27})}))}}}));h.register("dialog-close-active",(function(e){var t=xt();t&&Q.close({customData:e.customData,dialog:t,extension:e.extension})}));h.register("dialog-close",(function(e){e.dialog&&e.dialog.hide()}));h.register("dialog-button-toggle",(function(e){var t=xt();if(t){var n=wt(e.identifier,t.$el);ze(n,!e.enabled)}}));h.register("dialog-button-toggle-visibility",(function(e){var t=xt();if(t){var n=wt(e.identifier,t.$el);He(n,e.hidden)}}));h.register("button-clicked",(function(e){var t=e.$el;if(t.hasClass(vt)){var n=t.parents("."+ht),i=n.find("iframe");i.length&&i[0].bridgeEstablished?Q.clickButton(Ve.getIdentifier(t),t,n.data("extension")):Q.close({dialog:xt(),extension:t.extension})}}));if(m.fn){h.register("iframe-create",(function(e){e.extension.options&&e.extension.options.isDialog&&Et.setIframeDimensions(e.extension.$el)}));h.register("dialog-button-add",(function(e){Et.addButton(e.extension,e.button)}));h.register("host-window-resize",V.debounce((function(){m("."+ht).each((function(e,t){var n=m(t),i=re.sanitizeOptions(n.data("originalOptions"));t.style.width=i.width;t.style.height=i.height}))}),100))}te({keyCode:27,callback:function(){Q.closeActive({customData:{},extension:null})}});var At=new(function(){function e(){}var t=e.prototype;t.render=function(e,t){e.options=e.options||{};t=t||{};e.options.isDialog=!0;e.options.dialogId=t.id;e.options.callbackExtensionId=e.callback_extension_id;e.options.preventDialogCloseOnEscape=!1===t.closeOnEscape;e.options.hostFrameOffset=t.hostFrameOffset;e.options.hideIframeUntilLoad=!0;var n=Ge.createExtension(e);return Et.render({extension:e,$content:n,chrome:t.chrome,width:t.width,height:t.height,size:t.size,header:t.header,hint:t.hint,submitText:t.submitText,cancelText:t.cancelText,buttons:t.buttons,onHide:t.onHide})};t.getActiveDialog=function(){return Et.getActive()};t.buttonIsEnabled=function(e){return Et.buttonIsEnabled(e)};t.buttonIsVisible=function(e){return Et.buttonIsVisible(e)};t.getByExtension=function(e){"string"==typeof e&&(e={id:e});return Et.getByExtension(e)};return e}());h.register("dialog-extension-open",(function(e){var t=e.extension,n=re.sanitizeOptions(e.options),i=pt.getFrameworkAdaptor().getProviderByModuleName("dialog");if(i){var o=function(e){var n=t.key,i=t.addon_key,o={button:{identifier:e.identifier,name:e.identifier,text:e.text}};["submit","cancel"].indexOf(e.identifier)>=0&&K("dialog."+e.identifier,{addon_key:i,key:n},o);K("dialog.button.click",{addon_key:i,key:n},o)};t.options.preventDialogCloseOnEscape=!1===n.closeOnEscape;n.actions.map((function(e){return e.onClick=o.bind(null,e)}));i.create(n,t)}else At.render(e.extension,e.options)}));var Ct={};h.register("dialog-close",(function(e){if(e.dialog&&e.extension){var t={addon_key:e.extension.addon_key,id:e.extension.options.callbackExtensionId};K("dialog.close",t,e.customData)}}));h.register("dialog-button-click",(function(e){var t={button:{name:Ve.getName(e.$el),identifier:Ve.getIdentifier(e.$el),text:Ve.getText(e.$el)}},n={addon_key:e.extension.addon_key,key:e.extension.key};n.id=e.extension.id;e.$el.hasClass("ap-dialog-custom-button")||K("dialog."+t.button.name,n,t);K("dialog.button.click",n,t)}));var It=function(){function e(e,t){t=V.last(arguments);var n=pt.getFrameworkAdaptor(),i=n.getProviderByModuleName("dialog");if(i){re.assertActiveDialogOrThrow(i,t._context.extension.addon_key);this.name=e;this.identifier=e}else{if(!At.getActiveDialog())throw new Error("Failed to find an active dialog.");this.name=e;this.identifier=e;this.enabled=At.buttonIsEnabled(e);this.hidden=!At.buttonIsVisible(e)}}var t=e.prototype;t.enable=function(){this.setState({enabled:!0})};t.disable=function(){this.setState({enabled:!1})};t.isEnabled=function(e){e=V.last(arguments);var t=pt.getFrameworkAdaptor(),n=t.getProviderByModuleName("dialog");e(n?!n.isButtonDisabled(this.identifier):this.enabled)};t.toggle=function(){var e=pt.getFrameworkAdaptor().getProviderByModuleName("dialog");e?e.toggleButton(this.identifier):this.setState({enabled:!this.enabled})};t.setState=function(e){var t=pt.getFrameworkAdaptor().getProviderByModuleName("dialog");if(t)t.setButtonDisabled(this.identifier,!e.enabled);else{this.enabled=e.enabled;Q.toggleButton({identifier:this.identifier,enabled:this.enabled})}};t.trigger=function(e){e=V.last(arguments);this.enabled&&Q.dialogMessage({name:this.name,extension:e._context.extension})};t.isHidden=function(e){e=V.last(arguments);var t=pt.getFrameworkAdaptor(),n=t.getProviderByModuleName("dialog");e(n?n.isButtonHidden(this.identifier):this.hidden)};t.hide=function(){this.setHidden(!0)};t.show=function(){this.setHidden(!1)};t.setHidden=function(e){var t=pt.getFrameworkAdaptor().getProviderByModuleName("dialog");if(t)t.setButtonHidden(this.identifier,e);else{this.hidden=e;Q.toggleButtonVisibility({identifier:this.identifier,hidden:this.hidden})}};return e}();function Ot(e){return Ct[e.extension.options.dialogId]}var St={create:{constructor:function(e,t){var n=(t=V.last(arguments))._id,i=t._context.extension,o={addon_key:i.addon_key,key:e.key,options:V.pick(i.options,["customData","productContext"]),callback_extension_id:i.id};o.options.customData=e.customData;var r=re.moduleOptionsFromGlobal(o.addon_key,o.key);"number"==typeof(r||{}).hostFrameOffset&&(o.options.hostFrameOffset=r.hostFrameOffset);(e=V.extend({},r||{},e)).id=n;re.trackMultipleDialogOpening(o,e);G(o,e);this.customData=e.customData;Ct[n]=this}},close:function(e,t){t=V.last(arguments);var n=pt.getFrameworkAdaptor(),i=n.getProviderByModuleName("dialog");if(i){re.assertActiveDialogOrThrow(i,t._context.extension.addon_key);K("dialog.close",{addon_key:t._context.extension.addon_key},e);i.close()}else{var o;o=t._context.extension.options.isDialog?At.getByExtension(t._context.extension.id)[0]:At.getActiveDialog();Q.close({customData:e,dialog:o,extension:t._context.extension})}},getCustomData:function(e){var t=Ot((e=V.last(arguments))._context);e(t?t.customData:void 0)},getButton:{constructor:It,enable:It.prototype.enable,disable:It.prototype.disable,toggle:It.prototype.toggle,isEnabled:It.prototype.isEnabled,trigger:It.prototype.trigger,hide:It.prototype.hide,show:It.prototype.show,isHidden:It.prototype.isHidden},createButton:{constructor:function(e,t){t=V.last(arguments);var n=pt.getFrameworkAdaptor(),i=n.getProviderByModuleName("dialog");if(i){re.assertActiveDialogOrThrow(i,t._context.extension.addon_key);i.createButton({identifier:e.identifier,text:e.text,hidden:!1,disabled:e.disabled||!1,onClick:function(){K("dialog.button.click",{addon_key:t._context.extension.addon_key,key:t._context.extension.key},{button:{identifier:e.identifier,text:e.text}})}})}else Y({identifier:e.identifier,text:e.text},t._context.extension)}}};h.register("iframe-resize",(function(e){Re.resize(e.width,e.height,e.$el)}));h.register("iframe-size-to-parent",(function(e){var t,n=V.getIframeByExtensionId(e.extensionId);t=m(window).height()-n.offset().top-1;h.dispatch("iframe-resize",{width:"100%",height:t+"px",$el:n})}));h.register("hide-footer",(function(e){e&&m("#footer").css({display:"none"})}));window.addEventListener("resize",(function(e){h.dispatch("host-window-resize",e)}),!0);var Pt=function(e,t,n){var i;i=n.extension_id?V.getIframeByExtensionId(n.extension_id):n;h.dispatch("iframe-resize",{width:e,height:t,$el:i,extension:n.extension})},Tt=function(e,t){h.dispatch("iframe-size-to-parent",{hideFooter:t,extensionId:e})},Mt=function(e){h.dispatch("hide-footer",e)},Dt=V.debounce,Lt={},jt=[],Ft={},Bt={getLocation:function(e){e=V.last(arguments);var t=lt.getProvider("get-location");e("function"==typeof t?t():window.location.href)},resize:function(e,t,n){n=V.last(arguments);var i=lt.getProvider("addon");if(i)i.resize(e,t,n._context);else{var o=n._context.extension.id,r=n._context.extension.options;if(-1!==jt.indexOf(o)||r&&r.isDialog)return!1;Lt[o]||(Lt[o]=Dt((function(e,t,n){Pt(e,t,n._context)}),50));Lt[o](e,t,n)}return!0},sizeToParent:Dt((function(e,t){t=V.last(arguments);var n=lt.getProvider("addon");if(n)n.sizeToParent(e,t._context);else if(t._context.extension.options.isFullPage){V.getIframeByExtensionId(t._context.extension_id).addClass("full-size-general-page");x.isSetBlockDisplayFlagEnabled()&&V.getIframeByExtensionId(t._context.extension_id).addClass("sized-to-parent");Tt(t._context.extension_id,e);Ft[t._context.extension_id]={hideFooter:e}}else V.getIframeByExtensionId(t._context.extension_id).addClass("full-size-general-page-fail")})),hideFooter:function(e){e&&Mt(e)}},Nt=function(e){delete Lt[e];delete Ft[e];-1!==jt.indexOf(e)&&jt.splice(jt.indexOf(e),1)};h.register("host-window-resize",(function(e){Object.getOwnPropertyNames(Ft).forEach((function(e){Tt(e,Ft[e].hideFooter)}))}));h.register("after:iframe-unload",(function(e){Nt(e.extension.id)}));h.register("after:iframe-destroyed",(function(e){Nt(e.extension.extension.id)}));h.register("before:iframe-size-to-parent",(function(e){-1===jt.indexOf(e.extensionId)&&jt.push(e.extensionId)}));var $t=function(e){h.dispatch("inline-dialog-refresh",{$el:e})},Rt=function(){h.dispatch("inline-dialog-close",{})},Jt=function(e){h.dispatch("inline-dialog-opened",{$el:e.$el,trigger:e.trigger,extension:e.extension})},zt={hide:function(e){e=V.last(arguments);var t=pt.getFrameworkAdaptor(),n=t.getProviderByModuleName("inlineDialog");n?n.hide(e._context):Rt()}},Ht="ac-message-container",Kt=["generic","error","warning","success","info","hint"],Ut="ap-message-",qt=new RegExp("^ap-message-[0-9A-fa-f]+$"),Vt={};function Wt(e){return qt.test(e)}var Gt=!1;function Xt(e,t,n,i){if(!Gt){m(document).on("aui-message-close",(function(e,t){var n=t.attr("id").replace(Ut,"");if(Vt[n]){m.isFunction(Vt[n].onCloseTrigger)&&Vt[n].onCloseTrigger();Vt[n]._destroy()}}));Gt=!0}var o=function(){var e=m("#"+Ht);e.length<1&&(e=m('<div id="'+Ht+'" />').appendTo("body"));return e}();i=function(e){var t={};"object"==typeof e&&["closeable","fadeout","delay","duration","id"].forEach((function(n){n in e&&(t[n]=e[n])}));return t}(i);m.extend(i,{title:t,body:AJS.escapeHtml(n)});if(Kt.indexOf(e)<0)throw"Invalid message type. Must be: "+Kt.join(", ");if(Wt(i.id)){AJS.messages[e](o,i);o.css("margin-left","-"+o.innerWidth()/2+"px")}}function Yt(e,t,n,i,o){var r="AP.messages."+e;console.warn("DEPRECATED API - AP.messages."+e+" has been deprecated since ACJS 5.0 and will be removed in a future release. Use AP.flag.create instead.");Qe(r,o._context.extension);var a=pt.getFrameworkAdaptor().getProviderByModuleName("messages");if(a){var s=e,d=a[s];d||(a[s]=a.generic);d(t,n,i)}else Xt(e,t,n,i)}function Qt(e){return{constructor:function(t,n,i,o){var r=(o=V.last(arguments))._id;"string"!=typeof t&&(t="");"string"!=typeof n&&(n="");"object"!=typeof i&&(i={});i.id=Ut+r;Yt(e,t,n,i,o);Vt[r]=this}}}var Zt={clear:function(e){var t=Ut+e._id;if(Wt(t)){var n=pt.getFrameworkAdaptor().getProviderByModuleName("messages");n?n.clear(t):m("#"+t).closeMessage()}},onClose:function(e,t){t=V.last(arguments);var n=e._id,i=pt.getFrameworkAdaptor(),o=i.getProviderByModuleName("messages");if(o){var r=Ut+e._id;o.onClose(r,t)}else Vt[n]&&(Vt[n].onCloseTrigger=t)},generic:Qt("generic"),error:Qt("error"),warning:Qt("warning"),success:Qt("success"),info:Qt("info"),hint:Qt("hint")},en={actionInvoked:function(e,t){h.dispatch("flag-action-invoked",{id:t,actionId:e})},open:function(e){h.dispatch("flag-open",{id:e})},close:function(e){h.dispatch("flag-close",{id:e})},closed:function(e){h.dispatch("flag-closed",{id:e})}},tn="ap-flag-",nn="ac-flag-actions",on=function(){function e(){}var t=e.prototype;t.cleanKey=function(e){var t=new RegExp("^ap-flag-(.+)$"),n=e.match(t);return n&&n[1]?n[1]:null};t._toHtmlString=function(e){return"string"===m.type(e)?e:"object"===m.type(e)&&e instanceof m?e.html():void 0};t._renderBody=function(e){e=this._toHtmlString(e);var t=m("<div />").html(e);m("<p />").addClass(nn).appendTo(t);return t.html()};t._renderActions=function(e,t,n){var i,o=e.find(".ac-flag-actions");n=n||{};Object.getOwnPropertyNames(n).forEach((function(e){i=m("<a />").attr("href","#").data({key:e,flag_id:t}).text(n[e]);o.append(i)}),this);return e};t.render=function(e){!function(){if(an)return;m(document).on("aui-flag-close",(function(e){var t=e.target.id,n=rn.cleanKey(t);en.closed(n)}));m(document).on("click",".ac-flag-actions",(function(e){var t=m(e.target),n=t.data("key"),i=t.data("flag_id");en.actionInvoked(n,i)}));an=!0}();var t=tn+e.id,n=AJS.flag({type:e.type,title:e.title,body:this._renderBody(e.body),close:e.close});n.setAttribute("id",t);var i=m(n);this._renderActions(i,e.id,e.actions);i.addClass("ac-aui-flag");i.close=n.close;return i};t.close=function(e){document.getElementById(e).close()};return e}(),rn=new on,an=!1;h.register("flag-close",(function(e){rn.close(e.id)}));var sn={},dn=function(){function e(e,t){t=V.last(arguments);if("object"==typeof e){var n=t._id,i=pt.getFrameworkAdaptor(),o=i.getProviderByModuleName("flag");if(o){var r=[];"object"==typeof e.actions&&(r=Object.getOwnPropertyNames(e.actions).map((function(t){return{actionKey:t,actionText:e.actions[t],executeAction:en.actionInvoked.bind(null,t,n)}})));var a=e.type||"info",s={id:n,title:e.title,body:e.body,actions:r,onClose:en.closed,close:e.close,type:a.toLowerCase()};this.flag=o.create(s);var d=lt.getProvider("addon");d&&d.registerUnmountCallback&&d.registerUnmountCallback(this.close.bind(this),t._context)}else{this.flag=rn.render({type:e.type,title:e.title,body:AJS.escapeHtml(e.body),actions:e.actions,close:e.close,id:n});en.open(this.flag.attr("id"))}this.onTriggers={};this.extension=t._context.extension;sn[t._id]=this;t.call(null,t._id)}}e.prototype.close=function(){this.flag.close()};return e}();function cn(e,t,n){if(sn[e]){var i=sn[e].extension;(n=n||{}).flagIdentifier=e;var o={id:i.id};K(t,o,n)}}h.register("flag-closed",(function(e){cn(e.id,"flag.close");sn[e.id]&&delete sn[e.id]}));h.register("flag-action-invoked",(function(e){cn(e.id,"flag.action",{actionIdentifier:e.actionId})}));var ln,un,fn={create:{constructor:dn,close:dn.prototype.close}},pn={trackDeprecatedMethodUsed:function(e,t){t=V.last(arguments);Qe(e,t._context.extension)},trackIframePerformanceMetrics:function(e,t){t=V.last(arguments);nt(e,t._context.extension)}};h.register("iframe-bridge-established",(function(e){if(e.extension.options.isFullPage){window.addEventListener("scroll",hn);ln=e.extension.id}}));h.register("iframe-destroyed",(function(e){gn()}));h.register("iframe-unload",(function(e){gn()}));function gn(){window.removeEventListener("scroll",hn);ln=void 0;un=void 0}function hn(){var e=document.documentElement.scrollHeight,t=window.innerHeight,n=.1*e;window.pageYOffset<=n?mn("nearTop"):t+window.pageYOffset+n>=e?mn("nearBottom"):un=void 0}function mn(e){if(un!==e){K("scroll."+e,{id:ln},{});un=e}}var yn={getPosition:function(e){if((e=V.last(arguments))._context.extension.options.isFullPage){var t=V.getIframeByExtensionId(e._context.extension_id),n=t.offset(),i=m(window);e({scrollY:i.scrollTop()-n.top,scrollX:i.scrollLeft()-n.left,width:window.innerWidth,height:window.innerHeight})}},setVerticalPosition:function(e,t){if((t=V.last(arguments))._context.extension.options&&t._context.extension.options.isFullPage){var n=V.getIframeByExtensionId(t._context.extension_id),i=n.offset();"number"==typeof e&&(document.documentElement.scrollTop=i.top+e)}}},vn=function(e,t,n){h.dispatch("dropdown-item-selected",{id:e,item:t,extension:n})};function _n(e){return e.map((function(e){if(e.list&&Array.isArray(e.list)){var t={heading:e.heading};t.items=e.list.map((function(e){return function(e){var t={};if("string"==typeof e)t.content=e;else{if(!e.text||"string"!=typeof e.text)throw new Error("Unknown dropdown list item format.");t.content=e.text;"boolean"==typeof e.disabled&&(t.disabled=e.disabled);void 0!==e.itemId&&(t.itemId=e.itemId)}return t}(e)}));return t}}))}var xn={create:function(e,t){t=V.last(arguments);if("object"==typeof e){var n=pt.getFrameworkAdaptor(),i=n.getProviderByModuleName("dropdown");if(i){var o=_n(e.list),r={dropdownId:e.dropdownId,dropdownGroups:o,dropdownItemNotifier:function(e){vn(e.dropdownId,e.item,t._context.extension)}};i.create(r,t._context);return r}}},showAt:function(e,t,n,i){var o=V.last(arguments),r={left:0,top:0},a=document.getElementById(o._context.extension_id);a?r=a.getBoundingClientRect():console.error("ACJS: no iframe found for dropdown");var s=pt.getFrameworkAdaptor(),d=s.getProviderByModuleName("dropdown");if(d){var c={dropdownId:e,x:t,y:n,width:i};d.showAt(c,{iframeDimensions:r,onItemSelection:function(e,t){vn(e,t,o._context.extension)}})}},hide:function(e){var t=pt.getFrameworkAdaptor().getProviderByModuleName("dropdown");t&&t.hide(e)},itemDisable:function(e,t){var n=pt.getFrameworkAdaptor().getProviderByModuleName("dropdown");n&&n.itemDisable(e,t)},itemEnable:function(e,t){var n=pt.getFrameworkAdaptor().getProviderByModuleName("dropdown");n&&n.itemEnable(e,t)}};h.register("dropdown-item-selected",(function(e){K("dropdown-item-selected",{addon_key:e.extension.addon_key,key:e.extension.key},{dropdownId:e.id,item:e.item})}));h.register("iframe-destroyed",(function(e){var t=pt.getFrameworkAdaptor().getProviderByModuleName("dropdown");t&&t.destroyByExtension(e.extension.extension_id)}));h.register("after:iframe-unload",(function(e){var t=pt.getFrameworkAdaptor().getProviderByModuleName("dropdown");t&&t.destroyByExtension(e.extension.extension_id)}));var bn,wn,kn,En,An,Cn={focus:function(){window.document.querySelector("a").focus({preventScroll:!0});window.document.querySelector("a").blur()},getSelectedText:(bn=function(e){e("")},wn="AP.host.getSelectedText()",An=!1,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!An&&"undefined"!=typeof console&&console.warn){An=!0;console.warn("DEPRECATED API - "+wn+" has been deprecated "+(En?"since ACJS "+En:"in ACJS")+" and will be removed in a future release. "+(kn?"Use "+kn+" instead.":"No alternative will be provided."));var i=V.last(t);i&&i._context&&i._context.extension&&pn.trackDeprecatedMethodUsed(wn,i)}return bn.apply(void 0,t)})},In="data-theme",On="data-color-mode";var Sn=function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e};var Pn=function(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){n.push(a.value);if(t&&n.length===t)break}}catch(e){o=!0;r=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw r}}return n};var Tn=function(e){if(Array.isArray(e))return e},Mn=Pn,Dn=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")};var Ln=function(e,t){return Tn(e)||Mn(e,t)||Dn()},jn=["light","dark","auto"],Fn=["light","dark","legacy-light","legacy-dark","spacing","typography"],Bn=["light","dark","spacing","typography"],Nn=function(e){return e.split(" ").map((function(e){return e.split(":")})).reduce((function(e,t){var n,i,o=Ln(t,2),r=o[0],a=o[1];"colorMode"===r&&["light","dark","auto"].includes(a)&&(e[r]=a);(i=r,void 0!==Bn.find((function(e){return e===i})))&&(n=a,void 0!==Fn.find((function(e){return e===n})))&&(e[r]=a);return e}),{})};function $n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Rn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$n(Object(n),!0).forEach((function(t){Sn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$n(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Jn=function(){if("undefined"==typeof document)return{};var e=document.documentElement,t=e.getAttribute(On)||"",n=e.getAttribute(In)||"";return Rn(Rn({},Nn(n)),function(e){return void 0!==jn.find((function(t){return t===e}))}(t)&&{colorMode:t})};var zn=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};function Hn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(e,i.key,i)}}var Kn=function(e,t,n){t&&Hn(e.prototype,t);n&&Hn(e,n);return e},Un={extensionIds:[],themeObserver:new(function(){function e(t){zn(this,e);Sn(this,"observer",null);Sn(this,"mediaObserver",null);this.callback=t}Kn(e,[{key:"observe",value:function(){var e=this;this.observer||(this.observer=new MutationObserver((function(){e.callback(Jn())})));this.observer.observe(document.documentElement,{attributeFilter:[In,On]})}},{key:"disconnect",value:function(){this.observer&&this.observer.disconnect()}}]);return e}())((function(e){Un.extensionIds.length&&Un.extensionIds.forEach((function(t){H.broadcast("theme_changed",{id:t},e)}))})),initializeTheming:function(){var e=V.last(arguments);if(e&&e._context&&e._context.extension_id){var t=e._context.extension_id;if(t){var n=Jn();H.broadcast("theme_initialized",{id:t},n);if(!this.extensionIds.includes(t)){this.extensionIds.push(t);this.themeObserver.observe(document.documentElement)}}}}},qn=function(){function e(){this._webitems={};this._contentResolver=function(){}}var t=e.prototype;t.setContentResolver=function(e){this._contentResolver=e};t.requestContent=function(e){if(e.addon_key&&e.key)return this._contentResolver.call(null,V.extend({classifier:"json"},e))};t.getWebItemsBySelector=function(e){var t,n=this;Object.getOwnPropertyNames(this._webitems).some((function(i){var o=n._webitems[i];if(o.selector&&o.selector.trim()===e.trim()){t=o;return!0}return!1}));return t};t.setWebItem=function(e){return this._webitems[e.name]={name:e.name,selector:e.selector,triggers:e.triggers}};t._removeTriggers=function(e){var t=this,n=ct.sanitizeTriggers(e.triggers);m((function(){m("body").off(n,e.selector,t._webitems[e.name]._on)}));delete this._webitems[e.name]._on};t._addTriggers=function(e){var t=ct.sanitizeTriggers(e.triggers);e._on=function(t){t.preventDefault();var n=m(t.target).closest(e.selector),i=ct.getConfigFromTarget(n),o=i&&i.url?i.url:void 0,r={addon_key:ct.getExtensionKey(n),key:ct.getKey(n),options:ct.getOptionsForWebItem(n),url:o};"com.addonengine.analytics"!==r.addon_key||pt.isModuleDefined("analytics")?Wn.webitemInvoked(e,t,r):console.log("ACJS-1164 Dropping event "+t.type+" for plugin "+r.addon_key+" until AP.analytics loads...")};m((function(){m("body").on(t,e.selector,e._on);m("head").append('<style type="text/css">'+e.selector+".ap-link-webitem {pointer-events: auto;}</style>")}))};return e}(),Vn=new qn;h.register("webitem-added",(function(e){Vn._addTriggers(e.webitem)}));h.register("content-resolver-register-by-extension",(function(e){Vn.setContentResolver(e.callback)}));document.addEventListener("aui-responsive-menu-item-created",(function(e){var t=e.detail.originalItem.querySelector('a[class*="ap-"]');if(t){var n=e.detail.newItem.querySelector("a");[].slice.call(t.classList).forEach((function(e){/^ap-/.test(e)&&n.classList.add(e)}))}}));var Wn={addWebItem:function(e){var t;if(Vn.getWebItemsBySelector(e.selector))return!1;t=Vn.setWebItem(e);h.dispatch("webitem-added",{webitem:t})},webitemInvoked:function(e,t,n){h.dispatch("webitem-invoked:"+e.name,{webitem:e,event:t,extension:n})}},Gn=function(e){h.dispatch("inline-dialog-extension",{$el:e.$el,extension:e.extension})},Xn=new(function(){function e(){}var t=e.prototype;t.resize=function(e){var t=V.stringToDimension(e.width),n=V.stringToDimension(e.height),i=e.$el.find(".contents");if(1===i.length){i.css({width:t,height:n});$t(e.$el)}};t.refresh=function(e){e.is(":visible")&&e[0].popup.reset()};t._getInlineDialog=function(e){return AJS.InlineDialog(e)};t._renderContainer=function(){return m("<div />").addClass("aui-inline-dialog-contents")};t._displayInlineDialog=function(e){Jt({$el:e.$el,trigger:e.trigger,extension:e.extension})};t.hideInlineDialog=function(e){e.hide()};t.closeInlineDialog=function(){m(".aui-inline-dialog").filter((function(){return m(this).find(".ap-iframe-container").length>0})).hide()};t.render=function(e){var t=this,n=m(document.getElementById("inline-dialog-"+e.id));0!==n.length&&n.remove();return AJS.InlineDialog(e.bindTo,e.id,(function(n,i,o){n.append(e.$content);t._displayInlineDialog({extension:e.extension,$el:n,trigger:i});o()}),e.inlineDialogOptions)};return e}());h.register("iframe-resize",(function(e){var t=e.$el.parents(".aui-inline-dialog");1===t.length&&Xn.resize({width:e.width,height:e.height,$el:t})}));h.register("inline-dialog-refresh",(function(e){Xn.refresh(e.$el)}));h.register("inline-dialog-hide",(function(e){Xn.hideInlineDialog(e.$el)}));h.register("inline-dialog-close",(function(e){Xn.closeInlineDialog()}));var Yn="inline-dialog-target-uid",Qn=new(function(){function e(){this._inlineDialogWebItemSpec={name:"inline-dialog",selector:".ap-inline-dialog",triggers:["mouseenter","click"]};this._inlineDialogWebItems={}}var t=e.prototype;t.getWebItem=function(){return this._inlineDialogWebItemSpec};t._createInlineDialog=function(e){return Xn.render({extension:e.extension,id:e.id,bindTo:e.$target,$content:m("<div />"),inlineDialogOptions:e.extension.options})};t.triggered=function(e){if("click"===e.event.type||e.extension.options.onHover){var t=m(e.event.currentTarget),n=t.data(Yn);this._createInlineDialog({id:n,extension:e.extension,$target:t,options:e.extension.options||{}}).show()}};t.opened=function(e){var t=e.$el.find("iframe");if(t&&1===t.length){var n=t.attr("src");if(n.length>0){var i=Se.hasJwt(n);if(i&&!Se.isJwtExpired(n)||!i)return!1}}var o=Vn.requestContent(e.extension);if(!o){console.warn("no content resolver found");return!1}o.then((function(t){t.options=t.options||{};V.extend(t.options,{autoresize:!0,widthinpx:!0});Gn({$el:e.$el,extension:t})}));return!0};t.addExtension=function(e){var t=Xe(e.extension);e.$el.empty().append(t)};t.createIfNotExists=function(e){var t=m(e.event.currentTarget),n=t.data(Yn);if(!n){n=ct.uniqueId();t.data(Yn,n)}};return e}()),Zn=Qn.getWebItem();h.register("before:webitem-invoked:"+Zn.name,(function(e){Qn.createIfNotExists(e)}));h.register("webitem-invoked:"+Zn.name,(function(e){Qn.triggered(e)}));h.register("inline-dialog-opened",(function(e){Qn.opened(e)}));h.register("inline-dialog-extension",(function(e){Qn.addExtension(e)}));Wn.addWebItem(Zn);var ei=["click"],ti="dialog-target-uid",ni={chrome:!0},ii=new(function(){function e(){this._dialogWebItem={name:"dialog",selector:".ap-dialog",triggers:ei}}var t=e.prototype;t.getWebItem=function(){return this._dialogWebItem};t._dialogOptions=function(e){return V.extend({},ni,e||{})};t.triggered=function(e){var t=m(e.event.currentTarget).data(ti),n=this._dialogOptions(e.extension.options);n.id=t;G(e.extension,n)};t.createIfNotExists=function(e){var t=m(e.event.currentTarget),n=t.data(ti);if(!n){n=ct.uniqueId();t.data(ti,n)}};return e}()),oi=ii.getWebItem();h.register("webitem-invoked:"+oi.name,(function(e){ii.triggered(e)}));h.register("before:webitem-invoked:"+oi.name,ii.createIfNotExists);Wn.addWebItem(oi);window._AP||(window._AP={});window._AP.version||(window._AP.version="5.3.87");H.defineModule("messages",Zt);H.defineModule("flag",fn);H.defineModule("dialog",St);H.defineModule("inlineDialog",zt);H.defineModule("env",Bt);H.defineModule("events",W);H.defineModule("_analytics",pn);H.defineModule("scrollPosition",yn);H.defineModule("dropdown",xn);H.defineModule("host",Cn);_("com.atlassian.connect.acjs.dsp-5019-design-tokens")&&H.defineModule("theming",Un);h.register("module-define-custom",(function(e){H.defineModule(e.name,e.methods)}));H.registerRequestNotifier((function(e){var t=function(){"req"===e.type?w.dispatch("bridge.invokemethod",{module:e.module,fn:e.fn,addonKey:e.addon_key,moduleKey:e.key}):"sub"===e.type&&w.dispatch("bridge.register-sub",{subAddonKey:e.sub.addon_key,subModuleKey:e.sub.key,addonKey:e.addon_key,moduleKey:e.key,blocked:e.blocked})};"function"==typeof window.requestIdleCallback?window.requestIdleCallback(t,{timeout:1e3}):t()}));H.setFeatureFlagGetter(_);return pt}));
}catch(e){WRMCB(e)};