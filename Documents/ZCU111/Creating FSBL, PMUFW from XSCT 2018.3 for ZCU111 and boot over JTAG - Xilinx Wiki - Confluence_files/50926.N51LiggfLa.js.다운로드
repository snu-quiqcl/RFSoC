/*! License: 50926.N51LiggfLa.js.LICENSE.txt */
(self._cf=self._cf||[]).push([[50926,66365,76140],{499253:e=>{"use strict";e.exports=function(e,t){if("string"==typeof e)return a(e);if("number"==typeof e)return s(e,t);return null},e.exports.format=s,e.exports.parse=a;var t=/\B(?=(\d{3})+(?!\d))/g,i=/(?:\.0*|(\.[^0]+)0+)$/,r={b:1,kb:1024,mb:1<<20,gb:1<<30,tb:Math.pow(1024,4),pb:Math.pow(1024,5)},n=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb|pb)$/i;function s(e,n){if(!Number.isFinite(e))return null;var s=Math.abs(e),a=n&&n.thousandsSeparator||"",o=n&&n.unitSeparator||"",l=n&&void 0!==n.decimalPlaces?n.decimalPlaces:2,c=Boolean(n&&n.fixedDecimals),d=n&&n.unit||"";d&&r[d.toLowerCase()]||(d=s>=r.pb?"PB":s>=r.tb?"TB":s>=r.gb?"GB":s>=r.mb?"MB":s>=r.kb?"KB":"B");var p=(e/r[d.toLowerCase()]).toFixed(l);return c||(p=p.replace(i,"$1")),a&&(p=p.replace(t,a)),p+o+d}function a(e){if("number"==typeof e&&!isNaN(e))return e;if("string"!=typeof e)return null;var t,i=n.exec(e),s="b";return i?(t=parseFloat(i[1]),s=i[4].toLowerCase()):(t=parseInt(e,10),s="b"),Math.floor(r[s]*t)}},185338:(e,t,i)=>{var r;!function(){"use strict";var n=!("undefined"==typeof window||!window.document||!window.document.createElement),s={canUseDOM:n,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:n&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:n&&!!window.screen};void 0===(r=function(){return s}.call(t,i,t,e))||(e.exports=r)}()},307271:(e,t,i)=>{"use strict";i.d(t,{s:()=>l});var r=i(122551),n=i(474258),s=i.n(n),a=i(38952),o=i(60244);function l(e){var t=e.children,i=e.innerRef,n=r.useContext(a.mq),l=r.useCallback((function(e){(0,o.k$)(i,e),(0,o.DL)(n,e)}),[i,n]);return r.useEffect((function(){return function(){return(0,o.k$)(i,null)}}),[]),r.useEffect((function(){s()(Boolean(n),"`Reference` should not be used outside of a `Manager` component.")}),[n]),(0,o.$p)(t)({ref:l})}},177690:(e,t,i)=>{"use strict";i.d(t,{Z:()=>p});var r=i(29298),n=i(122551),s=i(64172),a=i.n(s),o=i(782380);const l={getAtlaskitAnalyticsContext:a().func,getAtlaskitAnalyticsEventHandlers:a().func},c=()=>[];class d extends n.Component{constructor(e){super(e),(0,r.Z)(this,"getChildContext",(()=>({getAtlaskitAnalyticsContext:this.getAnalyticsContext}))),(0,r.Z)(this,"getAnalyticsContext",(()=>{const{data:e}=this.props,{getAtlaskitAnalyticsContext:t=c}=this.context;return[...t(),e]})),(0,r.Z)(this,"getAnalyticsEventHandlers",(()=>{const{getAtlaskitAnalyticsEventHandlers:e=c}=this.context;return e()})),this.contextValue={getAtlaskitAnalyticsContext:this.getAnalyticsContext,getAtlaskitAnalyticsEventHandlers:this.getAnalyticsEventHandlers}}render(){const{children:e}=this.props;return n.createElement(o.Z.Provider,{value:this.contextValue},e)}}d.displayName="AnalyticsContext",(0,r.Z)(d,"contextTypes",l),(0,r.Z)(d,"childContextTypes",l);const p=d},652459:(e,t,i)=>{"use strict";i.d(t,{Z:()=>p});var r=i(177690),n=i(122551),s=i(782380),a=i(300805),o=i(274317);const l=({data:e,children:t})=>{const i=(0,o.V)(e),r=(0,a.O)(),l=(0,n.useCallback)((()=>[...r.getAtlaskitAnalyticsContext(),i.current]),[r,i]),c=(0,n.useMemo)((()=>({getAtlaskitAnalyticsContext:l,getAtlaskitAnalyticsEventHandlers:r.getAtlaskitAnalyticsEventHandlers})),[r,l]);return n.createElement(s.Z.Provider,{value:c},t)};var c;let d;d="undefined"!=typeof process&&null!==process&&null!==(c=process.env)&&void 0!==c&&c.ANALYTICS_NEXT_MODERN_CONTEXT?l:r.Z;const p=d},78651:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});const r=e=>t=>i=>{const r=i(t),n=r.clone();return n&&n.fire(e),r}},400505:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});const r=i(879142).Z},312193:(e,t,i)=>{"use strict";i.d(t,{Z:()=>u});var r=i(415911),n=i(953307),s=i(122551),a=i(866261),o=i(982930),l=i(992018),c=i(225385),d=i(283137);const p=function(){const{registerRef:e}=(0,s.useContext)(d.K),t=(0,s.useRef)(null);return(0,s.useEffect)((()=>{null!==t.current&&e(t.current)}),[e]),t},u=(0,s.forwardRef)(((e,t)=>{const{component:i,elemBefore:d,elemAfter:u,shouldTitleWrap:h=!0,shouldDescriptionWrap:m=!0}=e,v=(0,r.Z)(e,["component","elemBefore","elemAfter","shouldTitleWrap","shouldDescriptionWrap"]),f=p();return i?s.createElement(l.Z,(0,n.Z)({component:i,iconBefore:d,iconAfter:u,shouldTitleWrap:h,shouldDescriptionWrap:m},v)):e.href?s.createElement(c.Z,(0,n.Z)({href:e.href,iconBefore:d,iconAfter:u,role:"menuitem",ref:(0,a.Z)([t,f]),shouldTitleWrap:h,shouldDescriptionWrap:m},v)):s.createElement(o.Z,(0,n.Z)({role:"menuitem",iconBefore:d,iconAfter:u,ref:(0,a.Z)([t,f]),shouldTitleWrap:h,shouldDescriptionWrap:m},v))}))},487158:(e,t,i)=>{"use strict";i.d(t,{Z:()=>k});var r=i(991332),n=i(415911),s=i(953307),a=i(122551),o=i(451598),l=i(395937),c=i(654632),d=i(437705),p=i(682968);var u=i(615139),h=i(824464),m=i(676424),v=i(283137),f=i(321534),g=i(60252),b=i(685753),w=i(852665);const y=(0,f.iv)({display:"flex",minWidth:"160px",padding:"var(--ds-space-250, 20px)",justifyContent:"center"}),x=({statusLabel:e="Loading"})=>(0,f.tZ)("div",{css:y},(0,f.tZ)(b.Z,{size:"small"}),(0,f.tZ)(w.Z,{role:"status"},e)),E=e=>{let{onClose:t,onUpdate:i,isLoading:r,statusLabel:o,setInitialFocusRef:l,children:c}=e,d=(0,n.Z)(e,["onClose","onUpdate","isLoading","statusLabel","setInitialFocusRef","children"]);const{menuItemRefs:p}=(0,a.useContext)(v.K);return(0,a.useLayoutEffect)((()=>{i()}),[r,i]),(0,a.useEffect)((()=>{null==l||l(p[0])}),[p,l]),(0,f.tZ)(g.Z,(0,s.Z)({role:"menu",onClick:e=>{p.some((t=>{const i=function(e){const t=e.getAttribute("role");return"checkbox"===t||"menuitemcheckbox"===t}(t)||function(e){const t=e.getAttribute("role");return"radio"===t||"menuitemradio"===t}(t);return t.contains(e.target)&&!i}))&&t&&t(e)}},d),r?(0,f.tZ)(x,{statusLabel:o}):c)},C=(0,a.createContext)({setItemState:d.Z,getItemState:()=>{},setGroupState:d.Z,getGroupState:()=>({})}),S=e=>{const{children:t}=e,i=(0,a.useRef)({}),r=(0,a.useMemo)((()=>({setItemState:(e,t,r)=>{i.current[e]||(i.current[e]={}),i.current[e][t]=r},getItemState:(e,t)=>{if(i.current[e])return i.current[e][t]},setGroupState:(e,t)=>{i.current[e]=t},getGroupState:e=>i.current[e]||{}})),[]);return a.createElement(C.Provider,{value:r},t)};function I(){return(0,a.useRef)(`ds--dropdown--${Math.random().toString(16).substr(2,8)}`).current}const Z=`calc(100vh - ${2*(0,m.ww)()}px)`,R={top:"bottom",bottom:"top",left:"right",right:"left",start:"end",auto:"auto",end:"start"},k=e=>{const{defaultOpen:t=!1,isOpen:i,onOpenChange:f=d.Z,children:g,placement:b="bottom-start",trigger:w,spacing:y,shouldFlip:x=!0,isLoading:C=!1,autoFocus:k=!1,testId:T,statusLabel:B,zIndex:$=m.ug.modal()}=e,[A,D]=(0,p.Z)(i,(()=>t)),[P,F]=(0,a.useState)(!1),M=(0,a.useMemo)((()=>(e=>{const t=e.split("-"),i=t[0];if(["top","bottom"].includes(i)){if(2===t.length&&["start","end"].includes(t[1])){const e=t[1];return[`${i}`,`${i}-${R[e]}`,`${R[i]}-${e}`,`${R[i]}`,`${R[i]}-${R[e]}`,"auto"]}return[`${i}-start`,`${i}-end`,`${R[i]}`,`${R[i]}-start`,`${R[i]}-end`,"auto"]}})(b)),[b]),O=(0,a.useCallback)((e=>{const t=!A,{clientX:i,clientY:r,type:n}=e;"keydown"===n?F(!0):0!==i&&0!==r||F(!0),D(t),f({isOpen:t,event:e})}),[f,A,D]),N=(0,a.useCallback)((e=>{D(false),f({isOpen:false,event:e})}),[f,D]),{isFocused:L,bindFocus:U}=function(){const[e,t]=(0,a.useState)(!1),i=(0,a.useRef)({onFocus:()=>t(!0),onBlur:()=>t(!1)});return(0,a.useEffect)((()=>()=>t(!1)),[]),{isFocused:e,bindFocus:i.current}}();(0,a.useEffect)((()=>L?A?d.Z:(0,o.ak)(window,{type:"keydown",listener:function(e){e.key===c.Hb&&(e.preventDefault(),O(e))}}):d.Z),[L,A,O]);const _=I();return a.createElement(S,null,a.createElement(h.Z,{id:A?_:void 0,shouldFlip:x,isOpen:A,onClose:N,zIndex:$,placement:b,fallbackPlacements:M,testId:T&&`${T}--content`,shouldUseCaptureOnOutsideClick:!0,trigger:e=>{if("function"==typeof w){const{ref:t}=e,i=(0,n.Z)(e,["ref"]);return w((0,r.Z)((0,r.Z)((0,r.Z)({},i),U),{},{triggerRef:t,isSelected:A,onClick:O,testId:T&&`${T}--trigger`}))}return a.createElement(l.Z,(0,s.Z)({},U,{ref:e.ref,"aria-controls":e["aria-controls"],"aria-expanded":e["aria-expanded"],"aria-haspopup":e["aria-haspopup"],isSelected:A,iconAfter:a.createElement(u.default,{size:"medium",label:""}),onClick:O,testId:T&&`${T}--trigger`}),w)},content:({setInitialFocusRef:e,update:t})=>a.createElement(v.Z,null,a.createElement(E,{spacing:y,maxHeight:Z,maxWidth:800,onClose:N,onUpdate:t,isLoading:C,statusLabel:B,setInitialFocusRef:P||k?e:void 0},g))}))}},283137:(e,t,i)=>{"use strict";i.d(t,{K:()=>d,Z:()=>p});var r=i(122551),n=i(451598),s=i(437705),a=i(654632);const o={[a.Hb]:"next",[a.R4]:"prev",[a.hv]:"first",[a.yM]:"last"},l=(e,t)=>{for(;t+1<e.length;){if(!(null!==e[t+1].getAttribute("disabled")))return e[t+1];t++}},c=(e,t)=>{for(;t>0;){if(!(null!==e[t-1].getAttribute("disabled")))return e[t-1];t--}};const d=(0,r.createContext)({menuItemRefs:[],registerRef:s.Z}),p=({children:e})=>{const t=(0,r.useRef)([]),i=(0,r.useCallback)((e=>{e&&!t.current.includes(e)&&t.current.push(e)}),[]);(0,r.useEffect)((()=>{return(0,n.ak)(window,{type:"keydown",listener:(e=t.current,t=>{const i=e.findIndex((e=>{var t;return null===(t=document.activeElement)||void 0===t?void 0:t.isSameNode(e)}));switch(o[t.key]){case"next":if(i<e.length-1){t.preventDefault();const r=l(e,i);r&&r.focus()}break;case"prev":if(i>0){t.preventDefault();const r=c(e,i);r&&r.focus()}break;case"first":t.preventDefault();const r=l(e,-1);r&&r.focus();break;case"last":t.preventDefault();const n=c(e,e.length);n&&n.focus();break;default:return}})});var e}));const s={menuItemRefs:t.current,registerRef:i};return r.createElement(d.Provider,{value:s},e)}},99616:(e,t,i)=>{"use strict";i.d(t,{K:()=>n,v:()=>s});var r=i(122551);const n=(0,r.createContext)("elevation.surface"),s=()=>(0,r.useContext)(n);n.displayName="SurfaceProvider"},302842:(e,t,i)=>{"use strict";i.d(t,{k:()=>r});const r={card:100,navigation:200,dialog:300,layer:400,blanket:500,modal:510,flag:600,spotlight:700,tooltip:800}},682968:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var r=i(122551);function n(e,t=(()=>e)){const i=void 0!==e,[n,s]=(0,r.useState)(t),a=(0,r.useRef)(i);(0,r.useEffect)((()=>{a.current=i}),[i]);return[i?e:n,(0,r.useCallback)((e=>{a.current||s(e)}),[])]}},866261:(e,t,i)=>{"use strict";function r(e){return t=>{e.forEach((e=>{"function"==typeof e?e(t):null!==e&&(e.current=t)}))}}i.d(t,{Z:()=>r})},129808:(e,t,i)=>{"use strict";let r;i.d(t,{a:()=>r}),function(e){e[e.Border=0]="Border",e[e.BoxShadow=1]="BoxShadow",e[e.Background=2]="Background",e[e.Blanket=3]="Blanket"}(r||(r={}))},980663:(e,t,i)=>{"use strict";i.d(t,{H:()=>s,G:()=>a});var r=i(404510),n=i(129808);const s=e=>e.map((e=>o(e))).concat(a).join("\n"),a="\n  ::selection,*::selection {\n    background-color: transparent;\n  }\n  ::-moz-selection,*::-moz-selection {\n    background-color: transparent;\n  }\n",o=e=>{switch(e){case n.a.Border:return`\n        border: ${r.fO};\n\n        // Fixes ED-15246: Trello card is visible through a border of a table border\n        &::after {\n          height: 100%;\n          content: '\\00a0';\n          background: ${r.EG};\n          position: absolute;\n          right: -1px;\n          top: 0;\n          bottom: 0;\n          width: 1px;\n          border: none;\n          display: inline-block;\n        }\n      `;case n.a.BoxShadow:return`\n        box-shadow: ${r.qR};\n        border-color: transparent;\n        `;case n.a.Background:return`background-color: var(--ds-background-selected, ${r.pX});`;case n.a.Blanket:return`\n        position: relative;\n\n        // Fixes ED-9263, where emoji or inline card in panel makes selection go outside the panel\n        // in Safari. Looks like it's caused by user-select: all in the emoji element\n        -webkit-user-select: text;\n\n        ::before {\n          position: absolute;\n          content: '';\n          left: 0;\n          right: 0;\n          top: 0;\n          bottom: 0;\n          width: 100%;\n          pointer-events: none;\n          z-index: ${r.aE};\n          background-color: var(--ds-blanket-selected, #B3D4FF4C)\n        }`;default:return""}}},588022:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,n=(r=i(122551))&&r.__esModule?r:{default:r},s=i(386056);const a=e=>n.default.createElement(s.Icon,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><path d="M6.735 12.322a1 1 0 00-1.47 1.356l3.612 3.919c.537.526 1.337.526 1.834.03l.364-.359a2335.638 2335.638 0 003.939-3.883l.04-.04a492.598 492.598 0 003.658-3.643 1 1 0 00-1.424-1.404 518.42 518.42 0 01-3.64 3.625l-.04.04a2049.114 2049.114 0 01-3.775 3.722l-3.098-3.363z" fill="currentColor"/></svg>'},e));a.displayName="CheckIcon";var o=a;t.default=o},615139:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,n=(r=i(122551))&&r.__esModule?r:{default:r},s=i(386056);const a=e=>n.default.createElement(s.Icon,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><path d="M8.292 10.293a1.009 1.009 0 000 1.419l2.939 2.965c.218.215.5.322.779.322s.556-.107.769-.322l2.93-2.955a1.01 1.01 0 000-1.419.987.987 0 00-1.406 0l-2.298 2.317-2.307-2.327a.99.99 0 00-1.406 0z" fill="currentColor" fill-rule="evenodd"/></svg>'},e));a.displayName="ChevronDownIcon";var o=a;t.default=o},692214:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,n=(r=i(122551))&&r.__esModule?r:{default:r},s=i(386056);const a=e=>n.default.createElement(s.Icon,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><g fill="currentColor" fill-rule="evenodd"><path d="M10.687 17.292a.983.983 0 00-1.397 0 1 1 0 000 1.407l1.964 1.98a1.082 1.082 0 001.538 0l1.919-1.933a1 1 0 000-1.408.983.983 0 00-1.398 0l-1.29 1.3-1.336-1.346z" fill-rule="nonzero"/><path d="M13.001 19.993L13 10.006C13 9.451 12.552 9 12 9s-1 .45-1 1.007l.001 9.987c0 .555.448 1.006 1 1.006s1-.45 1-1.007z" fill-rule="nonzero"/><path d="M7.938 5.48a4.8 4.8 0 00-.777-.062C4.356 5.418 2 7.62 2 10.498 2 13.409 4.385 16 7.1 16h2.881v-1.993H7.1c-1.657 0-3.115-1.663-3.115-3.508 0-1.778 1.469-3.087 3.104-3.087h.012c.389 0 .686.05.97.15l.17.063c.605.248.875-.246.875-.246l.15-.267c.73-1.347 2.201-2.096 3.716-2.12a4.14 4.14 0 014.069 3.645l.046.34s.071.525.665.525c.013 0 .012.005.023.005h.254c1.136 0 1.976.959 1.976 2.158 0 1.207-.987 2.342-2.07 2.342h-3.964V16h3.964C20.105 16 22 13.955 22 11.665c0-2-1.312-3.663-3.138-4.074-.707-2.707-3.053-4.552-5.886-4.591-1.975.02-3.901.9-5.038 2.48z"/></g></svg>'},e));a.displayName="DownloadIcon";var o=a;t.default=o},213715:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,n=(r=i(122551))&&r.__esModule?r:{default:r},s=i(386056);const a=e=>n.default.createElement(s.Icon,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><path fill="currentColor" fill-rule="evenodd" d="M8 10V8.002A4.004 4.004 0 0112 4a4 4 0 014 4.002V10a2 2 0 012 2v6c0 1.105-.902 2-2.009 2H8.01A2 2 0 016 18v-6c0-1.102.897-1.995 2-2zm2 0h4V8.002A2.001 2.001 0 0012 6c-1.102 0-2 .898-2 2.002V10zm2 7a2 2 0 100-4 2 2 0 000 4z"/></svg>'},e));a.displayName="LockFilledIcon";var o=a;t.default=o},281743:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,n=(r=i(122551))&&r.__esModule?r:{default:r},s=i(386056);const a=e=>n.default.createElement(s.Icon,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><g fill="currentColor" fill-rule="evenodd"><circle cx="5" cy="12" r="2"/><circle cx="12" cy="12" r="2"/><circle cx="19" cy="12" r="2"/></g></svg>'},e));a.displayName="MoreIcon";var o=a;t.default=o},115472:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,n=(r=i(122551))&&r.__esModule?r:{default:r},s=i(386056);const a=e=>n.default.createElement(s.Icon,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><path d="M8.595 19.522C7.162 20.364 6 19.702 6 18.04V5.963C6 4.3 7.158 3.635 8.595 4.479l11.083 6.51c.951.559.958 1.46 0 2.023l-11.083 6.51z" fill="currentColor" fill-rule="evenodd"/></svg>'},e));a.displayName="VidPlayIcon";var o=a;t.default=o},552119:(e,t,i)=>{"use strict";i.r(t),i.d(t,{Card:()=>br,CardBase:()=>gr});var r=i(991332),n=i(29298),s=i(122551),a=i(833486),o=i(644960),l=i(299774),c=i(692214),d=i(594047),p=i(795425),u=i(79680),h=i(727467),m=i(954889),v=i(700406),f=i(317520),g=i(609115),b=i(603494),w=i(321534),y=i(316864),x=i(940373),E=i(685753),C=i(57198),S=i(603070),I=i(412024),Z=i(332691),R=i(736250),k=i(397916),T=i(980142),B=i(115472),$=i(943566),A=i.n($),D=i(588022),P=i(692319),F=i(866738);const M=w.iv`
  float: left;
  margin-right: 6px;
  position: relative;
  top: 1px;
  img {
    ${(0,F.dp)("12px !important")};
  }
`,O="file-type-icon";class N extends s.Component{render(){const{mediaType:e,iconUrl:t,style:i}=this.props,r=e||"unknown",n=(0,w.tZ)(P.w,{type:e,size:"small",className:O}),s=t?(0,w.tZ)("img",{src:t,className:"custom-icon",alt:r}):n;return(0,w.tZ)("div",{css:M,style:i,className:O},s)}}N.displayName="FileIcon";var L=i(83710),U=i(131436),_=i(676424);const z=()=>w.iv`
  box-sizing: border-box;
  font-family: ${(0,_.I8)()};

  * {
    box-sizing: border-box;
  }
`;var j=i(490132);const W=w.iv`
  ${z()}
  display: flex;
  position: relative;
  line-height: 0;
`;let V;!function(e){e.default="default",e.filled="filled"}(V||(V={}));const G=({variant:e})=>w.iv`
  ${F.be}
  ${F.E0}
    ${(0,F.dp)(26)}
    color: ${`var(--ds-icon, ${U.Mx})`};

  &:hover {
    cursor: pointer;
  }

  ${(e=>"filled"===e?`\n    background-color: var(--ds-surface-overlay, ${(0,j.m4)(U.N0,.8)});\n    margin-right: 8px;\n\n    &:last-child {\n      margin-right: 0;\n    }\n\n    &:hover {\n      background-color: var(--ds-surface-overlay-hovered, ${(0,j.m4)(U.N0,.6)})\n    }\n  `:"\n    &:hover {\n      background-color: var(--ds-background-neutral-subtle-hovered, rgba(9, 30, 66, 0.06));\n    }\n  ")(e)}
`,H=(0,s.forwardRef)(((e,t)=>(0,w.tZ)("div",{id:"cardActionButton","data-testid":"media-card-primary-action",css:G(e),style:e.style,onClick:e.onClick,onMouseDown:e.onMouseDown,ref:t},e.children)));class q extends s.Component{constructor(...e){super(...e),(0,n.Z)(this,"onMouseDown",(e=>{e.preventDefault()}))}render(){const{icon:e,triggerColor:t,onClick:i,variant:r}=this.props;return s.createElement(H,{onClick:i,onMouseDown:this.onMouseDown,style:{color:t},variant:r},e)}}q.displayName="CardActionIconButton";var J=i(415911),K=i(953307),Y=i(281743),X=i(312193),Q=i(487158),ee=i(400505),te=i(411299);const ie=(0,o.Z)({onClick:(0,te.Jo)({eventType:"ui",action:"clicked",actionSubject:"button",actionSubjectId:"mediaCardDropDownMenu",attributes:{}})})(H),re=e=>s.createElement(X.Z,(0,K.Z)({testId:"media-card-actions-menu-item"},e)),ne=(e,t)=>{const{label:i,handler:r}=e,n=(0,o.Z)({onClick:(0,te.Jo)({eventType:"ui",action:"clicked",actionSubject:"button",actionSubjectId:"mediaCardDropDownMenuItem",attributes:{label:i}})})(re);return s.createElement(n,{key:t,onClick:r},i)};class se extends s.Component{render(){const{actions:e,triggerColor:t,onOpenChange:i,triggerVariant:r}=this.props;return e.length>0?s.createElement(Q.Z,{testId:"media-card-actions-menu",onOpenChange:i,trigger:e=>{let{triggerRef:i}=e,n=(0,J.Z)(e,["triggerRef"]);return s.createElement(ie,(0,K.Z)({variant:r,style:{color:t},ref:i},n),s.createElement(Y.default,{label:"more"}))}},s.createElement(ee.Z,null,e.map(ne))):null}}function ae({children:e}){return s.createElement("span",{onClick:e=>{e.stopPropagation(),e.preventDefault()},"data-testid":"prevent-click-through"},e)}se.displayName="CardActionsDropdownMenu";const oe=e=>(0,w.tZ)(q,e);class le extends s.Component{render(){const{actions:e}=this.props;if(!e.length)return null;const t=e.find(ce),i=e.filter(de(t));return(0,w.tZ)(ae,null,(0,w.tZ)("div",{css:W},t?this.renderActionIconButton(t,!0):null,this.renderOtherActionButtons(i)))}renderActionIconButton(e,t){const{triggerColor:i,variant:r}=this.props,{icon:n,handler:s,label:a}=e,l=t?"mediaCardPrimaryActionButton":"mediaCardSecondaryActionButton",c=(0,o.Z)({onClick:(0,te.Jo)({eventType:"ui",action:"clicked",actionSubject:"button",actionSubjectId:l,attributes:{label:a}})})(oe);return(0,w.tZ)(c,{icon:n,triggerColor:i,onClick:()=>s(),variant:r})}renderOtherActionButtons(e){if(0===e.length)return null;{const{triggerColor:t,onToggle:i,variant:r}=this.props,n=e.find(ce),s=e.filter(de(n));return n&&0===s.length?this.renderActionIconButton(n,!1):(0,w.tZ)(se,{actions:e,triggerColor:t,onOpenChange:i,triggerVariant:r})}}}function ce(e){return!!e.icon}function de(e){return t=>t!==e}le.displayName="CardActionsView";var pe=i(479517);const ue=w.iv`
  ${(0,F.dp)(14)}
  ${(0,j.eR)()}
  background-color: ${`var(--ds-surface-overlay, ${(0,j.m4)("#ffffff",.5)})`};
  position: absolute;
  top: 8px;
  right: 8px;
  border-radius: 20px;
  color: ${"var(--ds-icon-subtle, #798599)"}; /* CLEANUP - TODO FIL-3884: Align color with new design */
  display: flex;
  opacity: 0;

  &.selected {
    opacity: 1;
    color: ${"var(--ds-icon-inverse, white)"};
    background-color: ${"var(--ds-icon-selected, #0052cc)"}; /* CLEANUP - TODO FIL-3884: Align with tickbox icons */
  }

  /* Enforce dimensions of "tick" icon */
  svg {
    position: absolute;
    width: 14px;
  }
`,he=e=>w.iv`
  ${(0,F.dp)()}
  ${(0,F.AG)()}
  ${F.E0} display: flex;
  justify-content: space-between;
  flex-direction: column;
  background: transparent;
  transition: 0.3s background ${"cubic-bezier(0.215, 0.61, 0.355, 1)"}, 0.3s border-color;
  padding: 16px;

  ${(({hasError:e,noHover:t})=>{if(e||t)return"\n        cursor: default;\n\n        &:hover {\n          background: transparent;\n        }\n      "})(e)}
  &:not(.persistent):hover, &.active {
    .top-row {
      .title {
        color: ${`var(--ds-text-information, ${U.AX})`};
      }
    }
  }

  &.noHover:hover {
    .top-row {
      .title {
        color: ${`var(--ds-text, ${U.q2})`};
      }
    }
  }

  .file-type-icon {
    display: block;
  }

  &:not(.persistent) {
    &:not(.error, .noHover):hover {
      background-color: ${`var(--ds-background-neutral-hovered, ${(0,j.m4)(U.xA,.06)})`};
    }

    &.selectable {
      &.selected {
        background-color: ${`var(--ds-background-selected, ${U.VY})`};

        &:hover {
          /* CLEANUP - TODO FIL-3884 add new overlay with rgba(colors.N900, 0.16) */
          background-color: ${`var(--ds-background-selected-hovered, ${(0,j.m4)(U.xA,.16)})`};
        }

        .title,
        .bottom-row,
        .file-size {
          color: ${`var(--ds-text, ${U.xA})`};
        }
      }
    }
  }

  &.persistent {
    &:not(.active) {
      overflow: hidden;
    }

    .top-row {
      .title {
        transition: opacity 0.3s;
        opacity: 0;
        color: ${"var(--ds-text, white)"};
        visibility: hidden;
      }
    }

    .bottom-row {
      opacity: 0;
      transition: transform 0.2s, opacity 0.5s;
      /* This is the height of the overlay footer, needs to be present now since the parent uses flex and 100% doesn't look right anymore */
      transform: translateY(35px);

      .file-type-icon {
        display: none;
      }

      .file-size {
        color: ${"var(--ds-text, white)"};
        display: none;
      }
    }

    &:hover,
    &.active {
      background-color: ${`var(--ds-interaction-hovered, ${(0,j.m4)(U.xA,.5)})`};

      .title {
        opacity: 1;
        visibility: visible;
      }

      .file-type-icon,
      .file-size {
        display: block;
      }

      .bottom-row {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Selectable */
    &.selectable {
      &:hover {
        .tickbox {
          opacity: 1;
        }
      }

      &.selected {
        .tickbox {
          background-color: ${`var(--ds-background-selected-bold, ${U.VY})`} !important;
          color: ${"var(--ds-icon-inverse, white)"};
        }
      }
    }
  }

  &.error {
    .top-row {
      overflow: visible;
    }
    &:hover,
    &.active {
      .top-row {
        .title {
          color: ${`var(--ds-text, ${U.q2})`};
        }
      }
    }
  }
`,me=w.iv`
  height: 24px;
  display: flex;
  align-items: center;
`,ve=w.iv`
  width: 100%;
  position: relative;
  box-sizing: border-box;
  vertical-align: middle;
`,fe=w.iv``,ge=w.iv`
  display: flex;
  align-items: center;
  height: 16px;
`,be=w.iv``,we=w.iv`
  ${j.Dl} display: inline-block;
  vertical-align: middle;
  font-weight: bold;
  color: ${`var(--ds-text-subtlest, ${U.n2})`};
  font-size: 12px;
  line-height: 15px;
  overflow: hidden;
  max-width: 'calc(100% - 24px)';
  text-overflow: ellipsis;
  white-space: nowrap;
  margin: auto 3px;
`,ye=w.iv`
  ${we}
  font-weight: normal;
`,xe=e=>w.iv`
  box-sizing: border-box;
  word-wrap: break-word;
  color: ${(0,pe.Z)({light:`var(--ds-text, ${U.q2})`,dark:`var(--ds-text, ${U.fR})`})({theme:e})};
  font-size: 12px;
  line-height: 18px;
`,Ee=w.iv`
  ${(0,F.LH)("100px")} font-size: 12px;
  color: ${"var(--ds-text-subtlest, #5e6c84)"};
`,Ce=w.iv`
  display: flex;
  align-items: center;
`;var Se=i(529845);const Ie=e=>{const{hasError:t,noHover:i,className:r}=e;return(0,w.tZ)("div",{css:he({hasError:t,noHover:i}),className:r},e.children)},Ze=e=>(0,w.tZ)("div",{css:we},e.children),Re=e=>(0,w.tZ)("div",{css:ye},e.children),ke=e=>{const t=(0,Se.m)();return(0,w.tZ)("div",{css:xe(t),className:"title"},e.children)},Te=e=>(0,w.tZ)("div",{css:Ce,className:e.className},e.children);class Be extends s.Component{constructor(e){super(e),(0,n.Z)(this,"onMenuToggle",(e=>{this.setState({isMenuExpanded:e.isOpen})})),this.state={isMenuExpanded:!1}}get wrapperClassNames(){const{error:e,noHover:t,selectable:i,selected:r,mediaType:n,persistent:s}=this.props,{isMenuExpanded:a}=this.state;return e?A()("overlay",{error:e,active:a}):A()("overlay",n,{active:a,selectable:i,selected:r,persistent:!s,noHover:t})}render(){const{cardStatus:e,error:t,noHover:i,mediaName:r,persistent:n,selected:s,actions:a}=this.props,o=((e,t,i,r)=>i||!t||"uploading"===e&&!r?"":t)(e,r,t,s),l=n?void 0:"var(--ds-icon-inverse, white)";return(0,w.tZ)(Ie,{hasError:!!t,noHover:i,className:this.wrapperClassNames},(0,w.tZ)("div",{css:fe,className:"top-row"},this.errorLine(),(0,w.tZ)(ke,null,o?(0,w.tZ)(T.l,{testId:"media-card-file-name",text:o,lines:2}):null),this.tickBox()),(0,w.tZ)("div",{css:ge,className:"bottom-row"},(0,w.tZ)("div",{css:ve},this.bottomLeftColumn()),(0,w.tZ)("div",{css:be},a?(0,w.tZ)(le,{actions:a,onToggle:this.onMenuToggle,triggerColor:l}):null)))}errorLine(){const{error:e,alt:t}=this.props;return e&&(0,w.tZ)(s.Fragment,null,(0,w.tZ)("div",{css:me},(0,w.tZ)(L.P,null),(0,w.tZ)(Ze,null,e)),t&&(0,w.tZ)("div",{css:me},(0,w.tZ)(Re,null,t)))}tickBox(){const{selected:e,selectable:t}=this.props,i=(0,w.tZ)(D.default,{label:"tick"}),r=A()("tickbox",{selected:e});return t&&(0,w.tZ)("div",{css:ue,className:r},i)}bottomLeftColumn(){const{error:e}=this.props;if(!e){const{mediaType:e,subtitle:t,icon:i}=this.props,r=A()("metadata"),n=e||i?(0,w.tZ)(N,{mediaType:e,iconUrl:i}):null,s=t?(0,w.tZ)("div",{css:Ee,className:"file-size"},t):null;return(0,w.tZ)("div",null,(0,w.tZ)(Te,{className:r},n,s))}}removeBtnClick(e){return t=>{t.preventDefault(),t.stopPropagation(),e()}}}Be.displayName="CardOverlay",(0,n.Z)(Be,"defaultProps",{actions:[],mediaName:""});var $e=i(837159);const Ae=e=>w.iv`
  ${z()}
  ${(e=>{const{disableOverlay:t}=e;return t?"":"\n  box-shadow: var(--ds-shadow-raised, 0 1px 1px rgba(9, 30, 66, 0.2), 0 0 1px 0 rgba(9, 30, 66, 0.24));\n"})(e)}
  ${F.E0}
  ${(e=>{const{mediaType:t}=e;return`background: ${"image"===t?"transparent":(0,pe.Z)({light:`var(--ds-background-neutral, ${U.IR})`,dark:`var(--ds-background-neutral, ${U.H8})`})(e)};`})(e)}

  line-height: normal;
  position: relative;

  ${(0,$e.W)(e)}

  ${(0,F.dp)()} .wrapper {
    ${F.E0};
    display: block;
    height: inherit;
    position: relative;

    .img-wrapper {
      position: relative;
      width: inherit;
      height: inherit;
      overflow: hidden;
      display: block;
      ${F.E0}
    }
  }
`,De=w.iv`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: ${"var(--ds-icon-inverse, white)"};

  /* we want to override default icon size and hover state */
  &:hover > * {
    width: 64px;
    height: 64px;
  }
`,Pe=w.iv`
  background: ${"var(--ds-background-neutral-bold, rgba(23, 43, 77, 0.7))"};
  border-radius: 100%;
  padding: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition-property: width, height;
  transition-duration: 0.1s;
  width: 56px;
  height: 56px;
`,Fe=w.iv`
  position: absolute;
  height: 100%;
  width: 100%;
`,Me=w.iv`
  ${(0,F.AG)()}
  ${(0,F.dp)()}
  border-radius: inherit;
  background-color: ${"var(--ds-blanket, rgba(9, 30, 66, 0.5))"};
`,Oe=w.iv`
  ${(0,F.AG)()} width: 100%;
  padding: 8px;
  color: ${`var(--ds-text-inverse, ${U.N0})`};
  font-size: 12px;
  line-height: 18px;
  word-wrap: break-word;
`,Ne=w.iv`
  display: flex;
  position: absolute;
  bottom: 0;
  width: 100%;
  padding: 8px;
  color: ${`var(--ds-text-inverse, ${U.N0})`};
`,Le=w.iv`
  flex-grow: 1;

  /*
    force the height to always be 20px (the height of the cancel icon),
    so that the height of the progress bar doesn't jump when cards with
    and without a cancel icon are rendered side-by-side.
  */
  height: ${26}px;

  /*
    vertically center the progress bar within the 20px, keeping the progress bar full width
  */
  display: flex;
  flex-direction: column;
  justify-content: center;
`,Ue=w.iv`
  margin-left: 4px;
  /*
    button must appear above overlay
   */
  z-index: 2;
`;var _e=i(931318),ze=i(849646);const je=(e,t,i,r,n)=>!("doc"===r||!n&&"file"===t)&&(!!i&&("external-image"===t||n&&(0,ze.isMimeTypeSupportedByBrowser)(n)||"complete"===e||"loading-preview"===e)),We=w.iv`
  ${F.E0} z-index: 30;
  overflow: hidden;
  background-color: rgba(255, 255, 255, 0.3);

  .progressBar {
    width: 0%;
    height: 3px;
    transition: width 0.25s ease-in;
    background-color: white;
  }
`;class Ve extends s.Component{render(){if("number"!=typeof this.props.progress)return null;const e={width:100*Math.min(1,Math.max(0,this.props.progress))+"%"};return(0,w.tZ)("div",{css:We},(0,w.tZ)("div",{className:"progressBar",style:e}))}}Ve.displayName="ProgressBar";var Ge=i(110724);const He=e=>{const{disableOverlay:t,selectable:i,selected:r,mediaType:n,mediaName:s,status:a,progress:o}=e,l=(0,Se.m)();return(0,w.tZ)("div",{id:"cardImageViewWrapper","data-testid":"media-file-card-view","data-test-media-name":s,"data-test-status":a,"data-test-progress":o,"data-test-selected":!!r||void 0,css:Ae({theme:l,disableOverlay:t,selectable:i,selected:r,mediaType:n}),className:`${Ge.n} ${r?Ge.z:""}`},e.children)},qe=e=>(0,w.tZ)("div",{css:De},e.children),Je=e=>(0,w.tZ)("div",{css:Fe},e.children);class Ke extends s.Component{constructor(...e){super(...e),(0,n.Z)(this,"wasThumbnailDisplayed",!1),(0,n.Z)(this,"renderCardContents",(()=>{const{status:e,mediaType:t,fileSize:i}=this.props;if("error"===e)return this.renderErrorContents();if("failed-processing"===e)return this.renderFailedContents();const r=""===i&&["processing","loading-preview"].includes(e);return"video"===t||this.isFileCardImageReadyForDisplay||r?this.renderSuccessCardContents():this.renderLoadingContents()})),(0,n.Z)(this,"renderLoadingContents",(()=>(0,w.tZ)("div",{className:"wrapper"},(0,w.tZ)("div",{className:"img-wrapper"},(0,w.tZ)(_e.o,null))))),(0,n.Z)(this,"renderErrorContents",(()=>{const{status:e,error:t,alt:i,mediaName:r,mediaType:n,actions:a,fileSize:o}=this.props;return(0,w.tZ)(s.Fragment,null,(0,w.tZ)("div",{className:"wrapper"}),(0,w.tZ)(Be,{cardStatus:e,error:t,persistent:!0,mediaName:r,mediaType:n,alt:i,subtitle:o,actions:a}))})),(0,n.Z)(this,"renderFailedContents",(()=>{const{status:e,mediaName:t,mediaType:i,actions:r,fileSize:n}=this.props;return(0,w.tZ)(s.Fragment,null,(0,w.tZ)("div",{className:"wrapper"}),(0,w.tZ)(Be,{cardStatus:e,noHover:!0,persistent:!0,mediaName:t,mediaType:i,subtitle:n,actions:r}))})),(0,n.Z)(this,"renderUploadingCardOverlay",(()=>{const{status:e,mediaName:t,mediaType:i,dataURI:r,selectable:n,selected:s}=this.props,a="doc"===i||!r;return(0,w.tZ)(Be,{cardStatus:e,persistent:a,mediaName:t,selectable:n,selected:s})})),(0,n.Z)(this,"renderPlayButton",(()=>{const{status:e,mediaItemType:t,mediaType:i,mimeType:r,selectable:n,dataURI:s}=this.props;return"video"!==i||n&&!je(e,t,s,i,r)?null:(0,w.tZ)(qe,null,(0,w.tZ)("div",{css:Pe},(0,w.tZ)(B.default,{testId:"media-card-play-button",label:"play",size:"large"})))})),(0,n.Z)(this,"onImageLoad",(()=>{const{onImageLoad:e,cardPreview:t}=this.props;e&&e(t)})),(0,n.Z)(this,"onImageError",(()=>{const{onImageError:e,cardPreview:t}=this.props;e&&e(t)})),(0,n.Z)(this,"renderMediaImage",(()=>{const{status:e,mediaItemType:t,dataURI:i,mediaType:r,mimeType:n,previewOrientation:s,onDisplayImage:a,alt:o}=this.props;return je(e,t,i,r,n)?(!this.wasThumbnailDisplayed&&a&&"image"===r&&(a(),this.wasThumbnailDisplayed=!0),(0,w.tZ)(k.j,{dataURI:i,alt:o,crop:this.isCropped,stretch:this.isStretched,previewOrientation:s,onImageLoad:this.onImageLoad,onImageError:this.onImageError})):null})),(0,n.Z)(this,"renderProgressBar",(()=>{const{mediaName:e,progress:t,actions:i,status:r}=this.props;return"uploading"!==r?null:(0,w.tZ)(Je,null,(0,w.tZ)("div",{css:Me},(0,w.tZ)("div",{css:Oe},(0,w.tZ)(T.l,{testId:"media-card-file-name",text:e||"",lines:2})),(0,w.tZ)("div",{css:Ne},(0,w.tZ)("div",{css:Le},(0,w.tZ)(Ve,{progress:t})),(0,w.tZ)("div",{css:Ue},i?(0,w.tZ)(le,{actions:i,triggerColor:"var(--ds-icon-inverse, white)"}):null))))})),(0,n.Z)(this,"renderSuccessCardContents",(()=>{const{disableOverlay:e,selectable:t,status:i}=this.props;let r=null;return e||("uploading"===i?t&&(r=this.renderUploadingCardOverlay()):r=this.renderSuccessCardOverlay()),(0,w.tZ)("div",{className:"wrapper"},(0,w.tZ)("div",{className:"img-wrapper"},this.renderMediaImage(),this.renderProgressBar(),this.renderPlayButton()),r)})),(0,n.Z)(this,"renderSuccessCardOverlay",(()=>{const{status:e,mediaName:t,mediaType:i,fileSize:r,dataURI:n,selectable:s,selected:a,actions:o}=this.props,l="doc"===i||!n;return(0,w.tZ)(Be,{cardStatus:e,persistent:l,mediaName:t,mediaType:i,selectable:s,selected:a,subtitle:r,actions:o})}))}render(){const{disableOverlay:e,selectable:t,selected:i,mediaType:r,progress:n,status:s,mediaName:a}=this.props;return(0,w.tZ)(He,{mediaName:a,status:s,progress:n,disableOverlay:e,selectable:t,selected:i,mediaType:r},this.renderCardContents())}get isFileCardImageReadyForDisplay(){const{dataURI:e,status:t}=this.props;return!!e||!["loading","processing","loading-preview"].includes(t)}get isCropped(){const{resizeMode:e}=this.props;return"crop"===e}get isStretched(){const{resizeMode:e}=this.props;return"stretchy-fit"===e}}Ke.displayName="FileCardImageView",(0,n.Z)(Ke,"defaultProps",{resizeMode:"crop",disableOverlay:!1});var Ye=i(82708),Xe=i(893865),Qe=i(659004),et=i(171124),tt=i(656246);function it(e,t){return e.map((e=>(0,r.Z)((0,r.Z)({},e),{},{handler:()=>{e.handler({type:"file",details:t})}})))}var rt=i(883383);var nt=i(793519);const st=({cardPreview:e,alt:t,resizeMode:i,onImageLoad:r,onImageError:n,onDisplayImage:a,mediaType:o,nativeLazyLoad:l,forceSyncDisplay:c})=>{(0,s.useEffect)((()=>{"image"===o&&a&&a()}),[o,a]);return s.createElement(k.j,(0,K.Z)({dataURI:e.dataURI,alt:t,previewOrientation:e.orientation,onImageLoad:()=>{r&&r(e)},onImageError:()=>{n&&n(e)},loading:l?"lazy":void 0,forceSyncDisplay:c},function(e){return{crop:"crop"===e,stretch:"stretchy-fit"===e}}(i)))};var at=i(213715),ot=i(790632);const lt="\n  display: inline-block;\n  vertical-align: bottom;\n  white-space: nowrap;\n  overflow: hidden;\n",ct=(0,ot.Z)("span",{target:"evjscy50"})(lt," max-width:calc(100% - ",(({fontSizePX:e,endFixedChars:t})=>pt(e)*t+1),"em);min-width:",(({fontSizePX:e,startFixedChars:t})=>pt(e)*t),";text-overflow:ellipsis;"),dt=(0,ot.Z)("span",{target:"evjscy51"})(lt," max-width:calc(100% - ",(({fontSizePX:e,startFixedChars:t})=>pt(e)*t),");position:relative;"),pt=e=>e/11*.46,ut=({text:e,fontSizePX:t=11,startFixedChars:i=4,endFixedChars:r=7})=>{const{left:n,right:a}=((e,t,i)=>{const r=i+t;if(e.length<=r)return{left:e,right:e};const n=e.length-i;return{left:e.substr(0,n),right:e.substr(n)}})(e,i,r);return n===a?s.createElement(s.Fragment,null,e):s.createElement(s.Fragment,null,s.createElement(ct,{fontSizePX:t,startFixedChars:i,endFixedChars:r},n),s.createElement(dt,{fontSizePX:t,startFixedChars:i,endFixedChars:r},a))};var ht=i(377751),mt=i(542646);const vt=/^#[0-9A-F]{6}$/i,ft=({breakpoint:e,titleBoxBgColor:t,theme:i})=>w.iv`
  position: absolute;
  bottom: 0;
  width: 100%;
  background-color: ${(0,pe.Z)({light:`var(--ds-surface, ${(0,j.m4)(t&&vt.test(t)?t:U.N0,1)})`,dark:`var(--ds-surface, ${(0,j.m4)(t&&vt.test(t)?t:"#161a1d",1)})`})({theme:i})};
  color: ${(0,pe.Z)({light:`var(--ds-text, ${U.q2})`,dark:"var(--ds-text, #C7D1DB)"})({theme:i})};
  cursor: inherit;
  pointer-events: none;
  display: flex;
  flex-direction: column;
  justify-content: center;
  ${((e=mt.Uo.SMALL)=>{const t=mt.a6[e],i=t.titleBox.verticalPadding,r=t.titleBox.horizontalPadding;return`height: ${(0,mt.EY)(e)}px;\n    padding: ${i}px ${r}px;`})(e)}
`;ft.displayName="TitleBoxWrapper";const gt="white-space: nowrap;overflow: hidden;",bt="padding-right: 10px;",wt=({hasIconOverlap:e})=>w.iv`
  font-weight: 600;
  ${gt}
  ${e&&bt}
`;wt.displayName="FailedTitleBoxHeader";const yt=({hasIconOverlap:e})=>w.iv`
  text-overflow: ellipsis;
  ${gt}
  ${e&&bt}
`;yt.displayName="TitleBoxFooter";const xt=w.iv`
  position: absolute;
  right: 4px;
  bottom: 0px;
`,Et=w.iv`
  display: flex;
  align-items: center;
  justify-content: flex-start;
  span {
    vertical-align: middle;
    :nth-child(2) {
      margin-left: 4px;
      margin-right: 4px;
    }
  }
`,Ct=e=>{const{breakpoint:t,titleBoxBgColor:i}=e,r=(0,Se.m)();return(0,w.tZ)("div",{id:"titleBoxWrapper",css:ft({breakpoint:t,titleBoxBgColor:i,theme:r})},e.children)},St=e=>{const{hasIconOverlap:t}=e;return(0,w.tZ)("div",{id:"titleBoxHeader",css:wt({hasIconOverlap:t})},e.children)},It=e=>{const{hasIconOverlap:t}=e;return(0,w.tZ)("div",{id:"titleBoxFooter",css:yt({hasIconOverlap:t})},e.children)},Zt=e=>(0,w.tZ)("div",{id:"titleBoxIcon",css:xt},e.children),Rt=e=>(0,w.tZ)("div",{css:Et},e.children),kt=(0,b.ZP)((({timestamp:e,intl:t})=>{const{locale:i="en"}=t||{locale:"en"};return s.createElement(s.Fragment,null,(0,ht.p6)(e,i))})),Tt=({name:e,createdAt:t,breakpoint:i,titleBoxBgColor:r,titleBoxIcon:n})=>s.createElement(Ct,{breakpoint:i,titleBoxBgColor:r},s.createElement(St,{hasIconOverlap:!!n&&!t},s.createElement(ut,{text:e})),t?s.createElement(It,{hasIconOverlap:!!n},s.createElement(kt,{timestamp:t})):null,"LockFilledIcon"===n&&s.createElement(Zt,null,s.createElement(at.default,{label:"",size:"small"})));var Bt=i(144024);const $t=({breakpoint:e,customMessage:t=I.s.failed_to_load})=>s.createElement(Ct,{breakpoint:e},s.createElement(Rt,null,s.createElement(Bt.default,{label:"Warning",size:"small",primaryColor:`var(--ds-text-danger, ${U.rt})`}),s.createElement("span",null,s.createElement(rt.Z,t))));var At=i(294416),Dt=i(65664);const Pt=e=>(0,w.tZ)("div",{css:Dt.$g,className:Dt.Wt},e.children),Ft=()=>(0,w.tZ)("div",{css:Dt.Oe,className:Dt.hi}),Mt=()=>s.createElement(Pt,null,s.createElement(Ft,null),s.createElement(B.default,{label:"play",size:"large"}));var Ot=i(375170);const Nt=e=>(0,w.tZ)("div",{id:"tickBoxWrapper",css:(0,Ot.eZ)(e.selected),className:Ot.j5},e.children),Lt=({selected:e})=>s.createElement(Nt,{selected:e},s.createElement(D.default,{label:"tick"})),Ut="media-card-blanket",_t=`background-color: var(--ds-blanket, ${U.xS});`,zt=e=>w.iv`
  ${(0,j.eR)()}
  position: absolute;
  width: 100%;
  height: 100%;
  max-height: 100%;
  max-width: 100%;
  left: 0;
  top: 0;
  ${e?_t:""}
`;zt.displayName="Blanket";const jt=e=>{const{isFixed:t}=e;return(0,w.tZ)("div",{css:zt(t),className:Ut})},Wt="media-card-actions-bar",Vt="opacity: 1;",Gt=e=>w.iv`
  ${e?Vt:"opacity: 0;"}
  ${(0,j.eR)()}
  position: absolute;
  top: 8px;
  right: 8px;
  display: flex;
  flex-flow: row nowrap;
  align-items: center;
`;Gt.displayName="ActionsBarWrapper";const Ht=e=>(0,w.tZ)("div",{id:"actionsBarWrapper",css:Gt(e.isFixed),className:Wt},e.children);class qt extends s.Component{render(){const{isFixed:e,actions:t}=this.props;return 0===t.length?null:s.createElement(Ht,{isFixed:e},s.createElement(le,{actions:t,variant:V.filled}))}}qt.displayName="ActionsBar";const Jt=({hasTitleBox:e,breakpoint:t})=>w.iv`
  position: absolute;
  width: 100%;
  height: calc(100% - ${function(e,t){return e?`${(0,mt.EY)(t)}px`:"0px"}(e,t)});
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
`;Jt.displayName="MediaIconWrapper";const Kt=e=>{const{breakpoint:t,hasTitleBox:i}=e;return(0,w.tZ)("div",{id:"iconWrapper",css:Jt({breakpoint:t,hasTitleBox:i})},e.children)},Yt=w.F4`
 0% { opacity: 1}
 50% { opacity: 0.3 }
 100% { opacity: 1; }`,Xt=w.iv`
  animation-name: ${Yt};
  animation-duration: 3.5s;
  animation-timing-function: ease-in-out;
  animation-iteration-count: infinite;
`,Qt=e=>w.iv`
  ${(({animated:e,reducedFont:t})=>w.iv`
  overflow: hidden;
  opacity: 1;
  font-weight: 450;
  ${t?"font-size: 0.7em;":""}
  color: ${`var(--ds-text-subtlest, ${U.hH})`};
  text-align: center;
  ${e?Xt:""}
  margin-bottom: -1em;
  padding: 3px 10px;
`)(e)}
`;Qt.displayName="IconMessageWrapper";const ei=e=>{const{animated:t,reducedFont:i}=e;return(0,w.tZ)("div",{id:"iconMessageWrapper",css:Qt({animated:t,reducedFont:i})},e.children)},ti=({messageDescriptor:e,animated:t=!1,reducedFont:i=!1})=>s.createElement(ei,{animated:t,reducedFont:i},s.createElement("span",null,s.createElement(rt.Z,e))),ii=({disableAnimation:e})=>s.createElement(ti,{messageDescriptor:I.s.creating_preview,animated:!e}),ri=e=>s.createElement(ti,(0,K.Z)({},e,{messageDescriptor:I.s.preview_unavailable})),ni=e=>s.createElement(ti,(0,K.Z)({},e,{messageDescriptor:I.s.failed_to_load})),si=e=>s.createElement(ti,(0,K.Z)({},e,{messageDescriptor:I.s.failed_to_upload})),ai=e=>s.createElement(ti,(0,K.Z)({},e,{messageDescriptor:I.s.preview_currently_unavailable,reducedFont:!0}));var oi=i(373839),li=i(654910),ci=i(980663);const di=({breakpoint:e,dimensions:t,appearance:i,disableOverlay:r,displayBackground:n,selected:s,isPlayButtonClickable:a,isTickBoxSelectable:o,shouldDisplayTooltip:l,mediaCardCursor:c,theme:d})=>w.iv`
  ${(0,j.eR)()}
  box-sizing: border-box;
  * {
    box-sizing: border-box;
  }
  position: relative;
  font-family: ${(0,_.I8)()};
  ${(0,nt.mY)(t,i)}
  ${n&&`background: ${(0,pe.Z)({light:`var(--ds-background-neutral, ${U.IR})`,dark:"var(--ds-background-neutral, #22272C)"})({theme:d})};`}
  ${F.E0}
  ${(0,nt.Nn)(c)}
  ${(0,nt.Dl)(r,s)}
  ${(0,nt.U8)(e)};
  ${ci.G}

  /* We use classnames from here exceptionally to be able to handle styles when the Card is on hover */
  ${(0,nt.gz)(a)}
  ${(0,nt.lh)(o)}
  &:hover .${Ut} {
    ${_t}
  }
  &:hover .${Wt} {
    ${Vt}
  }

  /* Tooltip does not support percentage dimensions. We enforce them here */
  ${l&&"> div { width: 100%; height: 100%; }"}
`;di.displayName="NewFileExperienceWrapper";const pi=e=>{const{testId:t,dimensions:i,appearance:r,onClick:n,onMouseEnter:s,innerRef:a,breakpoint:o,mediaCardCursor:l,disableOverlay:c,selected:d,displayBackground:p,isPlayButtonClickable:u,isTickBoxSelectable:h,shouldDisplayTooltip:m}=e,v=(0,Se.m)();return(0,w.tZ)("div",{id:"newFileExperienceWrapper",className:li.A,"data-testid":t,css:di({breakpoint:o,dimensions:i,appearance:r,disableOverlay:c,displayBackground:p,selected:d,isPlayButtonClickable:u,isTickBoxSelectable:h,shouldDisplayTooltip:m,mediaCardCursor:l,theme:v}),ref:a,onClick:n,onMouseEnter:s},e.children)};var ui=i(874325);const hi=e=>{const{testId:t,shouldUsePointerCursor:i,breakpointSize:r,dimensions:n,onClick:s,onMouseEnter:a,innerRef:o}=e;return(0,w.tZ)("div",{id:"cardViewWrapper","data-testid":t,css:(0,ui.eZ)({shouldUsePointerCursor:i,breakpointSize:r,dimensions:n}),onClick:s,onMouseEnter:a,ref:o},e.children)};class mi extends s.Component{constructor(...e){super(...e),(0,n.Z)(this,"state",{didImageRender:!1}),(0,n.Z)(this,"divRef",s.createRef()),(0,n.Z)(this,"onImageLoad",(e=>{const{onImageLoad:t,cardPreview:i}=this.props;e.dataURI===(null==i?void 0:i.dataURI)&&(this.setState({didImageRender:!0}),t&&t(i))})),(0,n.Z)(this,"onImageError",(e=>{const{onImageError:t}=this.props;this.setState({didImageRender:!1}),t&&t(e)})),(0,n.Z)(this,"saveElementWidth",(()=>{const{dimensions:e}=this.props;if(!e)return;const{width:t}=e;if(t&&(0,Qe.v)(t)&&this.divRef.current){const e=(0,tt.z)(this.divRef.current,"width");this.setState({elementWidth:e})}})),(0,n.Z)(this,"renderFileNewExperience",(()=>{const{dimensions:e,appearance:t,onClick:i,onMouseEnter:r,testId:n,metadata:s,status:a,selected:o,selectable:l,disableOverlay:c,cardPreview:d,mediaCardCursor:p}=this.props,{name:u}=s||{},h=!d||!c||"error"===a||"failed-processing"===a,m=!(!this.shouldRenderPlayButton()||!c),v=!c&&!!l&&!o,f=!c;return(0,w.tZ)(pi,{testId:n||"media-card-view",dimensions:e,appearance:t,onClick:i,onMouseEnter:r,innerRef:this.divRef,breakpoint:this.breakpoint,mediaCardCursor:p,disableOverlay:!!c,selected:!!o,displayBackground:h,isPlayButtonClickable:m,isTickBoxSelectable:v,shouldDisplayTooltip:f},f?(0,w.tZ)(C.Z,{content:u,position:"bottom",tag:"div"},this.renderNewExperienceCard()):this.renderNewExperienceCard())})),(0,n.Z)(this,"renderFile",(()=>{const{cardPreview:e,status:t,mediaItemType:i,metadata:r,progress:n,resizeMode:a,dimensions:o,selectable:l,selected:c,disableOverlay:d,alt:p,onDisplayImage:u,actions:h}=this.props,{dataURI:m,orientation:v}=e||{},{name:f,mediaType:g,mimeType:b,size:y}=r||{},x=r&&h?it(h,r):[],E=(e=>"error"===e&&s.createElement(rt.Z,I.s.failed_to_load))(t),C=y?(0,S.n)(y):"";return(0,w.tZ)(Ke,{error:E,dimensions:o,selectable:l,selected:c,dataURI:m,mediaName:f,mediaType:g,mimeType:b,fileSize:C,status:t,mediaItemType:i,progress:n,resizeMode:a,onDisplayImage:u,actions:x,disableOverlay:d,previewOrientation:v,alt:p,onImageLoad:this.onImageLoad,onImageError:this.onImageError,cardPreview:e})})),(0,n.Z)(this,"getRenderConfigByStatus",(()=>{const{cardPreview:e,status:t,metadata:i,disableOverlay:n,error:s,selectable:a,disableAnimation:o}=this.props,{name:l,mediaType:c}=i||{},{didImageRender:d}=this.state,p=!(!i||0!==i.size),u={renderTypeIcon:!d,renderImageRenderer:!!e,renderPlayButton:!!e&&"video"===c,renderBlanket:!n,renderTitleBox:!n&&!!l,renderTickBox:!n&&!!a};switch(t){case"uploading":return(0,r.Z)((0,r.Z)({},u),{},{renderBlanket:!n||"video"!==c,isFixedBlanket:!0,renderProgressBar:!0});case"processing":return(0,r.Z)((0,r.Z)({},u),{},{iconMessage:d||p?void 0:(0,w.tZ)(ii,{disableAnimation:o})});case"complete":return u;case"error":case"failed-processing":const e=(0,r.Z)((0,r.Z)({},u),{},{renderTypeIcon:!0,renderImageRenderer:!1,renderTitleBox:!1,renderPlayButton:!1});let t,a;const{secondaryError:h}=s||{};if((0,Z.no)(h)||(0,R.C)(h)?t=(0,w.tZ)(ai,null):(0,oi.dG)(s)?(t=(0,w.tZ)(si,null),a=I.s.failed_to_upload):t=i?(0,w.tZ)(ri,null):(0,w.tZ)(ni,null),!n){const i=!l||!!a;return(0,r.Z)((0,r.Z)({},e),{},{renderTitleBox:!!l&&!a,renderFailedTitleBox:i,iconMessage:i?void 0:t,customTitleMessage:a})}return(0,r.Z)((0,r.Z)({},e),{},{iconMessage:t});case"loading-preview":case"loading":default:return(0,r.Z)((0,r.Z)({},u),{},{renderPlayButton:!1,renderTypeIcon:!1,renderSpinner:!d})}})),(0,n.Z)(this,"renderNewExperienceCard",(()=>{const{renderTypeIcon:e,iconMessage:t,renderImageRenderer:i,renderSpinner:r,renderPlayButton:n,renderBlanket:a,renderProgressBar:o,renderTitleBox:l,renderFailedTitleBox:c,renderTickBox:d,isFixedBlanket:p,customTitleMessage:u}=this.getRenderConfigByStatus(),{progress:h,selected:m,status:v,metadata:f}=this.props,{name:g}=f||{},b=!!l||!!c;return(0,w.tZ)(s.Fragment,null,(0,w.tZ)("div",{css:nt.u9,className:"media-file-card-view","data-testid":"media-file-card-view","data-test-media-name":g,"data-test-status":v,"data-test-progress":h,"data-test-selected":!!m||void 0},e&&this.renderMediaTypeIcon(b,t),r&&this.renderSpinner(b),i&&this.renderImageRenderer(),n&&this.renderPlayButton(b),a&&this.renderBlanket(!!p),l&&this.renderTitleBox(),c&&this.renderFailedTitleBox(u),o&&this.renderProgressBar(!b),d&&this.renderTickBox()),this.renderActionsBar())}))}componentDidMount(){this.saveElementWidth();const{innerRef:e}=this.props;e&&this.divRef.current&&e(this.divRef.current)}componentDidUpdate({cardPreview:e}){const{cardPreview:t}=this.props;e&&!t&&this.setState({didImageRender:!1})}get width(){const{elementWidth:e}=this.state;if(e)return e;const{width:t}=this.props.dimensions||{width:void 0};return t?(0,et.g)(t):Xe.tN.width}get breakpoint(){const e=this.state.elementWidth||(this.props.dimensions?this.props.dimensions.width:"")||Xe.tN.width;return(0,nt.Gd)(parseInt(`${e}`,10))}render(){const{featureFlags:e}=this.props;if((0,y.OC)("newCardExperience",e))return this.renderFileNewExperience();const{dimensions:t,appearance:i,onClick:r,onMouseEnter:n,testId:s}=this.props,a=t||(0,Xe.$0)(i);return(0,w.tZ)(hi,{testId:s||"media-card-view",shouldUsePointerCursor:!0,breakpointSize:(0,Ye.M0)(this.width),dimensions:a,onClick:r,onMouseEnter:n,innerRef:this.divRef},this.renderFile())}renderSpinner(e){return(0,w.tZ)(Kt,{breakpoint:this.breakpoint,hasTitleBox:e},(0,w.tZ)(E.Z,null))}shouldRenderPlayButton(){const{metadata:e,cardPreview:t}=this.props,{mediaType:i}=e||{};return!("video"!==i||!t)}renderPlayButton(e){return(0,w.tZ)(Kt,{breakpoint:this.breakpoint,hasTitleBox:e},(0,w.tZ)(Mt,null))}renderBlanket(e){return(0,w.tZ)(jt,{isFixed:e})}renderTitleBox(){const{metadata:e,titleBoxBgColor:t,titleBoxIcon:i}=this.props,{name:r,createdAt:n}=e||{};return!!r&&(0,w.tZ)(Tt,{name:r,createdAt:n,breakpoint:this.breakpoint,titleBoxIcon:i,titleBoxBgColor:t})}renderFailedTitleBox(e){return(0,w.tZ)($t,{breakpoint:this.breakpoint,customMessage:e})}renderProgressBar(e){const{progress:t}=this.props;return(0,w.tZ)(At.k,{progress:t,breakpoint:this.breakpoint,positionBottom:e})}renderImageRenderer(){const{cardPreview:e,metadata:{mediaType:t="unknown"}={},alt:i,resizeMode:r,onDisplayImage:n,nativeLazyLoad:s,forceSyncDisplay:a}=this.props;return!!e&&(0,w.tZ)(st,{cardPreview:e,mediaType:t,alt:i,resizeMode:r,onDisplayImage:n,onImageLoad:this.onImageLoad,onImageError:this.onImageError,nativeLazyLoad:s,forceSyncDisplay:a})}renderTickBox(){const{selected:e}=this.props;return(0,w.tZ)(Lt,{selected:e})}renderMediaTypeIcon(e,t){const{metadata:i}=this.props,{mediaType:r,mimeType:n,name:s}=i||{};return(0,w.tZ)(Kt,{breakpoint:this.breakpoint,hasTitleBox:e},(0,w.tZ)(x.q,{testId:"media-card-file-type-icon",mediaType:r,mimeType:n,name:s}),t)}renderActionsBar(){const{disableOverlay:e,actions:t,metadata:i}=this.props,r=i&&t?it(t,i):[];return e||!t||0===t.length?null:(0,w.tZ)(qt,{actions:r})}}mi.displayName="CardViewBase",(0,n.Z)(mi,"defaultProps",{appearance:"auto"});const vi=(0,o.Z)({onClick:(0,te.Jo)({eventType:"ui",action:"clicked",actionSubject:"mediaCard",attributes:{}})})(mi),fi=()=>{if("undefined"!=typeof window&&void 0!==window.document)return window.document},gi=e=>(t,i)=>{for(let r of t)if(r.isIntersecting){e(),i.disconnect();break}},bi=({onVisible:e,cardEl:t,children:i})=>((0,s.useEffect)((()=>{let i;try{i=new IntersectionObserver(gi(e),{root:fi(),rootMargin:"900px"})}catch(r){i=new IntersectionObserver(gi(e),{root:null,rootMargin:"900px"})}return t&&i.observe(t),()=>{i.disconnect()}}),[t,e]),s.createElement(s.Fragment,null,i)),wi=({cardEl:e,onVisible:t,children:i})=>"undefined"==typeof IntersectionObserver?s.createElement(s.Fragment,null,i):s.createElement(bi,{cardEl:e,onVisible:t},i);const yi=e=>"px"===e.substr(-2)&&!isNaN(+e.slice(0,-2)),xi=(e,t)=>{const i=window.devicePixelRatio>1||window.matchMedia&&window.matchMedia("(-webkit-min-device-pixel-ratio: 1.5), (min--moz-device-pixel-ratio: 1.5), (-o-min-device-pixel-ratio: 3/2), (min-resolution: 1.5dppx)").matches?2:1,r=t.dimensions&&t.dimensions[e]||"";return(0,Qe.v)(r)&&t.element?(0,tt.z)(t.element,e)*i:"number"==typeof r?r*i:yi(`${r}`)?parseInt(`${r}`,10)*i:Xe.tN[e]*i};var Ei=i(737001),Ci=i(629413),Si=i(608259),Ii=i(791306);class Zi extends Si.LRUMap{constructor(e){super(e),this.eventEmitter=new Ii.EventEmitter2}shift(){const e=super.shift();return this.eventEmitter.emit("shift",e),e}on(e,t){this.eventEmitter.on(e,t)}}class Ri{constructor(e){this.cache=new Zi(e),this.cache.on("shift",(e=>{e&&e[1].dataURI&&URL.revokeObjectURL(e[1].dataURI)}))}has(e){return!!this.cache.find(e)}get(e){return this.cache.get(e)}set(e,t){this.cache.set(e,t)}remove(e){const t=this.cache.delete(e);t&&URL.revokeObjectURL(t.dataURI)}}const ki=(e,t)=>[e,t||"crop"].join("-");const Ti=new class{constructor(e){(0,n.Z)(this,"get",((e,t)=>{const i=ki(e,t);return this.previewCache.get(i)})),(0,n.Z)(this,"set",((e,t,i)=>{const r=ki(e,t);this.previewCache.set(r,i)})),(0,n.Z)(this,"remove",((e,t)=>{const i=ki(e,t);this.previewCache.remove(i)})),this.previewCache=e}}(new Ri(50));var Bi=i(932125),$i=i(97077);const Ai=async e=>{try{return{dataURI:await(async e=>new Promise(((t,i)=>{const r=URL.createObjectURL(e),n=document.createElement("video");n.preload="metadata",n.src=r,n.muted=!0,n.play().catch((()=>i(new Error("failed to play video")))),n.addEventListener("timeupdate",(function e(){if(n.removeEventListener("timeupdate",e),n.pause(),URL.revokeObjectURL(r),!n.videoWidth&&!n.videoHeight)return i(new Error("error retrieving video dimensions"));const s=document.createElement("canvas");s.width=n.videoWidth,s.height=n.videoHeight;const a=s.getContext("2d");if(!a)return i(new Error("error creating canvas context"));a.drawImage(n,0,0,s.width,s.height);const o=s.toDataURL("image/jpeg",.85);t(o)})),n.addEventListener("error",(()=>{i(new Error("failed to load video")),URL.revokeObjectURL(r)}))})))(e),orientation:1,source:"local"}}catch(t){throw new oi.go("local-preview-video",t instanceof Error?t:void 0)}},Di=async e=>{let t;try{t=(await e).value}catch(i){throw new oi.go("local-preview-rejected",i instanceof Error?i:void 0)}if("string"==typeof t)return{dataURI:t,orientation:1,source:"local"};if(t instanceof Blob){const{type:e}=t;switch((0,Bi.L4)(e)){case"image":return(async e=>{try{const t=await(0,$i.T8)(e);return{dataURI:URL.createObjectURL(e),orientation:t,source:"local"}}catch(i){throw new oi.go("local-preview-image",i instanceof Error?i:void 0)}})(t);case"video":return Ai(t)}}throw new oi.go("local-preview-unsupported")},Pi=e=>"number"==typeof e||yi(`${e}`),Fi=(e,t)=>{if(!e||!t)return!1;const i=Pi(e)&&Pi(t),r=(0,Qe.v)(e)&&(0,Qe.v)(t);return i||r},Mi=(e,t)=>{if(e&&t&&Fi(e.width,t.width)&&Fi(e.height,t.height)){const i=parseInt(`${e.width}`,10)<parseInt(`${t.width}`,10),r=parseInt(`${e.height}`,10)<parseInt(`${t.height}`,10);return i||r}return!1};var Oi=i(265139);const Ni=(e,t,i)=>{const r="size"in e&&!!e.size,{mediaType:n}="mediaType"in e&&e||{},{mimeType:s}="mimeType"in e&&e||{},a=!!n&&(0,Oi.dw)(n,i),o=!t&&(0,u.jL)(e)&&(e=>"image"===e||"video"===e)(n)&&!!s&&(0,Ci.PU)(s),l=(0,u.mo)(e);return{hasFilesize:r,isPreviewable:a,hasPreview:o||l,isSupportedByBrowser:!!s&&(0,Ci.PU)(s)}},Li=(e,t,i)=>{const r=t=>(0,te.LO)(t,e);switch(t){case"cache-hit":r((0,te.np)(i));break;case"remote-success":r((0,te.C2)(i))}},Ui=(e,t)=>{if(!e)return;const i=parseInt(`${null==e?void 0:e.width}`,10),r=parseInt(`${null==t?void 0:t.width}`,10),n=parseInt(`${null==e?void 0:e.height}`,10),s=parseInt(`${null==t?void 0:t.height}`,10);return{width:((r-i)/i*100).toFixed(2),height:((s-n)/n*100).toFixed(2)}},_i=Ti.get,zi=Ti.remove,ji=e=>"mimeType"in e&&(0,Ci.PU)(e.mimeType)&&(0,u.jL)(e)?e.preview:void 0,Wi=(e,t,i,n)=>{let s;switch(i.source){case"local":s="cache-local";break;case"remote":s="cache-remote";break;case"ssr-server":s="cache-ssr-server";break;case"ssr-client":s="cache-ssr-client";break;default:s=i.source}const a=n?(0,Ei.NI)(i.dataURI,n):i.dataURI;return Ti.set(e,t,(0,r.Z)((0,r.Z)({},i),{},{source:s,dataURI:a})),(0,r.Z)((0,r.Z)({},i),{},{dataURI:a})},Vi=e=>["ssr-server","cache-ssr-server"].includes(e.source),Gi=e=>["ssr-client","cache-ssr-client"].includes(e.source),Hi=e=>"ssr-data"===e.source,qi=async(e,t,i,n,s,a)=>{const o=await(async(e,t,i,r)=>{try{const n=await e.getImage(t,i,void 0,void 0,r);return{dataURI:URL.createObjectURL(n),orientation:1,source:"remote"}}catch(n){throw new oi.Jj("remote-preview-fetch",n instanceof Error?n:void 0)}})(e,t,n,a);return Wi(t,n.mode,(0,r.Z)((0,r.Z)({},o),{},{dimensions:i}),s)},Ji=e=>{switch(e){case"processed":return"succeeded";case"processing":return"running";case"failed-processing":return"failed"}},Ki=(e,t)=>{return(0,h.J3)(e)?t&&!(0,u.f6)(t)?{id:(i=t).id,name:i.name,size:i.size,mimeType:i.mimeType,createdAt:i.createdAt,mediaType:i.mediaType,processingStatus:Ji(i.status)}:{id:e.id}:{id:e.mediaItemType,name:e.name||e.dataURI,mediaType:"image"};var i},Yi=(0,s.lazy)((async()=>{const{InlinePlayer:e}=await Promise.all([i.e(61769),i.e(78248),i.e(11216),i.e(89990),i.e(61201),i.e(90211),i.e(58516)]).then(i.bind(i,984138));return{default:e}})),Xi=e=>e.map((e=>{return"string"==typeof(t=e)?`'${t}'`:"object"==typeof t?JSON.stringify(t):void 0===t?"undefined":t;var t})).join(",");function Qi(e=window){const t="__MEDIA_INTERNAL";return e[t]||(e[t]={}),e[t]}function er(e=window){const t=Qi(e),i="mediaCardSsr";return t[i]||(t[i]={}),t[i]}const tr=e=>e?`-${e}`:"",ir=({id:e,collectionName:t,occurrenceKey:i})=>`${e}${tr(t)}${tr(i)}`,rr=(e,t,i,r,n=window)=>{er(n)[e]={dataURI:t,dimensions:i,error:r}},nr=(e,t,i,r)=>{const n=((e,...t)=>`(${e.toString()})(${Xi(t)});`)(rr,ir(e),t,i,r);return`(function(){\n  ${[er.toString(),Qi.toString(),n].join(";")}\n})();\n`},sr=({dataURI:e,identifier:t,dimensions:i,error:r})=>s.createElement("script",{dangerouslySetInnerHTML:{__html:nr(t,e,i,r)}}),ar=(e,t,i)=>{const r=((e,t,i)=>(0,y.OC)("fetchFileStateAfterUpload",i)?((e,{isPreviewable:t,hasPreview:i})=>{switch(e){case"uploading":case"failed-processing":case"error":case"processing":return e;case"processed":return t&&i?"loading-preview":"complete";default:return"loading"}})(e,t):((e,{hasFilesize:t,isPreviewable:i,hasPreview:r})=>{switch(e){case"uploading":case"failed-processing":case"error":return e;case"processing":return t?i?"processing":"complete":"processing";case"processed":return i&&r?"loading-preview":"complete";default:return"loading"}})(e,t))(e.status,Ni(e,t,i),i),n="error"===r&&(0,u.f6)(e)?new oi.Rq("error-file-state",new Error(e.message)):void 0;return{fileState:e,status:r,progress:"uploading"===r&&"uploading"===e.status?e.progress:1,error:n}};let or;!function(e){e.Action="pointer",e.NotReady="wait"}(or||(or={}));var lr=i(253851),cr=i(849278),dr=i(907086);const pr="@atlaskit/media-card",ur="74.6.1";let hr;const mr=e=>{if(!hr){const e={platform:{component:"media-card"},type:lr.Z.Experience,performanceType:lr.R.InlineResult,featureFlags:te.s};hr=new cr.I("media-card-render",e)}return hr.getInstance(e)},vr=(e,t)=>{mr(e).success({metadata:(0,r.Z)((0,r.Z)({},t),{},{packageName:pr,packageVersion:ur,mediaEnvironment:(0,dr.rl)(),mediaRegion:(0,dr.ro)()})})},fr=(e,t)=>{mr(e).failure({metadata:(0,r.Z)((0,r.Z)({},t),{},{packageName:pr,packageVersion:ur,mediaEnvironment:(0,dr.rl)(),mediaRegion:(0,dr.ro)()})})};class gr extends s.Component{constructor(e){super(e),(0,n.Z)(this,"internalOccurrenceKey",(performance.now().toString(36)+Math.random().toString(36)).replace(/\./g,"")),(0,n.Z)(this,"hasBeenMounted",!1),(0,n.Z)(this,"fileStateFlags",{wasStatusUploading:!1,wasStatusProcessing:!1}),(0,n.Z)(this,"ssrReliability",{server:{status:"unknown"},client:{status:"unknown"}}),(0,n.Z)(this,"timeElapsedTillCommenced",performance.now()),(0,n.Z)(this,"traceContext",{traceId:(0,d.QB)(8)}),(0,n.Z)(this,"getImageURLParams",(({collectionName:e})=>(0,r.Z)((0,r.Z)({collection:e,mode:(0,p.b)(this.props.resizeMode)},this.requestedDimensions),{},{allowAnimated:!0}))),(0,n.Z)(this,"getMediaBlobUrlAttrs",((e,t)=>{const{id:i,collectionName:n}=e,{originalDimensions:s,contextId:a,alt:o}=this.props,{mimeType:l,name:c,size:d}=Ki(e,t);return a?(0,r.Z)((0,r.Z)({id:i,collection:n,contextId:a,mimeType:l,name:c,size:d},s||this.requestedDimensions),{},{alt:o}):void 0})),(0,n.Z)(this,"getCardPreviewParams",((e,t)=>{const{isBannedLocalPreview:i}=this.state,{id:r}=e,{dimensions:n={},mediaClient:s,createAnalyticsEvent:a}=this.props;return{mediaClient:s,id:r,dimensions:n,onLocalPreviewError:this.fireNonCriticalErrorEvent,filePreview:i?void 0:ji(t),isRemotePreviewReady:(0,u.mo)(t),imageUrlParams:this.getImageURLParams(e),mediaBlobUrlAttrs:this.getMediaBlobUrlAttrs(e,t),createAnalyticsEvent:a,featureFlags:this.props.featureFlags,traceContext:this.traceContext}})),(0,n.Z)(this,"setCacheSSRPreview",(e=>{this.fetchAndCacheRemotePreview(e).catch((()=>{}))})),(0,n.Z)(this,"refetchSSRPreview",(async e=>{try{const t=await this.fetchAndCacheRemotePreview(e);this.safeSetState({cardPreview:t})}catch(t){const e=(0,oi.CV)("remote-preview-fetch-ssr",t,!0);this.fireNonCriticalErrorEvent(e)}})),(0,n.Z)(this,"resolveUpfrontPreview",(async e=>{const t=(0,r.Z)({},this.props.dimensions);try{const i=await this.fetchAndCacheRemotePreview(e),{dimensions:r}=this.props;!Mi(t,r)?this.safeSetState({cardPreview:i,wasResolvedUpfrontPreview:!0}):this.safeSetState({wasResolvedUpfrontPreview:!0})}catch(i){this.safeSetState({wasResolvedUpfrontPreview:!0})}})),(0,n.Z)(this,"fetchAndCacheRemotePreview",(e=>{const{mediaClient:t,dimensions:i={}}=this.props;return qi(t,e.id,i,this.getImageURLParams(e),this.getMediaBlobUrlAttrs(e))})),(0,n.Z)(this,"resolvePreview",(async(e,t)=>{try{const i=this.getCardPreviewParams(e,t),n=await(async({mediaClient:e,id:t,dimensions:i={},filePreview:n,onLocalPreviewError:s,isRemotePreviewReady:a,imageUrlParams:o,mediaBlobUrlAttrs:l,createAnalyticsEvent:c,featureFlags:d,traceContext:p})=>{const u=o.mode,h=Ti.get(t,u),m=Mi(null==h?void 0:h.dimensions,i);if(h&&!m)return(0,y.OC)("memoryCacheLogging",d)&&c&&Li(c,"cache-hit",{fileId:t,prevDimensions:h.dimensions,currentDimensions:i,source:h.source}),h;try{if(n){const e=await Di(n);return Wi(t,u,(0,r.Z)((0,r.Z)({},e),{},{dimensions:i}),l)}}catch(f){if((!(0,oi.G4)(f)||(0,oi.G4)(f)&&!a)&&s&&s(f),!a)throw f}if(!a)throw new oi.Rq("remote-preview-not-ready");const v=await qi(e,t,i,o,l,p);return(0,y.OC)("memoryCacheLogging",d)&&c&&Li(c,"remote-success",{fileId:t,prevDimensions:null==h?void 0:h.dimensions,currentDimensions:i,dimensionsPercentageDiff:Ui(null==h?void 0:h.dimensions,i),source:v.source}),v})(i);this.safeSetState({cardPreview:n})}catch(i){const e=(0,oi.CV)("preview-fetch",i);(0,oi.oH)(e)?this.safeSetState({isBannedLocalPreview:!0}):this.safeSetState({status:"error",error:e})}})),(0,n.Z)(this,"getPerformanceAttributes",(()=>{const{timeElapsedTillCommenced:e}=this,t=performance.now();return{overall:{durationSincePageStart:t,durationSinceCommenced:e&&t-e}}})),(0,n.Z)(this,"logSSRImageError",(e=>{if(e){const t=(0,r.Z)({status:"fail"},(0,te.dg)(new oi.gK(e.source)));Gi(e)&&(this.ssrReliability.client=t),Hi(e)&&(this.ssrReliability.server=t,this.ssrReliability.client=t)}})),(0,n.Z)(this,"onImageError",(e=>{this.logSSRImageError(e);const{cardPreview:t}=this.state;if((null==e?void 0:e.dataURI)!==(null==t?void 0:t.dataURI))return;const i=new oi.gK(null==e?void 0:e.source),r=e&&["local","cache-local"].includes(e.source);const n=e&&(Gi(e)||Hi(e));if(r||n){const e={cardPreview:void 0};r&&(e.isBannedLocalPreview=!0,this.fireNonCriticalErrorEvent(i));const{identifier:t,resizeMode:n}=this.props,s=(0,p.b)(n);(0,h.J3)(t)&&zi(t.id,s),this.safeSetState(e)}else this.safeSetState({status:"error",error:i})})),(0,n.Z)(this,"onImageLoad",(e=>{e&&(Gi(e)&&"unknown"===this.ssrReliability.client.status&&(this.ssrReliability.client={status:"success"}),Hi(e)&&"unknown"===this.ssrReliability.server.status&&(this.ssrReliability.server={status:"success"},this.ssrReliability.client={status:"success"}));const{cardPreview:t}=this.state;(null==e?void 0:e.dataURI)===(null==t?void 0:t.dataURI)&&this.safeSetState({previewDidRender:!0})})),(0,n.Z)(this,"fireCopiedEvent",(()=>{const{createAnalyticsEvent:e}=this.props,{cardRef:t}=this.state;t&&e&&((e,t,i)=>{if("function"==typeof window.getSelection){var r;const n=window.getSelection();null!=n&&null!==(r=n.containsNode)&&void 0!==r&&r.call(n,i,!0)&&(0,te.LO)((0,te.Jn)(t),e)}})(e,this.metadata.id,t)})),(0,n.Z)(this,"fireScreenEvent",(()=>{const{createAnalyticsEvent:e}=this.props;e&&((e,t)=>{(0,te.LO)((0,te.De)(t),e)})(e,this.fileAttributes)})),(0,n.Z)(this,"fireNonCriticalErrorEvent",(e=>{const{createAnalyticsEvent:t}=this.props,{fileState:i}=this.state;t&&((e,t,i,r,n=new oi.Rq("missing-error-data"),s,a)=>{const o=(0,te.Ln)(t,i,n,r,s,a);(0,te.LO)(o,e)})(t,this.state.status,this.fileAttributes,this.ssrReliability,e,this.traceContext,null==i?void 0:i.metadataTraceContext)})),(0,n.Z)(this,"safeSetState",(e=>{this.hasBeenMounted&&this.setState(((e,t)=>i=>{return e.status&&(r=i.status,["complete","error","failed-processing"].includes(r))&&"complete"!==e.status?(e.error&&t(e.error),i):e;var r})(e,this.fireNonCriticalErrorEvent))})),(0,n.Z)(this,"unsubscribe",(()=>{this.subscription&&this.subscription.unsubscribe(),this.hasBeenMounted&&this.setState({isBannedLocalPreview:!1})})),(0,n.Z)(this,"onCardViewClick",((e,t)=>{const{identifier:i,useInlinePlayer:r,shouldOpenMediaViewer:n}=this.props,{cardPreview:s}=this.state,{metadata:a}=this;if(this.onClick(e,t),!a)return;const o=a&&"video"===a.mediaType;if(r&&o&&s)this.setState({isPlayingFile:!0,shouldAutoplay:!0});else if(n){let e;e=(0,h.J3)(i)?{id:i.id,mediaItemType:"file",collectionName:i.collectionName,occurrenceKey:i.occurrenceKey}:{mediaItemType:"external-image",dataURI:i.dataURI,name:i.name},this.setState({mediaViewerSelectedItem:e})}})),(0,n.Z)(this,"onInlinePlayerError",(()=>{this.setState({isPlayingFile:!1})})),(0,n.Z)(this,"setRef",(e=>{e&&this.setState({cardRef:e})})),(0,n.Z)(this,"renderInlinePlayer",(()=>{const{identifier:e,mediaClient:t,dimensions:i,selected:r,testId:n,originalDimensions:a,onFullscreenChange:o}=this.props,{shouldAutoplay:l,cardPreview:c}=this.state,d=this.renderCard(!1,"loading",!1);return s.createElement(s.Suspense,{fallback:d},s.createElement(Yi,{mediaClient:t,dimensions:i,originalDimensions:a,identifier:e,autoplay:!!l,onFullscreenChange:o,onError:this.onInlinePlayerError,onClick:this.onClick,selected:r,ref:this.setRef,testId:n,cardPreview:c}))})),(0,n.Z)(this,"onMediaViewerClose",(()=>{this.setState({mediaViewerSelectedItem:void 0})})),(0,n.Z)(this,"onDisplayImage",(()=>{const{identifier:e}=this.props;let t;t=(0,h.J3)(e)?{fileId:e.id,isUserCollection:e.collectionName===m.a1}:{fileId:e.dataURI,isUserCollection:!1},v.h.emit("media-viewed",(0,r.Z)({viewingLevel:"minimal"},t))})),(0,n.Z)(this,"renderMediaViewer",(()=>{const{mediaViewerSelectedItem:e}=this.state,{mediaClient:t,identifier:i,mediaViewerDataSource:r,contextId:n,featureFlags:o}=this.props;if(!e)return;const l=(0,h.J3)(i)&&i.collectionName||"",c=r||{list:[]};return a.createPortal(s.createElement(f.Z,{collectionName:l,dataSource:c,mediaClientConfig:t.config,selectedItem:e,onClose:this.onMediaViewerClose,contextId:n,featureFlags:o}),document.body)})),(0,n.Z)(this,"renderCard",((e=!0,t,i)=>{const{identifier:r,isLazy:n,appearance:a,resizeMode:o,dimensions:l,selectable:c,selected:d,disableOverlay:p,alt:u,testId:h,featureFlags:m,titleBoxBgColor:v,titleBoxIcon:f,ssr:g,useInlinePlayer:b,shouldOpenMediaViewer:w}=this.props,{mediaItemType:y}=r,{status:x,progress:E,cardPreview:C,error:S,cardRef:I,isCardVisible:Z}=this.state,{metadata:R}=this,{onCardViewClick:k,onDisplayImage:T,actions:B,onMouseEnter:$}=this,A=void 0===i?n:i,D=A&&!Z,P=!!g,F=((e,t,i,r,n)=>{if(!i&&(e||t))return!n&&(e||e&&t)?or.NotReady:"video"===n&&r&&e||t?or.Action:void 0})(!!b,!!w,"error"===x||"failed-processing"===x,!!this.state.cardPreview,R.mediaType),M=s.createElement(vi,{status:t||x,error:S,mediaItemType:y,metadata:R,cardPreview:C,alt:u,appearance:a,resizeMode:o,dimensions:l,actions:B,selectable:c,selected:d,onClick:e?k:void 0,onMouseEnter:e?$:void 0,disableOverlay:p,progress:E,onDisplayImage:e?T:void 0,innerRef:this.setRef,testId:h,featureFlags:m,titleBoxBgColor:v,titleBoxIcon:f,onImageError:e?this.onImageError:void 0,onImageLoad:e?this.onImageLoad:void 0,nativeLazyLoad:D,forceSyncDisplay:P,mediaCardCursor:F});return A?s.createElement(wi,{cardEl:I,onVisible:this.onCardInViewport},M):M})),(0,n.Z)(this,"storeSSRData",(()=>{var e;const{ssr:t,identifier:i}=this.props,{cardPreview:{dataURI:r}={}}=this.state;return(0,h.J3)(i)&&"server"===t&&s.createElement(sr,{identifier:i,dataURI:r,dimensions:this.requestedDimensions,error:"fail"===(null===(e=this.ssrReliability.server)||void 0===e?void 0:e.status)?this.ssrReliability.server:void 0})})),(0,n.Z)(this,"onCardInViewport",(()=>{this.setState({isCardVisible:!0})})),(0,n.Z)(this,"onClick",((e,t)=>{const{onClick:i}=this.props,{metadata:r}=this;if(i){i({event:e,mediaItemDetails:r},t)}})),(0,n.Z)(this,"onMouseEnter",(e=>{const{onMouseEnter:t}=this.props,{metadata:i}=this;if(t){t({event:e,mediaItemDetails:i})}}));let t,i="loading";const{identifier:o,resizeMode:l,ssr:c,mediaClient:g}=this.props;if((0,h.J3)(o)){const{id:e}=o,i=(0,p.b)(l);t=_i(e,i),!t&&c&&(t=this.getSSRPreview(c,o,g))}else if((0,h.Yk)(o)){this.fireCommencedEvent(),i="loading-preview";const{dataURI:e}=o;t={dataURI:e,orientation:1,source:"external"}}const b=!this.props.isLazy||!!t&&!(Gi(w=t)||Vi(w));var w;this.state={status:i,isCardVisible:b,isPlayingFile:!1,shouldAutoplay:!1,cardPreview:t,cardRef:null,isBannedLocalPreview:!1,previewDidRender:!1,error:undefined,wasResolvedUpfrontPreview:!1}}getSSRPreview(e,t,i){var n,s;if(this.ssrData=(e=>{const t=er();if(t)return t[ir(e)]})(t),null!==(n=this.ssrData)&&void 0!==n&&n.error&&(this.ssrReliability.server=(0,r.Z)({status:"fail"},this.ssrData.error)),null!==(s=this.ssrData)&&void 0!==s&&s.dataURI)return{dataURI:this.ssrData.dataURI,source:"ssr-data"};try{return((e,t,i,r,n)=>{let s;try{const a=t.getImageUrlSync(i,r);return s=n?(0,Ei.NI)(a,n):a,{dataURI:s,source:"client"===e?"ssr-client":"ssr-server",orientation:1}}catch(a){const t="server"===e?"ssr-server-uri":"ssr-client-uri";throw new oi.LD(t,a instanceof Error?a:void 0)}})(e,i,t.id,this.getImageURLParams(t),this.getMediaBlobUrlAttrs(t))}catch(a){this.ssrReliability[e]=(0,r.Z)({status:"fail"},(0,te.dg)(a))}}componentDidMount(){var e;this.hasBeenMounted=!0;const{isCardVisible:t,cardPreview:i}=this.state,{identifier:r,ssr:n,dimensions:s}=this.props;var a;(t&&(0,h.J3)(r)&&(this.updateStateForIdentifier(r),i||this.resolveUpfrontPreview(r)),t&&n&&i&&(0,h.J3)(r))&&(Gi(i)&&this.setCacheSSRPreview(r),Hi(i)&&Mi(null===(a=this.ssrData)||void 0===a?void 0:a.dimensions,s)&&this.refetchSSRPreview(r));null===(e=fi())||void 0===e||e.addEventListener("copy",this.fireCopiedEvent)}componentDidUpdate(e,t){const{mediaClient:i,identifier:r,dimensions:n}=e,{isCardVisible:s,cardPreview:a}=t,{mediaClient:o,identifier:l,dimensions:c,featureFlags:d,useInlinePlayer:m,disableOverlay:v,resizeMode:f,ssr:g}=this.props,{isCardVisible:b,cardPreview:w,status:x,fileState:E,isBannedLocalPreview:C,previewDidRender:S,isPlayingFile:I,wasResolvedUpfrontPreview:Z}=this.state,R=(0,h.ch)(r,l),k=!s&&b,T=!!a&&Gi(a)&&!w,B=i!==o,$=(0,p.b)(f);if(this.updateFileStateFlag(E),(0,h.Yk)(l)&&R){this.fireCommencedEvent();const{dataURI:e}=l;this.setState({status:"loading-preview",cardPreview:{dataURI:e,orientation:1,source:"external"},isCardVisible:!0})}(0,h.J3)(l)&&(k||this.subscription&&(B||R))&&this.updateStateForIdentifier(l),this.state.status!==t.status&&(this.fireOperationalEvent(),("complete"===this.state.status||"video"===this.fileAttributes.fileMediatype&&w&&"processing"===this.state.status)&&this.fireScreenEvent()),(0,h.J3)(l)&&(k||"client"===g&&T)&&!w&&!Z?this.resolveUpfrontPreview(l):(0,h.J3)(l)&&E&&(({status:e,fileState:t,prevDimensions:i,dimensions:r,identifier:n,fileImageMode:s,hasCardPreview:a,isBannedLocalPreview:o,featureFlags:l,wasResolvedUpfrontPreview:c})=>{const d=((e,{isPreviewable:t,hasPreview:i,isSupportedByBrowser:r})=>i&&t&&("complete"===e||"loading-preview"===e||"uploading"===e||"processing"===e&&r))(e,Ni(t,o,l)),p=Mi(i,r);return c&&d&&(!a||p)})({status:x,fileState:E,prevDimensions:n,dimensions:c,identifier:l,fileImageMode:$,featureFlags:d,hasCardPreview:!!w,isBannedLocalPreview:C,wasResolvedUpfrontPreview:Z})&&this.resolvePreview(l,E),k&&this.props.ssr&&w&&Gi(w)&&(0,h.J3)(l)&&this.setCacheSSRPreview(l),S&&["loading-preview","processing"].includes(x)&&(this.safeSetState({status:"complete"}),this.unsubscribe());const A="video"===this.fileAttributes.fileMediatype,D=E&&(0,u.vh)(E);A&&!I&&v&&m&&D&&(0,y.OC)("timestampOnVideo",this.props.featureFlags)&&this.setState({isPlayingFile:!0})}componentWillUnmount(){var e;this.hasBeenMounted=!1,this.unsubscribe(),null===(e=fi())||void 0===e||e.removeEventListener("copy",this.fireCopiedEvent)}updateStateForIdentifier(e){this.fireCommencedEvent(),this.subscribeInternalFile(e)}updateFileStateFlag(e){if(!e)return;const{status:t}=e;"processing"===t?this.fileStateFlags.wasStatusProcessing=!0:"uploading"===t&&(this.fileStateFlags.wasStatusUploading=!0)}subscribeInternalFile(e){const{mediaClient:t}=this.props,{isBannedLocalPreview:i}=this.state,{id:r,collectionName:n,occurrenceKey:s}=e;this.unsubscribe(),this.subscription=t.file.getFileState(r,{collectionName:n,occurrenceKey:s}).subscribe({next:e=>{const{featureFlags:t}=this.props,r=ar(e,i,t);this.safeSetState(r)},error:e=>{const t="uploading"===this.state.status?"upload":"metadata-fetch",i=new oi.Rq(t,e);this.safeSetState({error:i,status:"error"})}})}get requestedDimensions(){const{dimensions:e}=this.props,{cardRef:t}=this.state||{};return{width:xi("width",i={dimensions:e,element:t}),height:xi("height",i)};var i}get metadata(){var e;return Ki(this.props.identifier,null===(e=this.state)||void 0===e?void 0:e.fileState)}get fileAttributes(){var e,t;return(0,te.A7)(this.metadata,null===(e=this.state)||void 0===e||null===(t=e.fileState)||void 0===t?void 0:t.status)}fireOperationalEvent(){const{status:e,error:t,fileState:i}=this.state,{createAnalyticsEvent:n}=this.props;n&&((e,t,i,r,n,s=new oi.Rq("missing-error-data"),a,o)=>{const l=t=>(0,te.LO)(t,e);switch(t){case"complete":l((0,te.dl)(i,r,n,a,o));break;case"failed-processing":l((0,te.Iw)(i,r,n,a,o));break;case"error":l((0,te.rw)(i,r,s,n,a,o))}})(n,e,this.fileAttributes,this.getPerformanceAttributes(),this.ssrReliability,t,this.traceContext,null==i?void 0:i.metadataTraceContext),((e,t,i,n,s,a=new oi.Rq("missing-error-data"))=>{switch(t){case"complete":vr(e,{fileAttributes:i,ssrReliability:s,fileStateFlags:n});break;case"failed-processing":fr(e,{fileAttributes:i,failReason:"failed-processing",ssrReliability:s,fileStateFlags:n});break;case"error":fr(e,(0,r.Z)((0,r.Z)({fileAttributes:i},(0,te.dg)(a)),{},{request:(0,te.dO)(a),ssrReliability:s,fileStateFlags:n}))}})(this.internalOccurrenceKey,e,this.fileAttributes,this.fileStateFlags,this.ssrReliability,t)}fireCommencedEvent(){this.timeElapsedTillCommenced=performance.now();const{createAnalyticsEvent:e}=this.props;var t;e&&((e,t,i,r)=>{(0,te.LO)((0,te.DU)(t,i,r),e)})(e,this.fileAttributes,{overall:{durationSincePageStart:this.timeElapsedTillCommenced}},this.traceContext),t=this.internalOccurrenceKey,mr(t).start()}get actions(){const{actions:e=[],identifier:t,shouldEnableDownloadButton:i}=this.props,{status:r}=this.state,{metadata:n}=this;if((0,h.J3)(t)&&("failed-processing"===r||i)){return[{label:"Download",icon:s.createElement(c.default,{label:"Download"}),handler:()=>this.props.mediaClient.file.downloadBinary(t.id,n.name,t.collectionName)},...e]}return e}render(){const{isPlayingFile:e,mediaViewerSelectedItem:t}=this.state,i=s.createElement(s.Fragment,null,e?this.renderInlinePlayer():this.renderCard(),t?this.renderMediaViewer():null,this.storeSSRData());return this.props.intl?i:s.createElement(g.Z,{locale:"en"},i)}}gr.displayName="CardBase",(0,n.Z)(gr,"defaultProps",{appearance:"auto",resizeMode:"crop",isLazy:!0,disableOverlay:!1,featureFlags:{}});const br=(0,l.z)({packageVersion:"74.6.1",packageName:"@atlaskit/media-card",componentName:"mediaCard",component:"mediaCard"},{filterFeatureFlags:te.tH})((0,o.Z)()((0,b.ZP)(gr,{enforceContext:!1})))},654910:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});const r="new-file-experience-wrapper"},837159:(e,t,i)=>{"use strict";i.d(t,{W:()=>a});var r=i(866738),n=i(980663),s=i(129808);const a=({selected:e})=>`\n    ${n.G}\n\n    &::after {\n      content: '';\n      width: 100%;\n      height: 100%;\n      position: absolute;\n      top: 0;\n      box-sizing: border-box;\n      pointer-events: none;\n      ${r.E0}\n      ${e?(0,n.H)([s.a.Border]):""}\n    }\n  `},490132:(e,t,i)=>{"use strict";i.d(t,{Dl:()=>n,m4:()=>a,eR:()=>s});var r=i(676424);const n="\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n",s=((0,r.E0)(),(0,r.E0)(),(e="all")=>`\n  transition: ${e} .3s;\n`),a=(e,t)=>`rgba(${(e=>{const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?`${parseInt(t[1],16)},${parseInt(t[2],16)},${parseInt(t[3],16)}`:null})(e)}, ${t})`},874325:(e,t,i)=>{"use strict";i.d(t,{lA:()=>c,eZ:()=>d,ZU:()=>p});var r=i(321534),n=i(676424),s=i(171124),a=i(82708),o=i(837159),l=i(840181);const c="media-card-inline-player",d=({dimensions:e,breakpointSize:t="medium",shouldUsePointerCursor:i})=>r.iv`
  ${(0,a.pt)({breakpointSize:t})}
  ${(e=>e&&e.height?`height: ${(0,s.g)(e.height)}; max-height: 100%;`:"")(e)}
      ${(e=>e&&e.width?`width: ${(0,s.g)(e.width)}; max-width: 100%;`:"")(e)}
  cursor: ${i?"pointer":"default"};
`;d.displayName="CardViewWrapper";const p=({dimensions:e,selected:t})=>r.iv`
  width: ${(0,l.M)(e).width||"100%"};
  height: ${(0,l.M)(e).height||"auto"};
  overflow: hidden;
  border-radius: ${(0,n.E0)()}px;
  position: relative;
  max-width: 100%;
  max-height: 100%;

  ${(0,o.W)(t)}

  video {
    width: 100%;
    height: 100%;
  }
`;p.displayName="InlinePlayerWrapper"},542646:(e,t,i)=>{"use strict";let r;i.d(t,{Uo:()=>r,a6:()=>n,EY:()=>s}),function(e){e.SMALL="small",e.LARGE="large"}(r||(r={}));const n={[r.SMALL]:{fontSize:11,lineHeight:14,titleBox:{verticalPadding:4,horizontalPadding:8}},[r.LARGE]:{fontSize:14,lineHeight:22,titleBox:{verticalPadding:8,horizontalPadding:12}}},s=e=>2*(n[e].lineHeight+n[e].titleBox.verticalPadding)},65664:(e,t,i)=>{"use strict";i.d(t,{Wt:()=>s,hi:()=>a,Cj:()=>o,$g:()=>l,Oe:()=>c});var r=i(321534),n=i(131436);const s="media-card-play-button",a="play-icon-background",o=`\n  .${a} {\n    width: 56px;\n    height: 56px;\n  }\n`,l=r.iv`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: ${`var(--ds-icon-inverse, ${n.N0})`};
  span {
    position: absolute;
  }
`,c=r.iv`
  transition-property: width, height;
  transition-duration: 0.1s;
  position: absolute;
  width: ${48}px;
  height: ${48}px;
  background: ${`var(--ds-background-neutral-bold, ${n.xS})`};
  border-radius: 100%;
`},294416:(e,t,i)=>{"use strict";i.d(t,{k:()=>v});var r=i(122551),n=i(321534),s=i(866738),a=i(490132),o=i(131436),l=i(542646);const c={marginBottom:4},d={marginBottom:12};const p=({progress:e,breakpoint:t,positionBottom:i,showOnTop:r})=>`\n${s.E0}\noverflow: hidden;\nposition: absolute;\nwidth: 95%;\nleft: 2.5%;\nbackground-color: ${(0,a.m4)(o.N0,.8)};\nheight: 5px;\npadding: 1px;\nbox-sizing: border-box;\n\n::before {\n  content: '';\n  width: ${e}%;\n  height: 100%;\n  background-color: #44546F;\n  ${s.E0}\n  display: block;\n}\n${function(e,t,i,r=1){const n=e===l.Uo.SMALL?c:d,s=l.a6[e].titleBox.verticalPadding;return`\n    ${i?"top":"bottom"}: ${n.marginBottom*r+(t?s:(0,l.EY)(e))}px\n  `}(t,i,r)}\n`,u=e=>n.iv`
    ${p(e)}
  `;u.displayName="StyledProgressBar";const h=e=>{const{progress:t,breakpoint:i,positionBottom:r,showOnTop:s}=e;return(0,n.tZ)("div",{id:"styledBar",css:u({progress:t,breakpoint:i,positionBottom:r,showOnTop:s})})},m=e=>100*Math.min(1,Math.max(0,e||0)),v=({progress:e,breakpoint:t=l.Uo.SMALL,positionBottom:i=!1,showOnTop:n=!1})=>r.createElement(h,{progress:m(e),breakpoint:t,positionBottom:i,showOnTop:n})},793519:(e,t,i)=>{"use strict";i.d(t,{Gd:()=>h,U8:()=>m,mY:()=>v,Dl:()=>f,Nn:()=>g,gz:()=>b,lh:()=>w,u9:()=>y});var r=i(321534),n=i(866738),s=i(131436),a=i(404510),o=i(171124),l=i(893865),c=i(375170),d=i(65664),p=i(542646);const u=[[p.Uo.SMALL,599],[p.Uo.LARGE,1/0]],h=(e=0)=>{const[t]=u.find((([t,i])=>e<=i))||[p.Uo.SMALL];return t},m=(e=p.Uo.SMALL)=>{const t=p.a6[e];return`\n    font-size: ${t.fontSize}px;\n    line-height: ${t.lineHeight}px;\n  `},v=(e,t)=>{const{width:i,height:r}=e||{},{width:n,height:s}=(0,l.$0)(t);return`\n    width: ${(0,o.g)(i||n)};\n    max-width: 100%;\n    height: ${(0,o.g)(r||s)};\n    max-height: 100%;\n  `},f=(e,t)=>{const i=e?"":`var(--ds-shadow-raised, 0 1px 1px ${s.VG}, 0 0 1px 0 ${s.VG})`,r=[t?a.qR:"",i].filter(Boolean).join(", ");return r?`box-shadow: ${r};`:""},g=e=>e?`cursor: ${e};`:"",b=e=>e?`\n    &:hover .${d.Wt} {\n      ${d.Cj}\n    }\n  `:"",w=e=>e?`\n    &:hover .${c.j5} {\n      ${c.IA}\n    }\n  `:"",y=r.iv`
  display: flex;
  position: relative;
  max-width: 100%;
  width: 100%;
  height: 100%;
  max-height: 100%;
  overflow: hidden;
  ${n.E0}
`},375170:(e,t,i)=>{"use strict";i.d(t,{j5:()=>a,IA:()=>o,eZ:()=>l});var r=i(321534),n=i(490132),s=i(131436);const a="media-card-tickbox",o=`\n  background-color: var(--ds-background-input, ${s.N0});\n  color: var(--ds-icon-subtle, ${s.Y8});\n`,l=e=>r.iv`
  ${(0,n.eR)()}
  font-size: 14px;
  width: 14px;
  height: 14px;
  position: absolute;
  top: 7px;
  left: 7px;
  border-radius: 20px;
  color: transparent;
  /* Enforce dimensions and position of "tick" icon */
  span {
    display: block;
    svg {
      height: 14px;
    }
  }
  ${(e=>e?`background-color: var(--ds-icon-information, ${s.VY});\n      color: var(--ds-icon-inverse, white);`:"")(e)}
`;l.displayName="TickBoxWrapper"},373839:(e,t,i)=>{"use strict";i.d(t,{Rq:()=>r,go:()=>n,Jj:()=>s,LD:()=>a,gK:()=>o,eN:()=>l,oH:()=>c,G4:()=>d,CV:()=>p,dG:()=>u});class r extends Error{constructor(e,t){super(e),this.primaryReason=e,this.secondaryError=t,Object.setPrototypeOf(this,new.target.prototype),"captureStackTrace"in Error&&Error.captureStackTrace(this,new.target)}}class n extends r{constructor(e,t){super(e,t),this.primaryReason=e,this.secondaryError=t}}class s extends r{constructor(e,t){super(e,t),this.primaryReason=e,this.secondaryError=t}}class a extends r{constructor(e,t){super(e,t),this.primaryReason=e,this.secondaryError=t}}class o extends r{constructor(e){super((e=>{switch(e){case"cache-remote":return"cache-remote-uri";case"cache-local":return"cache-local-uri";case"external":return"external-uri";case"local":return"local-uri";case"remote":return"remote-uri";default:return"unknown-uri"}})(e))}}function l(e){return e instanceof r}const c=e=>e instanceof n,d=e=>l(e)&&"local-preview-unsupported"===e.primaryReason;const p=(e,t,i)=>l(t)?i&&t.primaryReason!==e?new r(e,t.secondaryError):t:new r(e,t),u=e=>e&&"upload"===e.primaryReason},411299:(e,t,i)=>{"use strict";i.d(t,{tH:()=>p,s:()=>u,A7:()=>h,De:()=>m,DU:()=>v,dl:()=>f,np:()=>g,C2:()=>b,dO:()=>C,dg:()=>S,rw:()=>I,Ln:()=>Z,Iw:()=>R,Jn:()=>k,LO:()=>T,Jo:()=>B});var r=i(991332),n=i(612972),s=i(388484),a=i(316864),o=i(632490),l=i(78651),c=i(373839);const d={newCardExperience:!0,captions:!0,timestampOnVideo:!0,observedWidth:!0,mediaInline:!1,folderUploads:!1,memoryCacheLogging:!0,fetchFileStateAfterUpload:!0},p=(0,a.q8)(d),u=(0,a.WH)(d),h=(e,t)=>({fileMediatype:e.mediaType,fileMimetype:e.mimeType,fileId:e.id,fileSize:e.size,fileStatus:t}),m=e=>({eventType:"screen",action:"viewed",actionSubject:"mediaCardRenderScreen",name:"mediaCardRenderScreen",attributes:{type:e.fileMediatype,fileAttributes:e}}),v=(e,t,i)=>({eventType:"operational",action:"commenced",actionSubject:"mediaCardRender",attributes:{fileAttributes:e,performanceAttributes:t,traceContext:{traceId:i.traceId}}}),f=(e,t,i,r,n)=>({eventType:"operational",action:"succeeded",actionSubject:"mediaCardRender",attributes:{fileAttributes:e,performanceAttributes:t,status:"success",ssrReliability:i,traceContext:r,metadataTraceContext:n}}),g=e=>({eventType:"operational",action:"cache-hit",actionSubject:"mediaCardCache",attributes:{cardPreviewAttributes:e}}),b=e=>({eventType:"operational",action:"Remote-success",actionSubject:"mediaCardCache",attributes:{cardPreviewAttributes:e}}),w=e=>(0,c.eN)(e)?e.primaryReason:"nativeError",y=e=>{if((0,c.eN)(e)&&e.secondaryError){const t=(0,n.r)(e.secondaryError);if("unknown"!==t)return t}return"nativeError"},x=e=>(0,c.eN)(e)&&e.secondaryError?e.secondaryError.message:e.message,E=e=>{var t;if((0,c.eN)(e)&&e.secondaryError&&(0,s.N)(e.secondaryError))return null===(t=e.secondaryError.metadata)||void 0===t?void 0:t.traceContext},C=e=>{if((0,c.eN)(e)&&e.secondaryError&&(0,s.N)(e.secondaryError))return e.secondaryError.metadata},S=(e,t)=>({failReason:w(e),error:y(e),errorDetail:x(e),metadataTraceContext:null!=t?t:E(e)}),I=(e,t,i,n,s,a)=>({eventType:"operational",action:"failed",actionSubject:"mediaCardRender",attributes:(0,r.Z)((0,r.Z)({fileAttributes:e,performanceAttributes:t,status:"fail"},S(i,a)),{},{request:C(i),ssrReliability:n,traceContext:s})}),Z=(e,t,i,n,s,a)=>({eventType:"operational",action:"nonCriticalFail",actionSubject:"mediaCardRender",attributes:(0,r.Z)((0,r.Z)({fileAttributes:t,status:"fail"},S(i,a)),{},{request:C(i),ssrReliability:n,traceContext:s,cardStatus:e})}),R=(e,t,i,r,n)=>({eventType:"operational",action:"failed",actionSubject:"mediaCardRender",attributes:{fileAttributes:e,performanceAttributes:t,status:"fail",failReason:"failed-processing",ssrReliability:i,traceContext:r,metadataTraceContext:n}}),k=e=>({eventType:"ui",action:"copied",actionSubject:"file",actionSubjectId:e,attributes:{}});function T(e,t){if(t){t(e).fire(o.Q)}}const B=e=>(0,l.Z)(o.Q)(e)},82708:(e,t,i)=>{"use strict";i.d(t,{M0:()=>n,pt:()=>a});var r=i(866738);const n=(e,t=s)=>{const i=parseInt(`${e}`,10),r=Object.keys(t),n=r[0];let a;return r.forEach((e=>{i<t[e]&&!a&&(a=e)})),a||n},s={small:173,medium:225,large:300,xlarge:1/0},a=({breakpointSize:e})=>{switch(e){case"small":return`\n        .title {\n          font-size: 12px;\n        }\n        .file-type-icon span {\n          // We need to use important here since we can't use the dimensions provided by the Icon component\n          ${(0,r.dp)("14px !important")}\n        }\n      `;case"medium":return`\n        .title {\n          font-size: 14px;\n        }\n        .file-type-icon span {\n          ${(0,r.dp)("16px !important")}\n        }\n      `;case"large":return`\n        .overlay {\n          padding: 24px;\n        }\n        .title {\n          font-size: 14px;\n        }\n        .file-size {\n          font-size: 14px;\n        }\n        .file-type-icon span {\n          ${(0,r.dp)("18px !important")}\n        }\n      `;case"xlarge":return`\n        border-radius: 2px;\n\n        .title {\n          font-size: 16px;\n        }\n\n        .file-size {\n          font-size: 14px;\n        }\n        \n        .wrapper, .img-wrapper {\n          border-radius: 2px;\n        }\n\n        .overlay {\n          padding: 24px;\n        }\n\n        .file-type-icon span {\n          ${(0,r.dp)("18px !important")}\n        }\n      `}}},893865:(e,t,i)=>{"use strict";i.d(t,{tN:()=>r,$0:()=>a});const r={width:156,height:125},n={width:435,height:125},s={width:300,height:300},a=e=>"image"===e?r:"square"===e?s:"horizontal"===e?n:r},83710:(e,t,i)=>{"use strict";i.d(t,{P:()=>l});var r=i(29298),n=i(321534),s=i(122551),a=i(144024);const o=n.iv`
  display: flex;
  color: ${"var(--ds-icon-warning, #ff991f)"};
`;class l extends s.Component{render(){const{size:e}=this.props;return(0,n.tZ)("div",{css:o},(0,n.tZ)(a.default,{label:"Error",size:e}))}}l.displayName="ErrorIcon",(0,r.Z)(l,"defaultProps",{size:"small"})},171124:(e,t,i)=>{"use strict";function r(e){return"string"==typeof e?e:`${e}px`}i.d(t,{g:()=>r})},656246:(e,t,i)=>{"use strict";i.d(t,{z:()=>r});const r=(e,t)=>{const i=e.getBoundingClientRect()[t];return Math.round(i)}},659004:(e,t,i)=>{"use strict";i.d(t,{v:()=>r});const r=e=>{const t=`${e}`;return"%"===t[t.length-1]&&!isNaN(+t.slice(0,-1))}},943566:(e,t)=>{var i;!function(){"use strict";var r={}.hasOwnProperty;function n(){for(var e=[],t=0;t<arguments.length;t++){var i=arguments[t];if(i){var s=typeof i;if("string"===s||"number"===s)e.push(i);else if(Array.isArray(i)){if(i.length){var a=n.apply(null,i);a&&e.push(a)}}else if("object"===s)if(i.toString===Object.prototype.toString)for(var o in i)r.call(i,o)&&i[o]&&e.push(o);else e.push(i.toString())}}return e.join(" ")}e.exports?(n.default=n,e.exports=n):void 0===(i=function(){return n}.apply(t,[]))||(e.exports=i)}()},727467:(e,t,i)=>{"use strict";i.d(t,{J3:()=>s,Yk:()=>a,ch:()=>o});var r=i(465829),n=i.n(r);const s=e=>"file"===e.mediaItemType,a=e=>"external-image"===e.mediaItemType,o=(e,t)=>s(e)&&s(t)?e.id!==t.id||e.collectionName!==t.collectionName||e.occurrenceKey!==t.occurrenceKey:!n()(e,t)},849646:(e,t,i)=>{"use strict";i.r(t),i.d(t,{CollectionFetcher:()=>w.Z,FileFetcherError:()=>b.y,FileFetcherImpl:()=>g.oT,MAX_RESOLUTION:()=>D.xQ,MediaClient:()=>y.Q,MediaStore:()=>r.Fq,MediaStoreError:()=>n.r,PollingError:()=>v.k,PollingFunction:()=>m.D,RECENTS_COLLECTION:()=>D.a1,RequestError:()=>u.L,StargateClient:()=>x.E,UploadController:()=>s.M,addFileAttrsToUrl:()=>$.NI,checkWebpSupport:()=>S,createMediaSubject:()=>Z.O,createMediaSubscribable:()=>A.g,createUrl:()=>h.uJ,getArtifactUrl:()=>o.l,getAttrsFromUrl:()=>$.Ny,getDimensionsFromBlob:()=>I.x,getMediaClient:()=>T.y,getMediaClientErrorReason:()=>l.r,getMediaEnvironment:()=>r.rl,getMediaRegion:()=>r.ro,getMediaTypeFromMimeType:()=>O,globalMediaEventEmitter:()=>B.h,imageResizeModeToFileImageMode:()=>f.b,isAbortedRequestError:()=>h.n0,isAudioMimeTypeSupportedByServer:()=>j,isDifferentIdentifier:()=>k.ch,isDocumentMimeTypeSupportedByBrowser:()=>L,isDocumentMimeTypeSupportedByServer:()=>z,isErrorFileState:()=>c.f6,isExternalImageIdentifier:()=>k.Yk,isFileFetcherError:()=>b.p,isFileIdentifier:()=>k.J3,isFinalFileState:()=>c.nT,isImageMimeTypeSupportedByBrowser:()=>N,isImageMimeTypeSupportedByServer:()=>_,isImageRemote:()=>E,isImageRepresentationReady:()=>c.mo,isMediaBlobUrl:()=>$.WD,isMediaClientError:()=>l.a,isMediaCollectionItemFullDetails:()=>a.oU,isMediaStoreError:()=>n.W,isMimeTypeSupportedByBrowser:()=>U,isMimeTypeSupportedByServer:()=>G,isPollingError:()=>v.C,isPreviewableFileState:()=>c.jL,isPreviewableType:()=>a.dw,isProcessedFileState:()=>c.vh,isProcessingFileState:()=>c.y2,isRateLimitedError:()=>h.no,isRequestError:()=>u.N,isUnknownMimeTypeSupportedByServer:()=>V,isUploadingFileState:()=>c.__,isVideoMimeTypeSupportedByServer:()=>W,mapMediaFileToFileState:()=>c.eS,mapMediaItemToFileState:()=>c.L5,mapResponseToBlob:()=>h.wc,mapResponseToJson:()=>h.nr,mapResponseToVoid:()=>h.pO,objectToQueryString:()=>$.nZ,request:()=>p.WY,safeUnsubscribe:()=>R,uploadFile:()=>d.c,withMediaClient:()=>T.b});var r=i(907086),n=i(140995),s=i(76230),a=i(265139),o=i(140776),l=i(612972),c=i(79680),d=i(289653),p=i(242494),u=i(388484),h=i(332691),m=i(374171),v=i(736250),f=i(795425),g=i(36516),b=i(920148),w=i(587616),y=i(309137),x=i(218435);const E=(e,t=window.location.origin)=>{if(URL&&URL.prototype){const i=new URL(e);return!!i.host&&i.origin!==t}return!0};let C;const S=()=>void 0!==C?Promise.resolve(C):new Promise((e=>{const t=new Image;t.src="data:image/webp;base64,UklGRi4AAABXRUJQVlA4TCEAAAAvAUAAEB8wAiMwAgSSNtse/cXjxyCCmrYNWPwmHRH9jwMA",t.onload=t.onerror=()=>{C=2===t.height,e(C)}}));var I=i(362716),Z=i(895524);const R=e=>{console.warn("safeUnsubscribe() is deprecated and will be removed in the next media-client major version"),setTimeout((()=>e&&e.unsubscribe()),0)};var k=i(727467),T=i(101054),B=i(700406),$=i(737001),A=i(933177),D=i(954889),P=i(394673),F=i(845274),M=i(488951);const O=P.L4,N=F.$k,L=F.k_,U=F.PU,_=M.$v,z=M.N5,j=M.p5,W=M.a6,V=M.ey,G=M.ld},612972:(e,t,i)=>{"use strict";function r(e){return e instanceof Object&&"attributes"in e&&e.attributes instanceof Object&&"reason"in e.attributes&&e instanceof Error}function n(e){return r(e)?e.attributes.reason:"unknown"}i.d(t,{a:()=>r,r:()=>n})},76230:(e,t,i)=>{"use strict";i.d(t,{M:()=>r});class r{constructor(){}setAbort(e){this.abortFunction=e}abort(){this.abortFunction&&this.abortFunction()}}},795425:(e,t,i)=>{"use strict";i.d(t,{b:()=>r});const r=e=>"stretchy-fit"===e?"full-fit":e},737001:(e,t,i)=>{"use strict";i.d(t,{WD:()=>s,Ny:()=>l,nZ:()=>c,NI:()=>d});var r=i(991332);const n="media-blob-url",s=e=>e.indexOf("media-blob-url=true")>-1,a=(e,t)=>{const i=e.get(t);return"string"!=typeof i||isNaN(parseInt(i))?void 0:parseInt(i)},o=(e,t)=>{const i=e.get(t);if(i)return decodeURIComponent(i)},l=e=>{const t=new URL(e).hash.replace("#",""),i=new URLSearchParams(t),r=i.get("id"),n=i.get("contextId");if(r&&n)return{id:r,contextId:n,collection:o(i,"collection"),alt:o(i,"alt"),height:a(i,"height"),width:a(i,"width"),size:a(i,"size"),name:o(i,"name"),mimeType:o(i,"mimeType")}},c=e=>Object.keys(e).filter((t=>void 0!==e[t]&&null!==e[t])).map((t=>{const i=e[t];if(null!=i)return`${encodeURIComponent(t)}=${encodeURIComponent(i.toString())}`})).join("&"),d=(e,t)=>{if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent))return e;const i={[n]:"true"},s=(0,r.Z)((0,r.Z)({},i),t);return`${e}#${c(s)}`}},632490:(e,t,i)=>{"use strict";i.d(t,{Q:()=>r});const r="media"},299774:(e,t,i)=>{"use strict";i.d(t,{z:()=>c});var r=i(991332),n=i(953307),s=i(122551),a=i(652459),o=i(533988),l=i(316864);const c=(e,t={})=>i=>{const c=(0,s.forwardRef)(((c,d)=>{const{featureFlags:p}=c,{filterFeatureFlags:u}=t,h=(0,s.useMemo)((()=>{const t={featureFlags:u&&p?((e,t)=>e.reduce(((e,i)=>(0,r.Z)((0,r.Z)({},e),{},{[i]:(0,l.OC)(i,t)})),{}))(u,p):p};return(0,r.Z)((0,r.Z)({},e),{},{[o.R]:(0,r.Z)({},t)})}),[u,p]);return s.createElement(a.Z,{data:h},s.createElement(i,(0,n.Z)({},c,{ref:d})))}));return c.displayName=`WithMediaAnalyticsContext(${i.displayName||i.name})`,c}},932125:(e,t,i)=>{"use strict";i.d(t,{L4:()=>s});var r=i(629413),n=i(172611);const s=e=>(e=>["application/x-archive","application/x-cpio","application/x-shar","application/x-iso9660-image","application/x-sbx","application/x-tar","application/x-bzip2","application/gzip","application/x-gzip","application/x-lzip","application/x-lzma","application/x-lzop","application/x-snappy-framed","application/x-xz","application/x-compress","application/zstd","application/x-7z-compressed","application/x-ace-compressed","application/x-astrotite-afa","application/x-alz-compressed","application/vnd.android.package-archive","application/x-freearc","application/x-arj","application/x-b1","application/vnd.ms-cab-compressed","application/x-cfs-compressed","application/x-dar","application/x-dgc-compressed","application/x-apple-diskimage","application/x-gca-compressed","application/java-archive","application/x-lzh","application/x-lzx","application/x-rar-compressed","application/x-stuffit","application/x-stuffitx","application/x-gtar","application/x-ms-wim","application/x-xar","application/zip","application/x-zoo","application/x-par2"].indexOf(e.toLowerCase())>-1)(e)?"archive":(0,r.$k)(e)||(0,n.$v)(e)?"image":(0,r.k_)(e)||(0,n.N5)(e)?"doc":(0,r.Fk)(e)||(0,n.p5)(e)?"audio":(0,r.AI)(e)||(0,n.a6)(e)?"video":"unknown"},629413:(e,t,i)=>{"use strict";i.d(t,{$k:()=>r,k_:()=>n,Fk:()=>s,AI:()=>a,PU:()=>o});const r=e=>["image/apng","image/bmp","image/gif","image/x-icon","image/jpeg","image/png","image/webp"].indexOf(e.toLowerCase())>-1,n=e=>"application/pdf"===e.toLowerCase(),s=e=>["audio/aac","audio/flac","audio/mp4","audio/mpeg","audio/ogg","audio/x-ogg","audio/wav","audio/x-wav"].indexOf(e.toLowerCase())>-1,a=e=>["video/mp4","video/quicktime"].indexOf(e.toLowerCase())>-1,o=e=>n(e)||r(e)||s(e)||a(e)},172611:(e,t,i)=>{"use strict";i.d(t,{$v:()=>r,N5:()=>n,p5:()=>s,a6:()=>a,ld:()=>o});const r=e=>["image/bmp","image/x-windows-bmp","application/dicom","image/gif","image/jpeg","image/jpg","image/jp_","application/jpg","application/x-jpg","image/png","application/png","application/x-png","application/vnd.adobe.photoshop","image/vnd.adobe.photoshop","image/photoshop","image/x-photoshop","image/psd","application/photoshop","application/psd","zz-application/zz-winassoc-psd","image/tiff","image/x-tif","image/x-tiff","application/tif","application/x-tif","application/tiff","application/x-tiff","image/svg+xml","image/heif","image/heif-sequence","image/heic","image/heic-sequence"].indexOf(e.toLowerCase())>-1,n=e=>["application/pdf","application/x-pdf","application/acrobat","applications/vnd.pdf","text/pdf","text/x-pdf","application/vnd.adobe.illustrator","application/vnd.ms-office","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.wordprocessingml.template","application/vnd.ms-word.document.macroenabled.12","application/vnd.ms-word.template.macroenabled.12","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.openxmlformats-officedocument.spreadsheetml.template","application/vnd.ms-excel.sheet.macroenabled.12","application/vnd.ms-excel.template.macroenabled.12","application/vnd.ms-excel.addin.macroenabled.12","application/vnd.ms-excel.sheet.macroenabled","application/vnd.ms-excel.template.macroenabled","application/vnd.ms-excel.addin.macroenabled","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.presentationml.template","application/vnd.openxmlformats-officedocument.presentationml.slideshow","application/vnd.ms-powerpoint.presentation.macroenabled.12","application/vnd.ms-powerpoint.template.macroenabled.12","application/vnd.ms-powerpoint.slideshow.macroenabled.12","application/vnd.sun.xml.writer","application/vnd.sun.xml.writer.template","application/vnd.sun.xml.draw","application/vnd.sun.xml.draw.template","application/vnd.oasis.opendocument.graphics","application/vnd.oasis.opendocument.presentation","application/x-vnd.oasis.opendocument.presentation","application/vnd.sun.xml.calc","application/vnd.sun.xml.calc.template","application/vnd.oasis.opendocument.spreadsheet","application/x-vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.spreadsheet-template","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.text-template","application/vnd.oasis.opendocument.text-master","application/x-vnd.oasis.opendocument.text","application/x-vnd.oasis.opendocument.text-template","application/x-vnd.oasis.opendocument.text-master","application/vnd.wordperfect","text/csv","text/x-diff","text/x-perl","text/x-python","text/x-ruby","text/rtf","text/richtext","text/plain","application/txt","application/rtf","application/x-rtf","application/postscript"].indexOf(e.toLowerCase())>-1,s=e=>["audio/aac","audio/x-hx-aac-adts","audio/vnd.dolby.dd-raw","audio/aiff","audio/x-aiff","audio/x-monkeys-audio","audio/x-ape","audio/basic","audio/flac","audio/mp4","audio/midi","audio/x-matroska","audio/x-mod","audio/mpeg","audio/ogg","audio/x-ogg","audio/x-pn-realaudio","audio/wav","audio/x-wav","audio/x-ms-wma"].indexOf(e.toLowerCase())>-1,a=e=>["video/3gpp","video/3gpp2","video/x-ms-asf","video/avi","video/msvideo","video/x-msvideo","video/x-dv","video/x-flv","video/m2ts","video/x-m4v","video/x-matroska","video/quicktime","video/mp4","video/mpeg","video/ogg","video/x-ogg","video/webm","video/x-ms-wmv"].indexOf(e.toLowerCase())>-1,o=e=>r(e)||n(e)||s(e)||a(e)||(e=>["binary/octet-stream"].indexOf(e.toLowerCase())>-1)(e)},594047:(e,t,i)=>{"use strict";i.d(t,{o8:()=>r,GM:()=>n,QB:()=>a});const r=e=>void 0===e,n=(e,t)=>Object.fromEntries(Object.entries(e).filter((([e,i])=>!t(i))));function s(e){return[...Array(2*e)].map((()=>Math.floor(16*Math.random()).toString(16))).join("")}function a(e){var t;let i;if(null!==(t=window)&&void 0!==t&&t.crypto)try{i=Array.from(window.crypto.getRandomValues(new Uint8Array(e))).map((e=>e.toString(16).padStart(2,"0"))).join("")}catch(r){i=s(e)}else i=s(e);return i}},603070:(e,t,i)=>{"use strict";i.d(t,{n:()=>n});var r=i(499253);function n(e){const t=parseInt(`${e}`,10),i=t<1048576?0:1;return r.format(t,{unitSeparator:" ",decimalPlaces:i}).toUpperCase()}},521777:(e,t,i)=>{"use strict";i.d(t,{j:()=>r});const r=(0,i(122551).createContext)("cozy")},982930:(e,t,i)=>{"use strict";i.d(t,{Z:()=>c});var r=i(415911),n=i(953307),s=i(122551),a=i(321534),o=i(437705),l=i(299548);const c=(0,s.memo)((0,s.forwardRef)(((e,t)=>{const{children:i,cssFn:s=o.Z,description:c,iconAfter:d,iconBefore:p,isDisabled:u=!1,isSelected:h=!1,onClick:m,testId:v,overrides:f,onMouseDown:g,shouldTitleWrap:b,shouldDescriptionWrap:w}=e,y=(0,r.Z)(e,["children","cssFn","description","iconAfter","iconBefore","isDisabled","isSelected","onClick","testId","overrides","onMouseDown","shouldTitleWrap","shouldDescriptionWrap"]),x=g;return i?(0,a.tZ)(l.Z,(0,n.Z)({},y,{overrides:f,iconBefore:p,iconAfter:d,isDisabled:u,isSelected:h,description:c,title:i,shouldTitleWrap:b,shouldDescriptionWrap:w,css:s({isSelected:h,isDisabled:u})}),(({children:e,className:i})=>(0,a.tZ)("button",(0,n.Z)({"data-testid":v},y,{className:i,ref:t,disabled:u,onClick:m,onMouseDown:x,type:"button"}),e))):null})))},992018:(e,t,i)=>{"use strict";i.d(t,{Z:()=>d});var r=i(415911),n=i(953307),s=i(122551),a=i(321534),o=i(437705),l=i(299548);const c=e=>{e.preventDefault()},d=(0,s.memo)((0,s.forwardRef)(((e,t)=>{let{component:i,cssFn:s=o.Z,isDisabled:d=!1,isSelected:p=!1,onClick:u,testId:h,children:m,description:v,iconAfter:f,iconBefore:g,overrides:b,onMouseDown:w,shouldTitleWrap:y,shouldDescriptionWrap:x}=e,E=(0,r.Z)(e,["component","cssFn","isDisabled","isSelected","onClick","testId","children","description","iconAfter","iconBefore","overrides","onMouseDown","shouldTitleWrap","shouldDescriptionWrap"]);const C=w;return i?(0,a.tZ)(l.Z,(0,n.Z)({},E,{overrides:b,description:v,iconAfter:f,title:m,iconBefore:g,isSelected:p,isDisabled:d,shouldTitleWrap:y,shouldDescriptionWrap:x,css:(0,a.iv)(s({isDisabled:d,isSelected:p}))}),(({children:e,className:r})=>(0,a.tZ)(i,(0,n.Z)({"data-testid":h},E,{className:r,ref:t,draggable:!1,onDragStart:c,onMouseDown:d?c:C,onClick:d?c:u,tabIndex:d?-1:void 0,"aria-disabled":d}),e))):null})))},800544:(e,t,i)=>{"use strict";i.d(t,{Z:()=>h});var r=i(415911),n=i(953307),s=i(122551),a=i(321534),o=i(437705),l=i(131436),c=i(171945);const d=c.$G.h100.lineHeight,p=c.$G.h100.size,u=(0,a.iv)({color:`var(--ds-text-subtle, ${l.hH})`,fontSize:p,fontWeight:"var(--ds-font-weight-bold, 700)",lineHeight:d/p,paddingBlock:"var(--ds-space-0, 0px)",paddingInline:"var(--ds-space-200, 16px)",textTransform:"uppercase"}),h=(0,s.memo)((e=>{let{children:t,testId:i,id:s,cssFn:l=o.Z}=e,c=(0,r.Z)(e,["children","testId","id","cssFn"]);return(0,a.tZ)("div",(0,n.Z)({css:[u,(0,a.iv)(l(void 0))],"data-testid":i,"data-ds--menu--heading-item":!0,id:s},c),t)}))},225385:(e,t,i)=>{"use strict";i.d(t,{Z:()=>d});var r=i(415911),n=i(953307),s=i(122551),a=i(321534),o=i(437705),l=i(299548);const c=e=>{e.preventDefault()},d=(0,s.memo)((0,s.forwardRef)(((e,t)=>{const{children:i,href:s,cssFn:d=o.Z,description:p,iconAfter:u,iconBefore:h,isDisabled:m=!1,isSelected:v=!1,onClick:f,testId:g,overrides:b,onMouseDown:w,shouldTitleWrap:y,shouldDescriptionWrap:x}=e,E=(0,r.Z)(e,["children","href","cssFn","description","iconAfter","iconBefore","isDisabled","isSelected","onClick","testId","overrides","onMouseDown","shouldTitleWrap","shouldDescriptionWrap"]),C=w;return i?(0,a.tZ)(l.Z,(0,n.Z)({},E,{overrides:b,iconBefore:h,iconAfter:u,isSelected:v,isDisabled:m,description:p,shouldTitleWrap:y,shouldDescriptionWrap:x,css:d({isSelected:v,isDisabled:m}),title:i}),(({children:e,className:i})=>(0,a.tZ)("a",(0,n.Z)({"data-testid":g},E,{className:i,href:m?void 0:s,draggable:!1,onDragStart:c,onMouseDown:m?c:C,onClick:m?c:f,"aria-current":v?"page":void 0,"aria-disabled":m,ref:t}),e))):null})))},824464:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});const r=i(47821).G},47821:(e,t,i)=>{"use strict";i.d(t,{G:()=>p});var r=i(122551),n=i(321534),s=i(38952),a=i(307271),o=i(52054),l=i(676424),c=i(519717);const d=l.ug.layer(),p=(0,r.memo)((({isOpen:e,id:t,offset:i,testId:l,trigger:p,content:u,onClose:h,boundary:m,rootBoundary:v="viewport",shouldFlip:f=!0,placement:g="auto",fallbackPlacements:b,popupComponent:w,autoFocus:y=!0,zIndex:x=d,shouldUseCaptureOnOutsideClick:E=!1})=>{const[C,S]=(0,r.useState)(null);return(0,n.tZ)(s.dK,null,(0,n.tZ)(a.s,null,(({ref:i})=>p({ref:t=>{t&&e&&("function"==typeof i?i(t):i.current=t,S(t))},"aria-controls":t,"aria-expanded":e,"aria-haspopup":!0}))),e&&(0,n.tZ)(o.Z,{zIndex:x},(0,n.tZ)(c.Z,{content:u,isOpen:e,placement:g,fallbackPlacements:b,boundary:m,rootBoundary:v,shouldFlip:f,offset:i,popupComponent:w,id:t,testId:l,onClose:h,autoFocus:y,shouldUseCaptureOnOutsideClick:E,triggerRef:C})))}))},675255:(e,t,i)=>{"use strict";i.d(t,{w:()=>n});var r=i(122551);const n=({children:e,update:t})=>{const i=(0,r.useRef)(!0);return(0,r.useLayoutEffect)((()=>{i.current?i.current=!1:t()}),[t]),r.createElement(r.Fragment,null,e)}},545385:(e,t,i)=>{"use strict";i.d(t,{C:()=>a});var r=i(122551),n=i(451598),s=i(437705);const a=({isOpen:e,onClose:t,popupRef:i,triggerRef:a,shouldUseCaptureOnOutsideClick:o})=>{(0,r.useEffect)((()=>{if(!e||!i)return s.Z;const r=e=>{t&&t(e)};return(0,n.Ev)(window,[{type:"click",listener:e=>{const{target:t}=e;if(!document.body.contains(t))return;const n=i&&i.contains(t),s=a&&a.contains(t);n||s||r(e)},options:{capture:o}},{type:"keydown",listener:e=>{const{key:t}=e;"Escape"!==t&&"Esc"!==t||r(e)}}])}),[e,t,i,a,o])}},358862:(e,t,i)=>{"use strict";i.d(t,{b:()=>o});var r=i(122551),n=i(450509),s=i.n(n),a=i(437705);const o=({popupRef:e,initialFocusRef:t})=>{(0,r.useEffect)((()=>{if(!e)return a.Z;const i={clickOutsideDeactivates:!0,escapeDeactivates:!0,initialFocus:t||e,fallbackFocus:e,returnFocusOnDeactivate:!0},r=s()(e,i);let n=requestAnimationFrame((()=>{n=null,r.activate()}));return()=>{null!=n&&(cancelAnimationFrame(n),n=null),r.deactivate()}}),[e,t])}},585201:(e,t,i)=>{"use strict";i.d(t,{Z:()=>v});var r=i(122551),n=i(321534);const s={center:(0,n.iv)({alignItems:"center"}),baseline:(0,n.iv)({alignItems:"baseline"}),start:(0,n.iv)({alignItems:"flex-start"}),end:(0,n.iv)({alignItems:"flex-end"})},a={start:(0,n.iv)({justifyContent:"flex-start"}),center:(0,n.iv)({justifyContent:"center"}),end:(0,n.iv)({justifyContent:"flex-end"}),"space-between":(0,n.iv)({justifyContent:"space-between"})},o={hug:(0,n.iv)({flexGrow:0}),fill:(0,n.iv)({width:"100%",flexGrow:1})},l=(0,n.iv)({flexWrap:"wrap"}),c={0:(0,n.iv)({gap:"var(--ds-space-0, 0px)"}),"025":(0,n.iv)({gap:"var(--ds-space-025, 2px)"}),"050":(0,n.iv)({gap:"var(--ds-space-050, 4px)"}),"075":(0,n.iv)({gap:"var(--ds-space-075, 6px)"}),100:(0,n.iv)({gap:"var(--ds-space-100, 8px)"}),150:(0,n.iv)({gap:"var(--ds-space-150, 12px)"}),200:(0,n.iv)({gap:"var(--ds-space-200, 16px)"}),250:(0,n.iv)({gap:"var(--ds-space-250, 20px)"}),300:(0,n.iv)({gap:"var(--ds-space-300, 24px)"}),400:(0,n.iv)({gap:"var(--ds-space-400, 32px)"}),500:(0,n.iv)({gap:"var(--ds-space-500, 40px)"}),600:(0,n.iv)({gap:"var(--ds-space-600, 48px)"}),800:(0,n.iv)({gap:"var(--ds-space-800, 64px)"}),1e3:(0,n.iv)({gap:"var(--ds-space-1000, 80px)"})},d={0:(0,n.iv)({rowGap:"var(--ds-space-0, 0px)"}),"025":(0,n.iv)({rowGap:"var(--ds-space-025, 2px)"}),"050":(0,n.iv)({rowGap:"var(--ds-space-050, 4px)"}),"075":(0,n.iv)({rowGap:"var(--ds-space-075, 6px)"}),100:(0,n.iv)({rowGap:"var(--ds-space-100, 8px)"}),150:(0,n.iv)({rowGap:"var(--ds-space-150, 12px)"}),200:(0,n.iv)({rowGap:"var(--ds-space-200, 16px)"}),250:(0,n.iv)({rowGap:"var(--ds-space-250, 20px)"}),300:(0,n.iv)({rowGap:"var(--ds-space-300, 24px)"}),400:(0,n.iv)({rowGap:"var(--ds-space-400, 32px)"}),500:(0,n.iv)({rowGap:"var(--ds-space-500, 40px)"}),600:(0,n.iv)({rowGap:"var(--ds-space-600, 48px)"}),800:(0,n.iv)({rowGap:"var(--ds-space-800, 64px)"}),1e3:(0,n.iv)({rowGap:"var(--ds-space-1000, 80px)"})},p=(0,n.iv)({display:"flex",boxSizing:"border-box",flexDirection:"row"}),u=(0,n.iv)({color:"var(--ds-text-subtle, #42526E)",marginBlock:"var(--ds-space-0, 0px)",marginInline:"calc(-1 * var(--ds-space-025, 2px))",pointerEvents:"none",userSelect:"none"}),h=({children:e})=>(0,n.tZ)("span",{css:u},e),m=(0,r.memo)((0,r.forwardRef)((({alignInline:e,alignBlock:t,shouldWrap:i=!1,spread:u,grow:m,space:v,rowSpace:f,separator:g,testId:b,children:w},y)=>{const x="string"==typeof g?(0,n.tZ)(h,null,g):g,E=x?r.Children.toArray(w).filter(Boolean).map(((e,t)=>(0,n.tZ)(r.Fragment,{key:t},g&&t>0?x:null,e))):w,C=u||e;return(0,n.tZ)("div",{css:[p,v&&c[v],C&&a[C],m&&o[m],t&&s[t],i&&l,f&&d[f]],"data-testid":b,ref:y},E)})));m.displayName="Inline";const v=m},396428:(e,t,i)=>{"use strict";i.d(t,{q:()=>r});const r="0.1.5"},592532:(e,t,i)=>{"use strict";i.d(t,{ur:()=>s,oY:()=>a,o5:()=>o,US:()=>l,sG:()=>c});var r=i(152129),n=i(508687);const s=()=>{if(!globalThis.__UFO_GLOBAL_EVENT_STREAM__){const e=(()=>{const e=[];return{__buffer_only__:!0,push:t=>{e.length<250&&e.push(t)},getStream:()=>e}})();globalThis.__UFO_GLOBAL_EVENT_STREAM__=e}return globalThis.__UFO_GLOBAL_EVENT_STREAM__},a=e=>{var t,i;!globalThis.__UFO_GLOBAL_EVENT_STREAM__||null!==(t=globalThis.__UFO_GLOBAL_EVENT_STREAM__)&&void 0!==t&&t.__buffer_only__?(null!==(i=globalThis.__UFO_GLOBAL_EVENT_STREAM__)&&void 0!==i&&i.__buffer_only__&&globalThis.__UFO_GLOBAL_EVENT_STREAM__.getStream().forEach(e.push.bind(e)),globalThis.__UFO_GLOBAL_EVENT_STREAM__=e):(0,r.hl)("Global Event Stream already initialised. Ignoring new event stream setup")},o=(e,t)=>({type:n.pp.SUBSCRIBE,payload:{experienceId:e,callback:t}}),l=(e,t)=>({type:n.pp.UNSUBSCRIBE,payload:{experienceId:e,callback:t}}),c=e=>({type:n.pp.EXPERIENCE_PAYLOAD,payload:e})},152129:(e,t,i)=>{"use strict";i.d(t,{b6:()=>s,Hw:()=>a,hl:()=>o});var r=i(29298);class n{constructor(){(0,r.Z)(this,"enabled",!1)}log(...e){this.enabled&&console.log(n.UFOprefix,...e)}warn(...e){this.enabled&&console.warn(n.UFOprefix,...e)}enable(){this.enabled=!0}disable(){this.enabled=!1}}(0,r.Z)(n,"UFOprefix","[ufo]");const s=new n,a=(...e)=>{s.log(...e)},o=(...e)=>{s.warn(...e)}},90934:(e,t,i)=>{"use strict";i.d(t,{m:()=>s});var r=i(29298),n=i(244819);const s=new class{constructor(){(0,r.Z)(this,"started",!1),(0,r.Z)(this,"observers",[]),(0,r.Z)(this,"broadcast",(()=>{this.observers.forEach((e=>e())),this.observers=[]}))}start(){this.started||(this.started=!0,document.addEventListener("visibilitychange",this.broadcast),(0,n.d)()&&window.addEventListener("pagehide",this.broadcast))}subscribe(e){this.observers.push(e)}unsubscribe(e){this.observers=this.observers.filter((t=>t!==e))}}},827883:(e,t,i)=>{"use strict";i.d(t,{F:()=>g,G:()=>f});var r=i(991332),n=i(29298),s=i(781095),a=i(396428),o=i(592532),l=i(152129),c=i(90934),d=i(508687);var p=i(244819),u=i(978671);const h={[u.h.NOT_STARTED.id]:[u.h.STARTED.id],[u.h.STARTED.id]:[u.h.IN_PROGRESS.id,u.h.BLOCKED.id,u.h.SUCCEEDED.id,u.h.SUCCEEDED_WAITING_FOR_DEPS.id,u.h.FAILED.id,u.h.ABORTED.id],[u.h.IN_PROGRESS.id]:[u.h.BLOCKED.id,u.h.SUCCEEDED.id,u.h.SUCCEEDED_WAITING_FOR_DEPS.id,u.h.FAILED.id,u.h.ABORTED.id],[u.h.BLOCKED.id]:[u.h.RECOVERED.id,u.h.ABORTED.id],[u.h.RECOVERED.id]:[u.h.STARTED.id,u.h.SUCCEEDED.id,u.h.SUCCEEDED_WAITING_FOR_DEPS.id,u.h.FAILED.id,u.h.ABORTED.id],[u.h.SUCCEEDED.id]:[u.h.STARTED.id],[u.h.SUCCEEDED_WAITING_FOR_DEPS.id]:[u.h.SUCCEEDED.id,u.h.FAILED.id,u.h.ABORTED.id],[u.h.FAILED.id]:[u.h.STARTED.id],[u.h.ABORTED.id]:[u.h.STARTED.id]};var m=i(253851);const v=()=>(0,p.d)()&&window.document&&"visible"!==window.document.visibilityState?d.Qx.HIDDEN:d.Qx.VISIBLE,f=e=>void 0!==e?~~e:~~performance.now();class g{constructor(e,t,i=null){(0,n.Z)(this,"state",u.h.NOT_STARTED),(0,n.Z)(this,"instanceId",null),(0,n.Z)(this,"parent",null),(0,n.Z)(this,"category",null),(0,n.Z)(this,"metadata",{}),(0,n.Z)(this,"onDoneCallbacks",[]),(0,n.Z)(this,"childExperiences",[]),(0,n.Z)(this,"explicitTimings",{}),(0,n.Z)(this,"isSSROutputAsFMP",!1),(0,n.Z)(this,"uuid",null),(0,n.Z)(this,"_until",null),(0,n.Z)(this,"metrics",{startTime:null,endTime:null,marks:[]}),(0,n.Z)(this,"performanceConfig",{}),(0,n.Z)(this,"setPageVisibleStateToMixed",(()=>{this.pageVisibleState=d.Qx.MIXED,c.m.unsubscribe(this.setPageVisibleStateToMixed)})),this.id=e,this.category=(null==t?void 0:t.category)||null,this.until=(null==t?void 0:t.until)||null,this.instanceId=i,this.handleDoneBind=this._handleDoneExperience.bind(this),this.type=t.type,this.performanceType=t.performanceType,this.performanceConfig=t.performanceConfig||{},this.config=t,this.pageVisibleState=v(),this.featureFlags=t.featureFlags||[],this.timings=t.timings||[],t.performanceType!==m.R.PageLoad&&t.performanceType!==m.R.PageSegmentLoad||(this.isSSROutputAsFMP=t.isSSROutputAsFMP||!1)}async transition(e,t){if((0,l.Hw)("async transition",this.id,this.state.id,e.id),i=this.state,r=e,h[i.id]&&h[i.id].includes(r.id)){if((0,l.Hw)(`TRANSITION: ${this.id} from ${this.state.id} to ${e.id} successful`,this.state.final,!e.final),e===u.h.STARTED&&this._reset(),this.state.final&&!e.final&&(this.metrics.startTime=f(t),this.uuid=(0,s.v4)()),this.state=e,e.final){this.metrics.endTime=f(t),this._isManualStateEnabled()||(0,o.ur)().push((0,o.US)(d.lS,this.handleDoneBind));const e=await this.exportData();(0,l.Hw)("this.parent",this.parent),(0,o.ur)().push((0,o.sG)(e))}return!0}var i,r;return(0,l.Hw)(`TRANSITION: ${this.id} from ${this.state.id} to ${e.id} unsuccessful`),(0,l.hl)(`transition of ${this.id} from ${this.state} to ${e} is not possible`),!1}async start(e){await this.transition(u.h.STARTED,e)&&(this.pageVisibleState=v(),c.m.subscribe(this.setPageVisibleStateToMixed),this._isManualStateEnabled()||((0,l.Hw)("subscribed",this.id),(0,o.ur)().push((0,o.o5)(d.lS,this.handleDoneBind))))}mark(e,t){e!==d.WR&&e!==d.j3?this._mark(e,t):(0,l.hl)("please use markFMP or markInlineResponse for specialised marks")}_mark(e,t){this.metrics.marks.push({name:e,time:f(t)}),this.transition(u.h.IN_PROGRESS)}markFMP(e){this._mark(d.WR,e)}markInlineResponse(e){this._mark(d.j3,e)}_isManualStateEnabled(){return null===this.until}_validateManualState(){return!!this._isManualStateEnabled()||((0,l.hl)('manual change of state not allowed as "until" is defined'),!1)}switchToEndState(e,t){return null!=t&&t.force||this._validateManualState()?(null!=t&&t.metadata&&this.addMetadata(t.metadata),c.m.unsubscribe(this.setPageVisibleStateToMixed),this.transition(e)):null}async success(e){return this.switchToEndState(u.h.SUCCEEDED,e)}async failure(e){return this.switchToEndState(u.h.FAILED,e)}async abort(e){return this.switchToEndState(u.h.ABORTED,e)}addMetadata(e){Object.assign(this.metadata,e)}_handleDoneExperience(e){if((0,l.Hw)("_handleDoneExperience in",this.id,e.state,e,this._until),e.state.final&&null!==this._until){const{done:t,state:i}=this._until(e);t&&!this.state.final&&this.transition(i)}}async getId(){return this.id}async exportData(){return{id:await this.getId(),uuid:this.uuid,type:this.type,schemaVersion:a.q||"unknown",performanceType:this.performanceType,category:this.category,state:this.state,metadata:(0,r.Z)({},this.metadata),metrics:(0,r.Z)({},this.metrics),children:[...this.childExperiences],result:{success:!!this.state.success,startTime:this.metrics.startTime,duration:(this.metrics.endTime||0)-(this.metrics.startTime||0)},platform:this.config.platform||null,pageVisibleState:this.pageVisibleState,featureFlags:this.featureFlags,isSSROutputAsFMP:this.isSSROutputAsFMP,timings:this.timings,explicitTimings:this.explicitTimings,performanceConfig:this.performanceConfig}}_reset(){this.parent=null,this.metadata={},this.onDoneCallbacks=[],this.childExperiences=[],this.metrics={startTime:null,endTime:null,marks:[]},this._until=this.until?this.until():null}}},849278:(e,t,i)=>{"use strict";i.d(t,{I:()=>a});var r=i(29298),n=i(152129),s=i(938141);class a{constructor(e,t){(0,r.Z)(this,"instances",{}),this.experienceId=e,this.config=t}getInstance(e){return this.instances[e]||(this.instances[e]=new s.Q(this.experienceId,this.config,e)),this.instances[e]}release(e){(0,n.Hw)("instanceId",e),this.instances[e]&&this.instances[e].abort(),delete this.instances[e]}}},978671:(e,t,i)=>{"use strict";i.d(t,{h:()=>r});const r={NOT_STARTED:{id:"NOT_STARTED",final:!0},STARTED:{id:"STARTED"},IN_PROGRESS:{id:"IN_PROGRESS"},BLOCKED:{id:"BLOCKED"},RECOVERED:{id:"RECOVERED"},SUCCEEDED:{id:"SUCCEEDED",final:!0,success:!0},SUCCEEDED_WAITING_FOR_DEPS:{id:"SUCCEEDED_WAITING_FOR_DEPS"},FAILED:{id:"FAILED",final:!0},ABORTED:{id:"ABORTED",final:!0}}},253851:(e,t,i)=>{"use strict";let r,n;i.d(t,{Z:()=>r,R:()=>n}),function(e){e.Load="load",e.Experience="experience",e.Operation="operation"}(r||(r={})),function(e){e.PageLoad="page-load",e.PageSegmentLoad="page-segment-load",e.InlineResult="inline-result",e.Custom="custom"}(n||(n={}))},938141:(e,t,i)=>{"use strict";i.d(t,{Q:()=>n});var r=i(827883);class n extends r.F{}},244819:(e,t,i)=>{"use strict";i.d(t,{d:()=>r});const r=()=>"undefined"!=typeof window},508687:(e,t,i)=>{"use strict";let r,n,s,a,o,l;i.d(t,{pp:()=>r,Qx:()=>n,lS:()=>c,WR:()=>d,j3:()=>p}),function(e){e[e.EXPERIENCE_PAYLOAD=0]="EXPERIENCE_PAYLOAD",e[e.SUBSCRIBE=1]="SUBSCRIBE",e[e.UNSUBSCRIBE=2]="UNSUBSCRIBE"}(r||(r={})),function(e){e.VISIBLE="visible",e.HIDDEN="hidden",e.MIXED="mixed"}(n||(n={})),function(e){e.fmp="fmp",e.tti="tti"}(s||(s={})),function(e){e.fmp="fmp",e.tti="tti"}(a||(a={})),function(e){e.response="response",e.result="result"}(o||(o={})),function(e){e.duration="duration"}(l||(l={}));const c="__SUBSCRIBE_ALL__",d="fmp",p="inline-response"},852665:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var r=i(321534);const n=(0,r.iv)({width:"1px",height:"1px",padding:"0",position:"absolute",border:"0",clip:"rect(1px, 1px, 1px, 1px)",overflow:"hidden",whiteSpace:"nowrap"}),s=({children:e,testId:t,role:i,id:s})=>(0,r.tZ)("span",{id:s,"data-testid":t,css:n,role:i},e)}}]);
//# sourceMappingURL=50926.N51LiggfLa.js.map