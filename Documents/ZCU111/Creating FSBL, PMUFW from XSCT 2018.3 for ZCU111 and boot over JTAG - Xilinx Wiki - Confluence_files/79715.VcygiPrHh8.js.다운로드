"use strict";(self._cf=self._cf||[]).push([[79715],{307271:(e,t,n)=>{n.d(t,{s:()=>i});var o=n(122551),a=n(474258),l=n.n(a),r=n(38952),c=n(60244);function i(e){var t=e.children,n=e.innerRef,a=o.useContext(r.mq),i=o.useCallback((function(e){(0,c.k$)(n,e),(0,c.DL)(a,e)}),[n,a]);return o.useEffect((function(){return function(){return(0,c.k$)(n,null)}}),[]),o.useEffect((function(){l()(Boolean(a),"`Reference` should not be used outside of a `Manager` component.")}),[a]),(0,c.$p)(t)({ref:i})}},450227:(e,t,n)=>{n.r(t),n.d(t,{MenuComponent:()=>y,SpaceViewsMenu:()=>h});var o=n(991332),a=n(122551),l=n(464984),r=n(883383),c=n(603494),i=n(325834),s=n(280202),u=n(824464),d=n(281743),p=n(57198),f=n(28201),m=n(857937),v=n(977650);const k=(0,f.ui)({__loadable_id__:"l2OT9",name:"SpaceViewsMenuContentLoader",loader:async()=>(await Promise.all([n.e(61769),n.e(20223)]).then(n.bind(n,545641))).SpaceViewsMenuContent}),g=(0,m.r)((async()=>(await Promise.all([n.e(78248),n.e(54936),n.e(11216),n.e(30186)]).then(n.bind(n,943799))).fireSpaceViewsOptionClickedAnalytics)),C=(0,m.r)((async()=>(await Promise.all([n.e(78248),n.e(54936),n.e(11216),n.e(30186)]).then(n.bind(n,943799))).fireSpaceViewsTriggerClickedAnalytics)),b=(0,l.defineMessages)({menuTooltip:{id:"space-views.space.menu.tooltip",defaultMessage:"View pages differently"}}),y=({selection:e,setSelection:t,intl:n})=>{const[l,c]=(0,a.useState)(!1),f=(0,a.useCallback)((()=>{c(!1)}),[c]),{createAnalyticsEvent:m}=(0,i._)(),y=(0,a.useRef)(null),h=(e=>{{const[t,n]=(0,a.useState)(!1),o=new IntersectionObserver((([e])=>n(e.isIntersecting)));return(0,a.useEffect)((()=>(o.observe(e.current),()=>{o.disconnect()}))),t}})(y);(0,a.useEffect)((()=>{h||l&&c(!1)}),[h,l]);const w=g(m,e),E=(0,a.useCallback)((e=>{t(e),c(!1),w(e)}),[t,w]),Z=C(m,e),O=(0,a.useCallback)((e=>{e.stopPropagation(),e.preventDefault(),c((e=>!e)),Z()}),[Z]);return a.createElement("div",{ref:y},a.createElement(u.Z,{isOpen:l,onClose:f,content:t=>a.createElement(k,(0,o.Z)({selection:e,setSelection:E,intl:n},t)),trigger:e=>a.createElement("div",{onClick:e=>e.preventDefault()},a.createElement(p.Z,{content:a.createElement(r.Z,(0,o.Z)({},b.menuTooltip)),hideTooltipOnMouseDown:!0},a.createElement(v.j2,(0,o.Z)((0,o.Z)({},e),{},{onClick:O,isOpen:l,"aria-label":n.formatMessage(b.menuTooltip)}),a.createElement(d.default,{label:"",size:"medium"}))),a.createElement(s.Z,{isTinted:!1,shouldAllowClickThrough:!l,onBlanketClicked:f})),placement:"bottom-start"}))};y.displayName="MenuComponent";const h=(0,c.ZP)(y)},280202:(e,t,n)=>{n.d(t,{Z:()=>g});var o=n(991332),a=n(122551),l=n(321534),r=n(781578),c=n(437705),i=n(131436),s=n(529845),u=n(676424);const d={componentName:"blanket",packageName:"@atlaskit/blanket",packageVersion:"12.3.7"},p=(0,l.iv)({position:"fixed",zIndex:u.ug.blanket(),top:0,right:0,bottom:0,left:0,overflowY:"auto",pointerEvents:"initial"}),f=(0,l.iv)({pointerEvents:"none"}),m=(0,l.iv)({backgroundColor:"transparent"}),v={light:(0,l.iv)({backgroundColor:`var(--ds-blanket, ${i.Kz})`}),dark:(0,l.iv)({backgroundColor:`var(--ds-blanket, ${i.dU})`})},k=(0,a.memo)((0,a.forwardRef)((function({shouldAllowClickThrough:e=!1,isTinted:t=!1,onBlanketClicked:n=c.Z,testId:i,children:u,analyticsContext:k},g){const{mode:C}=(0,s.m)(),b=(0,a.useRef)(null),y=(0,r.B)((0,o.Z)({fn:n,action:"clicked",analyticsData:k},d)),h=(0,a.useCallback)((e=>e.currentTarget===e.target&&b.current===e.target?y(e):void 0),[y]),w=e?void 0:h,E=(0,a.useCallback)((e=>{b.current=e.target}),[]);return(0,l.tZ)("div",{role:"presentation",css:[p,e&&f,v[C],!t&&m],onClick:w,onMouseDown:E,"data-testid":i,ref:g},u)})));k.displayName="Blanket";const g=k},281743:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=(o=n(122551))&&o.__esModule?o:{default:o},l=n(386056);const r=e=>a.default.createElement(l.Icon,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><g fill="currentColor" fill-rule="evenodd"><circle cx="5" cy="12" r="2"/><circle cx="12" cy="12" r="2"/><circle cx="19" cy="12" r="2"/></g></svg>'},e));r.displayName="MoreIcon";var c=r;t.default=c},824464:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n(47821).G},47821:(e,t,n)=>{n.d(t,{G:()=>d});var o=n(122551),a=n(321534),l=n(38952),r=n(307271),c=n(52054),i=n(676424),s=n(519717);const u=i.ug.layer(),d=(0,o.memo)((({isOpen:e,id:t,offset:n,testId:i,trigger:d,content:p,onClose:f,boundary:m,rootBoundary:v="viewport",shouldFlip:k=!0,placement:g="auto",fallbackPlacements:C,popupComponent:b,autoFocus:y=!0,zIndex:h=u,shouldUseCaptureOnOutsideClick:w=!1})=>{const[E,Z]=(0,o.useState)(null);return(0,a.tZ)(l.dK,null,(0,a.tZ)(r.s,null,(({ref:n})=>d({ref:t=>{t&&e&&("function"==typeof n?n(t):n.current=t,Z(t))},"aria-controls":t,"aria-expanded":e,"aria-haspopup":!0}))),e&&(0,a.tZ)(c.Z,{zIndex:h},(0,a.tZ)(s.Z,{content:p,isOpen:e,placement:g,fallbackPlacements:C,boundary:m,rootBoundary:v,shouldFlip:k,offset:n,popupComponent:b,id:t,testId:i,onClose:f,autoFocus:y,shouldUseCaptureOnOutsideClick:w,triggerRef:E})))}))},675255:(e,t,n)=>{n.d(t,{w:()=>a});var o=n(122551);const a=({children:e,update:t})=>{const n=(0,o.useRef)(!0);return(0,o.useLayoutEffect)((()=>{n.current?n.current=!1:t()}),[t]),o.createElement(o.Fragment,null,e)}},545385:(e,t,n)=>{n.d(t,{C:()=>r});var o=n(122551),a=n(451598),l=n(437705);const r=({isOpen:e,onClose:t,popupRef:n,triggerRef:r,shouldUseCaptureOnOutsideClick:c})=>{(0,o.useEffect)((()=>{if(!e||!n)return l.Z;const o=e=>{t&&t(e)};return(0,a.Ev)(window,[{type:"click",listener:e=>{const{target:t}=e;if(!document.body.contains(t))return;const a=n&&n.contains(t),l=r&&r.contains(t);a||l||o(e)},options:{capture:c}},{type:"keydown",listener:e=>{const{key:t}=e;"Escape"!==t&&"Esc"!==t||o(e)}}])}),[e,t,n,r,c])}},358862:(e,t,n)=>{n.d(t,{b:()=>c});var o=n(122551),a=n(450509),l=n.n(a),r=n(437705);const c=({popupRef:e,initialFocusRef:t})=>{(0,o.useEffect)((()=>{if(!e)return r.Z;const n={clickOutsideDeactivates:!0,escapeDeactivates:!0,initialFocus:t||e,fallbackFocus:e,returnFocusOnDeactivate:!0},o=l()(e,n);let a=requestAnimationFrame((()=>{a=null,o.activate()}));return()=>{null!=a&&(cancelAnimationFrame(a),a=null),o.deactivate()}}),[e,t])}}}]);
//# sourceMappingURL=79715.VcygiPrHh8.js.map