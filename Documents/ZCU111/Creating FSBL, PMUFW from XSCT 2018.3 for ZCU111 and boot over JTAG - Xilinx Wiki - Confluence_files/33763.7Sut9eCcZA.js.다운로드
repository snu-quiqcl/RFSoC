"use strict";(self._cf=self._cf||[]).push([[33763],{477973:(e,n,t)=>{t.d(n,{yW:()=>m,NJ:()=>f,Ej:()=>v});var r=t(122551),o=t(325834),a=t(275758),d=t(158466),c=t(482885),l=t(661013),i=t(80634),s=t(333754);const u="dataProvider",m=({connectHost:e})=>{const{featureFlagClient:n}=(0,d.D)(),{createAnalyticsEvent:t}=(0,o._)(),a=n.getBooleanValue(l.mE,{default:!1});return(0,r.useEffect)((()=>{const n=(0,c.E)();p({connectHost:e,referentialityFlagEnabled:a,createAnalyticsEvent:t,isViewPage:n})}),[a,e,t]),null},f=()=>{var e;return!(null===(e=window.connectHost)||void 0===e||!e.isModuleDefined(u))},p=({connectHost:e,referentialityFlagEnabled:n,createAnalyticsEvent:t,isViewPage:r})=>{const o=f(),a={emitToDataProvider:async(...e)=>{var n,o,a,d;const c=e.length>1?e[0]:null,l=e.length>1?e[e.length-1]:e[0],u=null==l?void 0:l._context,m=null==u||null===(n=u.extension)||void 0===n||null===(o=n.options)||void 0===o||null===(a=o.productContext)||void 0===a?void 0:a["macro.localId"],f=null==u||null===(d=u.extension)||void 0===d?void 0:d.key,p=(0,s.r)({isViewPage:r,extensionKey:f});if(t(p).fire(),!f)throw Error("Missing Connect app extensionKey while transferring data.");const v=(0,i.v)();return l(await v.transfer(f,m,c,t,r))}};n&&!o&&e.defineModule(u,a)},v=async({logger:e,isViewPage:n,createAnalyticsEvent:t})=>{await new Promise((r=>{(0,a.N)(["wr!confluence.web.resources:querystring","wr!confluence.web.resources:navigator-context","wr!com.atlassian.plugins.atlassian-connect-plugin:confluence-atlassian-connect-resources-v5"],(()=>{const e=window.connectHost;p({connectHost:e,referentialityFlagEnabled:!0,createAnalyticsEvent:t,isViewPage:n}),r()}),(()=>{e.error`Error loading WRM for dataProvider!`,r()}))}))}},699864:(e,n,t)=>{t.d(n,{L:()=>r});const r=t(122551).createContext({})},812893:(e,n,t)=>{t.d(n,{wI:()=>r,hM:()=>o,UK:()=>a,fC:()=>d,ed:()=>c,yr:()=>l,Fi:()=>i,ol:()=>s,US:()=>u,c3:()=>m,R7:()=>f,Vb:()=>p,qO:()=>v,L4:()=>y,rA:()=>g,$W:()=>h,uJ:()=>E,Ov:()=>b,S$:()=>R,VK:()=>x,z6:()=>I});const r="confluence.frontend.extension.plus-menu",o="confluence.frontend.extension.element-browser",a="confluence.frontend.extension.config-panel.opt-out",d="confluence.frontend.allow.interactive.expand",c="confluence.frontend.fabric.editor.add-column-custom-step",l="confluence.frontend.fabric.editor.enable-sticky-table-headers",i="confluence.frontend.fabric.editor.table-cell-optimisation",s="confluence.frontend.fabric.editor.table-render-optimisation",u="confluence.frontend.fabric.editor.table-initial-render-optimisation",m="confluence.frontend.fabric.editor.table-mousemove-optimisation",f="confluence.frontend.fabric.editor.table-sticky-headers-optimisation",p="confluence.frontend.fabric.editor.table-overflow-shadows-optimization",v="confluence.frontend.fabric.editor.column.sorting",y="confluence.frontend.connect.macro.view-as-forge",g="confluence.frontend.connect.macro.save-as-forge",h="confluence.frontend.fabric.editor.macro.adf.frontend.render",E="confluence.frontend.fabric.editor.hide-table-expand",b="confluence.frontend.preload.draft.body.content.next.editor",R="confluence.frontend.fabric.editor.smartcards.macro-override",x="confluence.frontend.ecosystem.allow.fragment-mark",I="confluence.frontend.macrobrowser.app.discovery"},441130:(e,n,t)=>{t.d(n,{N:()=>r});const r=t(122551).createContext({shouldRefetchMacroQuery:!1})},533763:(e,n,t)=>{t.d(n,{b:()=>ye});var r=t(991332),o=t(29298),a=t(64172),d=t.n(a),c=t(122551),l=t(923813),i=t(236959),s=t(405124),u=t.n(s),m=t(883383),f=t(315677),p=t(616158),v=t(207976),y=t(89557),g=t(917068),h=t(835989),E=t(844151),b=t(451379),R=t(275513),x=t(668410),I=t(172328),w=t(812893),C=t(325834),B=t(441232),F=t(275758),P=t(684528),M=t(746539),N=t(259928),S=t(172033),T=t(415294);const Z=(0,S.zG)({key:T.CW});let _=0;const O=({node:e,contentId:n,extensionKey:t,featureFlags:r})=>{const{routeName:o}=(0,c.useContext)(y.z1),{localId:a}=e;return(0,c.useEffect)((()=>{var e,o,d,c,l;if(!r["confluence.frontend.preload-legacy-macros.tracking"])return;const i=(0,N.W)()?null===(e=performance.getEntriesByName("rendererRendered.end").pop())||void 0===e?void 0:e.startTime:null===(o=performance.getEntriesByName("browser-metric:tti").pop())||void 0===o?void 0:o.duration,s=(0,N.W)()?null===(d=performance.getEntriesByName("CFP-63.ssr-ttr").pop())||void 0===d?void 0:d.startTime:i,u=null===(c=performance.getEntriesByName("browser-metric.start").pop())||void 0===c?void 0:c.startTime,m=null!==(l=(0,N.W)()?s:u)&&void 0!==l?l:0,f={extensionIndex:_,extensionKey:t,contentId:n,pageFMP:null!=s?s:0,pageTTI:null!=i?i:0,clientRouteStart:null!=u?u:0},p=Z(`${t}.${n}.${a}`);return p.start({startTime:m}),p.stop({customData:f}),_+=1,()=>{_=0}}),[r,t,o,a,n]),null};var k=t(647273),K=t(93375),$=t(471017),A=t(661013),D=t(769544),L=t(690359),W=t(653373),H=t(625485),Q=t(699864),j=t(477973),q=t(724421),U=t.n(q),z=t(482885);const V=e=>{const n=e.split("__");return 3===n.length?n[1]:"UNKOWN_EXTENSION_KEY"},J=({references:e,macroContainer:n})=>{const[t,r]=(0,c.useState)(null),{createAnalyticsEvent:o}=(0,C._)();(0,c.useEffect)((()=>{t&&Array.isArray(e)&&e.length>0&&((e,n,t)=>{const r={id:n},o={eventData:e};t({type:"sendTrackEvent",data:{containerType:"page",objectType:"connectAddon",source:(0,z.E)()?"viewPageScreen":"editPageScreen",action:"broadcasted",actionSubject:"connectRefEventData",attributes:{extensionKey:V(n)}}}).fire(),U().connectHost.broadcastEvent("data_provider",r,o)})(e,t,o)}),[e,t,o]);const a=(0,c.useCallback)((e=>{var t,o,a,d,c,l;if("event_query"!==(null===(t=e.data)||void 0===t?void 0:t.type)||null===(o=e.data)||void 0===o||!o.eid||null===(a=e.data)||void 0===a||null===(d=a.args)||void 0===d||null===(c=d.includes)||void 0===c||!c.call(d,"data_provider"))return;const i=document.getElementById(e.data.eid);i&&null!=n&&null!==(l=n.contains)&&void 0!==l&&l.call(n,i)&&r(e.data.eid)}),[n,r]);return(0,c.useEffect)((()=>(U().addEventListener("message",a),()=>{U().removeEventListener("message",a)})),[a]),null};var Y=t(612642),G=t(144024),X=t(927955);const ee=({error:e,mode:n,extensionKey:t,node:r,contentId:o})=>c.createElement(c.Fragment,null,c.createElement(X.M,{extensionKey:t,error:e||Error(`Unable to render ${t}`),mode:n,attributes:(0,E.iQ)(r),contentId:o,name:(0,E.ag)(n,r)}),c.createElement("div",{style:{display:"flex",backgroundColor:(0,Y.Z)("color.background.neutral.subtle","#F4F5F7"),borderRadius:5,minWidth:200,padding:5}},c.createElement(G.default,{label:"",size:"medium"}),c.createElement("span",{style:{paddingLeft:5}},c.createElement(m.Z,{id:"fabric-extension-handlers.legacymacrorenderer.error",defaultMessage:"Failed to get macro details"}))));ee.displayName="LegacyMacroRendererError";const ne=/data-macro-id="([0-9a-fA-F\-]+?)"/,te=/macro\.id\\":\\"([0-9a-fA-F\-]+?)\\"/,re=(0,p.j)("LegacyMacroRenderer"),oe=()=>c.createElement("div",{style:{position:"absolute",top:0,bottom:0,left:0,right:0,cursor:"default",zIndex:2}});oe.displayName="Overlay";const ae=(e,n)=>{var t,r,o,a,d,c;const l=null==e||null===(t=e.attrs)||void 0===t||null===(r=t.parameters)||void 0===r||null===(o=r.macroMetadata)||void 0===o||null===(a=o.macroId)||void 0===a?void 0:a.value;if(l)return l;let i=ne.exec(n||"");return null!==(d=i)&&void 0!==d&&d[1]?i[1]:(i=te.exec(n||""),null!==(c=i)&&void 0!==c&&c[1]?i[1]:(re.error`Cannot find macro id from ${n}`,""))},de=["include","contentbylabel","children","content-report-table","tasks-report-macro","recently-updated-dashboard","recently-updated"],ce=(0,H.i)((({adf:e,macroRepresentation:n,macroRenderedOutput:t,mode:o,node:a,contentId:d,attributes:l,experienceName:i,featureFlags:s,webresource:u,body:m,parameters:f,navigationPolicy:p,references:v,macroRenderedOutputFromSSR:y,macroOutput:g,context:h,spaceKey:b,providers:R,mediaToken:x})=>{var w,N;const{createAnalyticsEvent:S}=(0,C._)(),T=e.type===I.gU,Z=(null==e||null===(w=e.attrs)||void 0===w?void 0:w.extensionKey)||"",_=(0,c.useRef)(null);t||(t="");const[H,Q]=(0,c.useState)("gadget"===Z?"":t),[q,U]=(0,c.useState)(null);(0,c.useEffect)((()=>{if(q){(async()=>{const e=s[A.mE],n=(0,j.NJ)();if(e&&!n){const e=o===E._B;await(0,j.Ej)({logger:re,isViewPage:e,createAnalyticsEvent:S})}await(0,W.bS)(u,y,g,(()=>{H!==t&&Q(t)}),null==_?void 0:_.current)})(),(0,P.V)(q),(async e=>{"calendar"===e&&(0,F.N)((0,W.CT)(),(()=>{try{window.require("tc/init-resources").requireResources()}catch(e){re.error(e)}}),(()=>{re.error`Error loading team calendar WRM!`}))})(Z)}}),[u,Z,t,H,q,_,y,g,s,o,S]);const z={ref:U},V={"data-fabric-macro":ae(e,t),"data-macro-body":m||"","data-macro-parameters":f||""},Y=(e,n)=>{var t,r,o,a;return(null==e||null===(t=e.attrs)||void 0===t||null===(r=t.parameters)||void 0===r||null===(o=r.macroParams)||void 0===o||null===(a=o._parentId)||void 0===a?void 0:a.value)||n},{getExtensionHandlers:G}=R,X=G?G({adf:"atlas_doc_format"==n?y||g||t:e,contentId:Y(e,d),spaceKey:b,macroRenderedOutput:y||g||t,shouldIncludeMacroWithReferencesHandlers:s[A.mE],referentialityDataSourceProvider:new B.LX,mediaToken:x}):{},ne={adf:e,isInline:T,contentId:Y(e,d),mode:o,extensionKey:Z,nodeProps:z,macroRepresentation:n,macroDataProps:V,macroRenderedOutput:H,extensionHandlers:X,mediaToken:x};if(o===E._B){var te;try{const e=null!=l&&l.macroId?l.macroId:"",n=null!=l&&l.type?l.type:"none";S({type:"sendTrackEvent",data:{action:"renderer",actionSubject:"macro",source:"legacyMacroRenderer",attributes:{mode:o,extensionKey:Z,macroId:e,contentId:d,type:n}}}).fire()}catch(se){re.error`An error occurred while firing the analytics event for legacyMacroRendererComponent: ${se}`}if(y||g){const e={node:a,context:h,references:v,contentId:d,spaceKey:b||"",mode:E._B,extensionKey:Z,attributes:l};return c.createElement(c.Fragment,null,s[A.mE]&&c.createElement(J,{references:v,macroContainer:q}),c.createElement(M.U,{macroRenderedOutput:y,macroDefaultProps:e,containerRef:U,macroOutput:g}),c.createElement(D.Z,{node:q}),"attachments"===Z&&c.createElement($.w.Consumer,null,(({EditorLoaderLoader:e})=>e&&c.createElement(e,null))),c.createElement(L.N,{name:i,contentId:d,extensionKey:Z,mode:o,attributes:l}),c.createElement(O,{extensionKey:(null==l?void 0:l.extensionKey)||Z,featureFlags:s,contentId:d,node:a}))}return c.createElement(c.Fragment,null,s[A.mE]&&c.createElement(J,{references:v,macroContainer:q}),c.createElement("div",{dangerouslySetInnerHTML:{__html:`${(null==u||null===(te=u.tags)||void 0===te?void 0:te.css)||""}`},style:{display:"none"}}),c.createElement(k.Z,(0,r.Z)((0,r.Z)({},ne),{},{macroRenderedOutput:de.includes(Z)?p.shimHtmlUrls(H):H})),c.createElement(D.Z,{node:q}),"attachments"===Z&&c.createElement($.w.Consumer,null,(({EditorLoaderLoader:e})=>e&&c.createElement(e,null))),c.createElement("div",{key:"js-container",ref:_,style:{display:"none"}}),c.createElement(L.N,{name:i,contentId:d,extensionKey:Z,mode:o,attributes:l}),c.createElement(O,{extensionKey:(null==l?void 0:l.extensionKey)||Z,featureFlags:s,contentId:d,node:a}))}let ce,le,ie;try{"atlas_doc_format"===n&&(ce=JSON.parse(H),ie=c.createElement(K.J,{document:ce,contentId:Y(e,d),featureFlags:null!=s?s:{},extensionHandlers:X,mediaToken:x}))}catch(ue){le=ue,re.error`An error occurred while parsing adf output: ${H}`,ie=c.createElement(ee,{error:le,node:a,mode:o,extensionKey:Z,contentId:d})}return c.createElement(c.Fragment,null,c.createElement("div",{dangerouslySetInnerHTML:{__html:`${(null==u||null===(N=u.tags)||void 0===N?void 0:N.css)||""}`},style:{display:"none"}}),c.createElement(k.Z,(0,r.Z)({},ne),c.createElement(oe,null),s[A.mE]&&c.createElement(J,{references:v,macroContainer:q}),"atlas_doc_format"===n?c.createElement("div",{ref:U},ie):c.createElement("div",{ref:U,dangerouslySetInnerHTML:{__html:`${H}`}}),c.createElement(L.N,{name:i,contentId:d,extensionKey:Z,mode:o,attributes:l})),c.createElement("div",{key:"js-container",ref:_,style:{display:"none"}}))})),le=e=>{const n=(0,c.useContext)($.w),t=(0,c.useContext)(Q.L),o=(0,r.Z)((0,r.Z)({},t),n),a=(0,r.Z)((0,r.Z)({},e),{},{providers:o});return c.createElement(ce,(0,r.Z)({},a))};le.displayName="LegacyMacroRendererComponent";const ie=(0,t(464984).defineMessages)({highlightedPageIncludeRenderedError:{id:"fabric-extension-handlers.legacy-macro-renderer-query.highlightedPageIncludeError",defaultMessage:"Unable to render {include}"},nonhighlightedPageIncludeRenderedError:{id:"fabric-extension-handlers.legacy-macro-renderer-query.nonhighlightedPageIncludeRenderedError",defaultMessage:"Already included page ''{pageTitle}'', stopping."}});var se=t(331377);const ue=se.ZP`query MacroContentRendererQueryWithTags($adf:String!$containedRender:Boolean=false$contentId:ID!$mode:ContentRendererMode=RENDERER){contentRenderer(adf:$adf containedRender:$containedRender contentId:$contentId mode:$mode){html webResourceDependencies{contexts keys tags{js css}}}}`,me=se.ZP`query MacroBodyRendererQueryWithTags($adf:String!$containedRender:Boolean=false$contentId:ID$mode:ContentRendererMode=RENDERER){macroBodyRenderer(adf:$adf containedRender:$containedRender contentId:$contentId mode:$mode){value representation mediaToken{token}webResourceDependencies{contexts keys tags{js css}}}}`;var fe=t(441130);const pe=c.createContext({listOfRenderedPageIncludeNodes:[]}),ve=e=>e.type===I.x9;class ye extends c.Component{constructor(...e){super(...e),(0,o.Z)(this,"state",{body:"",hasBodyBeenFetched:!1}),(0,o.Z)(this,"logger",(0,p.j)("LegacyMacroRendererQuery")),(0,o.Z)(this,"getQueryForMacroContentAndBodyForPossibleFrontendRendering",((e,n,t,o,a,d,i,s,u,f,p,v,y)=>{const g=Boolean(s["confluence.frontend.throttle.legacy.macro.query"]);return c.createElement(l.AE,{query:me,variables:(0,r.Z)((0,r.Z)({adf:JSON.stringify(e)},"0"!==n?{contentId:this.getContentId(e,n)}:{}),{},{containedRender:n!==t,mode:a&&a.toUpperCase()}),fetchPolicy:y?"no-cache":"cache-first",context:(0,r.Z)((0,r.Z)({},g?{throttle:!0}:{single:!0}),{},{allowOnExternalPage:!0}),skip:Boolean(u)||Boolean(f)},(({data:t,loading:l,error:y})=>{var g,b,R,I,w;return u||f?c.createElement(le,{contentId:n,experienceName:(0,E.ag)(a,d),adf:e,attributes:(0,E.iQ)(d),references:i,macroRenderedOutput:null==t||null===(g=t.macroBodyRenderer)||void 0===g?void 0:g.value,macroRepresentation:(null==t||null===(b=t.macroBodyRenderer)||void 0===b?void 0:b.representation)||"view",mediaToken:null==t||null===(R=t.macroBodyRenderer)||void 0===R||null===(I=R.mediaToken)||void 0===I?void 0:I.token,node:d,webresource:null==t||null===(w=t.macroBodyRenderer)||void 0===w?void 0:w.webResourceDependencies,mode:a,body:this.state.body,parameters:(0,x.Z6)(d),featureFlags:s,macroRenderedOutputFromSSR:u,macroOutput:f,spaceKey:p,context:v}):l?c.createElement(h.n,{node:d}):!y&&t&&t.macroBodyRenderer?c.createElement(c.Fragment,null,c.createElement(pe.Consumer,null,(({listOfRenderedPageIncludeNodes:o})=>{var l,u,f,y,g;let h;if(o.some((e=>{const n=e;return h=o[o.length-1],"include"===n.extensionKey&&this.getReferencedContentId(e)===(null==e?void 0:e.parentContentId)}))){var b,R,I,w;const e=null===(b=h)||void 0===b||null===(R=b.parameters)||void 0===R||null===(I=R.macroParams)||void 0===I||null===(w=I[""])||void 0===w?void 0:w.value;return C=e,c.createElement("div",{className:"error"},c.createElement("span",{className:"error"},c.createElement(m.Z,(0,r.Z)({},ie.highlightedPageIncludeRenderedError))),c.createElement(m.Z,(0,r.Z)((0,r.Z)({},ie.nonhighlightedPageIncludeRenderedError),{},{values:{pageTitle:C}})))}var C;const B=[...o,(0,r.Z)((0,r.Z)({},this.props.node),{},{parentContentId:n})];return c.createElement(pe.Provider,{value:{listOfRenderedPageIncludeNodes:B}},c.createElement(le,{contentId:n,experienceName:(0,E.ag)(a,d),adf:e,attributes:(0,E.iQ)(d),references:i,macroRenderedOutput:null===(l=t.macroBodyRenderer)||void 0===l?void 0:l.value,macroRepresentation:(null===(u=t.macroBodyRenderer)||void 0===u?void 0:u.representation)||"view",mediaToken:null==t||null===(f=t.macroBodyRenderer)||void 0===f||null===(y=f.mediaToken)||void 0===y?void 0:y.token,node:d,webresource:null===(g=t.macroBodyRenderer)||void 0===g?void 0:g.webResourceDependencies,mode:a,body:this.state.body,parameters:(0,x.Z6)(d),featureFlags:s,spaceKey:p,context:v}))}))):c.createElement(ee,{error:y,node:d,mode:a,extensionKey:o,contentId:n})}))})),(0,o.Z)(this,"getQueryForMacroContentFromBackend",((e,n,t,o,a,d,i,s,u,m,f,p,v)=>{const y=Boolean(s["confluence.frontend.throttle.legacy.macro.query"]);return c.createElement(l.AE,{query:ue,variables:{adf:JSON.stringify(e),contentId:n,containedRender:n!==t,mode:a&&a.toUpperCase()},fetchPolicy:v?"no-cache":"cache-first",context:(0,r.Z)((0,r.Z)({},y?{throttle:!0}:{single:!0}),{},{allowOnExternalPage:!0}),skip:Boolean(u)||Boolean(m)},(({data:t,loading:r,error:l})=>{var v,y;return u||m?c.createElement(le,{contentId:n,experienceName:(0,E.ag)(a,d),adf:e,node:d,attributes:(0,E.iQ)(d),macroRenderedOutput:null==t||null===(v=t.contentRenderer)||void 0===v?void 0:v.html,references:i,macroRepresentation:"view",webresource:null==t||null===(y=t.contentRenderer)||void 0===y?void 0:y.webResourceDependencies,mode:a,body:this.state.body,parameters:(0,x.Z6)(d),featureFlags:s,macroRenderedOutputFromSSR:u,macroOutput:m,spaceKey:f,context:p}):r?c.createElement(h.n,{node:d}):!l&&t&&t.contentRenderer?c.createElement(c.Fragment,null,c.createElement(le,{contentId:n,experienceName:(0,E.ag)(a,d),adf:e,node:d,attributes:(0,E.iQ)(d),macroRenderedOutput:t.contentRenderer.html,references:i,macroRepresentation:"view",webresource:t.contentRenderer.webResourceDependencies,mode:a,body:this.state.body,parameters:(0,x.Z6)(d),featureFlags:s,context:p})):c.createElement(ee,{error:l,node:d,mode:a,extensionKey:o,contentId:n})}))})),(0,o.Z)(this,"getReferencedContentId",(e=>{var n,t,r;return(null==e||null===(n=e.parameters)||void 0===n||null===(t=n.macroParams)||void 0===t||null===(r=t._referencedContentId)||void 0===r?void 0:r.value)||void 0}))}getChildContext(){const{context:e}=this.props;return{insertCss:e.insertCss||(()=>{})}}componentDidMount(){this.setMacroData()}shouldComponentUpdate(e,n){var t,r,o;return this.props.contentId!==e.contentId||!u()(null===(t=this.props)||void 0===t||null===(r=t.node)||void 0===r?void 0:r.parameters,null==e||null===(o=e.node)||void 0===o?void 0:o.parameters)||(e.references||this.props.references)&&this.props.references!==e.references||this.state.hasBodyBeenFetched!==n.hasBodyBeenFetched||this.state.body!==n.body}componentDidUpdate(){this.setMacroData()}componentWillUnmount(){const{node:e,mode:n,contentId:t}=this.props,r=(0,E.iQ)(e);(0,E.uD)(n,t,name,r)}async setRichTextMacroBody(){const{contentId:e,node:n}=this.props,t=(null==n?void 0:n.content)||[];try{const n=await(async(e,n)=>{const t={representation:"atlas_doc_format",value:JSON.stringify({type:"doc",content:Array.isArray(n)?n:[n],version:1})},r=await(0,v.y)(`/wiki/rest/api/contentbody/convert/storage?contentIdContext=${e}`,{method:"POST",body:JSON.stringify(t),credentials:"include",headers:{"Content-Type":"application/json"}});if(!r.ok)throw Error(`Conversion HTTP error, status = ${r.status}, message = "${r.statusText}"`);return(await r.json()).value})(e,t);this.setState({body:n,hasBodyBeenFetched:!0})}catch(r){this.logger.error`${r}`}}setPlainTextMacroBody(){var e,n,t;const{node:r}=this.props,o=(null==r||null===(e=r.parameters)||void 0===e||null===(n=e.macroParams)||void 0===n||null===(t=n.__bodyContent)||void 0===t?void 0:t.value)||"";this.setState({body:o,hasBodyBeenFetched:!0})}setMacroData(){const{node:e}=this.props;!e||ve(e)&&this.state.hasBodyBeenFetched||((e=>{var n,t;return e.type===I.OR&&Boolean(null==e||null===(n=e.parameters)||void 0===n||null===(t=n.macroParams)||void 0===t?void 0:t.__bodyContent)})(e)?this.setPlainTextMacroBody():ve(e)?this.setRichTextMacroBody():this.setState({hasBodyBeenFetched:!0}))}getContentId(e,n){var t,r,o,a;return(null==e||null===(t=e.attrs)||void 0===t||null===(r=t.parameters)||void 0===r||null===(o=r.macroParams)||void 0===o||null===(a=o._parentId)||void 0===a?void 0:a.value)||n}render(){const{node:e,references:n,contentId:t,extensionKey:r,macroRenderedOutputFromSSR:o,macroOutput:a,spaceKey:d,context:l}=this.props;let s=this.props.mode;window.location.pathname.startsWith("/wiki/pdf/")&&(s="pdf");const{hasBodyBeenFetched:u}=this.state;if(!e)return null;if(!u)return c.createElement(h.n,{node:e});const m=(0,x.MK)(e);return c.createElement(y.z1.Consumer,null,(({contentId:u})=>c.createElement(fe.N.Consumer,null,(({shouldRefetchMacroQuery:p})=>c.createElement(i.eT,{client:(0,f.WQ)()},c.createElement(b.F.Provider,{value:(0,R.OV)()},c.createElement(g.e,null,(({featureFlags:c})=>c[w.$W]?this.getQueryForMacroContentAndBodyForPossibleFrontendRendering(m,t,u,r,s,e,n,c,o,a,d,l,p):this.getQueryForMacroContentFromBackend(m,t,u,r,s,e,n,c,o,a,d,l,p)))))))))}}ye.displayName="LegacyMacroRendererQuery",(0,o.Z)(ye,"childContextTypes",{insertCss:d().func.isRequired})},927955:(e,n,t)=>{t.d(n,{M:()=>c});var r=t(12793),o=t(483565),a=t(844151),d=t(897599);function c({attributes:e,children:n=null,error:t,contentId:c,mode:l,name:i}){const s=(0,o.TW)(a.Sx);return(0,d.K)((()=>{s&&(t?function(e,n,t,o,d){(0,r.S)(n)?(0,a.SY)(t,o).abort({name:e,reason:`Aborted ${e} because of network error: ${n.toString()}`,checkForTimeout:!1,attributes:d}):(0,a.SY)(t,o).fail({name:e,error:n,attributes:d})}(i,t,l,c,e):(0,a.SY)(l,c).succeed({name:i,attributes:e}))}),[e,c,t,s,l,i]),n}},482885:(e,n,t)=>{t.d(n,{E:()=>o,s:()=>a});var r=t(538639);const o=()=>Boolean(r.SM.match(window.location.pathname)),a=e=>{if(!e)return!1;return[r.N4.name,r.uV.name,r.tz.name,r.zh.name,r.ri.name].includes(e)}},625485:(e,n,t)=>{t.d(n,{i:()=>d});var r=t(991332),o=t(122551),a=t(977421);function d(e){function n(n){const t=(0,a.f)();return o.createElement(e,(0,r.Z)((0,r.Z)({},n),{},{navigationPolicy:t}))}return n.displayName=`withNavigationPolicy(${e.displayName||e.name})`,n}},144024:(e,n,t)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,o=(r=t(122551))&&r.__esModule?r:{default:r},a=t(386056);const d=e=>o.default.createElement(a.Icon,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><path d="M13.31 5.343l7.359 13.17A1 1 0 0119.796 20H4.204a1 1 0 01-.873-1.488l7.36-13.169a1.5 1.5 0 012.618 0zM12 8.5a1.091 1.091 0 00-1.081 1.239l.513 3.766a.573.573 0 001.136 0l.513-3.766A1.091 1.091 0 0012 8.5zm0 8.63a1.125 1.125 0 100-2.25 1.125 1.125 0 000 2.25z" fill="currentColor" fill-rule="evenodd"/></svg>'},e));d.displayName="EditorWarningIcon";var c=d;n.default=c}}]);
//# sourceMappingURL=33763.7Sut9eCcZA.js.map