"use strict";(self._cf=self._cf||[]).push([[80196],{182441:(e,t,i)=>{i.d(t,{Z:()=>S});var r=i(122551),n=i(491603),a=i(685753),s=i(321534);const c=(0,s.iv)({display:"flex",marginBottom:"var(--ds-space-100, 8px)",paddingLeft:"var(--ds-space-500, 40px)",alignItems:"center",justifyContent:"center"}),o=({children:e})=>(0,s.tZ)("div",{css:c},e),l=(0,s.iv)({width:"var(--ds-space-300, 24px)",marginLeft:"var(--ds-space-200, 16px)"}),u=({children:e})=>(0,s.tZ)("div",{css:l},e);var d=i(676424);const p=(0,d.ww)(),h=6*p,f=8*p,g=2*p,m=(0,s.iv)({margin:`${h}px auto`,textAlign:"center"}),y=(0,s.iv)({maxWidth:6*f+5*g+"px"}),I=(0,s.iv)({maxWidth:4*f+3*g+"px"}),v=({children:e,width:t,testId:i})=>(0,s.tZ)("div",{"data-testid":i,css:[m,"narrow"===t?I:y]},e),b="--max-width",k="--max-height",w=(0,s.iv)({display:"block",maxWidth:"var(--max-width)",maxHeight:"var(--max-height)",margin:`0 auto ${3*(0,d.ww)()}px`}),j=({maxHeight:e,maxWidth:t,height:i="auto",width:r="auto",src:n})=>(0,s.tZ)("img",{style:{[b]:`${t}px`,[k]:`${e}px`},width:r,height:i,alt:"",role:"presentation",css:w,src:n});var x=i(171945);const P=(0,s.iv)([(0,x.lL)(),{marginTop:0,marginBottom:2*(0,d.ww)()+"px"}]),T=({children:e})=>(0,s.tZ)("h4",{css:P},e);var L=i(131436);const A=(0,s.iv)({marginTop:"var(--ds-space-0, 0px)",marginBottom:"var(--ds-space-300, 24px)",color:`var(--ds-text, ${L.q2})`}),C=({children:e})=>(0,s.tZ)("p",{css:A},e),S=({description:e,header:t,imageHeight:i,imageUrl:s,imageWidth:c,isLoading:l,maxImageHeight:d=160,maxImageWidth:p=160,primaryAction:h,renderImage:f,secondaryAction:g,width:m,size:y,tertiaryAction:I,testId:b})=>{const k=h||g||l?r.createElement(o,null,r.createElement(n.Z,null,g,h),r.createElement(u,null,l&&r.createElement(a.Z,null))):null;return r.createElement(v,{testId:b,width:m||y||"wide"},s?r.createElement(j,{src:s,maxWidth:p,maxHeight:d,width:c,height:i}):f&&f({maxImageWidth:p,maxImageHeight:d,imageWidth:c,imageHeight:i}),r.createElement(T,null,t),e&&r.createElement(C,null,e),k,I)}},299161:(e,t,i)=>{function r(e,t){this.v=e,this.k=t}function n(e){return new r(e,0)}function a(e){var t,i;function n(t,i){try{var s=e[t](i),c=s.value,o=c instanceof r;Promise.resolve(o?c.v:c).then((function(i){if(o){var r="return"===t?"return":"next";if(!c.k||i.done)return n(r,i);i=e[r](i).value}a(s.done?"return":"normal",i)}),(function(e){n("throw",e)}))}catch(l){a("throw",l)}}function a(e,r){switch(e){case"return":t.resolve({value:r,done:!0});break;case"throw":t.reject(r);break;default:t.resolve({value:r,done:!1})}(t=t.next)?n(t.key,t.arg):i=null}this._invoke=function(e,r){return new Promise((function(a,s){var c={key:e,arg:r,resolve:a,reject:s,next:null};i?i=i.next=c:(t=i=c,n(e,r))}))},"function"!=typeof e.return&&(this.return=void 0)}i.d(t,{Z:()=>C}),a.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},a.prototype.next=function(e){return this._invoke("next",e)},a.prototype.throw=function(e){return this._invoke("throw",e)},a.prototype.return=function(e){return this._invoke("return",e)};var s=i(29298);var c=i(289709),o=i(930484),l=i(605052),u=i(991332),d=i(319209);class p{constructor({url:e,cloudId:t,siteMasterList:i}){(0,s.Z)(this,"makePostRequest",((e,t)=>{const i={path:e,requestInit:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}};return d.utils.requestService(this.serviceConfig,i)})),this.serviceConfig={url:e},this.cloudId=t,this.siteMasterList=i}async search({query:e,context:t,scopes:i,modelParams:r,resultLimit:n,filters:a=[],experience:s,sites:c=[]}){const o=this.cloudId,l=c.length>0?c:((e=[])=>e.slice(0,3))(this.siteMasterList).map((e=>e.cloudId)),d=(0,u.Z)((0,u.Z)({query:e,cloudId:o,limit:n,scopes:i,filters:a,searchSession:t},r.length>0?{modelParams:r}:{}),{},{experience:s,cloudIds:l}),{result:h,durationMs:f}=await(async e=>{const t=Date.now();return{result:await e,durationMs:Date.now()-t}})(this.makePostRequest(p.QUICKSEARCH_API_URL,d));return{response:{rawData:h,retrieveScope:e=>h.scopes.find((t=>t.id===e))||null},requestDurationMs:f}}}(0,s.Z)(p,"QUICKSEARCH_API_URL","quicksearch/v1");class h{constructor(e,t,i,r="link-picker",n=!1){switch(t){case l.s.ConfluencePageBlog:case l.s.JiraIssue:break;default:throw new Error(`Unsupported scope - ${t}`)}this.scope=t,this.cloudId=e,this.analyticsIdentifier=r,this.useConfluenceTypeInAri=n;const a={cloudId:e,aggregatorUrl:i};this.client=(({cloudId:e,aggregatorUrl:t})=>{const i=new p({cloudId:e,url:t||"/gateway/api/xpsearch-aggregator",siteMasterList:[]});return{search:async function({query:e,scopes:t,resultLimit:r,analytics:n}){return i.search({query:e,context:{sessionId:n.sessionId?n.sessionId:"not-applicable",referrerId:null},scopes:t,modelParams:[],resultLimit:r,filters:[],experience:`external-${n.identifier}`})}}})(a)}getAriString(e){try{return new o.ResourceIdentifier(e).toString()}catch(t){return""}}confluencePageBlogResponseTransformer(e){return e?e.results.map((e=>{var t;return{title:e.title,url:e.baseUrl+e.url,container:e.container.title,contentType:this.mapToContentType(e.content&&e.content.type),updatedTimestamp:e.lastModified,objectId:this.getAriString({resourceOwner:"confluence",cloudId:this.cloudId,resourceType:this.useConfluenceTypeInAri&&(null===(t=e.content)||void 0===t?void 0:t.type)||"content",resourceId:e.content&&e.content.id})}})):[]}jiraIssueResponseTransformer(e){return e?e.results.map((e=>({title:e.name,url:e.url,container:e.attributes.container&&e.attributes.container.title||"",contentType:this.mapToContentType(e.attributes["@type"],e.attributes.issueTypeName),updatedTimestamp:e.attributes.updated,objectId:this.getAriString({resourceOwner:"jira",cloudId:this.cloudId,resourceType:"issue",resourceId:e.id})}))):[]}mapToContentType(e,t){switch(e){case"issue":switch(t){case"Bug":return"jira.issue.bug";case"Story":return"jira.issue.story";case"Task":return"jira.issue.task";default:return"jira.issue"}case"page":return"confluence.page";case"blogpost":return"confluence.blogpost";default:return"default"}}async quickSearch(e,t){const i=await this.client.search({query:e,scopes:[this.scope],analytics:{identifier:this.analyticsIdentifier},resultLimit:t});switch(this.scope){case l.s.ConfluencePageBlog:{const e=i.response.retrieveScope(this.scope);return this.confluencePageBlogResponseTransformer(e)}case l.s.JiraIssue:{const e=i.response.retrieveScope(this.scope);return this.jiraIssueResponseTransformer(e)}default:throw new Error(`Unsupported scope - ${this.scope}`)}}}var f=i(122551),g=i(467700),m=i(230253),y=i(272112),I=i(797685),v=i(425559),b=i(508358);const k=(0,i(464984).defineMessages)({hyperlinkIconIssueLabel:{id:"fabric.linkPicker.headingLink.hyperlinkIconIssueLabel",defaultMessage:"Issue"},hyperlinkIconBugLabel:{id:"fabric.linkPicker.headingLink.hyperlinkIconBugLabel",defaultMessage:"Bug"},hyperlinkIconStoryLabel:{id:"fabric.linkPicker.headingLink.hyperlinkIconStoryLabel",defaultMessage:"Story"},hyperlinkIconTaskLabel:{id:"fabric.linkPicker.headingLink.hyperlinkIconTaskLabel",defaultMessage:"Task"},hyperlinkIconPageLabel:{id:"fabric.linkPicker.headingLink.hyperlinkIconPageLabel",defaultMessage:"Page"},hyperlinkIconBlogLabel:{id:"fabric.linkPicker.headingLink.hyperlinkIconBlogLabel",defaultMessage:"Blog"},story:{id:"fabric.linkPicker.story",defaultMessage:"Story"},epic:{id:"fabric.linkPicker.epic",defaultMessage:"Epic"},task:{id:"fabric.linkPicker.task",defaultMessage:"Task"},bug:{id:"fabric.linkPicker.bug",defaultMessage:"Bug"},subTask:{id:"fabric.linkPicker.subTask",defaultMessage:"Sub-task"},improvement:{id:"fabric.linkPicker.improvement",defaultMessage:"Improvement"},defaultAltText:{id:"fabric.linkPicker.defaultAltText",defaultMessage:"List item"}});var w;!function(e){e[e["jira.issue"]=0]="jira.issue",e[e["jira.issue.bug"]=1]="jira.issue.bug",e[e["jira.issue.story"]=2]="jira.issue.story",e[e["jira.issue.task"]=3]="jira.issue.task",e[e["confluence.page"]=4]="confluence.page",e[e["confluence.blogpost"]=5]="confluence.blogpost"}(w||(w={}));const j={"jira.issue":{icon:({alt:e})=>f.createElement(y.default,{label:e}),iconAlt:k.hyperlinkIconIssueLabel},"jira.issue.bug":{icon:({alt:e})=>f.createElement(m.default,{label:e}),iconAlt:k.hyperlinkIconBugLabel},"jira.issue.story":{icon:({alt:e})=>f.createElement(v.default,{label:e}),iconAlt:k.hyperlinkIconStoryLabel},"jira.issue.task":{icon:({alt:e})=>f.createElement(b.default,{label:e}),iconAlt:k.hyperlinkIconTaskLabel},"confluence.page":{icon:({alt:e})=>f.createElement(I.Z,{label:e}),iconAlt:k.hyperlinkIconPageLabel},"confluence.blogpost":{icon:({alt:e})=>f.createElement(g.Z,{label:e}),iconAlt:k.hyperlinkIconBlogLabel}},x=e=>(e=>Boolean(e&&Object.keys(w).includes(e)))(e)?j[e]:{icon:({alt:e})=>f.createElement(I.Z,{label:e}),iconAlt:k.defaultAltText},P=e=>{let t=k.defaultAltText;return e.includes("story.svg")&&(t=k.story),e.includes("epic.svg")&&(t=k.epic),e.includes("avatarId=10318")&&(t=k.task),e.includes("avatarId=10303")&&(t=k.bug),e.includes("avatarId=10518")&&(t=k.subTask),e.includes("avatarId=10310")&&(t=k.improvement),t};const T=({object:e,containers:t,timestamp:i})=>{var r,n;let a=(null===(r=e.icon)||void 0===r?void 0:r.value)||"";return"EMOJI"===(null===(n=e.icon)||void 0===n?void 0:n.type)&&(a=e.icon.fallback||""),(0,u.Z)((0,u.Z)({objectId:e.id,name:e.name||"",container:A(t),url:e.url},(e=>({icon:e,iconAlt:P(e)}))(a)),{},{lastViewedDate:i?new Date(i):void 0,prefetch:!0,meta:{source:"recent-work"}})},L=({objectId:e,container:t,title:i,contentType:r,url:n,updatedTimestamp:a})=>(0,u.Z)((0,u.Z)({objectId:e,name:i,container:t,url:n},x(r)),{},{lastUpdatedDate:a?new Date(a):void 0,prefetch:!1,meta:{source:"xp-search"}}),A=e=>{for(let t=e.length-1;t>=0;--t){const i=e[t].name;if(i)return i}return""};const C=class{constructor(e){(0,s.Z)(this,"analyticsIdentifier","link-picker-quick-search"),(0,s.Z)(this,"useConfluenceTypeInAri",!0);const{tabConfig:t,activityClientEndpoint:i,disableActivityClient:r=!1,searchProvider:n,cloudId:a,scope:o,products:l,aggregatorUrl:u}=null!=e?e:{},{tabKey:d,tabTitle:p}=null!=t?t:{};this._tabKey=d||"Atlassian",this._tabTitle=p||"Atlassian",this.products=l,this.cloudId=a,this.searchProvider=n||this.createSearchProvider(o,u,this.analyticsIdentifier,this.useConfluenceTypeInAri),r||(this.activityClient=(0,c.r)("v3","link_picker_atlassian_plugin",void 0,i)),this.debouncedSearch=function(e,t){let i;return(...r)=>(i&&clearTimeout(i),new Promise(((n,a)=>{i=setTimeout((()=>{e(...r).then(n).catch(a)}),t)})))}((async e=>{if(!this.searchProvider)return[];return(await this.searchProvider).quickSearch(e,5)}),400)}createSearchProvider(e,t,i,r){if(this.cloudId&&e)return Promise.resolve(new h(this.cloudId,e,t,i,r))}async getRecentItems(){if(!this.activityClient)return[];if(!this.recentItems){const{viewed:e}=await this.activityClient.fetchActivities([50,125,250],{limit:100,products:this.products,rootContainerIds:void 0!==this.cloudId?[`ari:cloud:platform::site/${this.cloudId}`]:void 0},["viewed"],!0);this.recentItems=e.map(T)}return this.recentItems}async searchRecentItems({query:e}){return this.recentItems||await this.getRecentItems(),t=this.recentItems,(i=e)&&t?t.filter((e=>e.name.toLowerCase().indexOf(i.toLowerCase())>-1)):[];var t,i}async quickSearch(e){return(await this.debouncedSearch(e.query)).map(L)}mergeResults(e,t){return i=[...e,...t],r=(e,t)=>e.objectId===t.objectId,i.filter(((e,t,i)=>i.findIndex((t=>r?r(e,t):e===t))===t));var i,r}resolve(e){var t,i=this;return(t=function*(){if(i.activityClient&&0===e.query.length)return{data:yield n(i.getRecentItems())};const t=yield n(i.searchRecentItems(e));if(t.length>=5||!i.searchProvider)return{data:t};t.length&&(yield{data:t});const r=yield n(i.quickSearch(e));return{data:i.mergeResults(t,r)}},function(){return new a(t.apply(this,arguments))})()}get tabKey(){return this._tabKey}get tabTitle(){return this._tabTitle}}},605052:(e,t,i)=>{i.d(t,{s:()=>o});var r=i(991332);let n;!function(e){e.ConfluencePageBlogAttachment="confluence.page,blogpost,attachment",e.ConfluencePageBlog="confluence.page,blogpost",e.ConfluenceExperimentsPageBlogAttachment="confluence_experiments.page,blogpost,attachment",e.ConfluenceSpace="confluence.space",e.UserConfluence="urs.user-confluence"}(n||(n={}));let a,s,c;!function(e){e.JiraIssue="jira.issue",e.JiraPlan="jira.plan",e.JiraBoardProjectFilter="jira.board,project,filter",e.JiraBoardProjectFilterPlan="jira.board,project,filter,plan",e.JiraProject="jira.project",e.People="urs.user-jira"}(a||(a={})),function(e){e.JiraIssue="jira-issue",e.JiraBoard="jira-board",e.JiraProject="jira-project",e.JiraFilter="jira-filter",e.JiraPlan="jira-plan",e.JiraPeople="jira-people"}(s||(s={})),function(e){e.issue="issue",e.board="board",e.project="project",e.filter="filter",e.plan="plan",e.people="people"}(c||(c={}));const o=(0,r.Z)((0,r.Z)({},n),a)}}]);
//# sourceMappingURL=80196.Vcz45RiPhb.js.map