/*! License: 1235.LPm3gftLxw.js.LICENSE.txt */
(self._cf=self._cf||[]).push([[1235],{124915:(e,t,n)=>{"use strict";n.d(t,{p:()=>i,h:()=>s});var r=n(29298);class i{constructor(){(0,r.Z)(this,"listeners",{})}on(e,t){this.listeners[e]||(this.listeners[e]=new Set),this.listeners[e].add(t)}has(e,t){return!!this.listeners[e]&&this.listeners[e].has(t)}off(e,t){this.listeners[e]&&this.listeners[e].has(t)&&this.listeners[e].delete(t)}emit(e,t){this.listeners[e]&&this.listeners[e].forEach((e=>e(t)))}destroy(){this.listeners={}}}function s(e){return(t,n)=>{if(!t)throw new Error("event name is required!");const r="string"==typeof t?t:t.key;e.emit(r,n)}}},435715:(e,t,n)=>{"use strict";n.d(t,{J:()=>i});var r=n(313156);class i extends r.Plugin{constructor(e){super(e)}}},743290:(e,t,n)=>{"use strict";n.d(t,{m:()=>r,W:()=>i});const r=(0,n(676424).ww)(),i=2*r},530623:(e,t,n)=>{"use strict";n.d(t,{J:()=>r});const r=e=>{var t,n;if(!e||!e.collabEditPlugin$)return 1;return null!==(t=null===(n=e.collabEditPlugin$.participants)||void 0===n?void 0:n.size())&&void 0!==t?t:1}},963512:(e,t,n)=>{"use strict";n.d(t,{Rz:()=>a,vy:()=>d,qH:()=>c});var r=n(959557),i=n(530623),s=n(808402);let o=0;function a(e){var t,n;const r=e.state.analyticsPlugin$;const i=r&&r.performanceTracking&&r.performanceTracking.nodeViewTracking||{},s=null!==(t=i.samplingRate)&&void 0!==t?t:100,o=null!==(n=i.slowThreshold)&&void 0!==n?n:7;return{trackingEnabled:!!i.enabled,samplingRate:s,slowThreshold:o}}function d({nodeTypeName:e}){(0,s.MZ)(`🦉${e}::ReactNodeView`)}function c({nodeTypeName:e,dispatchAnalyticsEvent:t,editorState:n,samplingRate:a,slowThreshold:d}){(0,s.H0)(`🦉${e}::ReactNodeView`,(s=>{++o%a==0&&s>d&&t({action:r.om.REACT_NODEVIEW_RENDERED,actionSubject:r.Wt.EDITOR,eventType:r.Ze.OPERATIONAL,attributes:{node:e,duration:s,participants:(0,i.J)(n)}})}))}},599468:(e,t,n)=>{"use strict";n.d(t,{$:()=>r,V:()=>i});const r="​",i="‍"},958966:(e,t,n)=>{"use strict";n.d(t,{f:()=>u});var r=n(991332),i=n(29298),s=n(122551),o=n(64172),a=n.n(o),d=n(959557),c=n(124915),l=n(808402),h=n(751050),p=n(530623);class u extends s.Component{constructor(...e){super(...e),(0,i.Z)(this,"listeners",{}),(0,i.Z)(this,"debounce",null),(0,i.Z)(this,"notAppliedState",{}),(0,i.Z)(this,"isSubscribed",!1),(0,i.Z)(this,"callsCount",0),(0,i.Z)(this,"state",this.getPluginsStates(this.props.plugins,this.getEditorView(this.props,this.context))),(0,i.Z)(this,"handlePluginStateChange",((e,t,n,r)=>i=>{(this.state[e]!==i||r)&&this.updateState({stateSubset:{[e]:i},pluginName:t,performanceOptions:n})})),(0,i.Z)(this,"updateState",(({stateSubset:e,pluginName:t,performanceOptions:n})=>{this.notAppliedState=(0,r.Z)((0,r.Z)({},this.notAppliedState),e),this.debounce&&window.clearTimeout(this.debounce);const i=!1!==this.props.debounce?e=>window.setTimeout(e,0):e=>e();this.debounce=i((()=>{const e=`🦉${t}::WithPluginState`;n.trackingEnabled&&(0,l.MZ)(e),this.setState(this.notAppliedState,(()=>{n.trackingEnabled&&(0,l.H0)(e,(e=>{if(++this.callsCount%n.samplingRate==0&&e>n.slowThreshold){const n=this.getEditorView();this.dispatchAnalyticsEvent({action:d.om.WITH_PLUGIN_STATE_CALLED,actionSubject:d.Wt.EDITOR,eventType:d.Ze.OPERATIONAL,attributes:{plugin:t,duration:e,participants:(0,p.J)(n&&n.state)}})}}))})),this.debounce=null,this.notAppliedState={}}))})),(0,i.Z)(this,"dispatchAnalyticsEvent",(e=>{const t=this.getEventDispatcher();if(t){(0,c.h)(t)(h.DQ,{payload:e})}})),(0,i.Z)(this,"onContextUpdate",(()=>{this.subscribe(this.props)}))}getEditorView(e,t){const n=e||this.props,r=t||this.context;return n.editorView||r&&r.editorActions&&r.editorActions._privateGetEditorView()||r&&r.editorSharedConfig&&r.editorSharedConfig.editorView}getEventDispatcher(e){return(e||this.props).eventDispatcher||this.context&&this.context.editorActions&&this.context.editorActions._privateGetEventDispatcher()||this.context&&this.context.editorSharedConfig&&this.context.editorSharedConfig.eventDispatcher}getPluginsStates(e,t){if(!t||!e)return{};return Object.keys(e).reduce(((n,r)=>{const i=e[r];return i?(n[r]=i.getState(t.state),n):n}),{})}subscribe(e){var t,n;const r=e.plugins,i=this.getEventDispatcher(e),s=this.getEditorView(e);if(!i||!s||this.isSubscribed)return;const o=s.state.analyticsPlugin$;const a=o&&o.performanceTracking&&o.performanceTracking.uiTracking||{},d=!0===a.enabled,c=null!==(t=a.samplingRate)&&void 0!==t?t:100,l=null!==(n=a.slowThreshold)&&void 0!==n?n:4;this.isSubscribed=!0;const h=this.getPluginsStates(r,s);this.setState(h),Object.keys(r).forEach((e=>{const t=r[e];if(!t)return;const n=t.key,s=h[e],o=s&&s.subscribe,a=this.handlePluginStateChange(e,n,{samplingRate:c,slowThreshold:l,trackingEnabled:d},o);o?s.subscribe(a):i.on(t.key,a),this.listeners[t.key]={handler:a,pluginKey:t}}))}unsubscribe(){const e=this.getEventDispatcher(),t=this.getEditorView();e&&t&&this.isSubscribed&&(Object.keys(this.listeners).forEach((n=>{const r=this.listeners[n].pluginKey.getState(t.state);r&&r.unsubscribe?r.unsubscribe(this.listeners[n].handler):e.off(n,this.listeners[n].handler)})),this.listeners=[])}subscribeToContextUpdates(e){e&&e.editorActions&&e.editorActions._privateSubscribe(this.onContextUpdate)}unsubscribeFromContextUpdates(e){e&&e.editorActions&&e.editorActions._privateUnsubscribe(this.onContextUpdate)}componentDidMount(){this.subscribe(this.props),this.subscribeToContextUpdates(this.context)}UNSAFE_componentWillReceiveProps(e){this.isSubscribed||this.subscribe(e)}componentWillUnmount(){this.debounce&&window.clearTimeout(this.debounce),this.unsubscribeFromContextUpdates(this.context),this.unsubscribe()}render(){const{render:e}=this.props;return e(this.state)}}u.displayName="WithPluginState",(0,i.Z)(u,"displayName","WithPluginState"),(0,i.Z)(u,"contextTypes",{editorActions:a().object,editorSharedConfig:a().object})},323646:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n(953307),i=n(29298),s=n(122551),o=n(124915),a=n(959557),d=n(30472),c=n(599301),l=n(963512);class h{constructor(e,t,n,r,s,a,c,l=!1,h,p=!1){(0,i.Z)(this,"handleRef",(e=>this._handleRef(e))),(0,i.Z)(this,"dispatchAnalyticsEvent",(e=>{if(this.eventDispatcher){(0,o.h)(this.eventDispatcher)(d.D,{payload:e})}})),this.node=e,this.view=t,this.getPos=n,this.portalProviderAPI=r,this.reactComponentProps=a||{},this.reactComponent=c,this.hasAnalyticsContext=l,this._viewShouldUpdate=h,this.eventDispatcher=s,this.hasIntlContext=p}init(){this.domRef=this.createDomRef(),this.setDomAttrs(this.node,this.domRef);const{dom:e,contentDOM:t}=this.getContentDOM()||{dom:void 0,contentDOM:void 0};this.domRef&&e&&(this.domRef.appendChild(e),this.contentDOM=t||e,this.contentDOMWrapper=e||t),this.domRef.classList.add(`${this.node.type.name}View-content-wrap`);const{samplingRate:n,slowThreshold:r,trackingEnabled:i}=(0,l.Rz)(this.view);return i&&(0,l.vy)({nodeTypeName:this.node.type.name}),this.renderReactComponent((()=>this.render(this.reactComponentProps,this.handleRef))),i&&(0,l.qH)({nodeTypeName:this.node.type.name,dispatchAnalyticsEvent:this.dispatchAnalyticsEvent,editorState:this.view.state,samplingRate:n,slowThreshold:r}),this}renderReactComponent(e){if(!this.domRef||!e)return;this.portalProviderAPI.render((()=>{var t,n,r;return s.createElement(c.S,{component:a.Wt.REACT_NODE_VIEW,componentId:null!==(t=null==this||null===(n=this.node)||void 0===n||null===(r=n.type)||void 0===r?void 0:r.name)&&void 0!==t?t:a.VJ.UNKNOWN_NODE,dispatchAnalyticsEvent:this.dispatchAnalyticsEvent},e())}),this.domRef,this.hasAnalyticsContext,this.hasIntlContext)}createDomRef(){if(!this.node.isInline)return document.createElement("div");return document.createElement("span")}getContentDOM(){}_handleRef(e){const t=this.contentDOMWrapper||this.contentDOM;e&&t&&!e.contains(t)&&e.appendChild(t)}render(e,t){return this.reactComponent?s.createElement(this.reactComponent,(0,r.Z)({view:this.view,getPos:this.getPos,node:this.node,forwardRef:t},e)):null}update(e,t,n,r=(()=>!0)){return!(this.node.type!==e.type||!r(this.node,e))&&(this.domRef&&!this.node.sameMarkup(e)&&this.setDomAttrs(e,this.domRef),this.viewShouldUpdate(e)?(this.node=e,this.renderReactComponent((()=>this.render(this.reactComponentProps,this.handleRef))),!0):(this.node=e,!0))}viewShouldUpdate(e){return!this._viewShouldUpdate||this._viewShouldUpdate(e)}setDomAttrs(e,t){Object.keys(e.attrs||{}).forEach((n=>{t.setAttribute(n,e.attrs[n])}))}get dom(){return this.domRef}destroy(){this.domRef&&(this.portalProviderAPI.remove(this.domRef),this.domRef=void 0,this.contentDOM=void 0)}static fromComponent(e,t,n,r,i,s=!1){return(o,a,d)=>new h(o,a,d,t,n,r,e,!1,i,s).init()}}h.displayName="ReactNodeView"},30472:(e,t,n)=>{"use strict";n.d(t,{D:()=>i,f:()=>s});var r=n(295171);const i=n(751050).DQ,s=r.XD.editor},553462:(e,t,n)=>{"use strict";n.d(t,{b:()=>a,Z:()=>d});var r=n(122551),i=n(323646),s=n(416450),o=n(521752);class a extends i.Z{ignoreMutation(e){return this.node.type.isAtom||"selection"!==e.type&&"data-layout"!==e.attributeName}getContentDOM(){if(this.node.isInline)return;const e=document.createElement("div");return e.className=`${this.node.type.name}-content-dom-wrapper`,{dom:e}}render(e,t){var n;return r.createElement(o.Z,{nodeType:this.node.type.name},r.createElement(s.Z,{editorView:this.view,node:this.node,getPos:this.getPos,providerFactory:e.providerFactory,handleContentDOMRef:t,extensionHandlers:e.extensionHandlers,editorAppearance:null===(n=e.extensionNodeViewOptions)||void 0===n?void 0:n.appearance}))}}function d(e,t,n,r,i){return(s,o,d)=>new a(s,o,d,e,t,{providerFactory:n,extensionHandlers:r,extensionNodeViewOptions:i},void 0,void 0,void 0,!0).init()}a.displayName="ExtensionNode"},521752:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(122551),i=n(599468);const s=({children:e,nodeType:t})=>r.createElement("span",null,e,"inlineExtension"===t&&i.$)},416450:(e,t,n)=>{"use strict";n.d(t,{Z:()=>L});var r=n(29298),i=n(122551),s=n(388571),o=n(871100),a=n(429185),d=n(26840),c=n(205455),l=n(415911),h=n(953307),p=n(321534),u=n(269337),v=n(160752),m=n(479517),f=n(676424),y=n(131436);const g=e=>p.iv`
  background: ${(0,m.Z)({light:`var(--ds-background-neutral, ${y.IR})`,dark:`var(--ds-background-neutral, ${y.H8})`})(e)};
  border-radius: ${(0,f.E0)()}px;
  color: ${(0,m.Z)({dark:`var(--ds-text, ${y.ap})`})(e)};
  position: relative;
  vertical-align: middle;

  .ProseMirror-selectednode > span > & > .extension-overlay {
    box-shadow: inset 0px 0px 0px 2px ${`var(--ds-border-selected, ${y.VY})`};
    opacity: 1;
  }

  &.with-overlay {
    .extension-overlay {
      background: ${`var(--ds-background-neutral-hovered, ${y.os})`};
      color: transparent;
    }

    &:hover .extension-overlay {
      opacity: 1;
    }
  }
`,b=p.iv`
  border-radius: ${(0,f.E0)()}px;
  position: absolute;
  width: 100%;
  height: 100%;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s;
`,x=p.iv`
  display: inline-flex;
  align-items: center;

  & > img {
    margin: 0 4px;
  }
  /* TODO: fix in develop: https://atlassian.slack.com/archives/CFG3PSQ9E/p1647395052443259?thread_ts=1647394572.556029&cid=CFG3PSQ9E */
  /* stylelint-disable-next-line */
  label: placeholder-fallback;
`,w=p.iv`
  display: inline-block;
  max-width: 200px;
  margin-left: 5px;
  color: ${`var(--ds-text-subtlest, ${y.n2})`};
  text-overflow: ellipsis;
  white-space: nowrap;
  overflow: hidden;
`,E=p.iv`
  max-height: 16px;
  max-width: 16px;
  /* TODO: fix in develop: https://atlassian.slack.com/archives/CFG3PSQ9E/p1647395052443259?thread_ts=1647394572.556029&cid=CFG3PSQ9E */
  /* stylelint-disable-next-line */
  label: lozenge-image;
`;var S=n(743290);const R=e=>p.iv`
  ${g(e)}

  &.without-frame {
    background: transparent;
  }
  cursor: pointer;
  width: 100%;

  .extension-overflow-wrapper:not(.with-body) {
    overflow-x: auto;
  }
`,Z=p.iv`
  padding: ${S.m/2}px ${S.m/2}px 0px;
  vertical-align: middle;

  &.with-children:not(.without-frame) {
    padding: 4px 8px 8px;
  }
  &.without-frame {
    padding: 0;
  }
`,A=e=>p.iv`
  padding: ${S.m}px;
  background: ${(0,m.Z)({light:"var(--ds-surface, white)",dark:`var(--ds-surface, ${y.Dw})`})(e)};
  color: ${(0,m.Z)({dark:`var(--ds-text, ${y.fR})`})(e)};
  border: 1px solid ${`var(--ds-border, ${y.gt})`};
  border-radius: ${(0,f.E0)()}px;
  cursor: initial;
`,P=p.iv`
  padding: 0 ${S.m}px ${S.m}px;
`;var T=n(991332),N=n(595074);const O=({node:e,type:t})=>{if(!e.attrs.parameters)return;const{macroMetadata:n}=e.attrs.parameters;if(n&&n.placeholder){let e;return n.placeholder.forEach((n=>{n.type===t&&n.data&&n.data.url&&(e=n.data)})),e}};class C extends i.Component{render(){const{node:e}=this.props,t=O({node:e,type:"image"});if(t&&"extension"!==e.type.name)return this.renderImage(t);const n=O({node:e,type:"icon"});return this.renderFallback(n)}renderImage(e){const{extensionKey:t}=this.props.node.attrs,{url:n}=e,r=(0,l.Z)(e,["url"]);return(0,p.tZ)("img",(0,h.Z)({css:E,src:n},r,{alt:t}))}renderFallback(e){const{parameters:t,extensionKey:n}=this.props.node.attrs,{name:r}=this.props.node.type,i=t&&t.macroParams,s=t&&t.extensionTitle||t&&t.macroMetadata&&t.macroMetadata.title||n,o="extension"===r;return(0,p.tZ)("div",{css:x},e&&!o?this.renderImage((0,T.Z)({height:24,width:24},e)):(0,p.tZ)(N.default,{label:s}),(0,p.tZ)("span",{className:"extension-title"},(a=s).charAt(0).toUpperCase()+a.slice(1)),i&&!o&&(0,p.tZ)("span",{css:w},Object.keys(i).map((e=>e&&` | ${e} = ${i[e].value}`))));var a}}C.displayName="ExtensionLozenge";var k=n(843337),D=n(258126),I=n(658606),M=n.n(I);function $(e){const{node:t,handleContentDOMRef:n,children:r,widthState:i={width:0},handleRef:s,shadowClassNames:o,hideFrame:a,editorAppearance:d}=e,c="bodiedExtension"===t.type.name,h=!!r,u=a&&!("mobile"===d)&&!c||!1,m=e.getPos&&!isNaN(e.getPos())&&0===e.view.state.doc.resolve(e.getPos()).depth,f=["full-width","wide"].includes(t.attrs.layout)&&m&&"full-width"!==d,y=M()("extension-container","block",o,{"with-overlay":!c,"without-frame":u,"wider-layout":f}),g=M()({"with-children":h,"without-frame":u});let x={};if(f){const e=(0,v.wV)({mode:t.attrs.layout,widthStateWidth:i.width,widthStateLineLength:i.lineLength}),{type:n}=e;x=(0,l.Z)(e,["type"])}return(0,p.tZ)("div",{ref:s,"data-layout":t.attrs.layout,className:y,css:R,style:x},(0,p.tZ)("div",{className:"extension-overflow-wrapper "+(c?"with-body":"")},(0,p.tZ)("div",{css:b,className:"extension-overlay"}),(0,p.tZ)("div",{css:Z,contentEditable:!1,className:g},!u&&(0,p.tZ)(C,{node:t}),r),c&&(0,p.tZ)("div",{css:P},(0,p.tZ)("div",{css:A,ref:n,className:"extension-content block"}))))}const _=(0,u.Z)((e=>(0,p.tZ)(D.Z,{editorView:e.view,plugins:{widthState:k.ux},render:({widthState:t})=>(0,p.tZ)($,(0,h.Z)({widthState:t},e))})),{overflowSelector:".extension-overflow-wrapper"}),W=e=>p.iv`
  ${g(e)}

  cursor: pointer;
  display: inline-flex;
  margin: 1px 1px 4px;

  > img {
    border-radius: ${(0,f.E0)()}px;
  }

  &::after,
  &::before {
    vertical-align: text-top;
    display: inline-block;
    width: 1px;
    content: '';
  }

  &.with-children {
    padding: 0;
    background: ${"var(--ds-background-neutral-subtle, white)"};
  }
`;class F extends i.Component{render(){const{node:e,children:t}=this.props,n=!!t?"with-overlay with-children":"with-overlay";return(0,p.tZ)("div",{css:W,className:`extension-container inline ${n}`},(0,p.tZ)("div",{css:b,className:"extension-overlay"}),t||(0,p.tZ)(C,{node:e}))}}F.displayName="InlineExtension";class V extends i.Component{constructor(...e){super(...e),(0,r.Z)(this,"privatePropsParsed",!1),(0,r.Z)(this,"state",{}),(0,r.Z)(this,"mounted",!1),(0,r.Z)(this,"getNodeRenderer",(0,a.Z)(d.ZY)),(0,r.Z)(this,"getExtensionModuleNodePrivateProps",(0,a.Z)(d.tV)),(0,r.Z)(this,"setStateFromPromise",((e,t)=>{t&&t.then((t=>{this.mounted&&this.setState({[e]:t})}))})),(0,r.Z)(this,"parsePrivateNodePropsIfNeeded",(async()=>{if(this.privatePropsParsed||!this.state.extensionProvider)return;this.privatePropsParsed=!0;const{extensionType:e,extensionKey:t}=this.props.node.attrs;try{const n=await this.getExtensionModuleNodePrivateProps(this.state.extensionProvider,e,t);this.setState({_privateProps:n})}catch(n){console.error("Provided extension handler has thrown an error\n",n)}})),(0,r.Z)(this,"handleExtension",(e=>{var t,n,r;const{extensionHandlers:s,editorView:o}=this.props,{extensionType:a,extensionKey:d,parameters:l,text:h}=e.attrs;if("bodiedExtension"===e.type.name)return;const p=null==e||null===(t=e.marks)||void 0===t||null===(n=t.find((e=>"fragment"===e.type.name)))||void 0===n||null===(r=n.attrs)||void 0===r?void 0:r.localId,u={type:e.type.name,extensionType:a,extensionKey:d,parameters:l,content:h,localId:e.attrs.localId,fragmentLocalId:p};let v;if(s&&s[a]){v=(0,c.c)(s[a])(u,o.state.doc)}if(!v){const e=this.state.extensionProvider&&this.getNodeRenderer(this.state.extensionProvider,a,d);if(e){const t=e;return i.createElement(t,{node:u,references:this.props.references})}}return v}))}UNSAFE_componentWillMount(){this.mounted=!0}componentDidMount(){const{extensionProvider:e}=this.props;e&&this.setStateFromPromise("extensionProvider",e)}componentDidUpdate(){this.parsePrivateNodePropsIfNeeded()}componentWillUnmount(){this.mounted=!1}UNSAFE_componentWillReceiveProps(e){const{extensionProvider:t}=e;t&&this.props.extensionProvider!==t&&this.setStateFromPromise("extensionProvider",t)}render(){var e;const{node:t,handleContentDOMRef:n,editorView:r,references:s,editorAppearance:o}=this.props,a=this.tryExtensionHandler();switch(t.type.name){case"extension":case"bodiedExtension":return i.createElement(_,{node:t,getPos:this.props.getPos,references:s,extensionProvider:this.state.extensionProvider,handleContentDOMRef:n,view:r,editorAppearance:o,hideFrame:null===(e=this.state._privateProps)||void 0===e?void 0:e.__hideFrame},a);case"inlineExtension":return i.createElement(F,{node:t},a);default:return null}}tryExtensionHandler(){const{node:e}=this.props;try{const t=this.handleExtension(e);if(t&&i.isValidElement(t))return t}catch(t){console.error("Provided extension handler has thrown an error\n",t)}return null}}V.displayName="ExtensionComponent";class L extends i.Component{constructor(e){super(e),(0,r.Z)(this,"renderWithProvider",(({extensionProvider:e})=>{const{node:t,getPos:n,editorView:r,handleContentDOMRef:s,extensionHandlers:o,references:a,editorAppearance:d}=this.props;return i.createElement(V,{editorView:r,node:t,getPos:n,references:a,extensionProvider:e,handleContentDOMRef:s,extensionHandlers:o,editorAppearance:d})})),this.providerFactory=e.providerFactory||new s.Z}componentWillUnmount(){this.props.providerFactory||this.providerFactory.destroy()}render(){return i.createElement(o.S,{providers:["extensionProvider"],providerFactory:this.providerFactory,renderNode:this.renderWithProvider})}}L.displayName="Extension",(0,r.Z)(L,"displayName","Extension")},843337:(e,t,n)=>{"use strict";n.d(t,{ux:()=>s,ZP:()=>o});var r=n(991332),i=n(435715);const s=new(n(313156).PluginKey)("widthPlugin");const o=()=>({name:"width",pmPlugins:()=>[{name:"width",plugin:({dispatch:e})=>function(e){return new i.J({key:s,state:{init:()=>({width:document.body.offsetWidth,containerWidth:document.body.offsetWidth}),apply(t,n){const i=t.getMeta(s);if(!i)return n;const o=(0,r.Z)((0,r.Z)({},n),i);return o&&(n.width!==o.width||n.lineLength!==o.lineLength)||n.containerWidth!==o.containerWidth?(e(s,o),o):n}}})}(e)}],contentComponent({editorView:e,containerElement:t}){const n={lineLength:e.dom.clientWidth};var r;t&&(n.width=t.offsetWidth,n.containerWidth=null===(r=t.parentElement)||void 0===r?void 0:r.offsetWidth);const i=e.state.tr.setMeta(s,n);return e.dispatch(i),null}})},599301:(e,t,n)=>{"use strict";n.d(t,{S:()=>o});var r=n(29298),i=n(122551),s=n(959557);class o extends i.Component{constructor(...e){super(...e),(0,r.Z)(this,"state",{errorCaptured:!1})}hasFallback(){return void 0!==this.props.fallbackComponent}shouldRecover(){return this.hasFallback()&&this.state.errorCaptured}componentDidCatch(e,t){this.props.dispatchAnalyticsEvent&&this.props.dispatchAnalyticsEvent({action:s.om.EDITOR_CRASHED,actionSubject:this.props.component,actionSubjectId:this.props.componentId,eventType:s.Ze.OPERATIONAL,attributes:{error:e,errorInfo:t,errorRethrown:!this.hasFallback()}}),this.hasFallback()&&this.setState({errorCaptured:!0})}render(){return this.shouldRecover()?this.props.fallbackComponent:this.props.children}}o.displayName="ErrorBoundary"},258126:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=n(958966).f},387740:(e,t,n)=>{"use strict";n.d(t,{yZ:()=>W,yp:()=>j,qh:()=>H,EK:()=>J,aZ:()=>z,O3:()=>L,Fp:()=>D,RL:()=>M,bG:()=>k,VZ:()=>_,bR:()=>I,Lf:()=>U,wt:()=>K,wy:()=>F});var r=n(239347),i=n(991332),s=n(755181);const o=e=>{let t=!1;return{transformedAdf:(0,s.f)(e,{text:e=>{if((e=>{var t;const n=null===(t=e.marks)||void 0===t?void 0:t.map((e=>e.type));return(null==n?void 0:n.includes("link"))&&(null==n?void 0:n.includes("code"))})(e))return t=!0,(e=>e.marks?(0,i.Z)((0,i.Z)({},e),{},{marks:e.marks.filter((e=>"code"!==e.type))}):e)(e)}}),isTransformed:t}},a=new Set(["strong","underline","textColor","link","em","subsup","strike"]),d=e=>{let t=!1,n=[];return{transformedAdf:(0,s.f)(e,{text:e=>{if((e=>{var t,n;const r=null===(t=e.marks)||void 0===t||null===(n=t.map((e=>e.type)))||void 0===n?void 0:n.filter((e=>a.has(e)||"annotation"===e));return!(null==r||!r.length)&&new Set(r).size!==r.length})(e)){const r=(e=>{const t=new Map,n=new Map,r=[];if(a.forEach((e=>{t.set(e,!1)})),!e.marks)return{discardedMarks:r};let s=e.marks.filter((e=>{const i=e.type;if("annotation"===i){var s;const t=null===(s=e.attrs)||void 0===s?void 0:s.id;return n.has(t)?(r.push(e),!1):(n.set(t,!0),!0)}return!t.has(i)||(t.get(i)?(r.push(e),!1):(t.set(i,!0),!0))}));return{node:(0,i.Z)((0,i.Z)({},e),{},{marks:s}),discardedMarks:r}})(e),s=r.discardedMarks;if(s.length)return n.push(...s),t=!0,r.node}}}),isTransformed:t,discardedMarks:n}};function c(e){return"string"==typeof e?{type:"text",text:e}:e}const l=(...e)=>{return{type:"paragraph",content:(t=e,t.map(c))};var t},h=e=>({type:"listItem",content:e}),p=e=>({type:"tableRow",content:e}),u=e=>(...t)=>({type:"tableCell",attrs:e,content:t}),v=e=>{var t;return!(null!=e&&null!==(t=e.content)&&void 0!==t&&t.length)},m=e=>{switch(e.type){case"tableCell":return[l()];default:return[]}},f=e=>t=>{if(v(t))return e(),(0,i.Z)((0,i.Z)({},t),{},{content:m(t)})},y=e=>t=>{if((e=>{var t;return null===(t=e.content)||void 0===t?void 0:t.some((e=>"listItem"!==(null==e?void 0:e.type)))})(t)||(e=>{var t;return null===(t=e.content)||void 0===t?void 0:t.some((e=>{var t;return"listItem"===(null==e?void 0:e.type)&&!(null!==(t=e.content)&&void 0!==t&&t.length)}))})(t))return e(),(0,i.Z)((0,i.Z)({},t),{},{content:(n=t,null===(r=n.content)||void 0===r?void 0:r.map((e=>{if(e)switch(e.type){case"listItem":return v(e)?h([l()]):e;case"text":return h([l(e)]);default:return h([e])}return e})))});var n,r},g=e=>{var t;const n=(e=>{var t;let n=1;return null===(t=e.content)||void 0===t||t.forEach((e=>{var t;"tableRow"===(null==e?void 0:e.type)&&"number"==typeof(null===(t=e.content)||void 0===t?void 0:t.length)&&e.content.length>n&&(n=e.content.length)})),n})(e);return null===(t=e.content)||void 0===t?void 0:t.map((e=>{if(e)switch(e.type){case"text":return p([u({})(l(e)),...new Array(n-1).fill(u({})(l()))]);case"tableCell":return p([e]);case"tableRow":return v(e)?p([...new Array(n).fill(u({})(l()))]):e;default:return e}return e}))},b=e=>t=>{if((e=>{var t;return null==e||null===(t=e.content)||void 0===t?void 0:t.some((e=>{var t;return"tableRow"===(null==e?void 0:e.type)&&0===(null==e||null===(t=e.content)||void 0===t?void 0:t.length)}))})(t)||(e=>{var t;return null===(t=e.content)||void 0===t?void 0:t.some((e=>"tableRow"!==(null==e?void 0:e.type)))})(t))return e(),(0,i.Z)((0,i.Z)({},t),{},{content:g(t)})},x=e=>t=>{if(v(t))return e(),!1},w=e=>{var t,n;return null!==(t=null===(n=e.content)||void 0===n?void 0:n.some((e=>{var t;return"heading"===(null==e?void 0:e.type)&&(null==e||null===(t=e.marks)||void 0===t?void 0:t.some((e=>"indentation"===e.type)))})))&&void 0!==t&&t},E=e=>{var t;return(0,i.Z)((0,i.Z)({},e),{},{content:null===(t=e.content)||void 0===t?void 0:t.map((e=>{var t;return"heading"===(null==e?void 0:e.type)?(0,i.Z)((0,i.Z)({},e),{},{marks:null===(t=e.marks)||void 0===t?void 0:t.filter((e=>"indentation"!==e.type))}):e}))})},S=(e,t)=>{let n={};return e.forEach(((e,r)=>{null!=e&&e.type&&t.includes(e.type)&&(n[e.type]?n[e.type]++:n[e.type]=1)})),n},R=(e,t,n)=>{let r=10,i=S(t,[e])[e],s=t.findIndex(n);for(;i>1&&s>-1&&r-- >0;)t.splice(s,1),s=t.findIndex(n),i=S(t,[e])[e]},Z=e=>{let t=!1;return{transformedAdf:(0,s.f)(e,{mediaSingle:e=>{var n;if(null==e||null===(n=e.content)||void 0===n||!n.length)return;const r=S(e.content,["media","caption"]);return Object.values(r).some((e=>e>1))?(t=!0,((e,t)=>{if(!e.content)return;const n=[...e.content];return Object.keys(t).forEach((e=>{R(e,n,(t=>(null==t?void 0:t.type)===e&&v(t))),R(e,n,(t=>(null==t?void 0:t.type)===e))})),(0,i.Z)((0,i.Z)({},e),{},{content:n})})(e,r)):void 0}}),isTransformed:t}};var A=n(560918),P=n(845130);var T=n(102903),N=n(408798);const O=(e,t)=>{const n=t&&t.isInSet(e.marks);return n?n.attrs.mode:e.attrs.layout};var C=n(959557);function k(e){return!!e&&"paragraph"===e.type.name&&!e.childCount}function D(e){if(e.isInline)return(t=e).isText?!!t.textContent.trim():"hardBreak"!==t.type.name;if(e.isBlock&&(e.isLeaf||e.isAtom))return!0;if(!e.childCount)return!1;var t;for(let n=0;n<e.childCount;n++){const t=e.child(n);if(!["paragraph","text","hardBreak"].includes(t.type.name)||D(t))return!0}return!1}function I(e){if(e&&e.textContent)return!1;if(!e||!e.childCount||1===e.childCount&&k(e.firstChild))return!0;const t=[],n=[];return e.forEach((e=>{e.isInline?n.push(e):t.push(e)})),!n.length&&!t.filter((e=>!!e.childCount&&!(1===e.childCount&&k(e.firstChild))||e.isAtom)).length}function M(e){const t=e.content.firstChild;return!(1!==e.childCount||!t)&&k(t)}function $(e){return 1===e.depth}function _(e){const{selection:t}=e,{$cursor:n,$anchor:r}=t;if(!n)return!1;const i=n.node();return!!i&&(k(i)&&$(r))}function W(e){const{selection:t}=e,{$cursor:n,$anchor:r}=t;if(!n)return!1;const i=n.nodeBefore;if(!i)return!1;if("text"===i.type.name&&"{"===i.text){return 0===r.node().marks.length&&$(r)}return!1}function F(e,t,n,i,a,c){if(!t)return;let l;if("string"==typeof t)try{if(a){l=a.parse(t).toJSON()}else l=JSON.parse(t)}catch(p){return void console.error(`Error processing value: ${t} isn't a valid JSON`)}else l=t;var h;if(Array.isArray(l))console.error(`Error processing value: ${l} is an array, but it must be an object.`);else try{if("doc"===l.type&&(Array.isArray(l.content)&&0===l.content.length&&l.content.push({type:"paragraph",content:[]}),l.version||(l.version=1)),a)return r.Node.fromJSON(e,l);let{transformedAdf:t,isTransformed:h}=(0,A.e)(l);h&&c&&c({action:C.om.MEDIA_LINK_TRANSFORMED,actionSubject:C.Wt.EDITOR,eventType:C.Ze.OPERATIONAL}),({transformedAdf:t,isTransformed:h}=o(t)),h&&c&&c({action:C.om.TEXT_LINK_MARK_TRANSFORMED,actionSubject:C.Wt.EDITOR,eventType:C.Ze.OPERATIONAL});let p=[];({transformedAdf:t,isTransformed:h,discardedMarks:p}=d(t)),h&&c&&c({action:C.om.DEDUPE_MARKS_TRANSFORMED_V2,actionSubject:C.Wt.EDITOR,eventType:C.Ze.OPERATIONAL,attributes:{discardedMarkTypes:p.map((e=>e.type))}}),({transformedAdf:t,isTransformed:h}=(e=>{let t=!1;const n=()=>{t=!0};let r=(0,s.f)(e,{tableCell:f(n)});return r=(0,s.f)(r||e,{bulletList:y(n),orderedList:y(n),table:b(n),mediaSingle:x(n)}),{transformedAdf:r,isTransformed:t}})(t)),h&&c&&c({action:C.om.NODES_MISSING_CONTENT_TRANSFORMED,actionSubject:C.Wt.EDITOR,eventType:C.Ze.OPERATIONAL}),({transformedAdf:t,isTransformed:h}=(e=>{let t=!1;return{transformedAdf:(0,s.f)(e,{tableCell:e=>{if(w(e))return t=!0,E(e)},tableHeader:e=>{if(w(e))return t=!0,E(e)}}),isTransformed:t}})(t)),h&&c&&c({action:C.om.INDENTATION_MARKS_TRANSFORMED,actionSubject:C.Wt.EDITOR,eventType:C.Ze.OPERATIONAL}),({transformedAdf:t,isTransformed:h}=Z(t)),h&&c&&c({action:C.om.INVALID_MEDIA_CONTENT_TRANSFORMED,actionSubject:C.Wt.EDITOR,eventType:C.Ze.OPERATIONAL});const v=(0,T.gh)(e,t||l,c);let m=V(v,n,i);const g=r.Node.fromJSON(e,m);try{g.check()}catch(u){throw c&&c({action:C.om.INVALID_PROSEMIRROR_DOCUMENT,actionSubject:C.Wt.EDITOR,eventType:C.Ze.OPERATIONAL,attributes:{errorStack:u instanceof Error?u.stack:String(u)}}),u}return c&&(0,N.cn)(g,e,c),g}catch(p){if(c&&c({action:C.om.DOCUMENT_PROCESSING_ERROR,actionSubject:C.Wt.EDITOR,eventType:C.Ze.OPERATIONAL,nonPrivacySafeAttributes:{errorStack:p instanceof Error?p.stack:String(p)}}),console.error(`Error processing document:\n${p instanceof Error?p.message:String(p)}\n\n`,JSON.stringify(l)),(h=p)instanceof RangeError&&(h.message.match(/^Invalid collection of marks for node/)||h.message.match(/^Invalid content for node/)))throw p;return}}const V=(e,t,n)=>n&&t?function(e,t){const n=new Map;let r=!1;const o=(0,s.f)(e,{mention:e=>{if(e.attrs&&e.attrs.text){r=!0;const t=e.attrs.text,i=t.startsWith("@")?t.slice(1):t;n.set(e.attrs.id,i)}return(0,i.Z)((0,i.Z)({},e),{},{attrs:(0,i.Z)((0,i.Z)({},e.attrs),{},{text:""})})}});if(r&&t){const e=(r,i)=>{i&&i.then((r=>{(0,P.bj)(r)&&(n.forEach(((e,t)=>{r.cacheMentionName(t,e)})),n.clear(),t.unsubscribe("mentionProvider",e))}))};t.subscribe("mentionProvider",e)}return o}(e,t):e,L=e=>{let t=-1,n=-1;return e.steps.forEach((e=>{e.getMap().forEach(((e,r,i,s)=>{t=i<t||-1===t?i:t,n=s<n||-1===n?s:n}))})),-1!==t?{from:t,to:n}:null},j=e=>t=>{let n=null;for(let r=t.depth;r>0;r--){const i=t.node(r);e(i)&&(n={pos:r>0?t.before(r):0,start:t.start(r),depth:r,node:i})}return n},U=e=>e.selection.$to.parent.type===e.schema.nodes.paragraph&&e.selection.$to.pos===e.doc.resolve(e.selection.$to.pos).end();function H(e){return function({tr:e,doc:t}){const n=[],r=L(e);if(!r)return n;const i=Math.min(t.nodeSize-2,r.from),s=Math.min(t.nodeSize-2,r.to);return t.nodesBetween(i,s,((e,t)=>{n.push({node:e,pos:t})})),n}({tr:e,doc:e.doc})}function K(e,t,n){const r=L(e);r&&e.doc.nodesBetween(r.from,r.to,t,n)}function z(e){let t={};return e.nodesBetween(0,e.nodeSize-2,(e=>{t[e.type.name]=(t[e.type.name]||0)+1})),t}function J(e,t,n=["wide","full-width"]){const r=new Set;if("doc"===e.type.name&&e.childCount)for(let i=0;i<e.childCount&&r.size!==n.length;++i){const s=O(e.child(i),t.marks.breakout);s&&n.includes(s)&&r.add(s)}return[...r]}},658606:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var s=typeof n;if("string"===s||"number"===s)e.push(n);else if(Array.isArray(n)){if(n.length){var o=i.apply(null,n);o&&e.push(o)}}else if("object"===s)if(n.toString===Object.prototype.toString)for(var a in n)r.call(n,a)&&n[a]&&e.push(a);else e.push(n.toString())}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},595074:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(122551))&&r.__esModule?r:{default:r},s=n(386056);const o=e=>i.default.createElement(s.Icon,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><path d="M7 6.5c0-.276.228-.5.491-.5H13l4 4v7.5c0 .276-.228.5-.51.5H7.51a.508.508 0 01-.51-.5v-11zm5 1v2.999c0 .271.225.501.501.501H15.5L12 7.5z" fill="currentColor" fill-rule="evenodd"/></svg>'},e));o.displayName="EditorFileIcon";var a=o;t.default=a}}]);
//# sourceMappingURL=1235.LPm3gftLxw.js.map