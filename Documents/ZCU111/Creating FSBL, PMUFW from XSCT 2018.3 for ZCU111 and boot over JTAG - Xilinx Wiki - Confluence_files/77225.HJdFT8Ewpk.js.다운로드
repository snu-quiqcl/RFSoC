(self._cf=self._cf||[]).push([[77225],{564013:(e,t,n)=>{var i=n(935813);e.exports=function(e){return e&&e.length?i(e):[]}},682934:(e,t,n)=>{"use strict";n.d(t,{V:()=>g});var i=n(991332),o=n(415911),r=n(122551),a=n(28201),s=n(499082),l=n(331377);const c=l.ZP`query User($accountId:ID!){user(id:$accountId){id displayName}}`,d=l.ZP`query ContentType($contentId:ID!){content(id:$contentId){nodes{id type}}}`,u=(0,a.tM)({__loadable_id__:"UJOj6",name:"GrantAccessDialogPaint",loader:async()=>(await Promise.all([n.e(12705),n.e(61769),n.e(78248),n.e(54936),n.e(11216),n.e(38639),n.e(49149),n.e(17262)]).then(n.bind(n,417883))).GrantAccessDialog}),g=e=>{let{contentId:t,accountId:l,legacyInfo:g,shouldSSRGrantAccessRestrictions:S,buttonPlaceholder:m}=e,_=(0,o.Z)(e,["contentId","accountId","legacyInfo","shouldSSRGrantAccessRestrictions","buttonPlaceholder"]);const R=(0,a.ui)({__loadable_id__:"V-X0h",name:"GrantAccessDialog",loader:async()=>(await Promise.all([n.e(12705),n.e(61769),n.e(78248),n.e(54936),n.e(11216),n.e(38639),n.e(49149),n.e(17262)]).then(n.bind(n,417883))).GrantAccessDialog,loading:()=>m}),h=S&&window.__SSR_RENDERED__,E=((e,t,n)=>{var i,o,r,a;const{data:l,loading:u,error:g}=(0,s.aM)(d,{variables:{contentId:e||""},skip:!e,fetchPolicy:n?"cache-first":"cache-and-network"}),{data:S,loading:m,error:_}=(0,s.aM)(c,{variables:{accountId:t},skip:!e,fetchPolicy:n?"cache-first":"cache-and-network"});return{isError:Boolean(g||_),isLoading:!l&&u||!S&&m,contentType:(null==l||null===(i=l.content)||void 0===i||null===(o=i.nodes)||void 0===o||null===(r=o[0])||void 0===r?void 0:r.type)||"page",displayName:(null==S||null===(a=S.user)||void 0===a?void 0:a.displayName)||""}})(t,l||(null==g?void 0:g.username)||"",h);return S?r.createElement(u,(0,i.Z)((0,i.Z)((0,i.Z)({contentId:t,accountId:l,legacyInfo:g},_),E),{},{shouldSSRGrantAccessRestrictions:S})):r.createElement(R,(0,i.Z)((0,i.Z)({contentId:t,accountId:l,legacyInfo:g},_),E))}},955749:(e,t,n)=>{"use strict";n.d(t,{D:()=>o});var i=n(122551);function o(){return i.createElement("div",{"data-testid":"restrictions-button-placeholder",style:{width:32,height:32}})}o.displayName="RestrictionsButtonPlaceholder"},799998:(e,t,n)=>{"use strict";n.d(t,{G:()=>k,L:()=>T});var i=n(991332),o=n(790632),r=n(122551),a=n(507080),s=n(325834),l=n(451379),c=n(199319),d=n(944997),u=n(526938),g=n(28201);const S=(0,g.ui)({__loadable_id__:"XiNhl",name:"ChangeEditionInlineDialogLoader",loader:async()=>(await Promise.all([n.e(12705),n.e(61769),n.e(78248),n.e(54936),n.e(11216),n.e(96207),n.e(99319),n.e(28201),n.e(84786),n.e(38639),n.e(15677),n.e(72522),n.e(4656),n.e(12466)]).then(n.bind(n,119488))).ChangeEditionInlineDialog}),m=(0,g.tM)({__loadable_id__:"abKR2",name:"ChangeEditionInlineDialogPaintLoader",loader:async()=>(await Promise.all([n.e(12705),n.e(61769),n.e(78248),n.e(54936),n.e(11216),n.e(96207),n.e(99319),n.e(28201),n.e(84786),n.e(38639),n.e(15677),n.e(72522),n.e(4656),n.e(12466)]).then(n.bind(n,119488))).ChangeEditionInlineDialog});var _=n(340575),R=n(682934),h=n(330828),E=n(772610),p=n(597936),I=n(402493),D=n(158466),w=n(216952),v=n(955749),f=n(717599);const y=()=>{return Boolean(null===(e=window.__SSR_EVENTS_CAPTURE__)||void 0===e?void 0:e.restrictionsButton)?r.createElement(f.C,{spinnerId:"restrictions-loading-spinner",actionType:"restrictionsButton"}):r.createElement(v.D,null);var e},b=(0,g.tM)({__loadable_id__:"DZnYq",name:"RestrictionsButtonLoaderPaint",loader:async()=>(await Promise.all([n.e(12705),n.e(61769),n.e(78248),n.e(54936),n.e(11216),n.e(96207),n.e(99319),n.e(28201),n.e(84786),n.e(38639),n.e(98650),n.e(28648)]).then(n.bind(n,616519))).RestrictionsButton,loading:y}),C=(0,g.ZR)({__loadable_id__:"RQyf9",name:"RestrictionsButtonLoaderAfterPaint",loader:async()=>(await Promise.all([n.e(12705),n.e(61769),n.e(78248),n.e(54936),n.e(11216),n.e(96207),n.e(99319),n.e(28201),n.e(84786),n.e(38639),n.e(98650),n.e(28648)]).then(n.bind(n,616519))).RestrictionsButton,loading:v.D});var B=n(902943);const A=(0,o.Z)("div",{target:"eywtb1e0"})({name:"1hp6i1l",styles:"display:inline-block;vertical-align:top;"}),P="bottom-end",k=(0,r.memo)((e=>{const t=(0,p.k)(e.contentId),{edition:n}=(0,D.D)(),[o,c]=(0,r.useState)({grantAccessClicked:!1,hasAutoOpenedRestrictionDialog:!1,showFreeRestrictionDialog:!1}),d=(0,s._)(),g=(0,r.useContext)(l.F),f=e=>()=>T((0,i.Z)((0,i.Z)({},d),{},{actionSubjectId:"restrictionsDialogButton",dialogStateContainer:e,edition:n,experienceTracker:g})),k=()=>{var e,t,n;(c((e=>(0,i.Z)((0,i.Z)({},e),{},{grantAccessClicked:!0}))),null!==(e=window)&&void 0!==e&&null!==(t=e.__SSR_EVENTS_CAPTURE__)&&void 0!==t&&t.restrictionsButton)&&(null===(n=window.__SSR_EVENTS_CAPTURE__)||void 0===n||delete n.restrictionsButton)},F=()=>{var e,t,n;(c((e=>(0,i.Z)((0,i.Z)({},e),{},{showFreeRestrictionDialog:!0}))),null!==(e=window)&&void 0!==e&&null!==(t=e.__SSR_EVENTS_CAPTURE__)&&void 0!==t&&t.restrictionsButton)&&(null===(n=window.__SSR_EVENTS_CAPTURE__)||void 0===n||delete n.restrictionsButton)},Z=()=>{var e,t,n;(c((e=>(0,i.Z)((0,i.Z)({},e),{},{showFreeRestrictionDialog:!1}))),null!==(e=window)&&void 0!==e&&null!==(t=e.__SSR_EVENTS_CAPTURE__)&&void 0!==t&&t.restrictionsButton)&&(null===(n=window.__SSR_EVENTS_CAPTURE__)||void 0===n||delete n.restrictionsButton)};return r.createElement(a.xs,{to:[B.j]},(a=>r.createElement(A,null,r.createElement(u.q,{key:`start-${t}`,metric:w.j}),n?r.createElement(E.M.Consumer,null,(({getQueryParams:s})=>{const{accountId:l,grantAccess:d,username:u}=s(),g=Boolean(d&&l||u);return n===_.m.FREE?((n,a)=>{const{isDisabled:s,triggeredFrom:l}=e,d="fromView"===l;return r.createElement(I.Jv,null,(({loading:e,error:u,restrictions:g})=>{if(!g&&e||u)return r.createElement(v.D,null);const _=Boolean((null==g?void 0:g.hasRestrictions)||(null==g?void 0:g.hasInheritedRestrictions)),R=Boolean((null==g?void 0:g.hasInheritedRestrictions)&&!(null!=g&&g.hasRestrictions)),h=((null==g?void 0:g.ancestors.length)||0)-1>0;if(_){if(h&&R){const e=(e=>{const t=(null==e?void 0:e.ancestors)||[];for(let n=t.length-1;n>=0;n--)if(t[n].hasRestrictions)return t[n]})(g);return d?r.createElement(m,{isOpen:o.showFreeRestrictionDialog,onClose:Z,parentData:e,isChildPage:h,placement:P},r.createElement(b,{contentId:t,isDisabled:s,shouldHideSpinner:o.showFreeRestrictionDialog,onClick:F,restrictionsButtonSSRRendered:!0,restrictionsButtonSSRLocation:"free inherited",triggeredFrom:l})):r.createElement(S,{isOpen:o.showFreeRestrictionDialog,onClose:Z,parentData:e,isChildPage:h,placement:P},r.createElement(C,{contentId:t,isDisabled:s,shouldHideSpinner:!0,onClick:F,restrictionsButtonSSRLocation:"free inherited",triggeredFrom:l}))}return a&&!o.hasAutoOpenedRestrictionDialog&&(f(n)(),c((e=>(0,i.Z)((0,i.Z)({},e),{},{hasAutoOpenedRestrictionDialog:!0})))),d?r.createElement(b,{contentId:t,isDisabled:s,shouldHideSpinner:n.getHideRestrictionsButtonSpinner(),resetDialogState:()=>n.initState(),onClick:f(n),restrictionsButtonSSRRendered:!0,restrictionsButtonSSRLocation:"free grandfather",triggeredFrom:l}):r.createElement(C,{contentId:t,isDisabled:s,shouldHideSpinner:!0,onClick:f(n),restrictionsButtonSSRLocation:"free grandfather",triggeredFrom:l})}return d?r.createElement(m,{isOpen:o.showFreeRestrictionDialog,onClose:Z,placement:P},r.createElement(b,{contentId:t,shouldHideSpinner:o.showFreeRestrictionDialog,isDisabled:s,onClick:F,restrictionsButtonSSRRendered:!0,restrictionsButtonSSRLocation:"free",triggeredFrom:l})):r.createElement(S,{isOpen:o.showFreeRestrictionDialog,onClose:Z,placement:P},r.createElement(C,{contentId:t,shouldHideSpinner:!0,isDisabled:s,onClick:F,restrictionsButtonSSRLocation:"free",triggeredFrom:l}))}))})(a,g):((n,i,a)=>{const{markItemAsLoaded:s,isDisabled:l,triggeredFrom:c}=e,d=n(),u="fromView"===c;return a&&!o.grantAccessClicked?r.createElement(R.V,{isOpen:!0,contentId:t,onActionClick:k,accessType:"edit"===(0,h.r)(d,"accessType")?"edit":"view",accountId:(0,h.r)(d,"accountId"),legacyInfo:{username:(0,h.r)(d,"username")||""},shouldSSRGrantAccessRestrictions:u,buttonPlaceholder:r.createElement(v.D,null)},u?r.createElement(b,{contentId:t,isDisabled:l,shouldHideSpinner:i.getHideRestrictionsButtonSpinner(),resetDialogState:()=>i.initState(),onClick:f(i),markItemAsLoaded:s,restrictionsButtonSSRRendered:!0,restrictionsButtonSSRLocation:"default grant access",triggeredFrom:c}):r.createElement(C,{contentId:t,isDisabled:l,shouldHideSpinner:!0,onClick:f(i),markItemAsLoaded:s,restrictionsButtonSSRLocation:"default grant access",triggeredFrom:c})):c&&"fromView"===c?r.createElement(b,{contentId:t,isDisabled:l,shouldHideSpinner:i.getHideRestrictionsButtonSpinner(),onClick:f(i),markItemAsLoaded:s,resetDialogState:()=>i.initState(),restrictionsButtonSSRRendered:!0,restrictionsButtonSSRLocation:"default",triggeredFrom:c}):r.createElement(C,{contentId:t,isDisabled:l,shouldHideSpinner:!0,onClick:f(i),markItemAsLoaded:s,restrictionsButtonSSRLocation:"default",triggeredFrom:c})})(s,a,g)})):r.createElement(y,null))))}));function T({actionSubjectId:e,createAnalyticsEvent:t,dialogStateContainer:n,edition:i,experienceTracker:o,triggeredFrom:r}){o.start({name:c.IP6,collect(e,t){t.stopOn(e.find((({action:e,name:t})=>!("taskFail"!==e&&"taskAbort"!==e||t!==c.$sg&&t!==c.fbA))))}}),o.start({name:c.$sg,timeout:d.O.DEFAULT}),n.setIsOpen(!0,r),t({type:"sendUIEvent",data:{source:"viewPageScreen",action:"clicked",actionSubject:"button",actionSubjectId:e,attributes:{source:"v2",triggeredFrom:r,edition:i}}}).fire(),w.w.start()}k.displayName="RestrictionsDialogTrigger"},717599:(e,t,n)=>{"use strict";n.d(t,{C:()=>c});var i=n(991332),o=n(790632),r=n(122551),a=n(685753),s=n(407552);const l=(0,o.Z)("div",{target:"e1ghqyl70"})("display:",(({showSpinner:e})=>e?"flex":"none"),";font-size:14px;width:32px;height:32px;justify-content:center;align-items:center;",(({styleOverride:e})=>null!=e?e:"")),c=({actionType:e,spinnerId:t,showSpinner:n,spinnerSize:o="small",style:c})=>{const d=Boolean(window.__SSR_EVENTS_CAPTURE__&&window.__SSR_EVENTS_CAPTURE__[`${e}`]||n),u=r.useRef(Date.now()%860);return r.createElement(l,{"data-id":t,showSpinner:d,"data-testid":t,styleOverride:c},r.createElement(s.ZP,null,(e=>r.createElement(a.Z,(0,i.Z)((0,i.Z)({size:o,delay:-u.current},e),{},{testId:`${t}-spinner`})))))};c.displayName="SSRActionLoadingSpinner"}}]);
//# sourceMappingURL=77225.HJdFT8Ewpk.js.map