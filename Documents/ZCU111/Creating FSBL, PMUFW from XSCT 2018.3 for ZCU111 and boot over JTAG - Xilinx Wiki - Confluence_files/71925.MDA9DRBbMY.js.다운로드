"use strict";(self._cf=self._cf||[]).push([[71925],{24252:(e,t,s)=>{s.d(t,{CG:()=>u});var n=s(236959),r=s(349656),a=s(122551),i=s(43460),o=s.n(i),l=s(158380);!function(e){function t(t){var s=e.call(this,t)||this;return s.withRef=!1,s.setWrappedInstance=s.setWrappedInstance.bind(s),s}(0,r.__extends)(t,e),t.prototype.getWrappedInstance=function(){return(0,l.kG)(this.withRef,2),this.wrappedInstance},t.prototype.setWrappedInstance=function(e){this.wrappedInstance=e}}(a.Component);function u(e,t){void 0===t&&(t={});var s="withApollo("+function(e){return e.displayName||e.name||"Component"}(e)+")",i=function(i){function o(e){var t=i.call(this,e)||this;return t.setWrappedInstance=t.setWrappedInstance.bind(t),t}return(0,r.__extends)(o,i),o.prototype.getWrappedInstance=function(){return(0,l.kG)(t.withRef,1),this.wrappedInstance},o.prototype.setWrappedInstance=function(e){this.wrappedInstance=e},o.prototype.render=function(){var s=this;return a.createElement(n.ab,null,(function(n){var i=Object.assign({},s.props,{client:n,ref:t.withRef?s.setWrappedInstance:void 0});return a.createElement(e,(0,r.__assign)({},i))}))},o.displayName=s,o.WrappedComponent=e,o}(a.Component);return o()(i,e,{})}},482587:(e,t,s)=>{s.r(t),s.d(t,{ExternalGroupLozengeProps:()=>c,ExternalGroupLozenge:()=>d});var n=s(991332),r=s(122551),a=s(464984),i=s(883383),o=s(103206),l=s(57198);const u=(0,a.defineMessages)({externalGroupLozengeText:{id:"external-collab-ui.group-guest-lozenge",defaultMessage:"Guest"},externalGroupTooltip:{id:"external-collab-ui.group-guest-lozenge.tooltip",defaultMessage:"Guest groups can only access certain spaces and have limited access to user info."}}),c={text:r.createElement(l.Z,{content:r.createElement(i.Z,(0,n.Z)({},u.externalGroupTooltip))},r.createElement(i.Z,(0,n.Z)({},u.externalGroupLozengeText))),appearance:"new",isBold:!1},d=()=>{const{text:e,appearance:t,isBold:s}=c;return r.createElement(o.Z,{appearance:t,isBold:s},e)};d.displayName="ExternalGroupLozenge"},513229:(e,t,s)=>{s.d(t,{f:()=>c});var n=s(991332),r=s(415911),a=s(499082),i=s(170915),o=s(475260),l=s(158466),u=s(572535);const c=({skip:e=!1,attribution:t=i.x.DISCO}={})=>{var s;const{cloudId:c}=(0,l.D)(),d=(0,a.aM)(u.Tf,{client:(0,o.e)(),variables:{cloudIds:[c]},skip:e||!c}),{data:p,error:h}=d,m=(0,r.Z)(d,["data","error"]);return h&&(0,u.S3)(t,h),(0,n.Z)((0,n.Z)({},m),{},{data:p,error:h,orgId:null==p||null===(s=p.tenantContexts[0])||void 0===s?void 0:s.orgId})}},505421:(e,t,s)=>{s.d(t,{Id:()=>at});var n=s(991332),r=s(415911),a=s(122551),i=s(358280),o=s(499082),l=s(24252),u=s(883383),c=s(953307),d=s(29298),p=s(222511),h=s(865518),m=s(964390),f=s(978671),g=s(26011),v=s.n(g),b=s(781095),y=s(261842);var Z=s(140026),x=s(163557),S=s(849278),I=s(253851);const C=new S.I("user-picker-rendered",{platform:{component:"user-picker"},type:I.Z.Load,performanceType:I.R.PageSegmentLoad}),P=new S.I("user-picker-options-shown",{platform:{component:"user-picker"},type:I.Z.Operation,performanceType:I.R.InlineResult});class E extends a.Component{componentDidCatch(){const e=C.getInstance(this.props.id);e.state.id!==f.h.FAILED.id&&e.failure()}render(){return this.props.children}}E.displayName="UfoErrorBoundary";const w=()=>null;class O extends a.Component{static getDerivedStateFromProps(e,t){const s={};return(e.isDisabled||e.disableInput)&&(s.menuIsOpen=!1),void 0!==e.open&&(s.menuIsOpen=e.open),void 0!==e.value?s.value=(0,x.ew)(e.value):(0,x.ad)(e.defaultValue)&&!t.isDefaultSet&&(s.value=(0,x.ew)(e.defaultValue),s.isDefaultSet=!0),void 0!==e.search&&e.search!==t.inputValue&&(s.inputValue=e.search),void 0!==e.options&&(s.options=e.options),s}constructor(e){super(e),(0,d.Z)(this,"getSessionId",(()=>this.session&&this.session.id?this.session.id:void 0)),(0,d.Z)(this,"withSelectRef",(e=>()=>{this.selectRef&&e(this.selectRef)})),(0,d.Z)(this,"nextOption",this.withSelectRef((e=>e.focusOption("down")))),(0,d.Z)(this,"previousOption",this.withSelectRef((e=>e.focusOption("up")))),(0,d.Z)(this,"focus",(()=>{this.selectRef&&this.selectRef.focus&&this.selectRef.focus()})),(0,d.Z)(this,"blur",(()=>{this.selectRef&&this.selectRef.blur&&this.selectRef.blur()})),(0,d.Z)(this,"selectOption",this.withSelectRef((e=>{const t=e.state.focusedOption;e.selectOption(t)}))),(0,d.Z)(this,"handleChange",((e,{action:t,removedValue:s,option:n})=>{if(s&&s.data.fixed)return;this.resetInputState();const{onChange:r,onSelection:a,onClear:i,isMulti:o}=this.props;switch((0,x.eZ)(r,(0,x.rQ)(e),t),t){case"select-option":e&&(0,x.eZ)(a,(0,x.rQ)(e),this.getSessionId()),this.fireEvent(y.lz,o?n:e),this.session=o?(0,y.yj)():void 0;break;case"clear":(0,x.eZ)(i),this.fireEvent(y.sf);break;case"remove-value":case"pop-value":s&&this.fireEvent(y.Bt,s.data)}if(this.fireEvent(y.S4),s&&this.state.value&&Array.isArray(this.state.value)){const e=this.state.value.filter((e=>e.data.id!==s.data.id));this.setState({value:e||[],menuIsOpen:!0})}this.props.value||this.setState({value:e||[]})})),(0,d.Z)(this,"handleSelectRef",(e=>{this.selectRef=e})),(0,d.Z)(this,"addOptions",function(e){const t={};return(s,...n)=>{t[s]||(window.setTimeout((()=>{e(s,t[s]),delete t[s]})),t[s]=[]),t[s].push(n)}}(((e,t)=>{const{resolving:s}=this.state;this.setState((({inflightRequest:n,options:r,count:a})=>n.toString()===e?{options:(s?r:[]).concat(t.reduce(((e,t)=>Array.isArray(t)?e.concat(t[0]):e.concat(t)),[])),count:a-t.length,resolving:a-t.length!=0}:null))}))),(0,d.Z)(this,"handleLoadOptionsError",(()=>{const{count:e}=this.state,t=e-1;this.setState({count:t,resolving:0!==t}),this.fireEvent(y.JT)})),(0,d.Z)(this,"debouncedLoadOptions",v()((e=>{const{loadOptions:t}=this.props;t&&this.setState((({inflightRequest:s})=>{const n=s+1,r=this.session&&this.session.id?t(e,this.session.id):t(e),a=this.addOptions.bind(this,n.toString());let i=0;if((0,x.TW)(r))for(const e of r)Promise.resolve(e).then(a).catch(this.handleLoadOptionsError),i++;else Promise.resolve(r).then(a).catch(this.handleLoadOptionsError),i++;return{inflightRequest:n,count:i,resolving:0!==i,options:[]}}))}),200)),(0,d.Z)(this,"abortOptionsShownUfoExperience",(()=>{this.optionsShownUfoExperienceInstance.state.id===f.h.STARTED.id&&this.optionsShownUfoExperienceInstance.abort()})),(0,d.Z)(this,"startOptionsShownUfoExperience",(()=>{this.abortOptionsShownUfoExperience(),this.optionsShownUfoExperienceInstance.start()})),(0,d.Z)(this,"executeLoadOptions",(e=>{const{loadOptions:t}=this.props;t&&this.setState({resolving:!0},(()=>this.debouncedLoadOptions(e)))})),(0,d.Z)(this,"handleFocus",(e=>{const{value:t,menuIsOpen:s}=this.state;if(s&&this.session||this.startSession(),this.startOptionsShownUfoExperience(),(0,x.eZ)(this.props.onFocus,this.getSessionId()),this.setState({menuIsOpen:!0}),!this.props.isMulti&&(0,x.Nh)(t)){const s=e.target;this.setState({inputValue:t.label},(()=>{s instanceof HTMLInputElement&&s.select()}))}})),(0,d.Z)(this,"resetInputState",(()=>{this.setState({inputValue:""}),(0,x.eZ)(this.props.onInputChange,"",this.getSessionId())})),(0,d.Z)(this,"handleBlur",(()=>{(0,x.eZ)(this.props.onBlur,this.getSessionId()),(0,x.cb)(this.props.SelectComponent)||(this.resetInputState(),this.abortOptionsShownUfoExperience(),this.setState({menuIsOpen:!1,options:[]}))})),(0,d.Z)(this,"handleClose",(()=>{this.resetInputState(),(0,x.eZ)(this.props.onClose,this.getSessionId()),this.setState({menuIsOpen:!1,options:[]})})),(0,d.Z)(this,"handleInputChange",((e,{action:t})=>{"input-change"!==t&&"set-value"!==t||((0,x.eZ)(this.props.onInputChange,e,this.getSessionId()),this.setState({inputValue:e}),this.startOptionsShownUfoExperience(),this.executeLoadOptions(e))})),(0,d.Z)(this,"fireEvent",((e,...t)=>{const{createAnalyticsEvent:s}=this.props;s&&(0,y._O)(e(this.props,this.state,this.session,this.journeyId,...t))(s)})),(0,d.Z)(this,"startSession",(()=>{this.session=(0,y.yj)(),this.journeyId=this.getSessionId(),this.fireEvent(y.qT)})),(0,d.Z)(this,"handleKeyDown",(e=>{if(27===e.keyCode&&this.blur(),32!==e.keyCode||this.state.inputValue||(e.preventDefault(),!this.props.disableInput&&this.setState({inputValue:" "})),this.session)switch(this.session.lastKey=e.keyCode,e.keyCode){case 38:this.session.upCount++;break;case 40:this.session.downCount++}})),(0,d.Z)(this,"handleClearIndicatorHover",(e=>{this.setState({hoveringClearIndicator:e})})),(0,d.Z)(this,"getOptions",(()=>{const e=(0,x.FW)(this.state.options)||[],{maxOptions:t,isMulti:s}=this.props;if(0===t)return[];if(t&&t>0&&t<e.length){const{value:n}=this.state;let r=e;if(s&&Array.isArray(n)){const t=n.map((e=>e.data.id));r=e.filter((e=>-1===t.indexOf(e.data.id)))}return r.slice(0,t)}return e})),(0,d.Z)(this,"getAppearance",(()=>this.props.appearance?this.props.appearance:"normal")),this.state={options:[],isDefaultSet:!1,inflightRequest:0,count:0,hoveringClearIndicator:!1,menuIsOpen:!!this.props.open,inputValue:e.search||"",resolving:!1},this.optionsShownUfoExperienceInstance=P.getInstance((0,b.v4)())}componentDidMount(){const{open:e,search:t}=this.props;e&&(this.session||this.startSession(),this.executeLoadOptions(t))}componentDidUpdate(e,t){const{menuIsOpen:s,options:n,resolving:r,count:a}=this.state;s&&!t.menuIsOpen&&(this.session||this.startSession(),this.executeLoadOptions()),!s&&t.menuIsOpen&&this.session&&(this.fireEvent(y.de,t),this.session=void 0),s&&(!t.menuIsOpen&&n.length>0||n.length!==t.options.length)&&this.fireEvent(y.S4),this.state.inputValue!==t.inputValue&&this.session&&(this.session.inputChangeTime=Date.now()),!s||e.loadOptions&&!t.menuIsOpen||0!==a||r||![f.h.STARTED.id,f.h.IN_PROGRESS.id].includes(this.optionsShownUfoExperienceInstance.state.id)||this.optionsShownUfoExperienceInstance.success()}render(){const{isMulti:e,isLoading:t,subtle:s,noBorder:n,placeholder:r,isClearable:i,isDisabled:o,clearValueLabel:l,menuMinWidth:d,menuPortalTarget:p,addMoreMessage:h,noOptionsMessage:m,disableInput:f,components:g,pickerProps:v,SelectComponent:b,styles:y,autoFocus:x,fieldId:S,inputId:I,maxPickerHeight:C,textFieldBackgroundColor:P,ariaLabelledBy:E,ariaLive:O}=this.props,{count:T,hoveringClearIndicator:k,menuIsOpen:M,value:A,inputValue:L,resolving:R}=this.state,D=this.getAppearance();return a.createElement(b,(0,c.Z)({value:A,autoFocus:void 0!==x?x:M,"aria-labelledby":E,"aria-live":O,ref:this.handleSelectRef,isMulti:e,options:this.getOptions(),styles:y,enableAnimation:e,components:g,inputValue:L,menuIsOpen:M,isLoading:T>0||R||t,loadingMessage:w,menuPlacement:"auto",placeholder:null!=r?r:a.createElement(u.Z,Z.s.placeholder),addMoreMessage:h,classNamePrefix:"fabric-user-picker",hoveringClearIndicator:k,appearance:D,isClearable:i,noBorder:n,subtle:s,blurInputOnSelect:!e,closeMenuOnSelect:!e,noOptionsMessage:m,openMenuOnFocus:!0,isDisabled:o,isFocused:M,backspaceRemovesValue:e,filterOption:null,clearValueLabel:l,menuMinWidth:d,menuPortalTarget:p,disableInput:f||o,instanceId:S,inputId:I,onChange:this.handleChange,onFocus:this.handleFocus,onBlur:this.handleBlur,onClose:this.handleClose,onInputChange:this.handleInputChange,onClearIndicatorHover:this.handleClearIndicatorHover,onKeyDown:this.handleKeyDown,maxPickerHeight:C,textFieldBackgroundColor:P},v))}}O.displayName="BaseUserPickerWithoutAnalytics",(0,d.Z)(O,"defaultProps",{isMulti:!1,subtle:!1,noBorder:!1,textFieldBackgroundColor:!1,isClearable:!0});(0,p.Z)()(O);var T=s(131436),k=s(429185),M=s(138504);const A=(0,k.Z)(((e,t,s,a)=>{let i={menu:(t,s)=>(0,n.Z)((0,n.Z)({},t),{},{width:e,minWidth:s.selectProps.menuMinWidth}),control:(t,r)=>{const a=r.selectProps.isMulti;return(0,n.Z)((0,n.Z)({},t),{},{width:e,borderColor:r.isFocused?`var(--ds-border-focused, ${t.borderColor})`:r.selectProps.subtle||r.selectProps.noBorder?"transparent":`var(--ds-border-input, ${T.YS})`,backgroundColor:r.isFocused?`var(--ds-background-input, ${t.backgroundColor})`:r.selectProps.subtle?"transparent":r.selectProps.textFieldBackgroundColor?`var(--ds-background-input, ${T.YI})`:`var(--ds-background-input, ${T.IR})`,"&:hover .fabric-user-picker__clear-indicator":{opacity:1},":hover":(0,n.Z)((0,n.Z)({},t[":hover"]),{},{borderColor:r.isFocused?t[":hover"]?`var(--ds-border-focused, ${t[":hover"].borderColor})`:`var(--ds-border-focused, ${T.vP})`:r.selectProps.subtle?"transparent":`var(--ds-border-input, ${T.YS})`,backgroundColor:r.selectProps.subtle&&r.selectProps.hoveringClearIndicator?`var(--ds-background-danger, ${T.r6})`:r.isFocused?t[":hover"]?`var(--ds-background-input, ${t[":hover"].backgroundColor})`:`var(--ds-background-input, ${T.N0})`:r.isDisabled?`var(--ds-background-disabled, ${T.YI})`:`var(--ds-background-input-hovered, ${T.gt})`}),padding:0,minHeight:s?"none":44,height:s||a?"100%":44,maxWidth:"100%"})},clearIndicator:e=>{let{paddingTop:t,paddingBottom:s,paddingLeft:a,paddingRight:i}=e,o=(0,r.Z)(e,["paddingTop","paddingBottom","paddingLeft","paddingRight"]);return(0,n.Z)((0,n.Z)({},o),{},{opacity:1,"@media (hover: hover) and (pointer: fine)":{opacity:0},transition:o.transition+", opacity 150ms",paddingTop:0,padding:0,":hover":{color:`var(--ds-icon-danger, ${T.$H})`}})},indicatorsContainer:e=>(0,n.Z)((0,n.Z)({},e),{},{paddingRight:4}),valueContainer:(e,t)=>{let{paddingTop:a,paddingBottom:i,position:o}=e,l=(0,r.Z)(e,["paddingTop","paddingBottom","position"]);const u=t.selectProps.isMulti;return(0,n.Z)((0,n.Z)({},l),{},{gridTemplateColumns:"auto 1fr",paddingTop:s?0:"6px",paddingBottom:s?0:"6px",paddingLeft:u?6:0,overflowX:"hidden",overflowY:"auto",scrollbarWidth:"none",maxHeight:t.selectProps.maxPickerHeight||"100%","::-webkit-scrollbar":{width:0,background:"transparent"}})},multiValue:e=>(0,n.Z)((0,n.Z)({},e),{},{borderRadius:24,cursor:"default"}),multiValueLabel:e=>(0,n.Z)((0,n.Z)({},e),{},{fontSize:"100%",display:"flex"}),multiValueRemove:e=>(0,n.Z)((0,n.Z)({},e),{},{borderRadius:24,cursor:"pointer"}),placeholder:(e,t)=>("absolute"!==e.position||e.left||(e.left="6px"),(0,n.Z)((0,n.Z)({},e),{},{gridArea:"1/2/2/3",paddingLeft:t.selectProps.isMulti?0:"6px",margin:0,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"})),option:e=>(0,n.Z)((0,n.Z)({},e),{},{overflow:"hidden"}),input:(e,s)=>(0,n.Z)((0,n.Z)({},e),{},{gridArea:"1/2/2/3",gridTemplateColumns:t&&s.placeholder?"0 123px":e.gridTemplateColumns,margin:"4px 0",paddingTop:0,paddingBottom:0,paddingLeft:s.selectProps.isMulti?0:"6px","& input::placeholder":{color:`var(--ds-text-subtlest, ${T.Y8})`,opacity:1},"& input:-ms-input-placeholder":{color:`var(--ds-text-subtlest, ${T.Y8})`}}),singleValue:e=>(0,n.Z)((0,n.Z)({},e),{},{margin:0,gridArea:"1/2/2/3"})};return a?(0,M.m)(i,a):i}));(0,k.Z)(((e,t,s)=>(0,n.Z)({},A(e,s))));var L=s(229154);const R=a.lazy((()=>s.e(65174).then(s.bind(s,305703)).then((e=>({default:e.default})))));class D extends a.PureComponent{constructor(...e){super(...e),(0,d.Z)(this,"handleMouseDown",(e=>{if(e&&"mousedown"===e.type&&0!==e.button)return;const{clearValue:t,selectProps:s}=this.props;t(),s&&!s.isFocused&&e.stopPropagation()}))}render(){const{selectProps:{clearValueLabel:e}}=this.props,t=a.createElement(L.c.ClearIndicator,(0,c.Z)({},this.props,{innerProps:(0,n.Z)((0,n.Z)({},this.props.innerProps),{},{onMouseDown:this.handleMouseDown})}));return e?a.createElement(a.Suspense,{fallback:t},a.createElement(R,{content:e},t)):t}}D.displayName="ClearIndicator";var U=s(321534),N=s(367538),z=s(467082),V=s(247455);const F=(0,U.iv)({paddingLeft:"2px"}),$=(0,U.iv)({paddingLeft:"5px"});class G extends a.Component{constructor(e){super(e),(0,d.Z)(this,"getElemBefore",(()=>{const{data:{data:e,label:t},selectProps:s}=this.props;return(0,x.Jh)(e)?s.emailLabel?(0,U.tZ)(N.I,{isLozenge:!0,label:s.emailLabel}):(0,U.tZ)(u.Z,Z.s.addEmail,(e=>(0,U.tZ)(N.I,{isLozenge:!0,label:e}))):(0,x.ty)(e)?(0,U.tZ)("div",{css:F},(0,U.tZ)(V.default,{label:"group-icon",size:"small"})):(0,U.tZ)(z.v,{appearance:"multi",src:(0,x.E$)(e),name:t})})),this.containerRef=a.createRef()}componentDidUpdate(){const{isFocused:e}=this.props;e&&this.containerRef.current&&this.containerRef.current.parentElement&&this.containerRef.current.parentElement.parentElement&&((e,t)=>{const{top:s,height:n}=e.getBoundingClientRect(),{height:r}=t.getBoundingClientRect();s-n<0&&e.scrollIntoView(),s+n>r&&e.scrollIntoView(!1)})(this.containerRef.current,this.containerRef.current.parentElement.parentElement)}shouldComponentUpdate(e){const{data:{label:t,data:s},innerProps:n,isFocused:r}=this.props,{data:{label:a,data:i},innerProps:o,isFocused:l}=e;return s!==i||t!==a||n!==o||r!==l}render(){const e=this.props,{children:t,innerProps:s}=e,n=(0,r.Z)(e,["children","innerProps"]);return(0,U.tZ)(L.c.MultiValue,(0,c.Z)({},n,{innerProps:{ref:this.containerRef},cropWithEllipsis:!1}),this.getElemBefore()," ",(0,U.tZ)("div",{css:$},t))}}G.displayName="MultiValue";var W=s(833486);class B extends a.PureComponent{static getDerivedStateFromProps(e,t){return{valueSize:e.getValue?e.getValue().length:0,previousValueSize:t.valueSize}}constructor(e){super(e),(0,d.Z)(this,"timeoutId",null),(0,d.Z)(this,"scrollToBottom",(()=>{this.timeoutId=window.setTimeout((()=>{const{ref:{current:e}}=this.valueContainerInnerProps;if(null!==e){const t=W.findDOMNode(e);t instanceof HTMLDivElement&&(t.scrollTop=t.scrollHeight)}this.timeoutId=null}))})),(0,d.Z)(this,"showPlaceholder",(()=>{const{selectProps:{value:e}}=this.props;return e&&e.length>0})),(0,d.Z)(this,"addPlaceholder",(e=>{const t=a.Children.map(this.props.children,(t=>(0,x.DJ)(t)&&this.showPlaceholder()?a.cloneElement(t,{placeholder:e}):t));return a.createElement(a.Fragment,null,t)})),(0,d.Z)(this,"renderChildren",(()=>{const{selectProps:{addMoreMessage:e,isDisabled:t}}=this.props;return t?this.props.children:void 0===e?a.createElement(u.Z,Z.s.addMore,(e=>{var t,s;let n=e;e&&"string"==typeof e&&(n=[e]);const r=null!==(t=null===(s=n)||void 0===s?void 0:s.join(""))&&void 0!==t?t:"";return this.addPlaceholder(r)})):this.addPlaceholder(e)})),this.state={valueSize:0,previousValueSize:0},this.valueContainerInnerProps={ref:a.createRef()}}componentDidUpdate(){const{previousValueSize:e,valueSize:t}=this.state,{isFocused:s}=this.props.selectProps;t>e&&s&&(this.timeoutId&&(window.clearTimeout(this.timeoutId),this.timeoutId=null),this.scrollToBottom())}componentWillUnmount(){this.timeoutId&&window.clearTimeout(this.timeoutId)}render(){const e=this.props,{children:t,innerProps:s}=e,i=(0,r.Z)(e,["children","innerProps"]),o=(0,n.Z)((0,n.Z)({},i),{},{innerProps:this.valueContainerInnerProps});return a.createElement(L.c.ValueContainer,o,this.renderChildren())}}B.displayName="MultiValueContainer";var j=s(487551),_=s(192543);class H extends a.PureComponent{constructor(...e){super(...e),(0,d.Z)(this,"getPrimaryText",(()=>{const{user:{name:e,publicName:t,highlight:s}}=this.props,n=[(0,U.tZ)("span",{key:"name",css:(0,j.a)(this.props.isSelected?`var(--ds-text-selected, ${T.AX})`:`var(--ds-text, ${T.q2})`)},(0,U.tZ)(_.y,{highlights:s&&s.name},e))];return(0,x.Uh)(t)&&e.trim()!==t.trim()&&n.push((0,U.tZ)(a.Fragment,{key:"publicName"}," ",(0,U.tZ)("span",{css:(0,j.a)(this.props.isSelected?`var(--ds-text-selected, ${T.AX})`:`var(--ds-text-subtlest, ${T.iw})`)},"(",(0,U.tZ)(_.y,{highlights:s&&s.publicName},t),")"))),n})),(0,d.Z)(this,"renderSecondaryText",(()=>this.props.user.byline?(0,U.tZ)("span",{css:(0,j.a)(this.props.isSelected?`var(--ds-text-selected, ${T.AX})`:`var(--ds-text-subtlest, ${T.iw})`)},this.props.user.byline):void 0)),(0,d.Z)(this,"renderAvatar",(()=>{const{user:{avatarUrl:e,name:t},status:s}=this.props;return(0,U.tZ)(z.v,{appearance:"big",src:e,presence:s,name:t})})),(0,d.Z)(this,"getLozengeProps",(()=>"string"==typeof this.props.user.lozenge?{text:this.props.user.lozenge}:this.props.user.lozenge))}render(){return(0,U.tZ)(j.e,{avatar:this.renderAvatar(),lozenge:this.getLozengeProps(),isDisabled:this.props.user.isDisabled,primaryText:this.getPrimaryText(),secondaryText:this.renderSecondaryText()})}}H.displayName="UserOption";const Q=a.lazy((()=>Promise.all([s.e(78248),s.e(54936),s.e(11216),s.e(39840)]).then(s.bind(s,557163)).then((e=>({default:e.ExternalUserOption}))))),Y=a.lazy((()=>Promise.all([s.e(78248),s.e(54936),s.e(11216),s.e(25846)]).then(s.bind(s,658306)).then((e=>({default:e.TeamOption}))))),q=a.lazy((()=>Promise.all([s.e(78248),s.e(54936),s.e(11216),s.e(53492)]).then(s.bind(s,404371)).then((e=>({default:e.GroupOption}))))),K=a.lazy((()=>Promise.all([s.e(78248),s.e(54936),s.e(11216),s.e(86090)]).then(s.bind(s,716673)).then((e=>({default:e.EmailOption}))))),J=a.lazy((()=>Promise.all([s.e(78248),s.e(54936),s.e(11216),s.e(18248)]).then(s.bind(s,281049)).then((e=>({default:e.CustomOption}))))),X=/^[^\s@]+@[^\s@]+\.[^\s@]+$/i,ee=/^[^\s@]+@[^\s@]*$/i,te=e=>e.match(X)?"VALID":e.match(ee)?"POTENTIAL":"INVALID",se=({data:{data:e},isSelected:t,status:s})=>a.createElement(H,{user:e,status:s,isSelected:t}),ne=e=>a.createElement(L.c.Option,e,a.createElement(a.Suspense,{fallback:se(e)},(({data:{data:e},isSelected:t,status:s,selectProps:n})=>(0,x.iP)(e)?a.createElement(Q,{user:e,status:s,isSelected:t}):(0,x.NU)(e)?a.createElement(H,{user:e,status:s,isSelected:t}):(0,x.Jh)(e)?a.createElement(K,{email:e,emailValidity:te(e.id),isSelected:t,label:n.emailLabel}):(0,x.HU)(e)?a.createElement(Y,{team:e,isSelected:t}):(0,x.ty)(e)?a.createElement(q,{group:e,isSelected:t}):(0,x.UK)(e)?a.createElement(J,{data:e,isSelected:t}):null)(e)));var re=s(41595);const ae=(0,U.iv)({border:"none !important",padding:"0 !important",width:"auto",overflow:"hidden",minWidth:"100px","& > span":{boxSizing:"border-box"},"&:hover":{width:"auto",padding:0,border:"none"}}),ie=e=>{const{data:{label:t,data:s},selectProps:{appearance:n,isFocused:a}}=e;return a?null:(0,U.tZ)(L.c.SingleValue,e,(0,U.tZ)(re.Z,{backgroundColor:"transparent",avatar:(0,U.tZ)(z.v,{src:(0,x.E$)(s),appearance:n,name:t}),primaryText:t},(e=>{let{ref:t}=e,s=(0,r.Z)(e,["ref"]);return(0,U.tZ)("div",(0,c.Z)({css:ae},s))})))};class oe extends a.Component{constructor(...e){super(...e),(0,d.Z)(this,"handleKeyPress",(e=>{var t;"Enter"===e.key&&e.preventDefault(),null!==(t=this.props.selectProps)&&void 0!==t&&t.disableInput&&e.preventDefault()}))}render(){return a.createElement(L.c.Input,(0,c.Z)({},this.props,{innerRef:this.props.innerRef,onKeyPress:this.handleKeyPress}))}}oe.displayName="Input";const le=(0,U.iv)({paddingLeft:"6px",lineHeight:0,gridArea:"1/1/2/2"}),ue=(e,t)=>t&&t.data&&e===t.label;class ce extends a.Component{constructor(...e){super(...e),(0,d.Z)(this,"renderAvatar",(()=>{const{hasValue:e,selectProps:{appearance:t,isFocused:s,inputValue:n,value:r}}=this.props;return s||!e?(0,U.tZ)(z.v,{appearance:t,src:ue(n,r)?r.data.avatarUrl:void 0}):null}))}render(){const e=this.props,{children:t}=e,s=(0,r.Z)(e,["children"]);return(0,U.tZ)(L.c.ValueContainer,s,(0,U.tZ)("div",{css:le},this.renderAvatar()),t)}}ce.displayName="SingleValueContainer";class de extends a.Component{constructor(...e){super(...e),(0,d.Z)(this,"ref",null),(0,d.Z)(this,"handleInnerRef",(e=>{this.ref=e,this.props.innerRef&&this.props.innerRef(e)}))}componentDidMount(){this.ref&&this.ref.select()}render(){return a.createElement(oe,(0,c.Z)({},this.props,{innerRef:this.handleInnerRef}))}}de.displayName="PopupInput";var pe=s(479517);const he=(0,s(676424).ww)(),me=2*he/12,fe=(0,U.iv)({display:"flex",flexDirection:"column",padding:`0px ${he}px ${he}px`}),ge=(0,pe.Z)({light:`var(--ds-text-subtlest, ${T.iw})`,dark:`var(--ds-text-subtlest, ${T.rv})`}),ve=()=>{const e=he/2,t=2.5*he,s=ge();return(0,U.iv)({color:s,fontSize:"12px",fontWeight:600,lineHeight:`${me}`,padding:`${t}px 0px ${e}px 0px`})};class be extends a.PureComponent{render(){const{selectProps:{popupTitle:e}}=this.props;return(0,U.tZ)("div",{css:fe},(0,U.tZ)("div",{css:ve()},e),(0,U.tZ)(L.c.Control,this.props))}}be.displayName="PopupControl";const ye=(0,k.Z)(((e,t)=>t?{Control:t,Option:ne}:{MultiValue:G,DropdownIndicator:null,SingleValue:ie,ClearIndicator:e?null:D,Option:ne,ValueContainer:e?B:ce,Input:oe}));(0,k.Z)((e=>{const t={DropdownIndicator:null,SingleValue:ie,ClearIndicator:D,Option:ne,ValueContainer:ce,Input:de};return e?(0,n.Z)((0,n.Z)({},t),{},{Control:be}):t}));var Ze=s(270033);const xe=["VALID","POTENTIAL"],Se=(e=te)=>t=>t&&xe.includes(e(t)),Ie=e=>({label:e,value:e,data:{id:e,name:e,type:Ze.VQ}}),Ce=e=>e?e.trim():"",Pe=(e=te)=>t=>(0,x.Jh)(t.data)?"VALID"!==e(t.data.id):!!t.isDisabled;const Ee=(0,k.Z)((function(e){return{allowCreateWhileLoading:!0,createOptionPosition:"first",isValidNewOption:Se(e),getNewOptionData:Ie,formatCreateLabel:Ce,isOptionDisabled:Pe(e)}})),we=["VALID","POTENTIAL"],Oe=e=>e&&e.length>0,Te=(e=te,t)=>s=>{if(!s)return null;const n=s&&we.includes(e(s))?s:`${s.replace(/\s+/g,".").toLocaleLowerCase()}@${t}`;return{label:n,value:n,data:{id:n,name:n,type:Ze.VQ,suggestion:!0}}},ke=e=>e?e.trim():"",Me=(e=te)=>t=>(0,x.Jh)(t.data)?"VALID"!==e(t.data.id):!!t.isDisabled,Ae=(0,k.Z)(((e,t)=>({allowCreateWhileLoading:!0,createOptionPosition:"last",isValidNewOption:Oe,getNewOptionData:Te(t,e),formatCreateLabel:ke,isOptionDisabled:Me(t)})));var Le=s(524798),Re=s(609115);const De=async e=>{switch(e){case"cs":return s.e(35848).then(s.bind(s,742324)).then((e=>e.default));case"da":return s.e(66229).then(s.bind(s,366230)).then((e=>e.default));case"de":return s.e(89880).then(s.bind(s,848270)).then((e=>e.default));case"en":return s.e(15729).then(s.bind(s,800962)).then((e=>e.default));case"en_GB":return s.e(20688).then(s.bind(s,550218)).then((e=>e.default));case"es":return s.e(25038).then(s.bind(s,928812)).then((e=>e.default));case"et":return s.e(85990).then(s.bind(s,750832)).then((e=>e.default));case"fi":return s.e(37634).then(s.bind(s,231262)).then((e=>e.default));case"fr":return s.e(58522).then(s.bind(s,898423)).then((e=>e.default));case"hu":return s.e(87808).then(s.bind(s,9887)).then((e=>e.default));case"is":return s.e(67687).then(s.bind(s,91877)).then((e=>e.default));case"it":return s.e(32069).then(s.bind(s,868477)).then((e=>e.default));case"ja":return s.e(26264).then(s.bind(s,394415)).then((e=>e.default));case"ko":return s.e(92655).then(s.bind(s,386011)).then((e=>e.default));case"nb":return s.e(11319).then(s.bind(s,174847)).then((e=>e.default));case"nl":return s.e(78750).then(s.bind(s,152148)).then((e=>e.default));case"pl":return s.e(31884).then(s.bind(s,957340)).then((e=>e.default));case"pt_BR":case"pt-BR":return s.e(25613).then(s.bind(s,586957)).then((e=>e.default));case"pt_PT":case"pt-PT":return s.e(30593).then(s.bind(s,758124)).then((e=>e.default));case"ro":return s.e(47920).then(s.bind(s,85467)).then((e=>e.default));case"ru":return s.e(20018).then(s.bind(s,180752)).then((e=>e.default));case"sk":return s.e(23574).then(s.bind(s,606082)).then((e=>e.default));case"sv":return s.e(69186).then(s.bind(s,177676)).then((e=>e.default));case"th":return s.e(98562).then(s.bind(s,90790)).then((e=>e.default));case"tr":return s.e(73266).then(s.bind(s,758257)).then((e=>e.default));case"uk":return s.e(22589).then(s.bind(s,821818)).then((e=>e.default));case"vi":return s.e(82750).then(s.bind(s,189252)).then((e=>e.default));case"zh_TW":return s.e(4012).then(s.bind(s,813160)).then((e=>e.default));case"zh":return s.e(47660).then(s.bind(s,353594)).then((e=>e.default));default:{const t=e.split(/[_-]/);return 2===t.length?De(t[0]):s.e(15729).then(s.bind(s,800962)).then((e=>e.default))}}},Ue={},Ne=e=>{const t=(0,Le.Z)(),{children:s}=e,r=(e=>{const[t,s]=a.useState(Ue);return a.useEffect((()=>{let t=!1;return s(Ue),De(e).then((e=>{t||s(e)})).catch((e=>{console.error(e)})),()=>{t=!0}}),[e]),t})(t.locale),i=(0,a.useMemo)((()=>(0,n.Z)((0,n.Z)({},t.messages),r)),[t.messages,r]);return a.createElement(Re.Z,{locale:t.locale,messages:i},s)};var ze=s(437486);class Ve extends a.Component{constructor(e){super(e),this.ufoId=(0,b.v4)();C.getInstance(this.ufoId).start()}componentDidMount(){const e=C.getInstance(this.ufoId);[f.h.IN_PROGRESS.id,f.h.STARTED.id].includes(e.state.id)&&e.success()}render(){const{emailLabel:e,allowEmail:t,suggestEmailsForDomain:s,isMulti:r,isValidEmail:i,anchor:o,menuPortalTarget:l,menuPosition:u,menuShouldBlockScroll:d,captureMenuScroll:p,closeMenuOnScroll:f,loadUserSource:g}=this.props,v=this.props.width,b=t?h.Z:m.Z,y=s?Ae(s,i):Ee(i),Z={closeMenuOnScroll:f,menuPortalTarget:l,menuPosition:u,menuShouldBlockScroll:d,captureMenuScroll:p},x=t?(0,n.Z)((0,n.Z)((0,n.Z)({},Z),y),{},{emailLabel:e}):(0,n.Z)({},Z);return a.createElement(E,{id:this.ufoId},a.createElement(Ne,null,a.createElement(ze.P,{fetchUserSource:g},a.createElement(O,(0,c.Z)({},this.props,{width:v,SelectComponent:b,styles:A(v,r,"compact"===this.props.appearance,this.props.styles),components:ye(r,o),pickerProps:x})))))}}Ve.displayName="UserPickerWithoutAnalytics",(0,d.Z)(Ve,"defaultProps",{width:350,isMulti:!1});const Fe=(0,p.Z)()(Ve);var $e=s(528189),Ge=s(483565),We=s(158466),Be=s(961634),je=s(950535),_e=s(755492),He=s(401487),Qe=s(513229),Ye=s(331377),qe=s(910194);const Ke=Ye.ZP`query UserAndGroupSearchPickerQuery{...ExternalCollaboratorEntitlementFragment}${qe.$}`;var Je=s(622739),Xe=s(482587),et=s(528365),tt=s(77339);const st=Ye.ZP`query UserAndGroupSearchQuery($searchTerm:String!$maxResults:Int=50$withGroups:Boolean=true$sitePermissionTypeFilter:SitePermissionTypeFilter=NONE){userGroupSearch(query:$searchTerm maxResults:$maxResults sitePermissionTypeFilter:$sitePermissionTypeFilter){users{type displayName permissionType profilePicture{path}...on User{accountId}...on KnownUser{accountId}}groups@include(if:$withGroups){id name permissionType}}}`;s(302775),s(72117),s(772372);const nt=(0,a.forwardRef)(((e,t)=>{let{as:s="div",style:o}=e,l=(0,r.Z)(e,["as","style"]);return a.createElement(s,(0,n.Z)((0,n.Z)({},l),{},{style:o,ref:t,className:(0,i.Z)(["_1f1u1ylp _4g2iyh40 _pfyjyh40",l.className])}))}));const rt=({fieldId:e,client:t,isMulti:s,includeGroup:r,onSelect:i,onChange:l,onClear:c,onFocus:d,onBlur:p,onInputChange:h,filterSearchResults:m,smartFilterOptions:f,value:g,defaultValue:v,noOptionsMessage:b,addMoreMessage:y,menuPortalTarget:Z,autoFocus:x,width:S,maxPickerHeight:I,smart:C,styles:P,placeholder:E,sitePermissionTypeFilter:w=tt.k.NONE,allowEmail:O,includeTeams:T,menuPosition:k,ariaLabel:M,isDisabled:A=!1,isLoading:L=!1,bootstrapOptions:R=[]})=>{var D;const U=(0,Ge.TW)(_e.pA),[N,z]=(0,a.useState)(void 0),{cloudId:V}=(0,We.D)(),{orgId:F}=(0,Qe.f)(),{loading:$,data:G}=(0,o.aM)(Ke),W=a.createElement(u.Z,{id:"user-and-group-search.search.error",defaultMessage:"Sorry, we're having trouble loading search results right now."}),B=a.createElement(u.Z,{id:"user-and-group-search.permission.error",defaultMessage:"We couldn't find any results because you don't have permission to search the user directory."}),j=null!==(D=(0,je.D)(G))&&void 0!==D&&D,_={valueContainer:e=>(0,n.Z)((0,n.Z)({},e),{},{display:"grid"}),placeholder:e=>(0,n.Z)((0,n.Z)({},e),{},{position:"relative",top:void 0,left:void 0,transform:void 0})},H={placeholder:E||(r?O?a.createElement(u.Z,{id:"user-and-group-search.placeholder.text.users.groups.and.email",defaultMessage:"Add people by name, email, or group"}):a.createElement(u.Z,{id:"user-and-group-search.placeholder.text.users.and.groups",defaultMessage:"Type a user name or group"}):O?a.createElement(u.Z,{id:"user-and-group-search.placeholder.text.users.and.email",defaultMessage:"Add people, emails"}):a.createElement(u.Z,{id:"user-and-group-search.placeholder.text.users",defaultMessage:"Type a user name"})),addMoreMessage:y,isMulti:s,defaultValue:v,fieldId:e,menuPortalTarget:Z,noOptionsMessage:e=>N?function(e){var t,s;return!!("statusCode"in e&&403===e.statusCode||null!==(t=e.message)&&void 0!==t&&t.includes("403")||null!==(s=e.message)&&void 0!==s&&s.includes("not allowed"))}(N)?B:W:"function"==typeof b?b(e):b,onChange:l,onClear:c,onFocus:d,onInputChange:h,onSelection:i,value:g,width:S,maxPickerHeight:I,allowEmail:O,styles:(0,n.Z)((0,n.Z)({},_),P),menuPosition:k,isDisabled:A};return a.createElement(nt,{"aria-label":M},N?a.createElement(Be.X,{error:N}):null,!C&&a.createElement(Fe,(0,n.Z)((0,n.Z)({},H),{},{autoFocus:x,loadOptions:e=>!e||e.length<2?[]:(({searchTerm:e,client:t,includeGroup:s,setError:n,sitePermissionTypeFilter:r,filterResults:a})=>{const i="userAndGroupSearchQuery";return(0,et.So)({subject:i}),t.query({query:st,variables:{withGroups:s,searchTerm:e,sitePermissionTypeFilter:r}}).then((({data:e})=>{const{users:t=[],groups:s=[]}=e.userGroupSearch,n=[...t.map((e=>({id:`user-${e.accountId}`,name:e.displayName,extra:e,type:"user",avatarUrl:e.profilePicture?e.profilePicture.path:"",lozenge:e.permissionType===tt.n.EXTERNAL?Je.ExternalUserLozengeProps:null}))),...s.map((e=>({id:`group-${e.id}`,name:e.name,type:"group",extra:e,lozenge:e.permissionType===tt.n.EXTERNAL?Xe.ExternalGroupLozengeProps:null})))];return(0,et._N)({subject:i}),a?n.filter(a):n})).catch((e=>(n(e),[])))})({searchTerm:e,client:t,includeGroup:r,setError:z,filterResults:m,sitePermissionTypeFilter:w}),onBlur:p,isLoading:L})),C&&a.createElement($e.Z,(0,n.Z)((0,n.Z)({},H),{},{debounceTime:200,includeGroups:r,isLoading:$||L,maxOptions:60,onError:e=>{e&&(z(e),(0,He.Xb)(e))},filterOptions:f,productAttributes:U?{isEntitledConfluenceExternalCollaborator:j}:void 0,principalId:"context",productKey:"confluence",siteId:V,orgId:F,includeTeams:T,bootstrapOptions:R})))};rt.displayName="UserAndGroupSearchPickerComponent";const at=(0,l.CG)(rt)},77339:(e,t,s)=>{let n,r;s.d(t,{n:()=>n,k:()=>r}),function(e){e.ANONYMOUS="ANONYMOUS",e.APP="APP",e.EXTERNAL="EXTERNAL",e.INTERNAL="INTERNAL",e.JSD="JSD"}(n||(n={})),function(e){e.ALL="ALL",e.EXTERNALCOLLABORATOR="EXTERNALCOLLABORATOR",e.NONE="NONE"}(r||(r={}))},443056:(e,t,s)=>{s.d(t,{Z:()=>n});const n=function(e){return function(t){return function(s){var n=s(t),r=n.clone();return r&&r.fire(e),n}}}},247455:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=(n=s(122551))&&n.__esModule?n:{default:n},a=s(386056);const i=e=>r.default.createElement(a.Icon,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><g fill="currentColor" fill-rule="evenodd"><circle cx="16" cy="9" r="3"/><circle cx="8" cy="6" r="3"/><path d="M11 15c0-1.105.887-2 2-2h6c1.105 0 2 .885 2 2v3.73c0 3.027-10 3.027-10 0V15z"/><path d="M13 12a1.997 1.997 0 00-2-2H5c-1.113 0-2 .897-2 2.003v3.826c0 1.921 4.054 2.518 7 1.984v-2.807A3.001 3.001 0 0112.997 12H13z"/></g></svg>'},e));i.displayName="PeopleIcon";var o=i;t.default=o},791681:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=(n=s(122551))&&n.__esModule?n:{default:n},a=s(386056);const i=e=>r.default.createElement(a.Icon,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><g fill-rule="evenodd"><circle fill="currentColor" cx="12" cy="12" r="9"/><path d="M16.155 14.493a1.174 1.174 0 11-1.662 1.663L12 13.662l-2.494 2.494a1.172 1.172 0 01-1.662 0 1.176 1.176 0 010-1.663L10.337 12 7.844 9.507a1.176 1.176 0 011.662-1.662L12 10.338l2.493-2.493a1.174 1.174 0 111.662 1.662L13.662 12l2.493 2.493z" fill="inherit"/></g></svg>'},e));i.displayName="SelectClearIcon";var o=i;t.default=o},964390:(e,t,s)=>{s.d(t,{f:()=>u,Z:()=>d});var n=s(511686),r=s(78651),a=s(627658),i=s(644960);const o="@atlaskit/select",l="16.1.5",u=(0,s(470810).Z)(n.ZP),c=(0,r.Z)("atlaskit"),d=(0,a.Z)({componentName:"select",packageName:o,packageVersion:l})((0,i.Z)({onChange:c({action:"changed",actionSubject:"option",attributes:{componentName:"select",packageName:o,packageVersion:l}})})(u))},470810:(e,t,s)=>{s.d(t,{Z:()=>E});var n={};s.r(n),s.d(n,{ClearIndicator:()=>b,DropdownIndicator:()=>y,IndicatorSeparator:()=>C,LoadingIndicator:()=>Z,MultiValueRemove:()=>I});var r=s(415911),a=s(991332),i=s(953307),o=s(29298),l=s(122551),u=s(138504),c=s(429185),d=s(413250),p=s.n(d),h=s(321534),m=s(791681),f=s(229154),g=s(685753),v=s(615139);const b=e=>(0,h.tZ)(f.c.ClearIndicator,e,(0,h.tZ)(m.default,{size:"small",label:"clear"})),y=e=>(0,h.tZ)(f.c.DropdownIndicator,e,(0,h.tZ)(v.default,{label:"open"})),Z=e=>{const t=(0,h.iv)(e.getStyles("loadingIndicator",e));return(0,h.tZ)("div",(0,i.Z)({css:t},e.innerProps),(0,h.tZ)(g.Z,{size:"small"}))},x=h.iv`
  display: none;
`,S=h.iv`
  display: inherit;
`,I=e=>{const{isDisabled:t}=e.selectProps;return(0,h.tZ)(f.c.MultiValueRemove,e,(0,h.tZ)("div",{css:t?x:S,"data-testid":t?"hide-clear-icon":"show-clear-icon"},(0,h.tZ)(m.default,{label:"Clear",size:"small",primaryColor:"transparent",secondaryColor:"inherit"})))},C=null;var P=s(174055);function E(e){var t;return t=class extends l.Component{constructor(e){super(e),(0,o.Z)(this,"components",{}),(0,o.Z)(this,"select",null),(0,o.Z)(this,"cacheComponents",(e=>{this.components=(0,a.Z)((0,a.Z)({},n),e)})),(0,o.Z)(this,"onSelectRef",(e=>{this.select=e})),this.cacheComponents=(0,c.Z)(this.cacheComponents,p()).bind(this),this.cacheComponents(e.components||{})}UNSAFE_componentWillReceiveProps(e){this.cacheComponents(e.components)}focus(){this.select&&this.select.focus()}blur(){this.select&&this.select.blur()}render(){const t=this.props,{styles:s,validationState:n,isInvalid:a,spacing:o,isMulti:c,appearance:d}=t,p=(0,r.Z)(t,["styles","validationState","isInvalid","spacing","isMulti","appearance"]),h="compact"===o;return l.createElement(e,(0,i.Z)({ref:this.onSelectRef,isMulti:c,"aria-live":"assertive"},p,{components:this.components,styles:(0,u.m)((0,P.Z)(void 0!==a?a?"error":"default":n,h,this.props.appearance||"default"),s)}))}},(0,o.Z)(t,"defaultProps",{validationState:"default",spacing:"default",onClickPreventDefault:!0,tabSelectsValue:!1,components:{},styles:{}}),t}},602775:(e,t,s)=>{s.d(t,{iP:()=>c,NU:()=>d,HU:()=>p,ty:()=>h,Jh:()=>m,UK:()=>f,ad:()=>g,rQ:()=>b,TW:()=>y,FW:()=>Z,ew:()=>x,px:()=>S,DJ:()=>I,Nh:()=>C,Uh:()=>P,eZ:()=>E,E$:()=>w,cb:()=>O,ZC:()=>T});var n=s(930769),r=s(29298),a=s(429185),i=s(497293),o=s(693964);function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function u(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?l(Object(s),!0).forEach((function(t){(0,r.Z)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var c=function(e){return d(e)&&Boolean(e.isExternal)},d=function(e){return void 0===e.type||e.type===i.FW},p=function(e){return e.type===i.C9},h=function(e){return e.type===i.YT},m=function(e){return e.type===i.VQ},f=function(e){return e.type===i.Wu},g=function(e){return e&&!Array.isArray(e)||Array.isArray(e)&&e.length>0},v=function(e){return function(e){return void 0!==e.name}(e)?{data:e,isDisabled:e.isDisabled,label:e.name,value:e.id}:{data:u(u({},e),{},{name:e.id}),isDisabled:e.isDisabled,label:e.id,value:e.id}},b=function(e){if(e)return Array.isArray(e)?e.map((function(e){return e.data})):e.data},y=function(e){return"function"==typeof e[Symbol.iterator]},Z=(0,a.Z)((function(e){return e.map(v)})),x=(0,a.Z)((function(e){return e?Array.isArray(e)?e.map(v):v(e):null})),S=function(e){return"big"===e?"medium":"multi"===e?"xsmall":"small"},I=function(e){return e&&"object"===(0,n.Z)(e)&&e.props&&"text"===e.props.type},C=function(e){return!!e&&!Array.isArray(e)},P=function(e){return!!e&&e.trim().length>0},E=function(e){if("function"==typeof e)try{for(var t=arguments.length,s=new Array(t>1?t-1:0),n=1;n<t;n++)s[n-1]=arguments[n];return e.apply(void 0,s)}catch(r){console.error("@atlassian/user-select: an error happening in `callCallback`: ",r)}},w=function(e){if(d(e)||p(e)||f(e))return e.avatarUrl},O=function(e){return e===o.Z},T=function(e){return(null==e?void 0:e.hasOwnProperty("text"))||!1}},497293:(e,t,s)=>{s.d(t,{FW:()=>n,C9:()=>r,YT:()=>a,VQ:()=>i,Wu:()=>o});var n="user",r="team",a="group",i="email",o="custom"},749648:(e,t,s)=>{s.d(t,{v:()=>n});const n={getRecommendationServiceUrl:e=>e?`${e}/gateway/api/v1/recommendations`:"/gateway/api/v1/recommendations",getUsersServiceUrl:(e,t="")=>"jira"===e?`${t}/rest/api/3/user/bulk`:`${t}/wiki/rest/api/user/bulk`,getGraphQLUrl:e=>e?`${e}/gateway/api/graphql`:"/gateway/api/graphql",getTeamsUrl:e=>e?`${e}/gateway/api/v3/teams`:"/gateway/api/v3/teams"}},870643:(e,t,s)=>{s.d(t,{Z:()=>c});var n=s(991332),r=s(497293);const a=(0,s(464984).defineMessages)({externalUserSourcesHeading:{id:"fabric.elements.user-picker.external.sourced.from",defaultMessage:"Found in:"},slackProvider:{id:"fabric.elements.user-picker.slack.provider",defaultMessage:"Slack"},googleProvider:{id:"fabric.elements.user-picker.google.provider",defaultMessage:"Google"},microsoftProvider:{id:"fabric.elements.user-picker.microsoft.provider",defaultMessage:"Microsoft"},gitHubProvider:{id:"fabric.elements.user-picker.github.provider",defaultMessage:"GitHub"},memberLozengeText:{id:"fabric.elements.user-picker.member.lozenge.text",defaultMessage:"MEMBER"},guestLozengeText:{id:"fabric.elements.user-picker.guest.lozenge.text",defaultMessage:"GUEST"},guestUserLozengeTooltip:{id:"fabric.elements.user-picker.guest.lozenge.tooltip.user",defaultMessage:"Guests can only access certain spaces and have limited access to user info."},guestGroupLozengeTooltip:{id:"fabric.elements.user-picker.guest.lozenge.tooltip.group",defaultMessage:"Guest groups can only access certain spaces and have limited access to user info."}});var i;!function(e){e.USER="USER",e.TEAM="TEAM",e.GROUP="GROUP"}(i||(i={}));const o=(e,t)=>{var s,n;if(null!==(s=e.attributes)&&void 0!==s&&s.workspaceMember)return t.formatMessage(a.memberLozengeText);if(null!==(n=e.attributes)&&void 0!==n&&n.isConfluenceExternalCollaborator){const s=e.entityType===i.GROUP?a.guestGroupLozengeTooltip:a.guestUserLozengeTooltip;return{text:t.formatMessage(a.guestLozengeText),tooltip:t.formatMessage(s),appearance:"new"}}},l=(e,t)=>(e.recommendedUsers||[]).map((e=>((e,t)=>{const s=e.entityType;if(s===i.USER){const s=e,n=o(s,t);return{id:s.id,type:r.FW,avatarUrl:s.avatarUrl,name:s.name,email:s.email,lozenge:n}}if(s===i.TEAM){const t=e;return{id:t.id,type:r.C9,description:t.description||"",name:t.displayName||"",memberCount:t.memberCount,members:t.members,includesYou:t.includesYou,avatarUrl:t.largeAvatarImageUrl||t.smallAvatarImageUrl}}if(s===i.GROUP){const s=e,n=o(s,t);return{id:s.id,type:r.YT,name:s.name||"",lozenge:n}}})(e,t))).filter((e=>!!e)).map((e=>e));var u=s(749648);const c=(e,t)=>{var s,r;const a=u.v.getRecommendationServiceUrl(e.baseUrl||"");return fetch(a,{method:"POST",credentials:"include",headers:{"content-type":"application/json"},body:JSON.stringify({context:e.context,includeUsers:e.includeUsers,includeGroups:e.includeGroups,includeTeams:e.includeTeams,maxNumberOfResults:e.maxNumberOfResults,performSearchQueryOnly:!1,searchQuery:(0,n.Z)((0,n.Z)({cpusQueryHighlights:{query:"",field:""}},(null===(s=e.context)||void 0===s||null===(r=s.productAttributes)||void 0===r?void 0:r.isEntitledConfluenceExternalCollaborator)&&{productAccessPermissionIds:["write","external-collaborator-write"]}),{},{customQuery:"",customerDirectoryId:"",filter:e.searchQueryFilter||"",minimumAccessLevel:"APPLICATION",queryString:e.query,restrictTo:{userIds:[],groupIds:[]},searchUserbase:!1})})}).then((e=>200===e.status?e.json():Promise.reject({message:`error calling smart service, statusCode=${e.status}, statusText=${e.statusText}`}))).then((e=>l(e,t)))}},261842:(e,t,s)=>{s.d(t,{de:()=>I,sf:()=>x,_O:()=>m,Bt:()=>S,JT:()=>E,qT:()=>Z,S4:()=>P,lz:()=>C,yj:()=>h,FS:()=>w});var n=s(991332),r=s(443056),a=s(781095);const i=JSON.parse('{"u2":"@atlaskit/user-picker","i8":"9.7.4"}');var o=s(163557);const l=i.u2,u=i.i8,c=/^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$/,d=/^[a-fA-F0-9]{1,8}:[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$/,p=/^[a-fA-F0-9]{24,24}$/,h=()=>({id:(0,a.v4)(),start:Date.now(),inputChangeTime:Date.now(),upCount:0,downCount:0,lastKey:void 0}),m=(0,r.Z)("fabric-elements"),f=(e,t,s,r={})=>({eventType:e,action:t,actionSubject:s,attributes:(0,n.Z)({packageName:l,packageVersion:u},r)}),g=e=>p.test(e)||d.test(e)||c.test(e),v=e=>{const{id:t,type:s}=e,r={id:g(t)?t:null,type:s||null};return(0,o.iP)(e)?(0,n.Z)((0,n.Z)({},r),{},{type:"external_user",sources:e.sources,externalUserType:e.externalUserType}):(0,o.UK)(e)&&e.analyticsType?(0,n.Z)((0,n.Z)({},r),{},{type:e.analyticsType}):r},b=e=>{if(e){return(Array.isArray(e)?e:[e]).map((({data:e})=>v(e)))}return[]},y=(e,t,s)=>({context:e.fieldId,sessionId:R(t),pickerType:U(e),journeyId:s}),Z=(e,t,s,r)=>f("ui","focused","userPicker",(0,n.Z)((0,n.Z)({},y(e,s,r)),{},{values:b(t.value)})),x=(e,t,s,r)=>f("ui","cleared","userPicker",(0,n.Z)((0,n.Z)({},y(e,s,r)),{},{pickerOpen:t.menuIsOpen,values:z(t)})),S=(e,t,s,n,...r)=>f("ui","deleted","userPickerItem",{context:e.fieldId,sessionId:R(s),journeyId:n,value:v(r[0]),pickerOpen:t.menuIsOpen}),I=(e,t,s,r,...a)=>f("ui","cancelled","userPicker",(0,n.Z)((0,n.Z)({},y(e,s,r)),{},{sessionDuration:A(s),queryLength:O(a[0]),spaceInQuery:M(a[0]),upKeyCount:T(s),downKeyCount:k(s)})),C=(e,t,s,r,...a)=>{return f("ui",function(e){return e&&13===e.lastKey?"pressed":"clicked"}(s),"userPicker",(0,n.Z)((0,n.Z)({},y(e,s,r)),{},{sessionDuration:A(s),position:D(t,a[0]),queryLength:O(t),spaceInQuery:M(t),upKeyCount:T(s),downKeyCount:k(s),result:(i=a[0],i?v(i.data):null),numberOfResults:V(t)}));var i},P=(e,t,s,r)=>{const a=function(e){return(e.options||[]).map(v)}(t);return f("operational","searched","userPicker",(0,n.Z)((0,n.Z)({},y(e,s,r)),{},{sessionDuration:A(s),durationSinceInputChange:L(s),queryLength:O(t),isLoading:N(e,t),results:a,numberOfResults:a.length}))},E=(e,t,s,r)=>f("operational","failed","userPicker",(0,n.Z)({},y(e,s,r))),w=(e,t)=>f("ui","displayed","userInfo",{sources:e,accountId:g(t)?t:null});function O(e){return e.inputValue.length}function T(e){return e?e.upCount:null}function k(e){return e?e.downCount:null}function M(e){return-1!==e.inputValue.indexOf(" ")}function A(e){return e?Date.now()-e.start:null}function L(e){return e?Date.now()-e.inputChangeTime:null}function R(e){return e&&e.id}function D(e,t){return t?e.options.findIndex((e=>e===t.data)):-1}function U(e){return e.isMulti?"multi":"single"}function N(e,t){return t.count>0||e.isLoading}function z(e){return e.value?Array.isArray(e.value)?e.value.map((e=>v(e.data))):[v(e.value.data)]:[]}function V(e){return(e.options||[]).length}},437486:(e,t,s)=>{s.d(t,{P:()=>a,G:()=>i});var n=s(122551);const r=(0,n.createContext)({}),a=({fetchUserSource:e,children:t})=>n.createElement(r.Provider,{value:{fetchUserSource:e}},t),i=(e,t,s)=>{const{fetchUserSource:a}=(0,n.useContext)(r),[i,o]=(0,n.useState)([]),[l,u]=(0,n.useState)(!0),[c,d]=(0,n.useState)(null),p=(0,n.useMemo)((()=>{if("undefined"!=typeof AbortController)return new AbortController}),[]);return(0,n.useEffect)((()=>{let s=!0;const n=()=>{null==p||p.abort(),s=!1};return a&&t?(a(e,null==p?void 0:p.signal).then((e=>{if(!s)return;u(!1);const t=e.map((e=>e.sourceType));o(t)})).catch((e=>{s&&(u(!1),d(e))})),n):(u(!1),n)}),[a,e,p,t]),(0,n.useMemo)((()=>({sources:Array.from(new Set([...null!=s?s:[],...i])),loading:l,error:c})),[c,s,i,l])}},367538:(e,t,s)=>{s.d(t,{I:()=>o});var n=s(131811),r=s(131436),a=(s(122551),s(321534));const i=e=>{const t=e?0:4;return(0,a.iv)({padding:`${t}px`,backgroundColor:`var(--ds-background-neutral, ${r.YS})`,borderRadius:"50%",display:"flex",alignItems:"center"})},o=({isLozenge:e,label:t})=>(0,a.tZ)("div",{css:i(e)},(0,a.tZ)(n.default,{label:t,size:e?"small":"medium",primaryColor:`var(--ds-text-subtle, ${r.Mx})`}))},487551:(e,t,s)=>{s.d(t,{a:()=>m,e:()=>f});var n=s(991332),r=s(122551),a=s(676424),i=s(321534),o=s(103206),l=s(163557);const u=r.lazy((()=>s.e(65174).then(s.bind(s,305703)).then((e=>({default:e.default}))))),c=e=>(0,i.iv)({alignItems:"center",boxSizing:"border-box",display:"flex",lineHeight:1,outline:"none",margin:0,width:"100%",cursor:e?"not-allowed":"pointer",opacity:e?"var(--ds-opacity-disabled, 0.4)":void 0}),d=(0,i.iv)({maxWidth:"100%",minWidth:0,flex:"1 1 100%",lineHeight:"1.4",paddingLeft:`${(0,a.ww)()}px`}),p=e=>{const t=e?{fontSize:"0.85em"}:{};return(0,i.iv)((0,n.Z)({margin:0,overflowX:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t))},h=(0,i.iv)({float:"right"}),m=e=>(0,i.iv)({overflow:"hidden",textOverflow:"ellipsis",display:"inline",color:e}),f=({avatar:e,isDisabled:t,lozenge:s,primaryText:n,secondaryText:a})=>(0,i.tZ)("span",{css:c(t)},e,(0,i.tZ)("div",{css:d},(0,i.tZ)("div",null,(0,i.tZ)("div",{css:p()},n),a&&(0,i.tZ)("div",{css:p(!0)},a))),s&&(0,i.tZ)("div",{css:h},(0,l.ZC)(s)?null!=s&&s.tooltip?(0,i.tZ)(r.Suspense,{fallback:(0,i.tZ)(o.Z,s,s.text)},(0,i.tZ)(u,{content:s.tooltip},(0,i.tZ)(o.Z,s,s.text))):(0,i.tZ)(o.Z,s,s.text):s))},192543:(e,t,s)=>{s.d(t,{y:()=>r});var n=s(122551);class r extends n.PureComponent{render(){const{children:e,highlights:t}=this.props,s=[];let r=0;return t&&t.sort(((e,t)=>e.start-t.start)).reduce(((e,t)=>{const s=e[e.length-1];return!s||t.start>s.end+1?e.concat(t):(t.end>s.end&&(s.end=t.end),e)}),[]).forEach((t=>{const{start:n,end:a}=t;n>=a||(n>r&&s.push({value:e.substring(r,n),matches:!1}),s.push({value:e.substring(n,a+1),matches:!0}),r=a+1)})),r<e.length&&s.push({value:e.substring(r,e.length),matches:!1}),s.map(((e,t)=>e.matches?n.createElement("b",{key:t},e.value):e.value))}}r.displayName="HighlightText"},467082:(e,t,s)=>{s.d(t,{v:()=>i});var n=s(197996),r=s(122551),a=s(163557);class i extends r.PureComponent{render(){const{src:e,name:t,presence:s,appearance:i}=this.props;return r.createElement(n.Z,{size:(0,a.px)(i),src:e,name:t,borderColor:"transparent",presence:s})}}i.displayName="SizeableAvatar"},140026:(e,t,s)=>{s.d(t,{s:()=>n});const n=(0,s(464984).defineMessages)({placeholder:{id:"fabric.elements.user-picker.placeholder",defaultMessage:"Enter people or teams..."},addMore:{id:"fabric.elements.user-picker.placeholder.add-more",defaultMessage:"add more people..."},remove:{id:"fabric.elements.user-picker.multi.remove-item",defaultMessage:"Remove"},clear:{id:"fabric.elements.user-picker.single.clear",defaultMessage:"Clear"},memberCountWithoutYou:{id:"fabric.elements.user-picker.team.member.count",defaultMessage:"Team  {count} {count, plural, one {member} other {members}}"},memberCountWithYou:{id:"fabric.elements.user-picker.team.member.count.including.you",defaultMessage:"Team  {count} {count, plural, one {member} other {members}}, including you"},plus50MembersWithoutYou:{id:"fabric.elements.user-picker.team.member.50plus",defaultMessage:"Team  50+ members"},plus50MembersWithYou:{id:"fabric.elements.user-picker.team.member.50plus.including.you",defaultMessage:"Team  50+ members, including you"},addEmail:{id:"fabric.elements.user-picker.email.add",defaultMessage:"Add user"},selectToAddEmail:{id:"fabric.elements.user-picker.email.select.to.add",defaultMessage:"Select an email address"},continueToAddEmail:{id:"fabric.elements.user-picker.email.add.potential",defaultMessage:"Enter an email address"},groupByline:{id:"fabric.elements.user-picker.group.byline",defaultMessage:"Admin-managed group"},externalUserSourcesHeading:{id:"fabric.elements.user-picker.external.sourced.from",defaultMessage:"Found in:"},externalUserSourcesError:{id:"fabric.elements.user-picker.external.sourced.error",defaultMessage:"We can't connect you right now."},slackProvider:{id:"fabric.elements.user-picker.slack.provider",defaultMessage:"Slack"},googleProvider:{id:"fabric.elements.user-picker.google.provider",defaultMessage:"Google"},microsoftProvider:{id:"fabric.elements.user-picker.microsoft.provider",defaultMessage:"Microsoft"},gitHubProvider:{id:"fabric.elements.user-picker.github.provider",defaultMessage:"GitHub"},jiraSource:{id:"fabric.elements.user-picker.source.jira",defaultMessage:"Jira"},confluenceSource:{id:"fabric.elements.user-picker.source.confluence",defaultMessage:"Confluence"},otherAtlassianSource:{id:"fabric.elements.user-picker.source.other-atlassian",defaultMessage:"Other Atlassian products"},memberLozengeText:{id:"fabric.elements.user-picker.member.lozenge.text",defaultMessage:"MEMBER"},guestLozengeText:{id:"fabric.elements.user-picker.guest.lozenge.text",defaultMessage:"GUEST"},guestUserLozengeTooltip:{id:"fabric.elements.user-picker.guest.lozenge.tooltip.user",defaultMessage:"Guests can only access certain spaces and have limited access to user info."},guestGroupLozengeTooltip:{id:"fabric.elements.user-picker.guest.lozenge.tooltip.group",defaultMessage:"Guest groups can only access certain spaces and have limited access to user info."}})},163557:(e,t,s)=>{s.d(t,{iP:()=>o,NU:()=>l,HU:()=>u,ty:()=>c,Jh:()=>d,UK:()=>p,ad:()=>h,rQ:()=>f,TW:()=>g,FW:()=>v,ew:()=>b,px:()=>y,DJ:()=>Z,Nh:()=>x,Uh:()=>S,eZ:()=>I,E$:()=>C,cb:()=>P,ZC:()=>E});var n=s(991332),r=s(429185),a=s(270033),i=s(693964);const o=e=>l(e)&&Boolean(e.isExternal),l=e=>void 0===e.type||e.type===a.FW,u=e=>e.type===a.C9,c=e=>e.type===a.YT,d=e=>e.type===a.VQ,p=e=>e.type===a.Wu,h=e=>e&&!Array.isArray(e)||Array.isArray(e)&&e.length>0,m=e=>(e=>void 0!==e.name)(e)?{data:e,isDisabled:e.isDisabled,label:e.name,value:e.id}:{data:(0,n.Z)((0,n.Z)({},e),{},{name:e.id}),isDisabled:e.isDisabled,label:e.id,value:e.id},f=e=>{if(e)return Array.isArray(e)?e.map((({data:e})=>e)):e.data},g=e=>"function"==typeof e[Symbol.iterator],v=(0,r.Z)((e=>e.map(m))),b=(0,r.Z)((e=>e?Array.isArray(e)?e.map(m):m(e):null)),y=e=>"big"===e?"medium":"multi"===e?"xsmall":"small",Z=e=>e&&"object"==typeof e&&e.props&&"text"===e.props.type,x=e=>!!e&&!Array.isArray(e),S=e=>!!e&&e.trim().length>0,I=(e,...t)=>{if("function"==typeof e)try{return e(...t)}catch(s){console.error("@atlassian/user-select: an error happening in `callCallback`: ",s)}},C=e=>{if(l(e)||u(e)||p(e))return e.avatarUrl},P=e=>e===i.Z,E=e=>(null==e?void 0:e.hasOwnProperty("text"))||!1},270033:(e,t,s)=>{s.d(t,{FW:()=>n,C9:()=>r,YT:()=>a,VQ:()=>i,Wu:()=>o});const n="user",r="team",a="group",i="email",o="custom"}}]);
//# sourceMappingURL=71925.MDA9DRBbMY.js.map