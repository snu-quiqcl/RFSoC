WRMCB=function(e){var c=console;if(c&&c.log&&c.error){c.log('Error running batched script.');c.error(e);}}
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-create-content-plugin:user-multiselect2', location = 'user-select2/user-multiselect.js' */
define("confluence-create-content-plugin/plugin/user-select2/user-multiselect",["jquery","ajs","document","confluence/meta","confluence/api/constants"],function(e,c,a,d,b){return function(i,j){i=i||a.body;var g=(typeof j!=="undefined")?j:true;var f=function(){var k=e(".select2-drop-active > .select2-results");if(k.children(".select2-result-selectable").length===0&&k.children(".select2-disabled").length){k.append('<li class="select2-no-results">'+c.escapeHtml("No matches found")+"</li>")}};var h=g?".autocomplete-multiuser":".autocomplete-singleuser";e("input"+h+"[data-autocomplete-bound != 'true']",i).each(function(){var l=e(this);l.auiSelect2({multiple:g,minimumInputLength:2,formatInputTooShort:function(){return "Start typing to search for a user"},ajax:{transport:function(q){var r=q.success;delete q.success;return e.ajax.apply(e.ajax,arguments).done(r).done(f)},data:function(q){return{limit:6,cql:'user.fullname~"'+q+'"'}},dataType:"json",url:Confluence.getContextPath()+"/rest/api/search",results:function(r){var q=[];e.each(r.results,function(){q.push({accountId:this.user.accountId,id:this.user.accountId,text:this.user.displayName,imgSrc:this.user.profilePicture.path||b.CONTEXT_PATH+"/images/icons/profilepics/default.png"})});return{results:q}},quietMillis:300},formatResult:function(q){var r={size:"small",displayName:q.text,userId:q.id,avatarImageUrl:q.imgSrc,accountId:q.accountId};return CreateContent.avatar.avatarWithNameAccountId(r)},escapeMarkup:function(q){return q},formatSelection:function(q){var r={size:"xsmall",displayName:q.text,userId:q.id,avatarImageUrl:q.imgSrc,accountId:q.accountId};return CreateContent.avatar.avatarWithNameAccountId(r)},dropdownCssClass:"users-dropdown",containerCssClass:"users-autocomplete",hasAvatar:true});if(!l.data("autofill-user")){return}var o=d.get("remote-user"),p=d.get("atlassian-account-id"),n=d.get("current-user-fullname"),m=d.get("current-user-avatar-url");if(p&&n&&m){var k={accountId:p,id:p,text:n,imgSrc:b.CONTEXT_PATH+m};l.auiSelect2("data",g?[k]:k)}})}});require("confluence/module-exporter").exportModuleAsGlobal("confluence-create-content-plugin/plugin/user-select2/user-multiselect","Confluence.Binder.autocompleteMultiUser",function(a){Confluence.Binder.autocompleteMultiUser=a});
}catch(e){WRMCB(e)};