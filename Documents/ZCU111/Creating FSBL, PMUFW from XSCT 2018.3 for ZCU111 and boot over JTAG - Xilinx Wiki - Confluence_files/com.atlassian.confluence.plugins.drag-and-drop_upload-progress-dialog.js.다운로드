WRMCB=function(e){var c=console;if(c&&c.log&&c.error){c.log('Error running batched script.');c.error(e);}}
;
try {
/* module-key = 'com.atlassian.confluence.plugins.drag-and-drop:upload-progress-dialog', location = 'js/upload-progress-dialog.js' */
define("confluence-drag-and-drop/upload-progress-dialog",["ajs","plupload","jquery","document","confluence/templates"],function(d,f,c,k,h){var g=function(a){var b=this,e={header:"Attach files",width:600,height:400};this._options=c.extend({},e,a);this.id="drag-and-drop-progress-dialog";this._dialog=new d.Dialog(this._options.width,this._options.height,this.id);this._dialog.addHeader(this._options.header).addPanel("Panel 1",h.DragAndDrop.uploadFileStatusContainer()).addButton("Done",
function(){b.hide();b.clearRenderOutput()},"all-file-uploads-complete");this._dialog.getCurrentPanel().setPadding(0);this._$closeButton=this.find(".all-file-uploads-complete");c(k).keydown(function(a){if(27===a.which)return b._$closeButton.prop("disabled")||(b.hide(),b.clearRenderOutput()),d.stopEvent(a)});this._$container=this.find("#upload-statuses");this._workIdsOfFilesInProgress=[];this.cancelListeners=[];this.onShowListeners=[];this._hidden=!0;this.hasErrorMessage=!1};g.prototype={show:function(){this._hidden&&
(this._dialog.show(),this._hidden=!1,c.each(this.onShowListeners,function(a,b){b()}));this.hideCloseButton()},hide:function(){this._hidden||(this._dialog.hide(),this._hidden=!0)},isVisible:function(){return!this._hidden},_getProgressElementId:function(a){return"file-"+a+"-progress"},render:function(a){this._workIdsOfFilesInProgress.push(a.workId);var b=this._getProgressElementId(a.workId);this._$container.append(h.DragAndDrop.fileStatus({filename:a.file.name,progressElementId:b,workId:a.workId,showCancel:a.status==
f.QUEUED}));d.progressBars.update("#"+b,0);a.status==f.QUEUED?c("#file-upload-cancel-"+a.workId).click(function(b){return function(d){c.each(b,function(b,c){c(d,a)})}}(this.cancelListeners)):this.renderError(a.workId,a.errorMessage)},renderError:function(a,b){if(-1==c.inArray(a,this._workIdsOfFilesInProgress))throw Error("No file status found with id: "+a);a=c("#file-status-block-"+a);var e=d.escapeEntities(a.attr("data-filename"));a.html(aui.message.warning({content:b,titleContent:e}));this.hasErrorMessage=
!0},renderInfo:function(a,b){if(-1==c.inArray(a,this._workIdsOfFilesInProgress))throw Error("No file status found with id: "+a);a=c("#file-status-block-"+a);var e=d.escapeEntities(a.attr("data-filename"));a.html(aui.message.info({content:b,titleContent:e}));this.hasErrorMessage=!0},hasErrors:function(){return this.hasErrorMessage},renderUpdateToBytesUploaded:function(a,b,e){if(-1==c.inArray(a,this._workIdsOfFilesInProgress))throw Error("No file status found with id: "+a);var f=d.DragAndDropUtils.niceSize(b),
g=c("#file-"+a+"-uploaded");g.length?g.text(f):c("#file-upload-progress-text-"+a).html(h.DragAndDrop.uploadFileStatusProgressMessage({fileId:a,uploadedSizeNice:f,totalSizeNice:d.DragAndDropUtils.niceSize(e)}));b/=e;d.progressBars.update("#"+this._getProgressElementId(a),b)},renderComplete:function(a){if(-1==c.inArray(a,this._workIdsOfFilesInProgress))throw Error("No file status found with id: "+a);c("#cancel-or-success-placeholder-"+a).html(h.DragAndDrop.uploadFileStatusSuccessIcon())},renderCancelled:function(a){if(-1==
c.inArray(a,this._workIdsOfFilesInProgress))throw Error("No file status found with id: "+a);d.progressBars.setIndeterminate("#"+this._getProgressElementId(a));c("#file-upload-progress-text-"+a).html("Cancelled.");c("#cancel-or-success-placeholder-"+a).hide()},clearRenderOutput:function(){this.showCloseButton();this._$container.empty();this._workIdsOfFilesInProgress=[];this.hasErrorMessage=!1},hideCloseButton:function(){this._$closeButton.hide()},showCloseButton:function(){this._$closeButton.show()},
find:function(a){return this._dialog.getCurPanel().page.body.parent().find(a)}};return g});require("confluence/module-exporter").exportModuleAsGlobal("confluence-drag-and-drop/upload-progress-dialog","AJS.DragAndDropProgressDialog");
}catch(e){WRMCB(e)};