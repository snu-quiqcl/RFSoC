WRMCB=function(e){var c=console;if(c&&c.log&&c.error){c.log('Error running batched script.');c.error(e);}}
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:event-edit', location = 'com/atlassian/confluence/extra/calendar3/components/manage-event/event-edit/event-edit-dialog.soy' */
// This file was automatically generated from event-edit-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.eventEdit = function(opt_data, opt_ignored) {
  return '<form name="event-edit" class="aui event-edit" method="POST" action="#"><input type="hidden" name="uid" value=""><input type="hidden" name="originalStartDate" value=""><input type="hidden" name="originalSubCalendarId" value=""><input type="hidden" name="originalEventType" value=""><input type="hidden" name="originalCustomEventTypeId" value=""><input type="hidden" name="childSubCalendarId" value=""><div class="event-type subcalendar-event"><div class="aui-message error calendar-error hidden"><p class="title"><span class="aui-icon icon-error"></span><strong>' + soy.$$escapeHtml('Error(s) occurred.') + '</strong></p><div class="error-content"><ul class="error-messages hidden"></ul></div></div><div class="field-group field-group-calendar"><label for="calendar">' + soy.$$escapeHtml('Calendar') + '<span class="aui-icon icon-required"></span></label><select name="calendar" id="calendar" class="sub-calendar-select select"></select><a href="#" id="calendar-tooltip" class="aui-icon icon-help hidden" original-title="show tooltip" title="' + soy.$$escapeHtml('This field is enabled when the field \x22Edit this instance only\x22 is unchecked') + '"></a></div><div class="field-group field-group-event-type"><label for="event-type">' + soy.$$escapeHtml('Event Type') + '<span class="aui-icon icon-required"></span></label><select name="event-type" id="event-type" class="event-type-select select"></select><a href="#" id="calendar-tooltip" class="aui-icon icon-help hidden" original-title="show tooltip" title="' + soy.$$escapeHtml('This field is enabled when the field \x22Edit this instance only\x22 is unchecked') + '"></a><div class="error type-error"></div></div><div id="event-fields-container"></div></form>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.eventEdit.soyTemplateName = 'Confluence.TeamCalendars.Templates.eventEdit';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:event-edit', location = 'com/atlassian/confluence/extra/calendar3/components/manage-event/event-edit/event-fields.soy' */
// This file was automatically generated from event-fields.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.Fields.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }
if (typeof Confluence.TeamCalendars.Templates.Fields == 'undefined') { Confluence.TeamCalendars.Templates.Fields = {}; }


Confluence.TeamCalendars.Templates.Fields.text = function(opt_data, opt_ignored) {
  return '<div class="field-group field-' + soy.$$escapeHtml(opt_data.id) + '" id="field-text-' + soy.$$escapeHtml(opt_data.id) + '"><label for="' + soy.$$escapeHtml(opt_data.id) + '">' + soy.$$escapeHtml(opt_data.label) + ((opt_data.required) ? '<span class="aui-icon icon-required"></span>' : '') + '</label><input type="text" class="text" name="' + soy.$$escapeHtml(opt_data.id) + '" id="' + soy.$$escapeHtml(opt_data.id) + '-text" value="" ' + ((opt_data.readOnly) ? ' readonly="readonly"' : '') + '><div class="error ' + soy.$$escapeHtml(opt_data.id) + '-error"></div></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.Fields.text.soyTemplateName = 'Confluence.TeamCalendars.Templates.Fields.text';
}


Confluence.TeamCalendars.Templates.Fields.inforReminderLabel = function(opt_data, opt_ignored) {
  return '<div class="field-group field-' + soy.$$escapeHtml(opt_data.id) + '" id="field-text-' + soy.$$escapeHtml(opt_data.id) + '"><label for="' + soy.$$escapeHtml(opt_data.id) + '">' + soy.$$escapeHtml(opt_data.label) + '</label><div class="bodyInforReminderLabel">' + Confluence.TeamCalendars.Templates.Fields.bodyInforReminderLabel(opt_data) + '</div></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.Fields.inforReminderLabel.soyTemplateName = 'Confluence.TeamCalendars.Templates.Fields.inforReminderLabel';
}


Confluence.TeamCalendars.Templates.Fields.bodyInforReminderLabel = function(opt_data, opt_ignored) {
  return '' + ((opt_data.reminderPeriod > 0) ? '<span class="span-label field-value-normal">' + soy.$$filterNoAutoescape(opt_data.reminderPeriodText) + '</span><p></p><div class="reminder-info"><div class="reminder-info-icon"><span class="aui-icon aui-icon-small aui-iconfont-info">Info</span></div><div class="reminder-info-text"><span>' + soy.$$filterNoAutoescape('Reminders are inherited from the event type. \x3ca href\x3d\x22#\x22 id\x3d\x22calendar-reminder-setting\x22\x3eEdit event type\x3c/a\x3e') + '</span></div></div>' : '<span class="span-label field-value-normal">' + soy.$$escapeHtml(opt_data.reminderPeriodText) + ' ' + soy.$$filterNoAutoescape('\x3ca href\x3d\x22#\x22 id\x3d\x22calendar-reminder-setting\x22 class\x3d\x22add-reminder-setting\x22\x3eAdd reminder\x3c/a\x3e') + '</span>');
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.Fields.bodyInforReminderLabel.soyTemplateName = 'Confluence.TeamCalendars.Templates.Fields.bodyInforReminderLabel';
}


Confluence.TeamCalendars.Templates.Fields.textarea = function(opt_data, opt_ignored) {
  return '<div class="field-group field-' + soy.$$escapeHtml(opt_data.id) + '" id="field-textarea-' + soy.$$escapeHtml(opt_data.id) + '"><label for="' + soy.$$escapeHtml(opt_data.id) + '">' + soy.$$escapeHtml(opt_data.label) + ((opt_data.required) ? '<span class="aui-icon icon-required"></span>' : '') + '</label><textarea name="' + soy.$$escapeHtml(opt_data.id) + '" id="' + soy.$$escapeHtml(opt_data.id) + '-textarea" class="textarea" rows="' + soy.$$escapeHtml(opt_data.size) + '" ' + ((opt_data.readOnly) ? ' readonly="readonly"' : '') + '></textarea><div class="error ' + soy.$$escapeHtml(opt_data.id) + '-error"></div></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.Fields.textarea.soyTemplateName = 'Confluence.TeamCalendars.Templates.Fields.textarea';
}


Confluence.TeamCalendars.Templates.Fields.page = function(opt_data, opt_ignored) {
  return '<div class="field-group field-' + soy.$$escapeHtml(opt_data.id) + ' field-group-eventlink" id="field-page-' + soy.$$escapeHtml(opt_data.id) + '"><label for="' + soy.$$escapeHtml(opt_data.id) + '">' + soy.$$escapeHtml(opt_data.label) + ((opt_data.required) ? '<span class="aui-icon icon-required"></span>' : '') + '</label><input type="text" class="text" name="' + soy.$$escapeHtml(opt_data.id) + '" id="' + soy.$$escapeHtml(opt_data.id) + '-text" value="" ' + ((opt_data.readOnly) ? ' readonly="readonly"' : '') + '><div class="' + soy.$$escapeHtml(opt_data.id) + '-suggestions aui-dd-parent hidden" ><div class="aui-dropdown"></div></div><div class="error ' + soy.$$escapeHtml(opt_data.id) + '-error"></div></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.Fields.page.soyTemplateName = 'Confluence.TeamCalendars.Templates.Fields.page';
}


Confluence.TeamCalendars.Templates.Fields.when = function(opt_data, opt_ignored) {
  return '<div id="field-when"><fieldset class="date-select"><legend><span>' + soy.$$escapeHtml('When') + '<span class="aui-icon icon-required"></span></span></legend><div class="field-group"><label for="startDate">' + soy.$$escapeHtml('Start date') + '</label><input class="datepicker-field date-field start text" type="text" name="startDate" id="' + soy.$$escapeHtml(opt_data.id) + '-startDate" size="10" value="" autocomplete="off" ' + ((opt_data.disableStartDateTime) ? ' disabled="disabled"' : '') + '><label for="startTime">' + soy.$$escapeHtml('Start time') + '</label><input type="text" class="time-field text" name="startTime" id="' + soy.$$escapeHtml(opt_data.id) + '-startTime" size="8" ' + ((opt_data.disableStartDateTime) ? ' disabled="disabled"' : '') + '><span>' + soy.$$escapeHtml('to') + '</span><label for="endTime">' + soy.$$escapeHtml('End date') + '</label><input type="text" class="time-field text" name="endTime" id="' + soy.$$escapeHtml(opt_data.id) + '-endTime" size="8" ' + ((opt_data.disableEndDateTime) ? ' disabled="disabled"' : '') + '><label for="endDate">' + soy.$$escapeHtml('End time') + '</label><input class="datepicker-field date-field end text" type="text" name="endDate" id="' + soy.$$escapeHtml(opt_data.id) + '-endDate" size="10" value="" autocomplete="off" ' + ((opt_data.disableEndDateTime) ? ' disabled="disabled"' : '') + '><div class="error when-error"></div></div></fieldset><div class="field-group field-group-allday"><label for="allDayEvent">' + soy.$$escapeHtml('All day event') + '</label><input type="checkbox" class="checkbox" name="allDayEvent" id="' + soy.$$escapeHtml(opt_data.id) + '-allDayEvent" value="true" ' + ((opt_data.disableAllDay) ? ' disabled="disabled"' : '') + '></div></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.Fields.when.soyTemplateName = 'Confluence.TeamCalendars.Templates.Fields.when';
}


Confluence.TeamCalendars.Templates.Fields.repeats = function(opt_data, opt_ignored) {
  return '<div id="field-repeats"><input type="hidden" name="freq" value=""><input type="hidden" name="byday" value=""><input type="hidden" name="recurrenceId" value=""><div class="field-group edit-this-instance-only-container hidden"><label for="editthisinstanceonly">' + soy.$$escapeHtml('Edit this instance only') + '</label><input type="checkbox" class="checkbox" name="editthisinstanceonly" id="editthisinstanceonly" value="true" checked="checked"></div><div class="field-group field-group-frequency"><label for="freq-select">' + soy.$$escapeHtml('Repeat') + '</label><select name="freq-select" id="' + soy.$$escapeHtml(opt_data.id) + '-freq-select" class="select"><option value="">' + soy.$$escapeHtml('Doesn\x27t repeat') + '</option><option value="DAILY">' + soy.$$escapeHtml('Daily') + '</option><option value="WEEKLY-BYDAY">' + soy.$$escapeHtml('Weekdays') + '</option><option value="WEEKLY">' + soy.$$escapeHtml('Weekly') + '</option><option value="MONTHLY">' + soy.$$escapeHtml('Monthly') + '</option><option value="YEARLY">' + soy.$$escapeHtml('Yearly') + '</option></select></div><div class="hidden field-group interval-container"><label for="interval">' + soy.$$escapeHtml('Repeat every') + '</label><input type="text" class="text" name="interval" id="' + soy.$$escapeHtml(opt_data.id) + '-interval" maxlength="2"><span class="interval-label"></span><div class="error interval-error"></div></div><fieldset class="date-select recur-ends hidden"><legend><span>' + soy.$$escapeHtml('End repeat') + '</span></legend><div class="field-group"><label for="recur-end-never">' + soy.$$escapeHtml('Never') + '</label><input type="radio" class="radio recur-ends-never" name="recur-end" id="' + soy.$$escapeHtml(opt_data.id) + '-recur-end-never" checked="checked"><span class="label">' + soy.$$escapeHtml('Never') + '</span><label for="recur-end-until">' + soy.$$escapeHtml('On date') + '</label><input type="radio" class="radio recur-ends-until" name="recur-end" id="' + soy.$$escapeHtml(opt_data.id) + '-recur-end-until" disabled="disabled"><span class="label">' + soy.$$escapeHtml('On date') + '</span><input class="datepicker-field date-field text" type="text" class="" name="until" id="' + soy.$$escapeHtml(opt_data.id) + '-until" value="" size="10" disabled="disabled"  autocomplete="off"><div class="error until-error"></div></div></fieldset></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.Fields.repeats.soyTemplateName = 'Confluence.TeamCalendars.Templates.Fields.repeats';
}


Confluence.TeamCalendars.Templates.Fields.repeatComponentUnSupported = function(opt_data, opt_ignored) {
  return '<div class="field-group field-group-frequency"><label for="freq-select">' + soy.$$escapeHtml('Repeat') + '</label><div class="aui-message aui-message-info info repeat-unsupported"><p>' + soy.$$escapeHtml('This event was set to repeat in another calendar app. To make changes you\x27ll need to edit this event in that app.') + '</p></div></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.Fields.repeatComponentUnSupported.soyTemplateName = 'Confluence.TeamCalendars.Templates.Fields.repeatComponentUnSupported';
}


Confluence.TeamCalendars.Templates.Fields.repeatComponent = function(opt_data, opt_ignored) {
  return '<div id="field-repeats"><input type="hidden" name="rruleStr" value=""><div class="field-group edit-this-instance-only-container hidden"><label for="editthisinstanceonly">' + soy.$$escapeHtml('Edit this instance only') + '</label><input type="checkbox" class="checkbox" name="editthisinstanceonly" id="editthisinstanceonly" value="true" checked="checked"></div><div class="field-group hidden frequency-container"><!-- just a placeholder will be replaced by actuall template --></div><fieldset class="group hidden repeat-on-container"><!-- just a placeholder will be replaced by actuall template --></fieldset><div class="hidden field-group interval-container"><!-- just a placeholder will be replaced by actuall template --></div><fieldset class="hidden date-select recur-ends-container"><!-- just a placeholder will be replaced by actuall template --></fieldset></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.Fields.repeatComponent.soyTemplateName = 'Confluence.TeamCalendars.Templates.Fields.repeatComponent';
}


Confluence.TeamCalendars.Templates.Fields.repeatFrequency = function(opt_data, opt_ignored) {
  return '<div class="hidden field-group frequency-container"><label for="freq-select">' + soy.$$escapeHtml('Repeat') + '</label><select name="freq-select" id="freq-select" class="select"><option value="">' + soy.$$escapeHtml('Doesn\x27t repeat') + '</option><option value="DAILY">' + soy.$$escapeHtml('Daily') + '</option><option value="WEEKLY">' + soy.$$escapeHtml('Weekly') + '</option><option value="MONTHLY">' + soy.$$escapeHtml('Monthly') + '</option><option value="YEARLY">' + soy.$$escapeHtml('Yearly') + '</option></select></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.Fields.repeatFrequency.soyTemplateName = 'Confluence.TeamCalendars.Templates.Fields.repeatFrequency';
}


Confluence.TeamCalendars.Templates.Fields.repeatOnMonthly = function(opt_data, opt_ignored) {
  return '<fieldset class="group hidden repeat-on-container"><legend><span>' + soy.$$escapeHtml('Repeat on') + '</span></legend><div class="radio"><input class="radio" name="monthlyRepeatOn" id="monthlyRepeatOnSameDate" type="radio"><label for="irTwo">' + soy.$$escapeHtml('Same date') + '</label></div><div class="radio"><input class="radio" name="monthlyRepeatOn" id="monthlyRepeatOnSameDay" type="radio"><label for="irTwo">' + soy.$$escapeHtml('Same day each month') + '</label></div><div class="radio hidden" id="monthlyRepeatOnSameDayContainer"><select id="monthlyRepeatOnSameDayByMonthDay" class="select"><option value="1">' + soy.$$escapeHtml('First') + '</option><option value="2">' + soy.$$escapeHtml('Second') + '</option><option value="3">' + soy.$$escapeHtml('Third') + '</option><option value="4">' + soy.$$escapeHtml('Fourth') + '</option><option value="-1">' + soy.$$escapeHtml('Last') + '</option></select><select id="monthlyRepeatOnSameDayByWeekDay" class="select"><option value="0">' + soy.$$escapeHtml('Monday') + '</option><option value="1">' + soy.$$escapeHtml('Tuesday') + '</option><option value="2">' + soy.$$escapeHtml('Wednesday') + '</option><option value="3">' + soy.$$escapeHtml('Thursday') + '</option><option value="4">' + soy.$$escapeHtml('Friday') + '</option><option value="5">' + soy.$$escapeHtml('Saturday') + '</option><option value="6">' + soy.$$escapeHtml('Sunday') + '</option><option class="with-separator" value="day">' + soy.$$escapeHtml('Day') + '</option></select></div></fieldset>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.Fields.repeatOnMonthly.soyTemplateName = 'Confluence.TeamCalendars.Templates.Fields.repeatOnMonthly';
}


Confluence.TeamCalendars.Templates.Fields.repeatOnWeekly = function(opt_data, opt_ignored) {
  return '<fieldset class="group hidden repeat-on-container"><legend><span>' + soy.$$escapeHtml('Repeat on') + '</span></legend><div class="checkbox"><input name="repeatOnMon" id="repeatOnMon" value="0" class="" type="checkbox"><label for="repeatOnMon">' + soy.$$escapeHtml('Mon') + '</label><input name="repeatOnTues" id="repeatOnTues" value="1" class="" type="checkbox"><label for="repeatOnTues">' + soy.$$escapeHtml('Tue') + '</label><input name="repeatOnWeds" id="repeatOnWeds" value="2" class="" type="checkbox"><label for="repeatOnWeds">' + soy.$$escapeHtml('Wed') + '</label><input name="repeatOnThurs" id="repeatOnThurs" value="3" class="" type="checkbox"><label for="repeatOnThurs">' + soy.$$escapeHtml('Thur') + '</label></div><div class="checkbox"><input name="repeatOnFri" id="repeatOnFri" value="4" class="" type="checkbox"><label for="repeatOnFri">' + soy.$$escapeHtml('Fri') + '</label><input name="repeatOnSat" id="repeatOnSat" value="5" class="" type="checkbox"><label for="repeatOnSat">' + soy.$$escapeHtml('Sat') + '</label><input name="repeatOnSun" id="repeatOnSun" value="6" class="" type="checkbox"><label for="repeatOnSun">' + soy.$$escapeHtml('Sun') + '</label></div></fieldset>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.Fields.repeatOnWeekly.soyTemplateName = 'Confluence.TeamCalendars.Templates.Fields.repeatOnWeekly';
}


Confluence.TeamCalendars.Templates.Fields.repeatInterval = function(opt_data, opt_ignored) {
  return '<div class="hidden field-group interval-container"><label for="interval">' + soy.$$escapeHtml('Repeat every') + '</label><input type="text" class="text" name="interval" id="repeat-interval-txtField" maxlength="2"><span class="interval-label"></span><div class="error interval-error"></div></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.Fields.repeatInterval.soyTemplateName = 'Confluence.TeamCalendars.Templates.Fields.repeatInterval';
}


Confluence.TeamCalendars.Templates.Fields.repeatRecurEnd = function(opt_data, opt_ignored) {
  return '<fieldset class="hidden date-select recur-ends-container"><legend><span>' + soy.$$escapeHtml('End repeat') + '</span></legend><div class="radio"><input type="radio" class="radio recur-ends-never" name="recur-end" id="recur-end-never"><span class="label">' + soy.$$escapeHtml('Never') + '</span></div><div class="radio"><input type="radio" class="radio recur-ends-times" name="recur-end" id="recur-end-times"><span class="label">' + soy.$$escapeHtml('After') + '</span><input type="text" class="text" name="recur-end-times" id="recur-end-times-txtField" maxlength="2"><span class="interval-label">' + soy.$$escapeHtml('times') + '</span></div><div class="radio"><input type="radio" class="radio recur-ends-until" name="recur-end" id="recur-end-until"><span class="label">' + soy.$$escapeHtml('On date') + '</span><input class="datepicker-field date-field text" type="text" class="" name="until" id="until" value="" size="10" disabled="disabled"  autocomplete="off"></div><div class="error until-error"></div></fieldset>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.Fields.repeatRecurEnd.soyTemplateName = 'Confluence.TeamCalendars.Templates.Fields.repeatRecurEnd';
}


Confluence.TeamCalendars.Templates.Fields.user = function(opt_data, opt_ignored) {
  return '<div class="field-group field-group-' + soy.$$escapeHtml(opt_data.id) + '" id="field-user-' + soy.$$escapeHtml(opt_data.id) + '"><label for="' + soy.$$escapeHtml(opt_data.id) + '">' + soy.$$escapeHtml(opt_data.label) + ((opt_data.required) ? '<span class="aui-icon icon-required"></span>' : '') + '</label><input type="text" class="text autocomplete-multiuser" name="' + soy.$$escapeHtml(opt_data.id) + '" id="' + soy.$$escapeHtml(opt_data.id) + '-user-picker" value="" data-max="10" data-none-message="' + soy.$$escapeHtml('No users found.') + '"><ul class="invitees hidden"></ul><div class="error ' + soy.$$escapeHtml(opt_data.id) + '-error"></div></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.Fields.user.soyTemplateName = 'Confluence.TeamCalendars.Templates.Fields.user';
}


Confluence.TeamCalendars.Templates.Fields.userSelection = function(opt_data, opt_ignored) {
  return '<li class="invitee" title="' + soy.$$escapeHtml(opt_data.displayName) + '"><div class="invitee-left" threedots="' + soy.$$escapeHtml(opt_data.displayName) + '"><img src="' + soy.$$escapeHtml(opt_data.avatarIconUrl) + '"><span class="invitee-name-display">' + soy.$$escapeHtml(opt_data.displayName) + '</span></div><div class="invitee-right"><a class="delete-invitee" title="' + soy.$$escapeHtml('Delete') + '"></a></div><div class="clear"></div></li>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.Fields.userSelection.soyTemplateName = 'Confluence.TeamCalendars.Templates.Fields.userSelection';
}


Confluence.TeamCalendars.Templates.Fields.serverSelector = function(opt_data, opt_ignored) {
  return '<div class="field-group field-group-jira field-group-jira-server" id="field-serverSelector"><label for="tc-jira-server">' + soy.$$escapeHtml('Server') + '<span class="aui-icon icon-required"></span></label><select name="tc-jira-server" class="select tc-jira-server"></select><span class="spinner aui-icon aui-icon-wait"></span><div class="error server-error"></div><div class="error oauth-error hidden"></div></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.Fields.serverSelector.soyTemplateName = 'Confluence.TeamCalendars.Templates.Fields.serverSelector';
}


Confluence.TeamCalendars.Templates.Fields.projectSelector = function(opt_data, opt_ignored) {
  return '<div class="field-group field-group-jira field-group-jira-project" id="field-projectSelector"><label for="tc-jira-project">' + soy.$$escapeHtml('Project') + '<span class="aui-icon icon-required"></span></label><select name="tc-jira-project" class="select tc-jira-project"></select><span class="spinner aui-icon aui-icon-wait"></span><div class="error project-error"></div></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.Fields.projectSelector.soyTemplateName = 'Confluence.TeamCalendars.Templates.Fields.projectSelector';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:event-edit', location = 'com/atlassian/confluence/extra/calendar3/components/manage-event/event-edit/event-edit-dialog.js' */
define("tc/event-edit-dialog",["jquery","tc/event-field-handlers","tc/event-types","tc-backbone","tc/calendar-util"],function(b,e,i,g,c){var j,h,d,f={};var a=g.View.extend({disableCalSelect:function(){if(b.fn.auiSelect2){b("select#calendar").auiSelect2("disable")}else{b("select#calendar").attr("disabled",true)}if(AJS.Meta.get("build-number")>=4520){b("#event-type").auiSelect2("enable",false)}else{b("#event-type").auiSelect2("disable")}},enableCalSelect:function(){if(b.fn.auiSelect2){b("select#calendar").auiSelect2("enable")}else{b("select#calendar").attr("disabled",false)}if(AJS.Meta.get("build-number")>=4520){b("#event-type").auiSelect2("enable",true)}else{b("#event-type").auiSelect2("enable")}},showToolTip:function(){b("#edit-event-dialog .subcalendar-event select.event-type-select").css("display","none");var l=window.navigator.userAgent;var k=l.indexOf("MSIE ");if(AJS.Meta.get("build-number")<4520||k>0||!!navigator.userAgent.match(/Trident.*rv\:11\./)){b("#edit-event-dialog .field-group-event-type .icon-help").css("top","-10px")}b("#calendar-tooltip.icon-help").removeClass("hidden").tooltip({aria:true})},hiddenToolTip:function(){b("#calendar-tooltip.icon-help").addClass("hidden")},getField:function(k,l){return b("input[name='"+l+"']",k)},getSelect:function(k,l){return b("select[name='"+l+"']",k)},getTextSelect:function(k,l){return b("select[name='"+l+"'] option:selected",k).text()},getTextArea:function(k,l){return b("textarea[name='"+l+"']",k)},show:function(){d.show()},hide:function(){d.hide()},remove:function(){d.remove()},getEditEventDialog:function(H,A,p,K){var C,y,o,N,u,I=[],O,J=Confluence.TeamCalendars.LocalStorage,x=H.originalEventSubCalendarId,m=this;var D=580,B=700;if(d&&d.isVisible()){return d}if(d){d.remove();d=null;AJS.log("Warning: old event edit dialog was not destroyed before creating a new one.")}j=p;h=K;u=i.DefaultEventType;function z(P){var Q={};b.each(P,function(R,S){if(S===undefined){Q[R]=""}else{Q[R]=S}});return Q}function w(Y,R){var Z,Q,V,W,ad,T,X,S,ac,U,ab,aa;if(j.isProcessingEvent(h)){return false}j.setProcessingEvent(h,true,C);Z=m.getField(N,"originalSubCalendarId").val();aa=m.getField(N,"childSubCalendarId").val();Q=m.getField(N,"originalStartDate").val();V=b("option:selected",m.getSelect(N,"calendar")).val();W=m.getField(N,"uid").val();X=m.getSelect(N,"event-type").val();S=c.isCustomEventType(X)?i.CustomEventType:u[X];ad=m.getField(N,"allDayEvent").is(":checked");T=m.getField(N,"until");ac=m.getField(N,"originalEventType").val();U=m.getField(N,"originalCustomEventTypeId").val();ab=c.isCustomEventType(X)?X:"";J.setItem("last-selected-calendar",V);J.setItem("last-selected-calendar-type",X);if(!W){h.data(j.PREF_LAST_ALL_DAY_USED,ad.toString())}if(!S){return}var P=function(ae){if(!W){k(ae)}};if(S.customHandler){S.customHandler.submitForm(Y,m.getField(Y,"name").val(),V,j.getRenderedMacroCallbackHandler(h),function(){d.remove();j.setProcessingEvent(h,false,C);j.updateAvailableSubCalendarsInSubCalendarPanel(h);P({rrule:""})},function(){j.setProcessingEvent(h,false,C)});return}j.updateEvent(h,(function(){var ae={originalSubCalendarId:Z,originalStartDate:Q,subCalendarId:V,uid:W,eventType:c.isCustomEventType(X)?"custom":X,originalEventType:ac,customEventTypeId:ab,originalCustomEventTypeId:U,childSubCalendarId:aa,recurrenceId:H.recurId||""};b.each(R,function(af,ag){b.extend(ae,z(ag.getData()))});P({rrule:ae.rruleStr||""});return ae})(),function(ae,ag,af){j.getCalendarPanel(h).fullCalendar("unselect");j.showAjaxError(h,ae,ag,af,j.ERROR_CLASS_EVENT_UPDATE);j.setProcessingEvent(h,false,C)},function(ah){j.getCalendarPanel(h).fullCalendar("unselect");j.setGenericErrors(h,null,j.ERROR_CLASS_EVENT_UPDATE);if(ah.success){Confluence.TeamCalendars.setFieldErrors(Y,null);var ai=j.getSubCalendar(h,ah.subCalendar.id);if(!ai){var ag=j.getSubCalendar(h,ah.subCalendar.parentId);ai=ah.subCalendar;if(ai.type==="custom"||ai.subscriptionType==="custom"){var ak=ai.customEventTypes;var al=ag.customEventTypes;if(ak&&ak.length){if(al&&al.length){var af=false;for(var aj=0;aj<al.length;aj++){if(al[aj].customEventTypeId===ak[0].customEventTypeId){af=true;break}}if(!af){al.push(ak[0])}}else{ag.customEventTypes.push(ak[0])}}}ag.childSubCalendars=b.merge([ai],ag.childSubCalendars||[]);j.updateAvailableSubCalendarsInSubCalendarPanel(h);j.addSubCalendarEventSource(h,ai.id);if(x&&ah.subCalendar&&(ah.subCalendar.parentId!==Z||ai.id!==x)){j.reloadSubCalendar(h,x)}}else{var ae=[ai.id];if(x&&(ai.id!==x||ah.subCalendar.parentId!==Z)){ae.push(x)}j.reloadSubCalendar(h,ae)}d.remove()}else{Confluence.TeamCalendars.setFieldErrors(Y,ah.fieldErrors)}j.setProcessingEvent(h,false,C)});return false}function G(R,S){var T=j.getSubCalendarsWhichCanAddEvents(h);T.sort(function(aa,Z){var Y=aa.name.toLowerCase(),X=Z.name.toLowerCase();return Y.localeCompare(X)});var W=m.getSelect(R,"calendar");b.each(T,function(Y,X){W.append(b("<option/>",{value:X.id,text:X.name}))});if(b.fn.auiSelect2){W.auiSelect2({minimumResultsForSearch:-1})}if(T.length===1){W.parent().hide()}var P=function(X){if(W.find("option[value='"+X+"']").length>0){if(b.fn.auiSelect2){W.auiSelect2("val",X)}else{W.val(X)}}};if(S.subCalendarId){var Q=j.getSubCalendar(h,S.subCalendarId);if(Q){var V=Q.parentId||S.subCalendarId;P(V)}}else{var U=J.getItem("last-selected-calendar");if(U){P(U)}}if(S!==undefined&&(c.isJiraEvent(S)||c.isJiraEventStream(S.eventType))){W.disable()}W.change(function(){var aa=m.getField(R,"originalSubCalendarId").val();var Y=m.getField(R,"originalEventType").val();if(T.length>1&&aa!==""&&Y!==""){var Z=b(this).find("option:selected");var X=m.getSelect(R,"event-type").val();if(aa===Z.val()&&X===Y){b("#editthisinstanceonly").enable()}else{b("#editthisinstanceonly").disable()}}v(R,true)})}function t(Q){var R=c.isCustomEventType(Q.id)?Q.css:Q.id;var P=b("<div/>",{"class":"tc-event-type-item",title:Q.text}).append(b("<span/>",{"class":"icon_type "+R})).append(b("<span/>",{"class":"ellipsis_text",text:Q.text}));return b("<div/>").append(P).html()}function l(R){var P=j.getSubCalendarsWhichCanAddEvents(h);for(var Q in P){if(P[Q].id===R){return P[Q].disableEventTypes}}}function q(R){var P=j.getSubCalendarsWhichCanAddEvents(h);for(var Q in P){if(P[Q].id===R){return P[Q].customEventTypes}}}function F(T,Q){var S;if(!Q){return S}var R=q(T);if(R&&R.length){for(var P=0;P<R.length;P++){if(R[P].customEventTypeId===Q){S=R[P];break}}}return S}function s(P){P.sort(function(R,Q){return R.title.toUpperCase().localeCompare(Q.title.toUpperCase())});return P}function v(R,S){var X=m.getSelect(R,"event-type");if(S){X.empty()}var Y=m.getField(R,"originalEventType").val();var Q=m.getField(R,"originalSubCalendarId").val();var V=m.getSelect(R,"calendar").find("option:selected").val();var Z=l(V);var aa=s(q(V));var U=F(Q,H.customEventTypeId);var W=function(ab){for(var ac in Z){if(ab===Z[ac]){return true}}return false};if(H.id){b.each(u,function(ab,ac){if((Y===ac.id||!W(ac.id)&&(c.isJiraEvent(H)||ac.hiddenFromEventCreation===undefined))){X.append(b("<option/>",{value:ac.id,text:ac.name}))}});b.each(aa,function(ab,ac){if(!W(ac.customEventTypeId)){X.append(b("<option/>",{value:ac.customEventTypeId,"class":ac.icon,"data-custom-id":ac.customEventTypeId,text:ac.title}))}});if(S&&U){var P=false;for(var T=0;T<aa.length;T++){if(aa[T].title===U.title){P=true;break}}if(!P){X.append(b("<option/>",{value:U.customEventTypeId,"class":U.icon,"data-custom-id":U.customEventTypeId,text:U.title}))}}}else{b.each(u,function(ab,ac){if(!W(ac.id)&&(c.isJiraEvent(H)||ac.hiddenFromEventCreation===undefined)){X.append(b("<option/>",{value:ac.id,text:ac.name}))}});b.each(aa,function(ab,ac){if(!W(ac.customEventTypeId)){X.append(b("<option/>",{value:ac.customEventTypeId,"class":ac.icon,"data-custom-id":ac.customEventTypeId,text:ac.title}))}});b.each(u,function(ab,ac){if(ac.hiddenFromEventCreation!==undefined&&ac.hiddenFromEventCreation===false&&!W(ac.id)){X.append(b("<option/>",{value:ac.id,text:ac.name}))}});if(X.children().length>0){b(".field-group-event-type .type-error",R).empty();b("#event-fields-container",R).show();m.enableOkButton()}else{X.append(b("<option/>",{value:"",text:""}));b(".field-group-event-type .type-error",R).append(b("<span/>",{text:"All event types are disabled. Please add new event type to the calendar."}));b("#event-fields-container",R).hide();C.disableOkButton({buttonText:"OK"})}X.append(b("<option/>",{value:"addNewCustomEventType","class":"addNewCustomEventType",text:"Add new event type"}))}if(AJS.$.fn.auiSelect2){b(".event-edit #event-type").auiSelect2({formatSelection:t,formatResult:t,minimumResultsForSearch:-1});if(H.id&&c.isJiraEvent(H)){if(AJS.Meta.get("build-number")>=4520){b("#event-type").auiSelect2("enable",false)}else{b("#event-type").auiSelect2("disable")}}}if(H.eventType&&H.eventType==="custom"){X.change(L).val(H.customEventTypeId).trigger("change")}else{X.change(L).val(H.eventType||J.getItem("last-selected-calendar-type")||"other").trigger("change")}}function n(){m.getField(N,"uid").val(H.id||"");m.getField(N,"originalStartDate").val(H.originalStart||"");m.getField(N,"originalSubCalendarId").val(H.subCalendarId||"");m.getField(N,"originalEventType").val(H.eventType||"");m.getField(N,"originalCustomEventTypeId").val(H.customEventTypeId||"");m.getField(N,"childSubCalendarId").val(H.childSubCalendarId||"")}function L(R){if(!d){return}var Q=R.target.value;if(Q==="addNewCustomEventType"){var T=b("option:selected",m.getSelect(N,"calendar")).val();d.remove();var P=j.getSubCalendar(h,T);var S=j.showCustomEventEditForm(h,P);return}r(Q);if(!c.isJiraEventStream(Q)){m.getSelect(N,"event-type").data("previous",Q)}M()}function M(){if(d){d.getCurrentPanel().body.css({height:"auto"});b("#"+d.id).css({height:"auto"})}}function r(Y){if(!Y){return}var U=c.isCustomEventType(Y)?i.CustomEventType.fields:u[Y].fields,Q=[],ab=b("#event-fields-container"),V=c.isJiraEventStream(Y),X=V?b("#"+Y+"-event-fields",ab):b("#tc-event-fields",ab),W=m.getSelect(N,"event-type").val(),S=m.getSelect(N,"event-type").data("previous"),P,ac=m.getField(N,"originalEventType").val();if(H&&c.isJiraEventStream(H.eventType)){m.getSelect(N,"event-type").attr("disabled","disabled")}if(!V&&S){var Z=c.isCustomEventType(S)?i.CustomEventType.fields:u[S].fields;b.each(b.grep(Z,function(ad){return ad.type==="text"&&ad.copyto}),function(ae,ad){P=m.getField(X,ad.id).val()})}b(".event-fields",ab).each(function(){b(this).find(".error").empty();b(this).hide()});if(X.length&&V){X.show();Q=I[Y]}else{if(X.length){X.show();b("#tc-event-fields >div").hide()}else{if(V){X=b("<div/>",{id:Y+"-event-fields","class":"event-fields"})}else{X=b("<div/>",{id:"tc-event-fields","class":"event-fields"})}ab.append(X)}b.each(U,function(ad,ae){if(V){Q[ad]=e[ae.type](ae,X,H,j,h,m);Q[ad].add();Q[ad].init()}else{Q[ad]=e.getEventField(ae,X,H,j,h,m,P)}});I[Y]=Q}var T=function(){return f[W]!==false};if(T()){C.enableOkButton()}else{C.disableOkButton({buttonText:"OK"})}C.unbind("submit").submit(function(){w(X,Q);return false});if(ac!==undefined&&ac!==""){var R=m.getField(N,"originalSubCalendarId").val();var aa=m.getSelect(N,"calendar").val();if(ac===Y&&aa===R){b("#editthisinstanceonly").enable()}else{b("#editthisinstanceonly").disable()}}b(X).off("click.calendar-reminder-setting").on("click.calendar-reminder-setting","#calendar-reminder-setting",function(){var ad=m.getSelect(N,"calendar").val();d.hide();var ae=j.getSubCalendar(h,ad);j.showCustomEventEditForm(h,ae,W);return})}AJS.unbind("show-dialog-edit-event.teamcalendar").bind("show-dialog-edit-event.teamcalendar",function(R){var S=c.isJiraEventStream(m.getSelectedEventType())?"#"+m.getSelectedEventType()+"-event-fields":"#tc-event-fields";var Q=b("#field-text-reminder .bodyInforReminderLabel",b(S,N));var T=j.getCurrentReminderForEventType(h,m);var P=T&&T.periodInMins>0;b(Q).empty().append(Confluence.TeamCalendars.Templates.Fields.bodyInforReminderLabel({reminderPeriodText:P?AJS.format("{0} before",c.showInforReminder(T.periodInMins)):"None.",reminderPeriod:P?T.periodInMins:0}));d.show()});AJS.unbind("remove-dialog-edit-event.teamcalendar").bind("remove-dialog-edit-event.teamcalendar",function(P){if(d){d.remove()}});AJS.bind("remove.dialog",function(Q,P){if(P.dialog.id=="edit-event-dialog"){d=null}});y=function(){C.submit();AJS.unbind("show-dialog-edit-event.teamcalendar");return false};o=function(){d.remove();AJS.unbind("show-dialog-edit-event.teamcalendar");return false};d=new AJS.ConfluenceDialog({id:"edit-event-dialog",width:D,height:B,onSubmit:y,onCancel:o});d.addHeader(H.title||"Create event");d.addButton("OK",y,"submit");d.addLink("Cancel",o);O=d.popup.element.find(".submit");d.addPanel("",Confluence.TeamCalendars.Templates.eventEdit(),"calendar-dialog-panel");N=d.getCurrentPanel().body;var E=function(P){f[m.getSelect(N,"event-type").val()]=P};var k=function(Q){var P="myCalendars";if(AJS.Meta.get("space-key")){if(AJS.Meta.get("content-id")){P="embedded"}else{if(c.isSingleCalendarView(K)){P="singleCalendar"}else{P="spaceCalendars"}}}Confluence.TeamCalendars.fireEventForAnalytics("add.event."+P,Q)};C=b("form[name='event-edit']",N);C.disableOkButton=function(P){var Q=b.extend({buttonText:"Adding..."},P);O.text(Q.buttonText).attr("disabled","disabled").addClass("ui-state-disabled");E(false)};C.enableOkButton=function(P){var Q=b.extend({buttonText:"OK"},P);O.removeAttr("disabled").removeClass("ui-state-disabled").text(Q.buttonText);E(true)};G(N,H);d.disableOkButton=C.disableOkButton;d.enableOkButton=C.enableOkButton;v(N);n();return d},disableOkButton:function(k){d.disableOkButton(k)},enableOkButton:function(k){d.enableOkButton(k)},getSelectedEventType:function(){return this.getSelect(d.popup.element,"event-type").val()},getSelectedSubCalendarId:function(){return this.getSelect(d.popup.element,"calendar").val()},getTextSelectedEventType:function(){return this.getTextSelect(d.popup.element,"event-type")},getTextSelectedSubCalendar:function(){return this.getTextSelect(d.popup.element,"calendar")}});return a});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:event-edit', location = 'com/atlassian/confluence/extra/calendar3/lib/rrule.js' */
/*!
 * rrule.js - Library for working with recurrence rules for calendar dates.
 * https://github.com/jakubroztocil/rrule
 *
 * Copyright 2010, Jakub Roztocil and Lars Schoning
 * Licenced under the BSD licence.
 * https://github.com/jakubroztocil/rrule/blob/master/LICENCE
 *
 * Based on:
 * python-dateutil - Extensions to the standard Python datetime module.
 * Copyright (c) 2003-2011 - Gustavo Niemeyer <gustavo@niemeyer.net>
 * Copyright (c) 2012 - Tomi Pieviläinen <tomi.pievilainen@iki.fi>
 * https://github.com/jakubroztocil/rrule/blob/master/LICENCE
 *
 */
(function(a,b){if(typeof module==="object"&&module.exports){module.exports=b()}else{if(typeof define==="function"&&define.amd){define([],b)}else{a.RRule=b(a);a.RRuleSet=a.RRule.RRuleSet;a.rrulestr=a.RRule.rrulestr}}}(typeof window==="object"?window:this,function(z){var B={MONTH_DAYS:[31,28,31,30,31,30,31,31,30,31,30,31],ONE_DAY:1000*60*60*24,MAXYEAR:9999,ORDINAL_BASE:new Date(1970,0,1),PY_WEEKDAYS:[6,0,1,2,3,4,5],getYearDay:function(H){var I=new Date(H.getFullYear(),H.getMonth(),H.getDate());return Math.ceil((I-new Date(H.getFullYear(),0,1))/B.ONE_DAY)+1},isLeapYear:function(H){if(H instanceof Date){H=H.getFullYear()}return((H%4===0)&&(H%100!==0))||(H%400===0)},tzOffset:function(H){return H.getTimezoneOffset()*60*1000},daysBetween:function(L,K){var J=L.getTime()-B.tzOffset(L);var I=K.getTime()-B.tzOffset(K);var H=Math.abs(J-I);return Math.round(H/B.ONE_DAY)},toOrdinal:function(H){return B.daysBetween(H,B.ORDINAL_BASE)},fromOrdinal:function(H){var I=H*B.ONE_DAY;return new Date(B.ORDINAL_BASE.getTime()-B.tzOffset(B.ORDINAL_BASE)+I+B.tzOffset(new Date(I)))},monthRange:function(I,J){var H=new Date(I,J,1);return[B.getWeekday(H),B.getMonthDays(H)]},getMonthDays:function(H){var I=H.getMonth();return I===1&&B.isLeapYear(H)?29:B.MONTH_DAYS[I]},getWeekday:function(H){return B.PY_WEEKDAYS[H.getDay()]},combine:function(H,I){I=I||H;return new Date(H.getFullYear(),H.getMonth(),H.getDate(),I.getHours(),I.getMinutes(),I.getSeconds(),I.getMilliseconds())},clone:function(H){var I=new Date(H.getTime());return I},cloneDates:function(J){var I=[];for(var H=0;H<J.length;H++){I.push(B.clone(J[H]))}return I},sort:function(H){H.sort(function(J,I){return J.getTime()-I.getTime()})},timeToUntilString:function(K){var H;var I=new Date(K);var L=[I.getUTCFullYear(),I.getUTCMonth()+1,I.getUTCDate(),"T",I.getUTCHours(),I.getUTCMinutes(),I.getUTCSeconds(),"Z"];for(var J=0;J<L.length;J++){H=L[J];if(!/[TZ]/.test(H)&&H<10){L[J]="0"+String(H)}}return L.join("")},untilStringToDate:function(J){var H=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z)?$/;var I=H.exec(J);if(!I){throw new Error("Invalid UNTIL value: "+J)}return new Date(Date.UTC(I[1],I[2]-1,I[3],I[5]||0,I[6]||0,I[7]||0))}};B.Time=function(H,K,I,J){this.hour=H;this.minute=K;this.second=I;this.millisecond=J||0};B.Time.prototype={constructor:B.Time,getHours:function(){return this.hour},getMinutes:function(){return this.minute},getSeconds:function(){return this.second},getMilliseconds:function(){return this.millisecond},getTime:function(){return((this.hour*60*60)+(this.minute*60)+this.second)*1000+this.millisecond}};var t=function(K,H){if(arguments.length===1){H=K;K=0}var I=[];for(var J=K;J<H;J++){I.push(J)}return I};var o=function(I,J){var H=0;var K=[];if(I instanceof Array){for(;H<J;H++){K[H]=[].concat(I)}}else{for(;H<J;H++){K[H]=I}}return K};var y=function(K,I,H){var J=K.split(I);return H?J.slice(0,H).concat([J.slice(H).join(I)]):J};var c=function(I,H){var J=I%H;return(J*H<0)?J+H:J};var s=function(I,H){return{div:Math.floor(I/H),mod:c(I,H)}};var w=function(H){return(H instanceof Array&&H.length===0)?false:Boolean(H)};var j=function(H,I){return H.indexOf(I)!==-1};var h=[].concat(o(1,31),o(2,28),o(3,31),o(4,30),o(5,31),o(6,30),o(7,31),o(8,31),o(9,30),o(10,31),o(11,30),o(12,31),o(1,7));var E=[].concat(o(1,31),o(2,29),o(3,31),o(4,30),o(5,31),o(6,30),o(7,31),o(8,31),o(9,30),o(10,31),o(11,30),o(12,31),o(1,7));var n=t(1,29);var l=t(1,30);var D=t(1,31);var C=t(1,32);var d=[].concat(C,l,C,D,C,D,C,C,D,C,D,C,C.slice(0,7));var p=[].concat(C,n,C,D,C,D,C,C,D,C,D,C,C.slice(0,7));n=t(-28,0);l=t(-29,0);D=t(-30,0);C=t(-31,0);var v=[].concat(C,l,C,D,C,D,C,C,D,C,D,C,C.slice(0,7));var G=[].concat(C,n,C,D,C,D,C,C,D,C,D,C,C.slice(0,7));var r=[0,31,60,91,121,152,182,213,244,274,305,335,366];var k=[0,31,59,90,120,151,181,212,243,273,304,334,365];var i=(function(){for(var H=[],I=0;I<55;I++){H=H.concat(t(7))}return H}());var A=function(H,I){if(I===0){throw new Error("Can't create weekday with n == 0")}this.weekday=H;this.n=I};A.prototype={constructor:A,nth:function(H){return this.n===H?this:new A(this.weekday,H)},equals:function(H){return this.weekday===H.weekday&&this.n===H.n},toString:function(){var H=["MO","TU","WE","TH","FR","SA","SU"][this.weekday];if(this.n){H=(this.n>0?"+":"")+String(this.n)+H}return H},getJsWeekday:function(){return this.weekday===6?0:this.weekday+1}};var e=function(H,X){H=H||{};this._string=null;this._cache=X?null:{all:false,before:[],after:[],between:[]};this.origOptions={};var V=[];var O=Object.keys(H);var Q=Object.keys(e.DEFAULT_OPTIONS);O.forEach(function(aa){this.origOptions[aa]=H[aa];if(!j(Q,aa)){V.push(aa)}},this);if(V.length){throw new Error("Invalid options: "+V.join(", "))}if(!e.FREQUENCIES[H.freq]&&H.byeaster===null){throw new Error("Invalid frequency: "+String(H.freq))}Q.forEach(function(aa){if(!j(O,aa)){H[aa]=e.DEFAULT_OPTIONS[aa]}});var N=this.options=H;if(N.byeaster!==null){N.freq=e.YEARLY}if(!N.dtstart){N.dtstart=new Date()}var U=N.dtstart.getTime()%1000;if(N.wkst===null){N.wkst=e.MO.weekday}else{if(typeof N.wkst==="number"){}else{N.wkst=N.wkst.weekday}}if(N.bysetpos!==null){if(typeof N.bysetpos==="number"){N.bysetpos=[N.bysetpos]}for(var T=0;T<N.bysetpos.length;T++){var L=N.bysetpos[T];if(L===0||!(L>=-366&&L<=366)){throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}}}if(!(w(N.byweekno)||w(N.byyearday)||w(N.bymonthday)||N.byweekday!==null||N.byeaster!==null)){switch(N.freq){case e.YEARLY:if(!N.bymonth){N.bymonth=N.dtstart.getMonth()+1}N.bymonthday=N.dtstart.getDate();break;case e.MONTHLY:N.bymonthday=N.dtstart.getDate();break;case e.WEEKLY:N.byweekday=B.getWeekday(N.dtstart);break}}if(N.bymonth!==null&&!(N.bymonth instanceof Array)){N.bymonth=[N.bymonth]}if(N.byyearday!==null&&!(N.byyearday instanceof Array)){N.byyearday=[N.byyearday]}if(N.bymonthday===null){N.bymonthday=[];N.bynmonthday=[]}else{if(N.bymonthday instanceof Array){var W=[];var Y=[];for(T=0;T<N.bymonthday.length;T++){L=N.bymonthday[T];if(L>0){W.push(L)}else{if(L<0){Y.push(L)}}}N.bymonthday=W;N.bynmonthday=Y}else{if(N.bymonthday<0){N.bynmonthday=[N.bymonthday];N.bymonthday=[]}else{N.bynmonthday=[];N.bymonthday=[N.bymonthday]}}}if(N.byweekno!==null&&!(N.byweekno instanceof Array)){N.byweekno=[N.byweekno]}if(N.byweekday===null){N.bynweekday=null}else{if(typeof N.byweekday==="number"){N.byweekday=[N.byweekday];N.bynweekday=null}else{if(N.byweekday instanceof A){if(!N.byweekday.n||N.freq>e.MONTHLY){N.byweekday=[N.byweekday.weekday];N.bynweekday=null}else{N.bynweekday=[[N.byweekday.weekday,N.byweekday.n]];N.byweekday=null}}else{var I=[];var K=[];for(T=0;T<N.byweekday.length;T++){var M=N.byweekday[T];if(typeof M==="number"){I.push(M)}else{if(!M.n||N.freq>e.MONTHLY){I.push(M.weekday)}else{K.push([M.weekday,M.n])}}}N.byweekday=w(I)?I:null;N.bynweekday=w(K)?K:null}}}if(N.byhour===null){N.byhour=(N.freq<e.HOURLY)?[N.dtstart.getHours()]:null}else{if(typeof N.byhour==="number"){N.byhour=[N.byhour]}}if(N.byminute===null){N.byminute=(N.freq<e.MINUTELY)?[N.dtstart.getMinutes()]:null}else{if(typeof N.byminute==="number"){N.byminute=[N.byminute]}}if(N.bysecond===null){N.bysecond=(N.freq<e.SECONDLY)?[N.dtstart.getSeconds()]:null}else{if(typeof N.bysecond==="number"){N.bysecond=[N.bysecond]}}if(N.freq>=e.HOURLY){this.timeset=null}else{this.timeset=[];for(T=0;T<N.byhour.length;T++){var J=N.byhour[T];for(var S=0;S<N.byminute.length;S++){var P=N.byminute[S];for(var R=0;R<N.bysecond.length;R++){var Z=N.bysecond[R];this.timeset.push(new B.Time(J,P,Z,U))}}}B.sort(this.timeset)}};e.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"];e.YEARLY=0;e.MONTHLY=1;e.WEEKLY=2;e.DAILY=3;e.HOURLY=4;e.MINUTELY=5;e.SECONDLY=6;e.MO=new A(0);e.TU=new A(1);e.WE=new A(2);e.TH=new A(3);e.FR=new A(4);e.SA=new A(5);e.SU=new A(6);e.DEFAULT_OPTIONS={freq:null,dtstart:null,interval:1,wkst:e.MO,count:null,until:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null};e.parseText=function(H,I){return m().parseText(H,I)};e.fromText=function(H,I){return m().fromText(H,I)};e.optionsToString=function(S){var Q,O,M;var H=[];var R=Object.keys(S);var N=Object.keys(e.DEFAULT_OPTIONS);for(var J=0;J<R.length;J++){if(!j(N,R[J])){continue}Q=R[J].toUpperCase();O=S[R[J]];M=[];if(O===null||O instanceof Array&&!O.length){continue}switch(Q){case"FREQ":O=e.FREQUENCIES[S.freq];break;case"WKST":O=O.toString();break;case"BYWEEKDAY":Q="BYDAY";if(!(O instanceof Array)){O=[O]}for(var L,I=0;I<O.length;I++){L=O[I];if(L instanceof A){}else{if(L instanceof Array){L=new A(L[0],L[1])}else{L=new A(L)}}M[I]=L.toString()}O=M;break;case"DTSTART":case"UNTIL":O=B.timeToUntilString(O);break;default:if(O instanceof Array){for(I=0;I<O.length;I++){M[I]=String(O[I])}O=M}else{O=String(O)}}H.push([Q,O])}var P=[];for(J=0;J<H.length;J++){var K=H[J];P.push(K[0]+"="+K[1].toString())}return P.join(";")};e.prototype={constructor:e,all:function(I){if(I){return this._iter(new F("all",{},I))}else{var H=this._cacheGet("all");if(H===false){H=this._iter(new x("all",{}));this._cacheAdd("all",H)}return H}},between:function(M,K,L,J){var I={before:K,after:M,inc:L};if(J){return this._iter(new F("between",I,J))}var H=this._cacheGet("between",I);if(H===false){H=this._iter(new x("between",I));this._cacheAdd("between",H,I)}return H},before:function(J,K){var I={dt:J,inc:K};var H=this._cacheGet("before",I);if(H===false){H=this._iter(new x("before",I));this._cacheAdd("before",H,I)}return H},after:function(J,K){var I={dt:J,inc:K};var H=this._cacheGet("after",I);if(H===false){H=this._iter(new x("after",I));this._cacheAdd("after",H,I)}return H},count:function(){return this.all().length},toString:function(){return e.optionsToString(this.origOptions)},toText:function(H,I){return m().toText(this,H,I)},isFullyConvertibleToText:function(){return m().isFullyConvertible(this)},_cacheAdd:function(J,I,H){if(!this._cache){return}if(I){I=(I instanceof Date)?B.clone(I):B.cloneDates(I)}if(J==="all"){this._cache.all=I}else{H._value=I;this._cache[J].push(H)}},_cacheGet:function(N,I){if(!this._cache){return false}var K=false;var O=I?Object.keys(I):[];var M=function(R){for(var Q,P=0;P<O.length;P++){Q=O[P];if(String(I[Q])!==String(R[Q])){return true}}return false};if(N==="all"){K=this._cache.all}else{for(var L,J=0;J<this._cache[N].length;J++){L=this._cache[N][J];if(O.length&&M(L)){continue}K=L._value;break}}if(!K&&this._cache.all){var H=new x(N,I);for(J=0;J<this._cache.all.length;J++){if(!H.accept(this._cache.all[J])){break}}K=H.getValue();this._cacheAdd(N,K,I)}return K instanceof Array?B.cloneDates(K):(K instanceof Date?B.clone(K):K)},clone:function(){return new e(this.origOptions)},_iter:function(S){var am=this.options.dtstart;var X=this.options.dtstart%1000;var K=am.getFullYear();var H=am.getMonth()+1;var ae=am.getDate();var ab=am.getHours();var P=am.getMinutes();var aj=am.getSeconds();var O=B.getWeekday(am);var ag=this.options.freq;var I=this.options.interval;var at=this.options.wkst;var T=this.options.until;var au=this.options.bymonth;var av=this.options.byweekno;var Y=this.options.byyearday;var Z=this.options.byweekday;var M=this.options.byeaster;var aI=this.options.bymonthday;var ay=this.options.bynmonthday;var aF=this.options.bysetpos;var aG=this.options.byhour;var N=this.options.byminute;var ah=this.options.bysecond;var ap=new q(this);ap.rebuild(K,H);var U={};U[e.YEARLY]=ap.ydayset;U[e.MONTHLY]=ap.mdayset;U[e.WEEKLY]=ap.wdayset;U[e.DAILY]=ap.ddayset;U[e.HOURLY]=ap.ddayset;U[e.MINUTELY]=ap.ddayset;U[e.SECONDLY]=ap.ddayset;U=U[ag];var an;if(ag<e.HOURLY){an=this.timeset}else{var L={};L[e.HOURLY]=ap.htimeset;L[e.MINUTELY]=ap.mtimeset;L[e.SECONDLY]=ap.stimeset;L=L[ag];if((ag>=e.HOURLY&&w(aG)&&!j(aG,ab))||(ag>=e.MINUTELY&&w(N)&&!j(N,P))||(ag>=e.SECONDLY&&w(ah)&&!j(ah,P))){an=[]}else{an=L.call(ap,ab,P,aj,X)}}var al=0;var aw=this.options.count;var aC,aB,aA,Q,aE,J,ax,ak,R,ad,W,aq,ac;while(true){ax=U.call(ap,K,H,ae);R=ax[0];ad=ax[1];W=ax[2];ac=false;for(aB=ad;aB<W;aB++){aC=R[aB];ac=(w(au)&&!j(au,ap.mmask[aC]))||(w(av)&&!ap.wnomask[aC])||(w(Z)&&!j(Z,ap.wdaymask[aC]))||(w(ap.nwdaymask)&&!ap.nwdaymask[aC])||(M!==null&&!j(ap.eastermask,aC))||((w(aI)||w(ay))&&!j(aI,ap.mdaymask[aC])&&!j(ay,ap.nmdaymask[aC]))||(w(Y)&&((aC<ap.yearlen&&!j(Y,aC+1)&&!j(Y,-ap.yearlen+aC))||(aC>=ap.yearlen&&!j(Y,aC+1-ap.yearlen)&&!j(Y,-ap.nextyearlen+aC-ap.yearlen))));if(ac){R[aC]=null}}if(w(aF)&&w(an)){var V,ar;var af=[];for(aC,aB=0;aB<aF.length;aB++){ak=aF[aB];if(ak<0){V=Math.floor(ak/an.length);ar=c(ak,an.length)}else{V=Math.floor((ak-1)/an.length);ar=c((ak-1),an.length)}try{ax=[];for(aA=ad;aA<W;aA++){var ai=R[aA];if(ai===null){continue}ax.push(ai)}if(V<0){aC=ax.slice(V)[0]}else{aC=ax[V]}var az=an[ar];var aD=B.fromOrdinal(ap.yearordinal+aC);var ao=B.combine(aD,az);if(!j(af,ao)){af.push(ao)}}catch(aH){}}B.sort(af);for(aB=0;aB<af.length;aB++){ao=af[aB];if(T&&ao>T){this._len=al;return S.getValue()}else{if(ao>=am){++al;if(!S.accept(ao)){return S.getValue()}if(aw){--aw;if(!aw){this._len=al;return S.getValue()}}}}}}else{for(aB=ad;aB<W;aB++){aC=R[aB];if(aC!==null){aD=B.fromOrdinal(ap.yearordinal+aC);for(aA=0;aA<an.length;aA++){az=an[aA];ao=B.combine(aD,az);if(T&&ao>T){this._len=al;return S.getValue()}else{if(ao>=am){++al;if(!S.accept(ao)){return S.getValue()}if(aw){--aw;if(!aw){this._len=al;return S.getValue()}}}}}}}}aq=false;if(ag===e.YEARLY){K+=I;if(K>B.MAXYEAR){this._len=al;return S.getValue()}ap.rebuild(K,H)}else{if(ag===e.MONTHLY){H+=I;if(H>12){aE=Math.floor(H/12);J=c(H,12);H=J;K+=aE;if(H===0){H=12;--K}if(K>B.MAXYEAR){this._len=al;return S.getValue()}}ap.rebuild(K,H)}else{if(ag===e.WEEKLY){if(at>O){ae+=-(O+1+(6-at))+I*7}else{ae+=-(O-at)+I*7}O=at;aq=true}else{if(ag===e.DAILY){ae+=I;aq=true}else{if(ag===e.HOURLY){if(ac){ab+=Math.floor((23-ab)/I)*I}while(true){ab+=I;Q=s(ab,24);aE=Q.div;J=Q.mod;if(aE){ab=J;ae+=aE;aq=true}if(!w(aG)||j(aG,ab)){break}}an=L.call(ap,ab,P,aj)}else{if(ag===e.MINUTELY){if(ac){P+=Math.floor((1439-(ab*60+P))/I)*I}while(true){P+=I;Q=s(P,60);aE=Q.div;J=Q.mod;if(aE){P=J;ab+=aE;Q=s(ab,24);aE=Q.div;J=Q.mod;if(aE){ab=J;ae+=aE;aq=true;ac=false}}if((!w(aG)||j(aG,ab))&&(!w(N)||j(N,P))){break}}an=L.call(ap,ab,P,aj)}else{if(ag===e.SECONDLY){if(ac){aj+=Math.floor((86399-(ab*3600+P*60+aj))/I)*I}while(true){aj+=I;Q=s(aj,60);aE=Q.div;J=Q.mod;if(aE){aj=J;P+=aE;Q=s(P,60);aE=Q.div;J=Q.mod;if(aE){P=J;ab+=aE;Q=s(ab,24);aE=Q.div;J=Q.mod;if(aE){ab=J;ae+=aE;aq=true}}}if((!w(aG)||j(aG,ab))&&(!w(N)||j(N,P))&&(!w(ah)||j(ah,aj))){break}}an=L.call(ap,ab,P,aj)}}}}}}}if(aq&&ae>28){var aa=B.monthRange(K,H-1)[1];if(ae>aa){while(ae>aa){ae-=aa;++H;if(H===13){H=1;++K;if(K>B.MAXYEAR){this._len=al;return S.getValue()}}aa=B.monthRange(K,H-1)[1]}ap.rebuild(K,H)}}}}};e.parseString=function(I){I=I.replace(/^\s+|\s+$/,"");if(!I.length){return null}var K,J,P,O,L;var Q=I.split(";");var S={};for(K=0;K<Q.length;K++){L=Q[K].split("=");P=L[0];O=L[1];switch(P){case"FREQ":S.freq=e[O];break;case"WKST":S.wkst=e[O];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":if(O.indexOf(",")!==-1){O=O.split(",");for(J=0;J<O.length;J++){if(/^[+-]?\d+$/.test(O[J])){O[J]=Number(O[J])}}}else{if(/^[+-]?\d+$/.test(O)){O=Number(O)}}P=P.toLowerCase();S[P]=O;break;case"BYDAY":var H,M,N;var R=O.split(",");S.byweekday=[];for(J=0;J<R.length;J++){N=R[J];if(N.length===2){M=e[N];S.byweekday.push(M)}else{N=N.match(/^([+-]?\d)([A-Z]{2})$/);H=Number(N[1]);M=N[2];M=e[M].weekday;S.byweekday.push(new A(M,H))}}break;case"DTSTART":S.dtstart=B.untilStringToDate(O);break;case"UNTIL":S.until=B.untilStringToDate(O);break;case"BYEASTER":S.byeaster=Number(O);break;default:throw new Error("Unknown RRULE property '"+P+"'")}}return S};e.fromString=function(H){return new e(e.parseString(H))};var q=function(H){this.rrule=H;this.lastyear=null;this.lastmonth=null;this.yearlen=null;this.nextyearlen=null;this.yearordinal=null;this.yearweekday=null;this.mmask=null;this.mrange=null;this.mdaymask=null;this.nmdaymask=null;this.wdaymask=null;this.wnomask=null;this.nwdaymask=null;this.eastermask=null};q.prototype.easter=function(I,H){H=H||0;var Y=I%19;var W=Math.floor(I/100);var U=I%100;var T=Math.floor(W/4);var R=W%4;var Q=Math.floor((W+8)/25);var P=Math.floor((W-Q+1)/3);var O=Math.floor(19*Y+W-T-P+15)%30;var N=Math.floor(U/4);var L=U%4;var K=Math.floor(32+2*R+2*N-O-L)%7;var J=Math.floor((Y+11*O+22*K)/451);var X=Math.floor((O+K-7*J+114)/31);var M=(O+K-7*J+114)%31+1;var V=Date.UTC(I,X-1,M+H);var S=Date.UTC(I,0,1);return[Math.ceil((V-S)/(1000*60*60*24))]};q.prototype.rebuild=function(Q,ac){var M=this.rrule;if(Q!==this.lastyear){this.yearlen=B.isLeapYear(Q)?366:365;this.nextyearlen=B.isLeapYear(Q+1)?366:365;var T=new Date(Q,0,1);this.yearordinal=B.toOrdinal(T);this.yearweekday=B.getWeekday(T);var R=B.getWeekday(new Date(Q,0,1));if(this.yearlen===365){this.mmask=[].concat(h);this.mdaymask=[].concat(p);this.nmdaymask=[].concat(G);this.wdaymask=i.slice(R);this.mrange=[].concat(k)}else{this.mmask=[].concat(E);this.mdaymask=[].concat(d);this.nmdaymask=[].concat(v);this.wdaymask=i.slice(R);this.mrange=[].concat(r)}if(!w(M.options.byweekno)){this.wnomask=null}else{this.wnomask=o(0,this.yearlen+7);var aa,N,J;aa=N=c(7-this.yearweekday+M.options.wkst,7);if(aa>=4){aa=0;J=this.yearlen+c(this.yearweekday-M.options.wkst,7)}else{J=this.yearlen-aa}var S=Math.floor(J/7);var ad=c(J,7);var H=Math.floor(S+(ad/4));for(var U,Y,X=0;X<M.options.byweekno.length;X++){U=M.options.byweekno[X];if(U<0){U+=H+1}if(!(U>0&&U<=H)){continue}if(U>1){Y=aa+(U-1)*7;if(aa!==N){Y-=7-N}}else{Y=aa}for(var V=0;V<7;V++){this.wnomask[Y]=1;Y++;if(this.wdaymask[Y]===M.options.wkst){break}}}if(j(M.options.byweekno,1)){Y=aa+H*7;if(aa!==N){Y-=7-N}if(Y<this.yearlen){for(X=0;X<7;X++){this.wnomask[Y]=1;Y+=1;if(this.wdaymask[Y]===M.options.wkst){break}}}}if(aa){var P;if(!j(M.options.byweekno,-1)){var W=B.getWeekday(new Date(Q-1,0,1));var Z=c(7-W+M.options.wkst,7);var I=B.isLeapYear(Q-1)?366:365;if(Z>=4){Z=0;P=Math.floor(52+c(I+c(W-M.options.wkst,7),7)/4)}else{P=Math.floor(52+c(this.yearlen-aa,7)/4)}}else{P=-1}if(j(M.options.byweekno,P)){for(Y=0;Y<aa;Y++){this.wnomask[Y]=1}}}}}if(w(M.options.bynweekday)&&(ac!==this.lastmonth||Q!==this.lastyear)){var K=[];if(M.options.freq===e.YEARLY){if(w(M.options.bymonth)){for(X=0;X<M.options.bymonth.length;X++){ac=M.options.bymonth[X];K.push(this.mrange.slice(ac-1,ac+1))}}else{K=[[0,this.yearlen]]}}else{if(M.options.freq===e.MONTHLY){K=[this.mrange.slice(ac-1,ac+1)]}}if(w(K)){this.nwdaymask=o(0,this.yearlen);for(X=0;X<K.length;X++){var ab=K[X];var L=ab[0];var O=ab[1];O-=1;for(V=0;V<M.options.bynweekday.length;V++){R=M.options.bynweekday[V][0];U=M.options.bynweekday[V][1];if(U<0){Y=O+(U+1)*7;Y-=c(this.wdaymask[Y]-R,7)}else{Y=L+(U-1)*7;Y+=c(7-this.wdaymask[Y]+R,7)}if(L<=Y&&Y<=O){this.nwdaymask[Y]=1}}}}this.lastyear=Q;this.lastmonth=ac}if(M.options.byeaster!==null){this.eastermask=this.easter(Q,M.options.byeaster)}};q.prototype.ydayset=function(I,J,H){return[t(this.yearlen),0,this.yearlen]};q.prototype.mdayset=function(K,L,I){var N=o(null,this.yearlen);var M=this.mrange[L-1];var H=this.mrange[L];for(var J=M;J<H;J++){N[J]=J}return[N,M,H]};q.prototype.wdayset=function(K,L,H){var N=o(null,this.yearlen+7);var J=B.toOrdinal(new Date(K,L-1,H))-this.yearordinal;var M=J;for(var I=0;I<7;I++){N[J]=J;++J;if(this.wdaymask[J]===this.rrule.options.wkst){break}}return[N,M,J]};q.prototype.ddayset=function(J,K,H){var L=o(null,this.yearlen);var I=B.toOrdinal(new Date(J,K-1,H))-this.yearordinal;L[I]=I;return[L,I,I+1]};q.prototype.htimeset=function(H,N,K,M){var O=[];var J=this.rrule;for(var L=0;L<J.options.byminute.length;L++){N=J.options.byminute[L];for(var I=0;I<J.options.bysecond.length;I++){K=J.options.bysecond[I];O.push(new B.Time(H,N,K,M))}}B.sort(O);return O};q.prototype.mtimeset=function(H,M,K,L){var N=[];var J=this.rrule;for(var I=0;I<J.options.bysecond.length;I++){K=J.options.bysecond[I];N.push(new B.Time(H,M,K,L))}B.sort(N);return N};q.prototype.stimeset=function(H,K,I,J){return[new B.Time(H,K,I,J)]};var x=function(I,H){this.init(I,H)};x.prototype={constructor:x,init:function(I,H){this.method=I;this.args=H;this.minDate=null;this.maxDate=null;this._result=[];if(I==="between"){this.maxDate=H.inc?H.before:new Date(H.before.getTime()-1);this.minDate=H.inc?H.after:new Date(H.after.getTime()+1)}else{if(I==="before"){this.maxDate=H.inc?H.dt:new Date(H.dt.getTime()-1)}else{if(I==="after"){this.minDate=H.inc?H.dt:new Date(H.dt.getTime()+1)}}}},accept:function(I){var J=this.minDate&&I<this.minDate;var H=this.maxDate&&I>this.maxDate;if(this.method==="between"){if(J){return true}if(H){return false}}else{if(this.method==="before"){if(H){return false}}else{if(this.method==="after"){if(J){return true}this.add(I);return false}}}return this.add(I)},add:function(H){this._result.push(H);return true},getValue:function(){var H=this._result;switch(this.method){case"all":case"between":return H;case"before":case"after":return H.length?H[H.length-1]:null}},clone:function(){return new x(this.method,this.args)}};var F=function(K,I,J){var H=["all","between"];if(!j(H,K)){throw new Error('Invalid method "'+K+'". Only all and between works with iterator.')}this.add=function(L){if(J(L,this._result.length)){this._result.push(L);return true}return false};this.init(K,I)};F.prototype=x.prototype;var a=function(H){this._cache=H?null:{all:false,before:[],after:[],between:[]};this._rrule=[];this._rdate=[];this._exrule=[];this._exdate=[]};a.prototype={constructor:a,rrule:function(H){if(!(H instanceof e)){throw new TypeError(String(H)+" is not RRule instance")}if(!j(this._rrule.map(String),String(H))){this._rrule.push(H)}},rdate:function(H){if(!(H instanceof Date)){throw new TypeError(String(H)+" is not Date instance")}if(!j(this._rdate.map(Number),Number(H))){this._rdate.push(H);B.sort(this._rdate)}},exrule:function(H){if(!(H instanceof e)){throw new TypeError(String(H)+" is not RRule instance")}if(!j(this._exrule.map(String),String(H))){this._exrule.push(H)}},exdate:function(H){if(!(H instanceof Date)){throw new TypeError(String(H)+" is not Date instance")}if(!j(this._exdate.map(Number),Number(H))){this._exdate.push(H);B.sort(this._exdate)}},valueOf:function(){var H=[];if(this._rrule.length){this._rrule.forEach(function(I){H.push("RRULE:"+I)})}if(this._rdate.length){H.push("RDATE:"+this._rdate.map(function(I){return B.timeToUntilString(I)}).join(","))}if(this._exrule.length){this._exrule.forEach(function(I){H.push("EXRULE:"+I)})}if(this._exdate.length){H.push("EXDATE:"+this._exdate.map(function(I){return B.timeToUntilString(I)}).join(","))}return H},toString:function(){return JSON.stringify(this.valueOf())},_iter:function(I){var M={};var L=this._exrule;var N=I.accept;function H(P,O){L.forEach(function(Q){Q.between(P,O,true).forEach(function(R){M[Number(R)]=true})})}this._exdate.forEach(function(O){M[Number(O)]=true});I.accept=function(O){var P=Number(O);if(!M[P]){H(new Date(P-1),new Date(P+1));if(!M[P]){M[P]=true;return N.call(this,O)}}return true};if(I.method==="between"){H(I.args.after,I.args.before);I.accept=function(O){var P=Number(O);if(!M[P]){M[P]=true;return N.call(this,O)}return true}}for(var K=0;K<this._rdate.length;K++){if(!I.accept(new Date(this._rdate[K]))){break}}this._rrule.forEach(function(O){O._iter(I)});var J=I._result;B.sort(J);switch(I.method){case"all":case"between":return J;case"before":return(J.length&&J[J.length-1])||null;case"after":return(J.length&&J[0])||null;default:return null}},clone:function(){var I=new a(!!this._cache);var H;for(H=0;H<this._rrule.length;H++){I.rrule(this._rrule[H].clone())}for(H=0;H<this._rdate.length;H++){I.rdate(new Date(this._rdate[H]))}for(H=0;H<this._exrule.length;H++){I.exrule(this._exrule[H].clone())}for(H=0;H<this._exdate.length;H++){I.exdate(new Date(this._exdate[H]))}return I}};var b=["all","between","before","after","count","_cacheAdd","_cacheGet"];b.forEach(function(H){a.prototype[H]=e.prototype[H]});var f=function(){};f.DEFAULT_OPTIONS={dtstart:null,cache:false,unfold:false,forceset:false,compatible:false,ignoretz:false,tzinfos:null};f._freq_map={YEARLY:e.YEARLY,MONTHLY:e.MONTHLY,WEEKLY:e.WEEKLY,DAILY:e.DAILY,HOURLY:e.HOURLY,MINUTELY:e.MINUTELY,SECONDLY:e.SECONDLY};f._weekday_map={MO:0,TU:1,WE:2,TH:3,FR:4,SA:5,SU:6};f.prototype={constructor:f,_handle_int:function(H,J,K,I){H[J.toLowerCase()]=parseInt(K,10)},_handle_int_list:function(H,J,K,I){H[J.toLowerCase()]=K.split(",").map(function(L){return parseInt(L,10)})},_handle_FREQ:function(H,J,K,I){H.freq=f._freq_map[K]},_handle_UNTIL:function(H,K,L,J){try{H.until=B.untilStringToDate(L)}catch(I){throw new Error("invalid until date")}},_handle_WKST:function(H,J,K,I){H.wkst=f._weekday_map[K]},_handle_BYWEEKDAY:function(O,H,S,T){var Q,L,K,I,R,P;var J=[];var N=S.split(",");for(L=0;L<N.length;L++){P=N[L];if(P.indexOf("(")>-1){Q=P.split("(");R=Q[0];I=parseInt(Q.slice(1,-1),10)}else{for(K=0;K<P.length;K++){if("+-0123456789".indexOf(P[K])===-1){break}}I=P.slice(0,K)||null;R=P.slice(K);if(I){I=parseInt(I,10)}}var M=new A(f._weekday_map[R],I);J.push(M)}O.byweekday=J},_parseRfcRRule:function(P,O){O=O||{};O.dtstart=O.dtstart||null;O.cache=O.cache||false;O.ignoretz=O.ignoretz||false;O.tzinfos=O.tzinfos||null;var H,N,J;if(P.indexOf(":")!==-1){J=P.split(":");H=J[0];N=J[1];if(H!=="RRULE"){throw new Error("unknown parameter name")}}else{N=P}var K;var L={};var I=N.split(";");for(K=0;K<I.length;K++){J=I[K].split("=");H=J[0].toUpperCase();N=J[1].toUpperCase();try{this["_handle_"+H](L,H,N,{ignoretz:O.ignoretz,tzinfos:O.tzinfos})}catch(M){throw new Error("unknown parameter '"+H+"':"+N)}}L.dtstart=L.dtstart||O.dtstart;return new e(L,!O.cache)},_parseRfc:function(Q,K){if(K.compatible){K.forceset=true;K.unfold=true}Q=Q&&Q.toUpperCase().trim();if(!Q){throw new Error("Invalid empty string")}var W=0;var O,H;if(K.unfold){H=Q.split("\n");while(W<H.length){O=H[W]=H[W].replace(/\s+$/g,"");if(!O){H.splice(W,1)}else{if(W>0&&O[0]===" "){H[W-1]+=O.slice(1);H.splice(W,1)}else{W+=1}}}}else{H=Q.split(/\s/)}var X=[];var I=[];var Z=[];var M=[];var aa,T,S,L,Y,R,P,V,U,N,J;if(!K.forceset&&H.length===1&&(Q.indexOf(":")===-1||Q.indexOf("RRULE:")===0)){return this._parseRfcRRule(H[0],{cache:K.cache,dtstart:K.dtstart,ignoretz:K.ignoretz,tzinfos:K.tzinfos})}else{for(W=0;W<H.length;W++){O=H[W];if(!O){continue}if(O.indexOf(":")===-1){aa="RRULE";T=O}else{S=y(O,":",1);aa=S[0];T=S[1]}L=aa.split(";");if(!L){throw new Error("empty property name")}aa=L[0];L=L.slice(1);if(aa==="RRULE"){for(V=0;V<L.length;V++){Y=L[V];throw new Error("unsupported RRULE parm: "+Y)}X.push(T)}else{if(aa==="RDATE"){for(V=0;V<L.length;V++){Y=L[V];if(Y!=="VALUE=DATE-TIME"){throw new Error("unsupported RDATE parm: "+Y)}}I.push(T)}else{if(aa==="EXRULE"){for(V=0;V<L.length;V++){Y=L[V];throw new Error("unsupported EXRULE parm: "+Y)}Z.push(T)}else{if(aa==="EXDATE"){for(V=0;V<L.length;V++){Y=L[V];if(Y!=="VALUE=DATE-TIME"){throw new Error("unsupported RDATE parm: "+Y)}}M.push(T)}else{if(aa==="DTSTART"){R=B.untilStringToDate(T)}else{throw new Error("unsupported property: "+aa)}}}}}}if(K.forceset||X.length>1||I.length||Z.length||M.length){P=new a(!K.cache);for(V=0;V<X.length;V++){P.rrule(this._parseRfcRRule(X[V],{dtstart:K.dtstart||R,ignoretz:K.ignoretz,tzinfos:K.tzinfos}))}for(V=0;V<I.length;V++){N=I[V].split(",");for(U=0;U<N.length;U++){J=N[U];P.rdate(B.untilStringToDate(J))}}for(V=0;V<Z.length;V++){P.exrule(this._parseRfcRRule(Z[V],{dtstart:K.dtstart||R,ignoretz:K.ignoretz,tzinfos:K.tzinfos}))}for(V=0;V<M.length;V++){N=M[V].split(",");for(U=0;U<N.length;U++){J=N[U];P.exdate(B.untilStringToDate(J))}}if(K.campatiable&&K.dtstart){P.rdate(R)}return P}else{return this._parseRfcRRule(X[0],{dtstart:K.dtstart||R,cache:K.cache,ignoretz:K.ignoretz,tzinfos:K.tzinfos})}}},parse:function(J,I){I=I||{};var L=[];var K=Object.keys(I);var H=Object.keys(f.DEFAULT_OPTIONS);K.forEach(function(M){if(!j(H,M)){L.push(M)}},this);if(L.length){throw new Error("Invalid options: "+L.join(", "))}H.forEach(function(M){if(!j(K,M)){I[M]=f.DEFAULT_OPTIONS[M]}});return this._parseRfc(J,I)}};f.prototype._handle_DTSTART=function(H,J,K,I){H[J.toLowerCase()]=B.untilStringToDate(K)};f.prototype._handle_BYDAY=f.prototype._handle_BYWEEKDAY;f.prototype._handle_INTERVAL=f.prototype._handle_int;f.prototype._handle_COUNT=f.prototype._handle_int;["_handle_BYSETPOS","_handle_BYMONTH","_handle_BYMONTHDAY","_handle_BYYEARDAY","_handle_BYEASTER","_handle_BYWEEKNO","_handle_BYHOUR","_handle_BYMINUTE","_handle_BYSECOND"].forEach(function(H){f.prototype[H]=f.prototype._handle_int_list});var u=new f();var g=function(){return u.parse.apply(u,arguments)};e.RRule=e;e.RRuleSet=a;e.rrulestr=g;return e;function m(){if(!m._nlp){if(z&&z._getRRuleNLP){m._nlp=z._getRRuleNLP(e)}else{if(typeof require==="function"){m._nlp=require("./nlp")(e)}else{throw new Error("You need to include rrule/nlp.js for fromText/toText to work.")}}}return m._nlp}}));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:event-edit', location = 'com/atlassian/confluence/extra/calendar3/lib/nlp.js' */
/*!
 * rrule.js - Library for working with recurrence rules for calendar dates.
 * https://github.com/jakubroztocil/rrule
 *
 * Copyright 2010, Jakub Roztocil and Lars Schoning
 * Licenced under the BSD licence.
 * https://github.com/jakubroztocil/rrule/blob/master/LICENCE
 *
 */
(function(a,b){if(typeof module==="object"&&module.exports){module.exports=b()}else{if(typeof define==="function"&&define.amd){define([],b)}else{a._getRRuleNLP=b()}}}(typeof window==="object"?window:this,function(){var a=function(b,c){return b.indexOf(c)!==-1};return function(b){var f=function(p,j,o){this.text="";this.language=o||e;this.gettext=j||function(q){return q};this.rrule=p;this.freq=p.options.freq;this.options=p.options;this.origOptions=p.origOptions;if(this.origOptions.bymonthday){var n=[].concat(this.options.bymonthday);var m=[].concat(this.options.bynmonthday);n.sort();m.sort();m.reverse();this.bymonthday=n.concat(m);if(!this.bymonthday.length){this.bymonthday=null}}if(this.origOptions.byweekday){var i=!(this.origOptions.byweekday instanceof Array)?[this.origOptions.byweekday]:this.origOptions.byweekday;var l=String(i);this.byweekday={allWeeks:i.filter(function(q){return !Boolean(q.n)}),someWeeks:i.filter(function(q){return Boolean(q.n)}),isWeekdays:(l.indexOf("MO")!==-1&&l.indexOf("TU")!==-1&&l.indexOf("WE")!==-1&&l.indexOf("TH")!==-1&&l.indexOf("FR")!==-1&&l.indexOf("SA")===-1&&l.indexOf("SU")===-1)};var k=function(r,q){return r.weekday-q.weekday};this.byweekday.allWeeks.sort(k);this.byweekday.someWeeks.sort(k);if(!this.byweekday.allWeeks.length){this.byweekday.allWeeks=null}if(!this.byweekday.someWeeks.length){this.byweekday.someWeeks=null}}else{this.byweekday=null}};var d=["count","until","interval","byweekday","bymonthday","bymonth"];f.IMPLEMENTED=[];f.IMPLEMENTED[b.HOURLY]=d;f.IMPLEMENTED[b.DAILY]=["byhour"].concat(d);f.IMPLEMENTED[b.WEEKLY]=d;f.IMPLEMENTED[b.MONTHLY]=d;f.IMPLEMENTED[b.YEARLY]=["byweekno","byyearday"].concat(d);f.isFullyConvertible=function(k){var i=true;if(!(k.options.freq in f.IMPLEMENTED)){return false}if(k.origOptions.until&&k.origOptions.count){return false}for(var j in k.origOptions){if(a(["dtstart","wkst","freq"],j)){return true}if(!a(f.IMPLEMENTED[k.options.freq],j)){return false}}return i};f.prototype={constructor:f,isFullyConvertible:function(){return f.isFullyConvertible(this.rrule)},toString:function(){var i=this.gettext;if(!(this.options.freq in f.IMPLEMENTED)){return i("RRule error: Unable to fully convert this rrule to text")}this.text=[i("every")];this[b.FREQUENCIES[this.options.freq]]();if(this.options.until){this.add(i("until"));var j=this.options.until;this.add(this.language.monthNames[j.getMonth()]).add(j.getDate()+",").add(j.getFullYear())}else{if(this.options.count){this.add(i("for")).add(this.options.count).add(this.plural(this.options.count)?i("times"):i("time"))}}if(!this.isFullyConvertible()){this.add(i("(~ approximate)"))}return this.text.join("")},HOURLY:function(){var i=this.gettext;if(this.options.interval!==1){this.add(this.options.interval)}this.add(this.plural(this.options.interval)?i("hours"):i("hour"))},DAILY:function(){var i=this.gettext;if(this.options.interval!==1){this.add(this.options.interval)}if(this.byweekday&&this.byweekday.isWeekdays){this.add(this.plural(this.options.interval)?i("weekdays"):i("weekday"))}else{this.add(this.plural(this.options.interval)?i("days"):i("day"))}if(this.origOptions.bymonth){this.add(i("in"));this._bymonth()}if(this.bymonthday){this._bymonthday()}else{if(this.byweekday){this._byweekday()}else{if(this.origOptions.byhour){this._byhour()}}}},WEEKLY:function(){var i=this.gettext;if(this.options.interval!==1){this.add(this.options.interval).add(this.plural(this.options.interval)?i("weeks"):i("week"))}if(this.byweekday&&this.byweekday.isWeekdays){if(this.options.interval===1){this.add(this.plural(this.options.interval)?i("weekdays"):i("weekday"))}else{this.add(i("on")).add(i("weekdays"))}}else{if(this.options.interval===1){this.add(i("week"))}if(this.origOptions.bymonth){this.add(i("in"));this._bymonth()}if(this.bymonthday){this._bymonthday()}else{if(this.byweekday){this._byweekday()}}}},MONTHLY:function(){var i=this.gettext;if(this.origOptions.bymonth){if(this.options.interval!==1){this.add(this.options.interval).add(i("months"));if(this.plural(this.options.interval)){this.add(i("in"))}}else{}this._bymonth()}else{if(this.options.interval!==1){this.add(this.options.interval)}this.add(this.plural(this.options.interval)?i("months"):i("month"))}if(this.bymonthday){this._bymonthday()}else{if(this.byweekday&&this.byweekday.isWeekdays){this.add(i("on")).add(i("weekdays"))}else{if(this.byweekday){this._byweekday()}}}},YEARLY:function(){var i=this.gettext;if(this.origOptions.bymonth){if(this.options.interval!==1){this.add(this.options.interval);this.add(i("years"))}else{}this._bymonth()}else{if(this.options.interval!==1){this.add(this.options.interval)}this.add(this.plural(this.options.interval)?i("years"):i("year"))}if(this.bymonthday){this._bymonthday()}else{if(this.byweekday){this._byweekday()}}if(this.options.byyearday){this.add(i("on the")).add(this.list(this.options.byyearday,this.nth,i("and"))).add(i("day"))}if(this.options.byweekno){this.add(i("in")).add(this.plural(this.options.byweekno.length)?i("weeks"):i("week")).add(this.list(this.options.byweekno,null,i("and")))}},_bymonthday:function(){var i=this.gettext;if(this.byweekday&&this.byweekday.allWeeks){this.add(i("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,i("or"))).add(i("the")).add(this.list(this.bymonthday,this.nth,i("or")))}else{this.add(i("on the")).add(this.list(this.bymonthday,this.nth,i("and")))}},_byweekday:function(){var i=this.gettext;if(this.byweekday.allWeeks&&!this.byweekday.isWeekdays){this.add(i("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext))}if(this.byweekday.someWeeks){if(this.byweekday.allWeeks){this.add(i("and"))}this.add(i("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,i("and")))}},_byhour:function(){var i=this.gettext;this.add(i("at")).add(this.list(this.origOptions.byhour,null,i("and")))},_bymonth:function(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))},nth:function(l){var j,k;var i=this.gettext;if(l===-1){return i("last")}k=Math.abs(l);switch(k){case 1:case 21:case 31:j=k+i("st");break;case 2:case 22:j=k+i("nd");break;case 3:case 23:j=k+i("rd");break;default:j=k+i("th")}return l<0?j+" "+i("last"):j},monthtext:function(i){return this.language.monthNames[i-1]},weekdaytext:function(j){var i=typeof j==="number"?j:j.getJsWeekday();return(j.n?this.nth(j.n)+" ":"")+this.language.dayNames[i]},plural:function(i){return i%100!==1},add:function(i){this.text.push(" ");this.text.push(i);return this},list:function(j,o,i,n){var l=function(t,p,s){var r="";for(var q=0;q<t.length;q++){if(q!==0){if(q===t.length-1){r+=" "+s+" "}else{r+=p+" "}}r+=t[q]}return r};n=n||",";o=o||function(p){return p};var k=this;var m=function(p){return o.call(k,p)};if(i){return l(j.map(m),n,i)}else{return j.map(m).join(n+" ")}}};var h=function(i,j){return new b(c(i,j))};var c=function(q,k){var t={};var r=new g((k||e).tokens);if(!r.start(q)){return null}j();return t;function j(){var w;r.expect("every");if((w=r.accept("number"))){t.interval=parseInt(w[0],10)}if(r.isDone()){throw new Error("Unexpected end")}switch(r.symbol){case"day(s)":t.freq=b.DAILY;if(r.nextSymbol()){n();s()}break;case"weekday(s)":t.freq=b.WEEKLY;t.byweekday=[b.MO,b.TU,b.WE,b.TH,b.FR];r.nextSymbol();s();break;case"week(s)":t.freq=b.WEEKLY;if(r.nextSymbol()){i();s()}break;case"hour(s)":t.freq=b.HOURLY;if(r.nextSymbol()){i();s()}break;case"month(s)":t.freq=b.MONTHLY;if(r.nextSymbol()){i();s()}break;case"year(s)":t.freq=b.YEARLY;if(r.nextSymbol()){i();s()}break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":t.freq=b.WEEKLY;t.byweekday=[b[r.symbol.substr(0,2).toUpperCase()]];if(!r.nextSymbol()){return}while(r.accept("comma")){if(r.isDone()){throw new Error("Unexpected end")}var v;if(!(v=o())){throw new Error("Unexpected symbol "+r.symbol+", expected weekday")}t.byweekday.push(b[v]);r.nextSymbol()}m();s();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":t.freq=b.YEARLY;t.bymonth=[p()];if(!r.nextSymbol()){return}while(r.accept("comma")){if(r.isDone()){throw new Error("Unexpected end")}var u;if(!(u=p())){throw new Error("Unexpected symbol "+r.symbol+", expected month")}t.bymonth.push(u);r.nextSymbol()}i();s();break;default:throw new Error("Unknown symbol")}}function i(){var w=r.accept("on");var x=r.accept("the");if(!(w||x)){return}do{var y,v,u;if((y=l())){if((v=o())){r.nextSymbol();if(!t.byweekday){t.byweekday=[]}t.byweekday.push(b[v].nth(y))}else{if(!t.bymonthday){t.bymonthday=[]}t.bymonthday.push(y);r.accept("day(s)")}}else{if((v=o())){r.nextSymbol();if(!t.byweekday){t.byweekday=[]}t.byweekday.push(b[v])}else{if(r.symbol==="weekday(s)"){r.nextSymbol();if(!t.byweekday){t.byweekday=[]}t.byweekday.push(b.MO);t.byweekday.push(b.TU);t.byweekday.push(b.WE);t.byweekday.push(b.TH);t.byweekday.push(b.FR)}else{if(r.symbol==="week(s)"){r.nextSymbol();var z;if(!(z=r.accept("number"))){throw new Error("Unexpected symbol "+r.symbol+", expected week number")}t.byweekno=[z[0]];while(r.accept("comma")){if(!(z=r.accept("number"))){throw new Error("Unexpected symbol "+r.symbol+"; expected monthday")}t.byweekno.push(z[0])}}else{if((u=p())){r.nextSymbol();if(!t.bymonth){t.bymonth=[]}t.bymonth.push(u)}else{return}}}}}}while(r.accept("comma")||r.accept("the")||r.accept("on"))}function n(){var u=r.accept("at");if(!u){return}do{var v;if(!(v=r.accept("number"))){throw new Error("Unexpected symbol "+r.symbol+", expected hour")}t.byhour=[v[0]];while(r.accept("comma")){if(!(v=r.accept("number"))){throw new Error("Unexpected symbol "+r.symbol+"; expected hour")}t.byhour.push(v[0])}}while(r.accept("comma")||r.accept("at"))}function p(){switch(r.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return false}}function o(){switch(r.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return r.symbol.substr(0,2).toUpperCase();default:return false}}function l(){switch(r.symbol){case"last":r.nextSymbol();return -1;case"first":r.nextSymbol();return 1;case"second":r.nextSymbol();return r.accept("last")?-2:2;case"third":r.nextSymbol();return r.accept("last")?-3:3;case"nth":var u=parseInt(r.value[1],10);if(u<-366||u>366){throw new Error("Nth out of range: "+u)}r.nextSymbol();return r.accept("last")?-u:u;default:return false}}function m(){r.accept("on");r.accept("the");var u;if(!(u=l())){return}t.bymonthday=[u];r.nextSymbol();while(r.accept("comma")){if(!(u=l())){throw new Error("Unexpected symbol "+r.symbol+"; expected monthday")}t.bymonthday.push(u);r.nextSymbol()}}function s(){if(r.symbol==="until"){var u=Date.parse(r.text);if(!u){throw new Error("Cannot parse until date:"+r.text)}t.until=new Date(u)}else{if(r.accept("for")){t.count=r.value[0];r.expect("number")}}}};var g=function(i){this.rules=i};g.prototype.start=function(i){this.text=i;this.done=false;return this.nextSymbol()};g.prototype.isDone=function(){return this.done&&this.symbol==null};g.prototype.nextSymbol=function(){var n,k;var m=this;this.symbol=null;this.value=null;do{if(this.done){return false}var j,l;n=null;for(var i in this.rules){l=this.rules[i];if((j=l.exec(m.text))){if(n==null||j[0].length>n[0].length){n=j;k=i}}}if(n!=null){this.text=this.text.substr(n[0].length);if(this.text===""){this.done=true}}if(n==null){this.done=true;this.symbol=null;this.value=null;return}}while(k==="SKIP");this.symbol=k;this.value=n;return true};g.prototype.accept=function(j){if(this.symbol===j){if(this.value){var i=this.value;this.nextSymbol();return i}this.nextSymbol();return true}return false};g.prototype.expect=function(i){if(this.accept(i)){return true}throw new Error("expected "+i+" but found "+this.symbol)};var e={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"hour(s)":/^hours?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,at:/^(at)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,"for":/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}};return{fromText:h,parseText:c,isFullyConvertible:f.isFullyConvertible,toText:function(k,i,j){return new f(k,i,j).toString()}}}}));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:event-edit', location = 'com/atlassian/confluence/extra/calendar3/amd/shim/rrule-amd.js' */
define("tc/rrule",function(){var b=null;try{b=require("rrule")}catch(a){}return b||RRule});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:event-edit', location = 'com/atlassian/confluence/extra/calendar3/components/manage-event/event-edit/repeat-field/repeat-model.js' */
define("tc/repeat-model",["jquery","tc/rrule","tc-backbone","tc/calendar-util"],function(b,c,e,a){var d=e.Model.extend({defaults:{isUnsupportedRrule:false,isDisable:false,freq:null,dtstart:null,interval:null,wkst:null,count:null,until:null,bysetpos:null,bymonth:null,bymonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},initialize:function(f){this.rruleStr=f.rruleStr?f.rruleStr:"";this.event=f.event;this._rrule=c.RRule.fromString(this.rruleStr);if(this._rrule.origOptions.until instanceof Date){this._rrule.origOptions.until=new Date(this._rrule.origOptions.until.getUTCFullYear(),this._rrule.origOptions.until.getUTCMonth(),this._rrule.origOptions.until.getUTCDate(),this._rrule.origOptions.until.getUTCHours(),this._rrule.origOptions.until.getUTCMinutes(),this._rrule.origOptions.until.getUTCSeconds())}this.set({isDisable:f.isDisable,isUnsupportedRrule:false});this.set(this._rrule.origOptions)},getRRuleAsString:function(){this.trigger("rrule-string",{model:this});if(this.attributes.freq===null||this.attributes.freq===-1){return""}if(this.attributes.isDisable){return this.rruleStr}function g(i){if(!(i instanceof Date)){return i}return new Date(Date.UTC(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds()))}var f=new c.RRule({freq:this.attributes.freq,dtstart:this.attributes.dtstart,interval:this.attributes.interval,wkst:this.attributes.wkst,count:this.attributes.count,until:g(this.attributes.until),bysetpos:this.attributes.bysetpos,bymonth:this.attributes.bymonth,bymonthday:this.attributes.bymonthday,byyearday:this.attributes.byyearday,byweekno:this.attributes.byweekno,byweekday:this.attributes.byweekday,bynweekday:this.attributes.bynweekday,byhour:this.attributes.byhour,byminute:this.attributes.byminute,bysecond:this.attributes.bysecond,byeaster:this.attributes.byeaster});var h=f.toString();return h},trigger:function(){e.Model.prototype.trigger.apply(this,arguments)}});return d});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:event-edit', location = 'com/atlassian/confluence/extra/calendar3/components/manage-event/event-edit/repeat-field/repeat-base-child-component.js' */
define("tc/repeat-base-child-component",["jquery","tc/rrule","tc-backbone"],function(b,c,d){var a=d.View.extend({setJQueryEl:function(e){this.undelegateEvents();this.$el=e;this.delegateEvents()},hideIfNotMatch:function(g,f,e){if(g&&g.indexOf(f)>=0){if(!e.hasClass("hidden")){e.addClass("hidden")}return true}if(e.hasClass("hidden")){e.removeClass("hidden")}return false}});return a});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:event-edit', location = 'com/atlassian/confluence/extra/calendar3/components/manage-event/event-edit/repeat-field/repeat-frequency.js' */
define("tc/repeat-frequency",["jquery","tc/rrule","tc-backbone","tc/calendar-util","underscore","tc/repeat-base-child-component"],function(e,f,g,d,c,b){var a=b.extend({template:Confluence.TeamCalendars.Templates.Fields.repeatFrequency,_freqSelect:null,events:{"change select#freq-select":"updateModel"},initialize:function(i){var h=this.model.attributes;this.setJQueryEl(i.$el);this.$el.html(e(this.template()).html());this._freqSelect=this.$el.find("select#freq-select");if(e.fn.auiSelect2){this._freqSelect.auiSelect2({minimumResultsForSearch:-1})}var j="";switch(f.FREQUENCIES[h.freq]){case f.FREQUENCIES[f.WEEKLY]:case f.FREQUENCIES[f.DAILY]:case f.FREQUENCIES[f.MONTHLY]:case f.FREQUENCIES[f.YEARLY]:j=f.FREQUENCIES[h.freq];break;case f.FREQUENCIES[f.HOURLY]:case f.FREQUENCIES[f.MINUTELY]:case f.FREQUENCIES[f.SECONDLY]:default:j=""}this.model.set({frequencySelection:j});this.model.on("change:isDisable",this.render,this);this.model.on("change:frequencySelection",this.render,this);this.model.on("rrule-string",this.updateModel,this)},updateModel:function(){var h=this.model.attributes;if(h.isDisable){return}var i=this._freqSelect.val();this.model.set({frequencySelection:i});this.model.set({freq:f.FREQUENCIES.indexOf(i)})},render:function(){var h=this.model.attributes;if(this.hideIfNotMatch&&this.hideIfNotMatch(this._notShowInFrequency,h.frequencySelection,this.$el)){return}if(e.fn.auiSelect2){this._freqSelect.auiSelect2("enable");this._freqSelect.auiSelect2("val",h.frequencySelection)}else{this._freqSelect.removeAttr("disabled");this._freqSelect.val(h.frequencySelection)}if(h.isDisable){if(e.fn.auiSelect2){this._freqSelect.auiSelect2("disable")}else{this._freqSelect.attr("disabled","disabled")}}}});return a});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:event-edit', location = 'com/atlassian/confluence/extra/calendar3/components/manage-event/event-edit/repeat-field/repeat-interval.js' */
define("tc/repeat-interval",["jquery","tc/rrule","tc-backbone","tc/calendar-util","underscore","tc/repeat-base-child-component"],function(e,f,g,d,c,a){var b=a.extend({template:Confluence.TeamCalendars.Templates.Fields.repeatInterval,_intervalTxtField:null,_intervalLabel:null,_notShowInFrequency:[""],events:{"change input#repeat-interval-txtField":"updateModel"},initialize:function(h){this.setJQueryEl(h.$el);this.$el.html(e(this.template()).html());this._intervalLabel=this.$el.find(".interval-label");this._intervalTxtField=this.$el.find("#repeat-interval-txtField");this.model.on("change:frequencySelection",this.render,this);this.model.on("change:isDisable",this.render,this);this.model.on("rrule-string",this.updateModel,this);this.model.set({interval:this.model.attributes.interval||1})},updateModel:function(){var i=this.model.attributes;if(this.hideIfNotMatch&&this.hideIfNotMatch(this._notShowInFrequency,i.frequencySelection,this.$el)){this.model.set({interval:null});return}var i=this.model.attributes;if(i.isDisable){return}var h=this._intervalTxtField.val();h=parseInt(h);h=h>=1?h:1;this.model.set({interval:h});this.render()},render:function(){var h=this.model.attributes;if(this.hideIfNotMatch&&this.hideIfNotMatch(this._notShowInFrequency,h.frequencySelection,this.$el)){return}this._intervalTxtField.removeAttr("readonly","readonly");this._intervalTxtField.val(h.interval);this._createLabelInterval(h.frequencySelection,this._intervalTxtField.val(),this._intervalLabel);if(h.isDisable){this._intervalTxtField.attr("readonly","readonly");this._intervalTxtField.attr("disabled","disabled")}else{this._intervalTxtField.removeAttr("readonly","readonly");this._intervalTxtField.removeAttr("disabled","disabled")}},_createLabelInterval:function(j,h,i){if(/^[1-9]\d*$/.test(h)||h==="0"){if(j==="DAILY"){i.text(parseInt(h)>1?"days":"day")}else{if(j===f.FREQUENCIES[f.WEEKLY]){i.text(parseInt(h)>1?"weeks":"week")}else{if(j===f.FREQUENCIES[f.MONTHLY]){i.text(parseInt(h)>1?"months":"month")}else{if(j===f.FREQUENCIES[f.YEARLY]){i.text(parseInt(h)>1?"years":"year")}}}}}else{i.text("")}}});return b});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:event-edit', location = 'com/atlassian/confluence/extra/calendar3/components/manage-event/event-edit/repeat-field/repeat-on.js' */
define("tc/repeat-on",["jquery","tc/rrule","tc-backbone","tc/calendar-util","underscore","tc/repeat-base-child-component"],function(e,f,g,c,b,a){var d=a.extend({_WEEKDAY:[f.MO,f.TU,f.WE,f.TH,f.FR,f.SA,f.SU],_templates:{WEEKLY:Confluence.TeamCalendars.Templates.Fields.repeatOnWeekly,MONTHLY:Confluence.TeamCalendars.Templates.Fields.repeatOnMonthly},_notShowInFrequency:["","DAILY","YEARLY"],_monthlyFreq:"MONTHLY",_weeklyFreq:"WEEKLY",_supportingFrequencies:["MONTHLY","WEEKLY"],options:null,events:{"change .repeat-on-container input[type='checkbox']":"updateModel"},initialize:function(h){this.setJQueryEl(h.$el);this.options=h;this.initializeTemplate(this.options);if(!this.validateInput()){this.model.set({isUnsupportedRrule:true});return}this.model.on("change:isDisable",this.render,this);this.model.on("change:frequencySelection",this.initializeTemplateAndRender,this);this.model.on("rrule-string",this.updateModel,this)},initializeTemplateAndRender:function(){this.initializeTemplate(this.options);this.render()},initializeTemplate:function(j){var h=this.model.attributes;if(this.hideIfNotMatch&&this.hideIfNotMatch(this._notShowInFrequency,h.frequencySelection,this.$el)){return}var k=this._templates[h.frequencySelection];this.$el.html(e(k()).html());var i=this;var l=this.$el;if(this._weeklyFreq===h.frequencySelection){l.on("change","input[type='checkbox']",function(){var m=e(this);m.bind(i.updateModel(),this)});if(!h.byweekday){h.byweekday=[this.model.event?this._dateToWeekday(e.fullCalendar.parseDate(this.model.event.start)):f.MO]}}if(this._monthlyFreq===h.frequencySelection){if(e.fn.auiSelect2){l.find("select.select").each(function(m,n){e(n).auiSelect2({minimumResultsForSearch:-1,})})}l.on("change","select.select",function(){var m=e(this);m.bind(i.updateModel(),this)});l.on("change","input.radio",function(){var m=e(this);m.bind(i.updateModel(),this)});if(!this.model.rruleStr||this.model.rruleStr===""){if(!h.bymonthday&&this.model.event){if(!h.byweekday){h.byweekday=[this._dateToWeekday(e.fullCalendar.parseDate(this.model.event.start))]}}}}},validateInput:function(){var h=this.model.attributes;if(this._supportingFrequencies.indexOf(h.frequencySelection)===-1&&h.byweekday){return false}if(h.byweekday&&h.bymonthday){return false}if(this._monthlyFreq===h.frequencySelection){var h=this.model.attributes;if(!h.bymonthday&&h.byweekday){var k=h.byweekday[0].n;var j=[1,2,3,4,-1];if(j.indexOf(k)===-1){return false}}}if(this._weeklyFreq===h.frequencySelection){if(!h.byweekday){return false}var i=true;e.each(h.byweekday,function(l,m){var n=m.n;if(n>1){i=false;return}});if(!i){return i}}return true},updateModel:function(){var h=this.model.attributes;if(this.hideIfNotMatch&&this.hideIfNotMatch(this._notShowInFrequency,h.frequencySelection,this.$el)){this.model.set({byweekday:null,bymonthday:null});return}if(h.isDisable){return}if("WEEKLY"===h.frequencySelection){this._updateModelOnRepeatOnWeekly();return}if("MONTHLY"===h.frequencySelection){this._updateModelOnRepeatOnMonthly()}this.render()},_dateToWeekday:function(h){if(!h){return f.MO}switch(h.getDay()){case 1:return f.MO;case 2:return f.TU;case 3:return f.WE;case 4:return f.TH;case 5:return f.FR;case 6:return f.SA;case 0:return f.SU;default:return f.MO}},_updateModelOnRepeatOnWeekly:function(){var i=[];var h=this;var j=this.$el;j.find("input[type='checkbox']").each(function(k,l){if(l.checked){i.push(h._WEEKDAY[e(l).val()])}});this.model.set({byweekday:i,bymonthday:null})},_updateModelOnRepeatOnMonthly:function(){var h=null;var i=null;if(this.$el.find("#monthlyRepeatOnSameDay").is(":checked")){h=this.$el.find("#monthlyRepeatOnSameDayByMonthDay").val();i=this.$el.find("#monthlyRepeatOnSameDayByWeekDay").val()}if("day"===i){this.model.set({bymonthday:h,byweekday:null})}else{this.model.set({bymonthday:null,byweekday:this._WEEKDAY[i]?this._WEEKDAY[i].nth(h):null})}},render:function(){var h=this.model.attributes;var i=this.$el;if(this.hideIfNotMatch&&this.hideIfNotMatch(this._notShowInFrequency,h.frequencySelection,this.$el)){return}if("WEEKLY"===h.frequencySelection){this._renderRepeatOnWeekly(i)}if("MONTHLY"===h.frequencySelection){this._renderRepeatOnMonthly(i)}if(h.isDisable){this._disable(i)}},_disable:function(i){var h=this.model.attributes;if("WEEKLY"===h.frequencySelection){i.find("input[type='checkbox']").attr("disabled","disabled")}if("MONTHLY"===h.frequencySelection){i.find("#monthlyRepeatOnSameDate").attr("disabled","disabled");i.find("#monthlyRepeatOnSameDay").attr("disabled","disabled");if(e.fn.auiSelect2){i.find("#monthlyRepeatOnSameDayByMonthDay").auiSelect2("disable");i.find("#monthlyRepeatOnSameDayByWeekDay").auiSelect2("disable")}else{i.find("#monthlyRepeatOnSameDayByMonthDay").attr("disabled","disabled");i.find("#monthlyRepeatOnSameDayByWeekDay").attr("disabled","disabled")}}},_renderRepeatOnMonthly:function(m){var h=this.model.attributes;var i=m.find("#monthlyRepeatOnSameDayContainer");i.removeClass("hidden");m.find("#monthlyRepeatOnSameDate").removeAttr("disabled","disabled");m.find("#monthlyRepeatOnSameDay").removeAttr("disabled","disabled");if(e.fn.auiSelect2){m.find("#monthlyRepeatOnSameDayByMonthDay").auiSelect2("enable");m.find("#monthlyRepeatOnSameDayByWeekDay").auiSelect2("enable")}else{m.find("#monthlyRepeatOnSameDayByMonthDay").removeAttr("disabled","disabled");m.find("#monthlyRepeatOnSameDayByWeekDay").removeAttr("disabled","disabled")}if(!h.byweekday&&!h.bymonthday){m.find("#monthlyRepeatOnSameDate").prop("checked",true);m.find("#monthlyRepeatOnSameDay").prop("checked",false);i.addClass("hidden")}else{m.find("#monthlyRepeatOnSameDate").prop("checked",false);m.find("#monthlyRepeatOnSameDay").prop("checked",true);i.removeClass("hidden");var j=function(o,n){if(e.fn.auiSelect2){i.find("#monthlyRepeatOnSameDayByMonthDay").auiSelect2("val",o);i.find("#monthlyRepeatOnSameDayByWeekDay").auiSelect2("val",n)}else{i.find("#monthlyRepeatOnSameDayByMonthDay").val(o);i.find("#monthlyRepeatOnSameDayByWeekDay").val(n)}};if(h.byweekday&&h.bymonthday){return}else{if(h.bymonthday){var l=h.bymonthday;j(l,"day")}else{var k=h.byweekday[0]||h.byweekday;var l=k.n;j(l,k.weekday)}}}},_renderRepeatOnWeekly:function(i){var h=this.model.attributes;i.find("input[type='checkbox']").removeAttr("disabled","disabled");if(h.byweekday){h.byweekday.forEach(function(k){var j=i.find("input[value='"+k.weekday+"']");e(j).prop("checked",true)})}}});return d});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:event-edit', location = 'com/atlassian/confluence/extra/calendar3/components/manage-event/event-edit/repeat-field/repeat-recur-end.js' */
define("tc/repeat-recur-end",["jquery","tc/rrule","tc-backbone","tc/calendar-util","underscore","tc/repeat-base-child-component"],function(d,f,g,c,b,a){var e=a.extend({template:Confluence.TeamCalendars.Templates.Fields.repeatRecurEnd,_recurEndNeverChbox:null,_recurEndTimesChBox:null,_recurEndTimesTxt:null,_recurEndUtilChBox:null,_recurEndUtilDatePicker:null,_notShowInFrequency:[""],calendarDiv:null,calendarPlugin:null,createDatePicker:null,events:{"change input#recur-end-times-txtField":"updateModel","change input[type='radio']":"updateModel",},initialize:function(i){if(!this.validateInput()){this.model.set({isUnsupportedRrule:true});return}this.setJQueryEl(i.$el);this.$el.html(d(this.template()).html());this.calendarDiv=i.calendarDiv;this.calendarPlugin=i.calendarPlugin;this._recurEndNeverChbox=this.$el.find("#recur-end-never");this._recurEndTimesChBox=this.$el.find("#recur-end-times");this._recurEndTimesTxt=this.$el.find("#recur-end-times-txtField");this._recurEndUtilChBox=this.$el.find("#recur-end-until");this._recurEndUtilDatePicker=this.$el.find("input.datepicker-field#until");this.createDatePicker=i.createDatePicker;this.createDatePicker(this._recurEndUtilDatePicker,b.bind(this.updateModel,this));this._isInitDatePicker=false;var h=this.model.attributes;var j=(h.count===null||h.count===0)&&h.until===null;var l=j?!j:h.count!==null;var k=j?!j:h.until!==null;if(h.until==null){this.model.set({until:d.fullCalendar.parseDate(this.model.event.start)})}this.model.set({isSelectedEndNever:j});this.model.set({isSelectedEndTimes:l});this.model.set({isSelectedEndUntil:k});this.model.on("change:isDisable",this.render,this);this.model.on("change:frequencySelection",this.render,this);this.model.on("rrule-string",this.updateModel,this)},validateInput:function(){var h=this.model.attributes;if(h.count&&h.until){return false}return true},updateModel:function(){var j=this.model.attributes;if(this.hideIfNotMatch&&this.hideIfNotMatch(this._notShowInFrequency,j.frequencySelection,this.$el)){this.model.set({count:null,until:null});return}if(j.isDisable){return}var h=this._recurEndNeverChbox.is(":checked");var k=this._recurEndTimesChBox.is(":checked");var n=this._recurEndUtilChBox.is(":checked");var i=j.count||1;var o=j.until||d.fullCalendar.parseDate(this.model.event.start);if(h){i=null;o=null}else{if(k){var l=this._recurEndTimesTxt.val();i=l&&l>=1?l:i;o=null}else{if(n){var m=this._recurEndUtilDatePicker.tcDatePicker("getDate");var p=m?m:null;if(p){o=p}i=null}}}this.model.set({count:i});this.model.set({until:o});this.model.set({isSelectedEndNever:h});this.model.set({isSelectedEndTimes:k});this.model.set({isSelectedEndUntil:n});this.render()},render:function(){var h=this.model.attributes;if(this.hideIfNotMatch&&this.hideIfNotMatch(this._notShowInFrequency,h.frequencySelection,this.$el)){return}this._recurEndNeverChbox.removeAttr("disabled","disabled");this._recurEndTimesChBox.removeAttr("disabled","disabled");this._recurEndTimesTxt.removeAttr("disabled","disabled");this._recurEndTimesTxt.removeAttr("readonly","readonly");this._recurEndUtilChBox.removeAttr("disabled","disabled");if(h.isSelectedEndNever){this.changeStateOfEndNever(true);this.changeStateOfEndTimes(false);this.changeStateOfEndUtil(false)}if(h.isSelectedEndTimes){this.changeStateOfEndNever(false);this.changeStateOfEndTimes(true);this.changeStateOfEndUtil(false)}if(h.isSelectedEndUntil){this.changeStateOfEndNever(false);this.changeStateOfEndTimes(false);this.changeStateOfEndUtil(true)}if(h.isDisable){this._recurEndNeverChbox.attr("disabled","disabled");this._recurEndTimesChBox.attr("disabled","disabled");this._recurEndTimesTxt.attr("disabled","disabled");this._recurEndTimesTxt.attr("readonly","readonly");this._recurEndUtilChBox.attr("disabled","disabled");this._recurEndUtilDatePicker.attr("readonly","readonly").tcDatePicker("disable")}},changeStateOfEndNever:function(h){this._recurEndNeverChbox.prop("checked",h)},changeStateOfEndTimes:function(h){var i=this.model.attributes;var j=this._recurEndTimesTxt;this._recurEndTimesChBox.prop("checked",h);if(h){j.removeAttr("disabled","disabled");j.removeAttr("readonly","readonly");j.val(i.count?i.count:1)}else{j.attr("disabled","disabled");j.attr("readonly","readonly");j.val("")}},changeStateOfEndUtil:function(h){var j=this.model.attributes;var i=this._recurEndUtilDatePicker;this._recurEndUtilChBox.prop("checked",h);if(h){i.removeAttr("readonly").tcDatePicker("enable");var l=j.until;var k=null;if(this.model.event){k=this.model.event.localisedDate}i.tcDatePicker("setDate",l);i.tcDatePicker("option","defaultDate",l);i.data("date",k||this._formatDate(i,l))}else{if(!i.is("[readonly]")){i.attr("readonly","readonly").tcDatePicker("disable")}}},_formatDate:function(h,i){if(this.calendarPlugin){this.calendarPlugin.formatDate(this.calendarDiv,i,"date",function(j){h.val(j)})}return "Formatting..."}});return e});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:event-edit', location = 'com/atlassian/confluence/extra/calendar3/components/manage-event/event-edit/repeat-field/repeat-component.js' */
define("tc/repeat-component",["jquery","tc/rrule","tc-backbone","tc/calendar-util","tc/repeat-frequency","tc/repeat-interval","tc/repeat-recur-end","tc/repeat-on","underscore"],function(a,i,h,d,e,f,c,j,g){var b=h.View.extend({template:Confluence.TeamCalendars.Templates.Fields.repeatComponent,unsupportedTemplate:Confluence.TeamCalendars.Templates.Fields.repeatComponentUnSupported,fieldsDiv:null,calendarDiv:null,calendarPlugin:null,editThisInstanceOnlyContainer:null,isEditRecurrenceEvent:false,frequencyView:null,intervalView:null,recurEndView:null,repeatOnView:null,initialize:function(k){if(!this.validateInput()){this.model.set({isUnsupportedRrule:true})}this.$el=a(this.template(this.model.attributes));this.fieldsDiv=k.fieldsDiv;this.calendarDiv=k.calendarDiv;this.calendarPlugin=k.calendarPlugin;this.isEditRecurrenceEvent=this.model.event.recur?true:false;this.editThisInstanceOnlyContainer=this.$el.find(".edit-this-instance-only-container");this.editThisInstanceOnlyContainer.change(g.bind(this.updateModel,this));this.frequencyView=new e({model:this.model,$el:this.$el.find(".field-group.frequency-container")});this.intervalView=new f({model:this.model,$el:this.$el.find(".field-group.interval-container")});this.repeatOnView=new j({model:this.model,$el:this.$el.find(".group.repeat-on-container")});this.recurEndView=new c({model:this.model,$el:this.$el.find(".date-select.recur-ends-container"),createDatePicker:k.createDatePicker,calendarDiv:this.calendarDiv,calendarPlugin:this.calendarPlugin});this.model.set({isDisable:this.isEditRecurrenceEvent});this.model.on("change:isUnsupportedRrule",this.render,this)},validateInput:function(){var l=this.model.attributes;var m=["bysetpos","bymonth","byyearday","byweekno","bynweekday","byhour","byminute","bysecond","byeaster"];for(var k in l){if(m.indexOf(k)!==-1){if(l[k]){return false}}}return true},updateModel:function(){if(this.isEditRecurrenceEvent){var k=this.editThisInstanceOnlyContainer.find("#editthisinstanceonly").prop("checked");this.model.set({isDisable:k})}},render:function(){if(this.model.attributes.isUnsupportedRrule){this.$el.html(a(this.unsupportedTemplate()).html());this.$el.addClass("field-group");if(!a.contains(this.fieldsDiv[0],this.$el[0])){this.fieldsDiv.append(this.$el)}return}if(this.isEditRecurrenceEvent){if(this.editThisInstanceOnlyContainer.hasClass("hidden")){this.editThisInstanceOnlyContainer.removeClass("hidden")}this.editThisInstanceOnlyContainer.find("#editthisinstanceonly").prop("checked",this.model.attributes.isDisable)}else{if(!this.editThisInstanceOnlyContainer.hasClass("hidden")){this.editThisInstanceOnlyContainer.addClass("hidden")}}this.frequencyView.render();this.intervalView.render();this.recurEndView.render();this.repeatOnView.render();this.fieldsDiv.append(this.$el)}});return b});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:event-edit', location = 'com/atlassian/confluence/extra/calendar3/components/manage-event/event-edit/event-field-handlers.js' */
define("tc/event-field-handlers",["jquery","tc/jira-event-field-process","tc/calendar-util","confluence-ui-components/js/user-select2","tc/repeat-model","tc/repeat-component"],function(d,f,h,g,j,a){d.fn.tcDatePicker=d.fn.tcDatePicker.noConflict();var e=d.tcDatePicker.noConflict();function c(m,k){var l=m instanceof d?m:d(m);l.tcDatePicker(k)}function b(m,k,l){if(/^[1-9]\d*$/.test(k)||k==="0"){if(m==="DAILY"){l.text(parseInt(k)>1?"days":"day")}else{if(m==="WEEKLY"){l.text(parseInt(k)>1?"weeks":"week")}else{if(m==="MONTHLY"){l.text(parseInt(k)>1?"months":"month")}else{if(m==="YEARLY"){l.text(parseInt(k)>1?"years":"year")}}}}}else{l.text("")}}var i={text:function(p,k,m,o,n,l){return{add:function(){k.append(Confluence.TeamCalendars.Templates.Fields.text({id:p.id,label:p.label,required:p.required,readOnly:p.readOnly}))},init:function(){d("#"+p.id+"-text",k).val(m[p.property]||"").keydown(function(){var r=d(this),q=r.val();if(!r.data("valueChangedByUser")){setTimeout(function(){if(q!==r.val()){r.data("valueChangedByUser",true)}},300)}})},setData:function(q){l.getField(k,p.id).val(q)},getData:function(){var q={};q[p.id]=l.getField(k,p.id).val();return q},getElementId:function(){return"#field-text-"+p.id}}},textarea:function(p,k,m,o,n,l){return{add:function(){k.append(Confluence.TeamCalendars.Templates.Fields.textarea({id:p.id,size:p.size,required:p.required,label:p.label,readOnly:p.readOnly}))},init:function(){d("#"+p.id+"-textarea",k).val(m[p.property]||"")},getData:function(){var q={};q[p.id]=d("textarea[name="+p.id+"]",k).val();return q},getElementId:function(){return"#field-textarea-"+p.id}}},page:function(p,k,m,o,n,l){return{add:function(){k.append(Confluence.TeamCalendars.Templates.Fields.page({id:p.id,label:p.label,required:p.required,readOnly:p.readOnly}))},init:function(){d("#"+p.id+"-text",k).val(m[p.property]||"");o.makeAutoCompleteSearch(n,d("input[name='"+p.id+"']",k),{type:["page","blogpost"]},d("."+p.id+"-suggestions",k),function(r,q){r.val(q.attr("href"))})},getData:function(){var r={},q=l.getField(k,p.id);r[p.id]=q.hasClass("with-hint")?"":q.val();return r},getElementId:function(){return"#field-page-"+p.id}}},when:function(p,k,m,o,n,l){return{add:function(){var s,t,q,r;k.append(Confluence.TeamCalendars.Templates.Fields.when({id:p.id,disableStartDateTime:p.disableStartDateTime,disableEndDateTime:p.disableEndDateTime,disableAllDay:p.disableAllDay}));s=l.getField(k,"startTime");t=l.getField(k,"endTime");q=l.getField(k,"allDayEvent");r=o.getParameter(n,"timeSuggestion");s.autocompleteTC({source:r,minLength:2});t.autocompleteTC({source:r,minLength:2});q.click(function(){if(this.checked){s.addClass("hidden");t.addClass("hidden")}else{s.removeClass("hidden");t.removeClass("hidden");if(!s.val()){s.val(o.getDefaultStartTime(n))}if(!t.val()){t.val(o.getDefaultEndTime(n))}}})},init:function(){d(".start, .end",k).each(function(){var u=d(this);c(u,{dateFormat:"ddmmyy",dayNames:o.getDayNames(),dayNamesMin:o.getDayNamesShort(),dayNamesShort:o.getDayNamesShort(),firstDay:o.getParameter(n,"firstDayOfWeek"),monthNames:o.getMonthNames(),monthNamesShort:o.getMonthNamesShort(),beforeShow:function(){d("#ui-datepicker-div").addClass("tc-datepicker")},onClose:function(){d("#ui-datepicker-div").removeClass("tc-datepicker")},onSelect:function(z){var x=e.parseDate("ddmmyy",z);if(u.hasClass("start")){var w=d(".end",k),y=new Date(parseInt(u.data("date"))),v=new Date(w.data("date")-(y.getTime()-x.getTime()));w.tcDatePicker("option","defaultDate",v);w.tcDatePicker("setDate",v);w.data("date",v.getTime()).val(function(){o.formatDate(n,v,"date",function(A){w.val(A)});return "Formatting..."})}u.tcDatePicker("option","defaultDate",x);u.tcDatePicker("setDate",x);u.data("date",x.getTime()).val(function(){o.formatDate(n,x,"date",function(A){u.val(A)});return "Formatting..."})},showAnim:""})});var s=l.getField(k,"startTime"),t=l.getField(k,"endTime"),q=l.getField(k,"allDayEvent"),r=function(v,u,x){var w=d("input[name="+v+"]",k);w.tcDatePicker("option","defaultDate",u);w.tcDatePicker("setDate",u);w.data("date",u.getTime()).val(x||function(){o.formatDate(n,u,"date",function(y){w.val(y)});return "Formatting..."})};m.start&&r("startDate",m.start,m.localizedStartDate);r("endDate",m.end||m.start,m.localizedEndDate);if(m.allDay){s.val("").addClass("hidden");t.val("").addClass("hidden");q.attr("checked","checked")}else{s.val(m.originalStartTime||m.localizedStartTime||function(){o.formatDate(n,m.start,"time",function(u){s.val(u)});return "Formatting..."}).removeClass("hidden");t.val(m.originalEndTime||m.localizedEndTime||function(){o.formatDate(n,m.end||new Date(m.start.getTime()+3600000),"time",function(u){t.val(u)});return "Formatting..."}).removeClass("hidden");q.removeAttr("checked","checked")}},getData:function(){return{startDate:l.getField(k,"startDate").val(),startTime:l.getField(k,"startTime").val(),endDate:l.getField(k,"endDate").val(),endTime:l.getField(k,"endTime").val(),allDayEvent:l.getField(k,"allDayEvent").is(":checked")}},getElementId:function(){return"#field-when"}}},repeats2Model:null,repeats2:function(q,k,n,p,o,l){var m=this;return{model:null,view:null,add:function(){var r=function(s,t){c(s,{dateFormat:"ddmmyy",dayNames:p.getDayNames(),dayNamesMin:p.getDayNamesShort(),dayNamesShort:p.getDayNamesShort(),firstDay:p.getParameter(o,"firstDayOfWeek"),monthNames:p.getMonthNames(),monthNamesShort:p.getMonthNamesShort(),beforeShow:function(){d("#ui-datepicker-div").addClass("tc-datepicker")},onClose:function(){d("#ui-datepicker-div").removeClass("tc-datepicker")},onSelect:function(w){var v=d(this),u=e.parseDate("ddmmyy",w);v.tcDatePicker("option","defaultDate",u);v.tcDatePicker("setDate",u);v.data("date",u.getTime()).val(function(){p.formatDate(o,u,"date",function(x){v.val(x)});return "Formatting..."});if(t){t()}},showAnim:""})};m.repeats2Model=this.model=new j({rruleStr:n.rruleStr?n.rruleStr:"",event:n});this.view=new a({model:this.model,fieldsDiv:k,calendarDiv:o,calendarPlugin:p,createDatePicker:r})},init:function(){var v=function(x,w,z){var y=d("input[name="+x+"]",k);y.tcDatePicker("option","defaultDate",w);y.tcDatePicker("setDate",w);y.data("date",w.getTime()).val(z)};var t=function(x,w){l.disableCalSelect();l.showToolTip();w.attr("disabled","disabled");v("startDate",n.start,n.localizedStartDate);v("endDate",n.end||n.start,n.localizedEndDate)};var s=function(z,y){l.enableCalSelect();l.hiddenToolTip();y.removeAttr("disabled");var x=e.parseDate("yy-mm-dd",n.originalStartDateTime.split("T")[0]);var w=e.parseDate("yy-mm-dd",n.originalEndDateTime.split("T")[0]);v("startDate",x,n.localizedOriginalStartDate);v("endDate",w,n.localizedOriginalEndDate)};this.view.render();var r=d("select[name='calendar']",k);var u=this;if(n.recur){t(u,r)}d("input[name='editthisinstanceonly']",k).change(function(){if(d(this).is(":checked")){t(u,r)}else{s(u,r)}})},getData:function(){var r=this.model||m.repeats2Model;var s=r.getRRuleAsString();return{rruleStr:s,editAllInRecurrenceSeries:!r.attributes.isDisable}},getElementId:function(){return"#field-repeats"}}},user:function(q,k,m,p,o,l){var n="#"+q.id+"-user-picker";return{add:function(){k.append(Confluence.TeamCalendars.Templates.Fields.user({id:q.id,label:q.label,required:q.required}));g.bind(k)},init:function(){var u=d(".invitees",k),t=function(){d(this).closest("li").remove();if(!d("li",u).length){u.addClass("hidden")}},s=function(){d(".invitee-left",u).filter(function(){return !d(this).attr("threedots")}).ThreeDots({max_rows:1,text_span_class:"invitee-name-display",whole_word:false})},r=function(v){if(!v.startsWith("ari:")){return"ari:cloud:identity::user/"+v}else{return v}};d(n,k).bind("selected",function(A){var x=r(A.choice.id),w=A.choice.text,y=A.choice.imgSrc,v,B=d(".invitee",u).filter(function(){return d(this).data("entity").id===x}).length>0;if(!B){if(d("li",u).length===3){u.addClass("boxed")}v=d(Confluence.TeamCalendars.Templates.Fields.userSelection({displayName:w,avatarIconUrl:y}));v.data("entity",{id:x,displayName:w}).find(".delete-invitee").click(t);u.prepend(v).removeClass("hidden");s()}d(this).val("").focus();var z=d(".who-error",k);if(z.children().length){z.empty()}d(n).auiSelect2("data",[])});if(m.invitees&&m.invitees.length){d.each(m.invitees,function(w,v){u.append(d(Confluence.TeamCalendars.Templates.Fields.userSelection({displayName:v.displayName,avatarIconUrl:v.avatarIconUrl})).data("entity",{id:v.id,displayName:v.displayName}))});d(".delete-invitee",u.removeClass("hidden")).unbind("click").click(t);s()}},getData:function(){var r={};var s=d(".invitee",k);if(s.length){r.person=d.map(s,function(t){return d(t).data("entity").id})}if(q.setTitle){r.what=s.length?d.map(s,function(t){return d(t).data("entity").displayName}).join(", "):""}return r},getElementId:function(){return"#field-user-"+q.id}}},getEventField:function(r,o,k,t,s,l,n){var p=i[r.type](r,o,k,t,s,l);var m=d(p.getElementId(),o);if(m.length){if(r.required){var q=m.find("label:first span.icon-required");if(q.length===0){m.find("label:first").append(d("<span/>",{"class":"aui-icon icon icon-required"}))}}else{m.find("label:first span.icon-required").remove()}o.append(m.show());if(r.type==="repeats2"){if(r.defaultRecur){i.repeats2Model.set({frequencySelection:r.defaultRecur.freq})}}}else{p.add();p.init()}if(r.copyto&&n!==undefined){p.setData(n)}return p},reminder:function(p,k,m,o,n,l){return{add:function(){var r=o.getCurrentReminderForEventType(n,l);d(k).find("#field-text-"+p.id).remove();var q=r&&r.periodInMins>0;k.append(Confluence.TeamCalendars.Templates.Fields.inforReminderLabel({id:p.id,label:p.label,reminderPeriodText:q?AJS.format("{0} before",h.showInforReminder(r.periodInMins)):"None.",reminderPeriod:q?r.periodInMins:0}))},init:function(){},getData:function(){return{}},getElementId:function(){return""}}},"jira-hidden-fields":function(p,k,m,o,n,l){return{add:function(){k.append(Confluence.TeamCalendars.Templates.hiddenJiraFields())},init:function(){var r=f.getSubCalendarForEvent(o,n,m),q=o.getRenderedMacroCallbackHandler(n),s=Confluence.TeamCalendars.getEditCalendarDialogHelper(k,r,q);if(!r||!r.id){s.setSubCalendarIdField("");s.setNameField("");s.setColorField("");s.setSpaceToDefault()}else{s.setSubCalendarIdField(r.id);s.setNameField(r.name);s.setColorField(r.color);s.setSpaceKeyField(r.spaceKey)}},getData:function(){}}},"jira-server-select":function(p,k,m,o,n,l){return{add:function(){k.append(Confluence.TeamCalendars.Templates.Fields.serverSelector());f.getServerSelect(k).disable()},init:function(){var r=f.getServerSelect(k),s=d(".field-group-jira-server .spinner");AJS.unbind("server-select-ready.teamcalendars");AJS.unbind("server-select-change.teamcalendars");function q(u){var t=f.getSubCalendarForEvent(o,n,m);d.each(u.jiraLinks,function(v,w){var x=d("<option/>",{value:w.id,text:w.name,"data-display-url":w.displayUrl});if(u.jiraLinks.length===1){x.prop("selected",true);var y=r.parent();y.children().hide();y.css("min-height",0);d(".oauth-error",y).show()}x.appendTo(r)});if(u.jiraLinks.length>1){d(".field-group-jira-server",k).removeClass("hidden")}if(t){if(t.applicationId){r.val(t.applicationId)}else{if(t.sourceSubCalendar&&t.sourceSubCalendar.applicationId){r.val(t.sourceSubCalendar.applicationId)}}}}r.change(function(){AJS.trigger("server-select-change.teamcalendars",k)});d.ajax({cache:false,error:function(t,v,u){o.showAjaxError(k.parent().parent(),t,v,u)},success:function(t){q(t);AJS.trigger("server-select-ready.teamcalendars",k)},complete:function(){r.enable();s.hide()},timeout:Confluence.TeamCalendars.ajaxTimeout,url:Confluence.TeamCalendars.getCalendarServiceBaseUrl("/jira/jiraLinks")})},getData:function(){}}},"jira-project-select":function(p,k,m,o,n,l){return{add:function(){k.append(Confluence.TeamCalendars.Templates.Fields.projectSelector());d(".tc-jira-project",k).disable()},init:function(){function q(r){if(r.id===k[0].id){d(".oauth-approve",k).remove();f.populateProjectList(p,k,m,o,n,l)}}AJS.bind("server-select-ready.teamcalendars",function(s,r){q(r)});AJS.bind("server-select-change.teamcalendars",function(s,r){q(r)})},getData:function(){}}},"jira-dates":function(p,k,m,o,n,l){return{add:function(){k.append(Confluence.TeamCalendars.Templates.editJiraCalendar())},init:function(){AJS.bind("server-select-ready.teamcalendars",function(){f.initJiraDate(p,k,m,o,n,l)});AJS.bind("server-select-change.teamcalendars",function(){f.initJiraDate(p,k,m,o,n,l)})},getData:function(){}}}};return i});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:event-edit', location = 'com/atlassian/confluence/extra/calendar3/components/manage-event/event-edit/jira-event-field-process.js' */
define("tc/jira-event-field-process",["jquery","tc/calendar-util"],function(c,a){function e(k,f,j,l,i){function g(){if(!c("input[name='subCalendarId']",f).val()){Confluence.TeamCalendars.fireEventForAnalytics("event.create.default."+k.type+".context."+j.getParameter("calendarContext"),{})}}if(j.isProcessingSubCalendar()){return false}var h=j.setSubCalendarSpinnerIconVisible(true);g();if(j.getIncludedCalendars()){k.include=j.getIncludedCalendars()}var m=k.subCalendarId;a.putCalendarContextParams(k);c.ajax({cache:false,converters:{"text json":function(n){return n}},data:k,dataFilter:function(n){var o=c.parseJSON(n);if(o.success){Confluence.TeamCalendars.mergeSubCalendarObjectsToArray(o.payload)}return o},dataType:"json",error:function(n,p,o){j.showAjaxUpdateError(n,p,o);l()},success:function(o){j.setGenericUpdateError();if(o.success){Confluence.TeamCalendars.setFieldErrors(f,null);var n=m;if(n){j.setSubCalendars(m,o.payload);j.reloadSubCalendar(m)}else{m=o.modifiedSubCalendarId;j.setSubCalendars(m,o.payload)}i();if(!o.modifiedSubCalendarId&&j.shouldShowFeatureDiscoveryDialog(m)){j.getSubCalendarFeatureDiscoveryDialog(m)}}else{Confluence.TeamCalendars.setFieldErrors(f,o.fieldErrors);l()}},complete:function(){if(h){h.resolve()}},type:"PUT",timeout:Confluence.TeamCalendars.ajaxTimeout,url:Confluence.TeamCalendars.getCalendarServiceBaseUrl("/subcalendars.json")});return false}function b(f,g,i,j,h){return{type:h,parentId:i,subCalendarId:c("input[name='subCalendarId']",f).val(),name:g,description:"",color:c("input[name='color']",f).val(),location:"jira://".concat(encodeURIComponent(d.getServerSelect(f).val()||""),"?projectKey=",encodeURIComponent(c("select[name='tc-jira-project'] option:selected",f).val()),"&dateFieldName=",j)}}var d={getServerSelect:function(f){return c(".tc-jira-server",f)},getJiraOptions:function(f,h,g){c.ajax({cache:false,dataType:"json",error:function(i,k,j){f(i,k,j)},success:function(i){h(i);var j=AJS.format("We didn\'\'t find any projects. \u003ca href=\"{0}\" target=\"_blank\"\u003eCreate a JIRA project\u003c/a\u003e before continuing.",c(".tc-jira-server option:selected").data("display-url"));c(".option-project .unavailable-message").html(j)},timeout:Confluence.TeamCalendars.ajaxTimeout,url:Confluence.getBaseUrl()+"/rest/calendar-services/1.0/calendar/jira/"+encodeURIComponent(g)+"/query/options.json"})},getSubCalendarForEvent:function(h,g,f){if(f.eventType==="jira-calendar"||f.eventType==="jira-agile-sprint-calendar"||f.eventType==="jira-project-releases-calendar"){return h.getSubCalendar(g,f.subCalendarId)}return null},showOauthRequitedMessage:function(j,g,i,l,k){var h=c.parseJSON(j.responseText);var f=c(".oauth-error",g).empty().removeClass("hidden");i.disableOkButton({buttonText:"OK"});c(document.createElement("div")).addClass("oauth-approve aui-message hint").html(AJS.format("\u003cp class=\"title\"\u003e\u003cspan class=\"aui-icon aui-icon-info\"\u003e\u003c/span\u003e\u003c/p\u003e\u003cp class=\"info-approve\"\u003e\u003ca href=\"#\" class=\"approve-dance\"\u003e{0}\u003c/a\u003e to see list of projects\u003c/p\u003e",c(document.createElement("span")).text("Login & Approve").html())).appendTo(f).find(".approve-dance").click(function(){AppLinks.authenticateRemoteCredentials(h.oAuthUrl,function(){l.removeClass("hidden");f.addClass("hidden");i.enableOkButton();k()},function(){alert("Approval unsuccessful. Could you please try again?")});return false})},populateProjectList:function(m,j,g,p,o,i){var l=c(".tc-jira-project",j),n=c(".field-group-jira-project .spinner"),f=i.getSelectedEventType(),h=d.getServerSelect().val(),k=function(){var s=c("input[name='name']",j),q=d.getSubCalendarForEvent(p,o,g),r=function(t){if(!s.data("valueChangedByUser")){return t}return s.val()};if(!q){if(f==="jira-agile-sprint-calendar"){s.val(r(AJS.format("{0} - Sprints",c("option:selected",l).text())))}else{if(f==="jira-project-releases-calendar"){s.val(r(AJS.format("{0} - Releases",c("option:selected",l).text())))}}}};l.change(k).disable();n.show();d.getJiraOptions(function(q,s,r){n.hide();if(Confluence.TeamCalendars.isRequireOauth(q)){l.empty();d.showOauthRequitedMessage(q,j,i,l,function(){d.populateProjectList(h)})}else{l.enable();p.showAjaxError(j.parent().parent(),q,s,r)}},function(q){var s=q.projects,t=l.empty(),r=d.getSubCalendarForEvent(p,o,g);n.hide();l.enable();c.each(s,function(u,v){c(document.createElement("option")).val(v.key).text(v.name).appendTo(t)});if(r){t.val(r.projectKey)}else{k()}},h)},initJiraDate:function(q,n,h,u,t,m){var p=d.getSubCalendarForEvent(u,t,h),j=u.getRenderedMacroCallbackHandler(t),r=c("select[name='project']",n),s=function(){if(!p){var v=c("input[name='name']",n);v.val(function(){if(!v.data("valueChangedByUser")){return c("option:selected",r).val()?AJS.format("{0} - Issues",c("option:selected",r).text()):""}return v.val()});o()}};r.off("change").on("change",s);var o=function(){c(".project-error",n).empty();c(".name-error",n).empty();c(".dateFieldName-error",n).empty()};var k=function(w){var v=c(".field-group-jira-show",n);if(w){v.css("display","none")}else{v.css("display","block")}};var l=function(){var B=c(".form-mode",n),w=d.getServerSelect(n),v=c(".jira-query-options .option-project",n),z=c("select[name='project']",v),y=c(".timeZoneIdDisplay",n),x=Confluence.TeamCalendars.getEditCalendarDialogHelper(n,p,j);Confluence.TeamCalendars.setFieldErrors(n,null);c("input[name='searchFilterName']",n).addClass("with-hint").val("Search filter");c("textarea[name='jql']",n).addClass("with-hint").val("JQL query");if(!p||!p.id){x.setFormModeCreate();x.setSubCalendarIdField("");x.setNameField("");x.setDescriptionField("");x.setColorField("");x.setSpaceToDefault();x.setTimeZoneIdDisplayField("");y.hide();i(null,function(){f(function(){s()})})}else{x.setFormModeEdit();x.setSubCalendarIdField(p.id);x.setNameField(p.name);x.setDescriptionField(p.description);x.setColorField(p.color);x.setSpaceKeyField(p.spaceKey);x.setSpaceKeyAutocompleteField(p.spaceName);i(null,function(){var H=c(".jira-query-options",n),I="option-project-selected option-search-filter-selected option-jql-selected",D;c(".matrix input.radio",H).removeAttr("checked");var L=p.sourceSubCalendar||p;if(L.projectKey){var K=false;c("option",z).removeAttr("selected").each(function(){var M=c(this);if(M.val()===L.projectKey){M.attr("selected","selected");K=true;return false}});if(!K){z.append(c(document.createElement("option")).val(L.projectKey).text(L.projectName||L.projectKey).attr("selected","selected"))}c(".radio-project input.radio",H.removeClass(I).addClass("option-project-selected")).attr("checked","checked");D=v.data("hiddenDateFields")}else{if(L.searchFilterId){var E=c(".option-search-filter",H);var G=c("input[name='searchFilterName']",E);c("input[name='searchFilter']",E).val(L.searchFilterId);var C=L.searchFilterName||L.searchFilterId;var F=c(G).data("searchFilters");if(F){C=c.map(F,function(M){if(M.id===L.searchFilterId&&M.name.length>0){return M.name}})}c(G).removeClass("with-hint").val(C);c(".radio-search-filter input.radio",H.removeClass(I).addClass("option-search-filter-selected")).attr("checked","checked");D=E.data("hideDateFields")}else{if(L.jql){var J=c(".option-jql",H);c("textarea[name='jql']",J).removeClass("with-hint").val(L.jql);c(".radio-jql input.radio",H.removeClass(I).addClass("option-jql-selected")).attr("checked","checked")}}}f(function(){var N=c(".field-group-jira-show .single-dates .date-fields div.checkbox",n),M={},O=L.dateFieldNames||[];c(".date-fields input",n).removeAttr("checked");N.each(function(){var Q=c("input",this),P=Q.val();if(c.inArray(P,O)!==-1){Q.attr("checked","checked")}M[P]=c("label",this).text()});c.each(L.durations||[],function(P,V){var Q=M[V.startDateFieldName||""],U=M[V.endDateFieldName||""];if(Q&&U){var T=c(".field-group-jira-show .duration .date-fields",n),S=V.startDateFieldName+"/"+V.endDateFieldName,R="duration-"+S;c("<div/>",{"class":"checkbox"}).append(c("<input/>",{id:R,name:"dateFieldName",type:"checkbox",value:S,checked:"checked"})).append(c("<label/>",{"for":R,html:AJS.format("Start: {0}",c("<span/>",{text:Q}).html())+"<br>"+AJS.format("End: {0}",c("<span/>",{text:U}).html())})).appendTo(T);T.parent().addClass("has-selected-duration")}});if(D){k(D)}})});y.text(p.timeZoneId)}var A=c("input[name='name'], input[name='description'], input[name='spaceKeyAutocomplete'], input[name='searchFilterName'], textarea[name='jql']",n);if(j.isCalendarInEditMode()){A.removeAttr("readonly");w.removeAttr("disabled");z.removeAttr("disabled")}else{B.removeClass().addClass("form-mode read-only");A.attr("readonly","readonly");w.attr("disabled","disabled");z.attr("disabled","disabled")}};var g=function(){c("select[name='server']",n).change(function(){var x=c("select[name='server'] option:selected",n);if(x.length&&x.val()){i(null,function(){f()})}});c("input[name='spaceKeyAutocomplete']",n).bind("selected.autocomplete-content",function(y,x){c("input[name='spaceKey']",n).val(x.content.key);c(this).val(x.content.name);c(".spaceKeyAutocomplete-error",n).empty()});c(".jira-query-options .query-group input.radio",n).off("change").on("change",function(){var z=c(this).val(),y=c(".jira-query-options",n).removeClass("option-project-selected option-search-filter-selected option-jql-selected").addClass(z+"-selected"),x=c("."+z,y);c("input",x).focus(function(){var A=c(this);if(A.hasClass("with-hint")){A.removeClass("with-hint").val("")}});if("option-jql"===z){c("textarea",x).trigger("keydown",[true])}f(function(){k(x.data("hideDateFields")||!c(".option-value",x).val());var A=c(".duration",n);if(c(".date-fields",A).children().length){A.addClass("has-selected-duration")}else{A.removeClass("has-selected-duration")}})});var w=c(".option-search-filter",n);var v=c(".search-filter-suggestions",w);c("input[name='searchFilterName']",w).keydown(function(){var x=c(this);var y=x.val();setTimeout(function(){var A=x.val();if(!A||A!==y){v.empty()}if(A!==y){A=A.toLowerCase();var C=c.grep(x.data("searchFilters")||[],function(D){return D.name.toLowerCase().indexOf(A)!==-1});if(C.length){var z=c(document.createElement("div")).addClass("dropdown-container").append(c(document.createElement("div")).addClass("aui-dd-parent").append(c(document.createElement("a")).addClass("aui-dd-trigger").attr("href","#").text("Show autocomplete")).append(c(document.createElement("ul")).addClass("aui-dropdown")));var B=c(".aui-dropdown",z).appendTo(c(".aui-dd-parent",z));c.each(C,function(E,D){var F=c(document.createElement("li")).append(c(document.createElement("a")).attr("href","#").text(D.name)).data("searchFilter",D).appendTo(B).click(function(){x.val(D.name);c("input[name='searchFilter']",w).val(D.id);c(".error",w).empty();f()});if(D.description){F.attr("title",D.description)}});z.appendTo(v).dropDown("Standard",{alignment:"left"});v.removeClass("hidden")}}},300)});c("select[name='project']",n).change(function(){f()});c(".jira-query-options input[name='searchFilterName']",n).keydown(function(y){var B=y.keyCode;var x=c(this);if(!(B===38||B===40||B===13)){setTimeout(function(){n.click();var D=x.val().toLowerCase();if(D){var C=x.data("searchFilters");if(C&&c.isArray(C)){var E=c(".search-filter-suggestions .aui-dropdown li",n).each(function(){var F=c(this);if(F.data("searchFilter").name.toLowerCase().indexOf(D)===-1){F.addClass("hidden")}else{F.removeClass("hidden")}});if(E.filter(function(){return !c(this).hasClass("hidden")}).length){c(".search-filter-suggestions .aui-dd-trigger",n).trigger("click")}}}},300)}else{if(B===13){y.preventDefault();var A=c(".search-filter-suggestions .aui-dropdown li.active",n);if(A.length){var z=A.data("searchFilter");x.val(z.name);c("input[name='searchFilter']",n).val(z.id);c(".option-search-filter .error",n).empty();n.click();f()}}}});c(".add-duration",n).unbind().click(function(){AJS.log("Open Jira Duration Dialog");var z=new AJS.Dialog({height:423,width:520,id:"add-jira-duration-dialog"});z.addHeader("Add duration between issue dates");z.addPanel("",Confluence.TeamCalendars.Templates.editJiraSubCalendarDurations(),"calendar-dialog-panel");var E=z.getCurrentPanel().body,D=c(".field-group-jira-show .duration .date-fields",n),B=c(".field-group-jira-show .single-dates .date-fields",n);z.addSubmit("Add",function(){var I=c(".duration-start select option:selected",E),G=c(".duration-end select option:selected",E),H=I.val()+"/"+G.val(),K=c("div.checkbox",D).filter(function(){return c("input",this).val()===H});if(K.length){c("input",K).attr("checked","checked")}else{var J="duration-"+H;c("<div/>",{"class":"checkbox"}).append(c("<input/>",{id:J,type:"checkbox",name:"dateFieldName",value:H,checked:"checked"})).append(c("<label/>",{"for":J,html:AJS.format("Start: {0}",I.html())+"<br>"+AJS.format("End: {0}",G.html())})).prependTo(D);D.parent().addClass("has-selected-duration")}z.remove();m.show()});z.addCancel("Cancel",function(){z.remove();m.show()});var y=c.map(c("div.checkbox",B).filter(function(){return c(this).data("mappableAsDuration")}),function(G){return c("<option/>",{value:c("input",G).val(),text:c("label",G).text()})}),A=c(".duration-start select",E),F=c(".duration-end select",E),x=function(H,G){var I=z.popup.element.find(".button-panel-submit-button");if(G&&H&&G!==H){I.prop("disabled",false).removeClass("ui-state-disabled")}else{I.prop("disabled",true).addClass("ui-state-disabled")}};c.each(y,function(H,G){c(G).appendTo(A).clone().appendTo(F)});if(!y.length){c(".duration-fields",E).addClass("hidden");c(".add-fields",c(".no-selectable-date-fields",E).removeClass("hidden")).html(AJS.format("If you are a JIRA administrator, you \u003ca href=\"{0}/secure/admin/ViewCustomFields.jspa\" target=\"_blank\"\u003ecan create custom date fields\u003c/a\u003e and they will appear as options for issue start and end dates.",c(".field-group-jira-server select option:checked",n).data("display-url")))}var C=function(G,I){var H=c("option:selected",I).val();c("option",I).filter(function(){return c(this).val()}).remove();c.each(y,function(K,J){if(J.val()!==G){J.clone().appendTo(I)}});c("option",I).removeAttr("selected").filter(function(){return c(this).val()===H}).attr("selected","selected")};A.change(function(){var G=c("option:selected",this).val();C(G,F);x(G,c("option:selected",F).val())});F.change(function(){var G=c("option:selected",this).val();C(G,A);x(G,c("option:selected",A).val())});m.hide();x();z.show();return false});c(".subcalendar-cancel",n).click(function(){m.remove();return false});return n};var i=function(A,E){var B=c(".jira-query-options",n);var D=c(".query-group input.radio",B).attr("disabled","disabled").removeAttr("checked","checked");var w=c(".field-group .project-select-label",B);var z=c(".query-group",B);var G=c(".compatibility-group, .field-group-jira-show",B);var y=c(".form-mode",n).addClass("jira-query-options-loading");var x=d.getServerSelect(n).val();var v=A;var C=function(H,J,I){y.removeClass("jira-query-options-loading");z.addClass("hidden");w.removeClass("hidden");G.addClass("hidden");if(Confluence.TeamCalendars.isRequireOauth(H)){d.showOauthRequitedMessage(H,n,m,G,l)}else{if(!(v&&c.isFunction(v))){v=function(L,N,M){var K=new Array();K[0]=M;u.setGenericErrors(n.parent().parent(),K)}}v(H,J,I)}};var F=function(J){G.removeClass("hidden");y.removeClass("jira-query-options-loading");D.removeAttr("disabled","disabled");if(!J.searchRequests){c(".radio-search-filer input",n).attr("disabled","disabled")}if(!B.hasClass("option-project-selected")){B.removeClass("option-search-filter-selected option-jql-selected").addClass("option-project-selected")}c(".radio-project input",B).attr("checked","checked");if(J.jqlNotSupported){z.addClass("hidden");w.removeClass("hidden")}else{w.addClass("hidden");z.removeClass("hidden");var P=new Date().getTime();var I="jql-"+P;c("textarea[name='jql']",B).before(c(document.createElement("textarea")).attr({autocomplete:"off",cols:"20",id:I,name:"jql",rows:1,wrap:"off",placeholder:"JQL query"}).addClass("textarea with-hint").focus(function(){var T=c(this);if(T.hasClass("with-hint")){T.removeClass("with-hint").val("")}}).val("")).remove();var Q=/.+\/jql\/autocomplete.json\?fieldName=[^&]+&fieldValue=.*/;var S=c(".jqlAutoCompleteSpinner",B);B.ajaxSend(function(V,U,T){if(Q.test(T.url||"")){S.removeClass("hidden")}}).ajaxComplete(function(V,U,T){if(Q.test(T.url||"")){S.addClass("hidden")}});c(".option-jql label",B).attr("for",I);var M="jql-error-"+P;c(".jql-error",B).before(c(document.createElement("div")).addClass("error jql-error").attr("id",M)).remove();c(".dropdown-ready",B).remove();JIRA.JQLAutoComplete({fieldID:I,parser:JIRA.JQLAutoComplete.MyParser(c.parseJSON(J.jqlReservedKeywordsJson||"[]")),queryDelay:0.65,jqlFieldNames:c.parseJSON(J.visibleFieldNamesJson||"[]"),jqlFunctionNames:c.parseJSON(J.visibleFunctionNamesJson||"[]"),minQueryLength:0,allowArrowCarousel:true,autoSelectFirst:false,errorID:M,jiraApplicationId:d.getServerSelect().val(),baseUrl:Confluence.getBaseUrl()});c("textarea[name='jql']",n).keydown(function(V,U){var W=c(this);var T=W.val();if(U||V.keyCode!==27){setTimeout(function(){var Y=W.val();var Z=c(".jql-error",n);if(Y&&!W.hasClass("with-hint")&&(U||Y!==T)){c.ajax({cache:false,data:{jql:Y},error:function(){Z.empty().text("Unable to validate JQL against selected JIRA instance.")},success:function(ad){var ac=c(".jql-ok",n),ab=c(".jql-bad",n),aa=c(".duration",n);if(ad.valid){ac.removeClass("hidden");ab.addClass("hidden");f(function(){aa.addClass("can-add-duration");if(c(".date-fields div.checkbox",aa).length){aa.addClass("has-selected-duration")}else{aa.removeClass("has-selected-duration")}});W.focus()}else{ac.addClass("hidden");ab.removeClass("hidden");c(".date-fields",n).empty();k(true);aa.removeClass("can-add-duration")}},type:"PUT",url:Confluence.getBaseUrl().concat("/rest/calendar-services/1.0/calendar/jira/",encodeURIComponent(d.getServerSelect(n).val()),"/jql/validate.json"),timeout:Confluence.TeamCalendars.ajaxTimeout})}},300)}else{var X=c(".option-jql .suggestions",B);if(X.is(":visible")){X.hide();return false}}})}var R=J.searchRequests;var L=c(".option-search-filter",n);var H=c("input[name='searchFilterName']",L).removeData("searchFilters");if(R&&c.isArray(R)&&R.length){H.data("searchFilters",R);c(".option-content",L.removeData("hideDateFields")).removeClass("disabled")}else{H.attr("disabled","disabled");c(".option-content",L.data("hideDateFields",true)).addClass("disabled")}var K=J.projects;var O=c(".option-project",n);if(K&&c.isArray(K)&&K.length){var N=c("select",O).empty();c(document.createElement("option")).val("").text("Select").appendTo(N);c.each(K,function(T,U){c(document.createElement("option")).val(U.key).text(U.name).appendTo(N)});c(".option-content",O.removeData("hideDateFields")).removeClass("disabled")}else{c(".option-content",O.data("hideDateFields",true)).addClass("disabled")}if(!J.dateRangeSupported){c(".duration",n).css("visibility","hidden")}else{c(".duration",n).css("visibility","visible")}m.enableOkButton();if(E&&c.isFunction(E)){E(J)}};d.getJiraOptions(C,F,x)};var f=function(y){var x=c(".field-group-jira-show div.checkbox",n).filter(function(){return c("input",this).is(":checked")}),D=c(".jira-query-options .matrix .radio:checked",n).val(),F=c(".duration",n),A={},w="";if("option-project"===D){var v=encodeURIComponent(c(".jira-query-options .option-project select option:selected",n).val());if(v){w="/project/"+v}}else{if("option-search-filter"===D){var C=c(".jira-query-options .option-search-filter input[name='searchFilter']",n).val();if(C){w="/filter/"+encodeURIComponent(C)}}else{if("option-jql"===D){A.query=c(".jira-query-options .option-jql textarea",n).val()||"";if(A.query){w="/jql"}}}}F.removeClass("can-add-duration");if(w){var B=c(".date-fields-spinner-container",n).removeClass("hidden"),E=c(".single-dates .date-fields",n).empty(),z=c(".date-fields",F).empty();c.ajax({cache:false,data:A,dataType:"json",error:function(){B.addClass("hidden");c(".dateFieldName-error",n).text("Error retrieving list of date fields.")},success:function(I){B.addClass("hidden");var J=c("<div/>"),H=c.map(x,function(K){return c("input",K).val()}),G=c.map(I,function(K){return K.key});c.each(I,function(L,K){c("<div/>",{"class":"checkbox"}).append(c("<input/>",{id:"option-"+K.key,name:"dateFieldName",type:"checkbox",value:K.key,checked:c.inArray(K.key,H)!==-1})).append(c("<label/>",{"for":"option-"+K.key,text:K.name})).data("mappableAsDuration",K.customfield||K.key==="duedate"||K.key==="created"||K.key==="resolution").appendTo(J)});x.filter(function(){var L=c("input",this).val();if(L.indexOf("/")!==-1){var K=L.split("/",2);return K.length===2&&c.inArray(K[0],G)!==-1&&c.inArray(K[1],G)!==-1}return false}).appendTo(z.empty());J.appendTo(E.empty());if(J.children().length){k(false);F.addClass("can-add-duration")}else{F.removeClass("can-add-duration")}if(y&&c.isFunction(y)){y(I)}},timeout:Confluence.TeamCalendars.ajaxTimeout,url:Confluence.getBaseUrl().concat("/rest/calendar-services/1.0/calendar/jira/",encodeURIComponent(d.getServerSelect(n).val()),"/date-fields",w,".json")})}else{k(true);if(y&&c.isFunction(y)){y()}}};g();l()},CustomSubmitter:{JiraIssues:{submitForm:function(f,i,j,h,g,k){function l(){var q="",n=c(".field-group-jira-show .date-fields div.checkbox").filter(function(){return c("input:checked",this).length});c.each(n,function(){var s=c("input",this).val();if(s.indexOf("/")!==-1){var r=s.split("/",2);if(q){q+="&"}q+="duration="+encodeURIComponent(r[0]+"/"+r[1])}else{if(q){q+="&"}q+="dateFieldName="+encodeURIComponent(s)}});var o={type:"jira",parentId:j,subCalendarId:c("input[name='subCalendarId']",f).val(),name:i,description:"",color:c("input[name='color']",f).val()},m="jira://"+encodeURIComponent(d.getServerSelect(f).val()||"")+"?",p=c(".jira-query-options .matrix input.radio:checked",f).val();if("option-project"===p){m+="projectKey="+encodeURIComponent(c("select[name='project'] option:selected",f).val())}else{if("option-search-filter"===p){m+="searchFilterId="+c("input[name='searchFilter']",f).val()}else{m+="jql="+encodeURIComponent(c("textarea[name='jql']",f).val())}}if(q){m+="&"+q}o.location=m;return o}e(l(),f,h,k,g)}},JiraAgileSprints:{submitForm:function(f,i,j,h,g,k){var l=b(f,i,j,"sprint","jira-agile-sprint");e(l,f,h,k,g)}},JiraProjectReleases:{submitForm:function(f,i,j,h,g,k){var l=b(f,i,j,"versiondue","jira-project-releases");e(l,f,h,k,g)}}}};return d});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:event-edit', location = 'com/atlassian/confluence/extra/calendar3/components/manage-event/event-edit/event-types.js' */
define("tc/event-types",["jquery","tc/jira-event-field-process"],function(c,d){var b={fields:[{type:"user",id:"who",label:"Who",required:true,property:"what",setTitle:true},{type:"when",id:"people"},{type:"repeats2",id:"people"},{type:"reminder",id:"reminder",label:"Reminder"},{type:"text",id:"description",property:"description",label:"Summary",copyto:"what"},{type:"page",id:"url",property:"workingUrl",label:"Related page"}]};var a={DefaultEventType:{travel:c.extend({},b,{id:"travel",name:"Travel"}),leaves:c.extend({},b,{id:"leaves",name:"Leave"}),birthdays:c.extend(true,{},b,{id:"birthdays",name:"Birthdays",fields:[{},{},{defaultRecur:{freq:"YEARLY"}}]}),jira:{id:"jira",name:"JIRA Issue Dates",hiddenFromEventCreation:true,fields:[{type:"text",id:"what",property:"title",label:"What",required:true,readOnly:true},{type:"when",id:"simple",disableEndDateTime:true,disableAllDay:true},{type:"reminder",id:"reminder",label:"Reminder"},{type:"page",id:"url",property:"workingUrl",label:"Related page",readOnly:true},{type:"textarea",id:"description",property:"description",label:"Description",size:5,readOnly:true}]},"jira-agile-sprint":{id:"jira-agile-sprint",name:"JIRA Agile Sprints",hiddenFromEventCreation:true,fields:[{type:"text",id:"what",property:"title",label:"What",required:true,readOnly:true},{type:"when",id:"simple",disableEndDateTime:true,disableAllDay:true},{type:"reminder",id:"reminder",label:"Reminder"},{type:"page",id:"url",property:"workingUrl",label:"Related page",readOnly:true},{type:"textarea",id:"description",property:"description",label:"Description",size:5,readOnly:true}]},"jira-project-releases":{id:"jira-project-releases",name:"JIRA Project Releases",hiddenFromEventCreation:true,fields:[{type:"text",id:"what",property:"title",label:"What",required:true,readOnly:true},{type:"when",id:"simple",disableEndDateTime:true,disableAllDay:true},{type:"reminder",id:"reminder",label:"Reminder"},{type:"page",id:"url",property:"workingUrl",label:"Related page",readOnly:true},{type:"textarea",id:"description",property:"description",label:"Description",size:5,readOnly:true}]},other:{id:"other",name:"Events",fields:[{type:"text",id:"what",property:"title",label:"What",required:true,copyto:"description"},{type:"user",id:"who",label:"Who",property:"what"},{type:"when",id:"simple"},{type:"repeats2",id:"simple"},{type:"reminder",id:"reminder",label:"Reminder"},{type:"text",id:"where",property:"where",label:"Where"},{type:"page",id:"url",property:"workingUrl",label:"Related page"},{type:"textarea",id:"description",property:"description",label:"Description",size:5}]},"jira-calendar":{id:"jira-calendar",name:"JIRA Issue Dates",customHandler:d.CustomSubmitter.JiraIssues,hiddenFromEventCreation:!Confluence.TeamCalendars.hasJiraLink,fields:[{type:"jira-server-select",id:"server",property:"server",label:"Server",required:true},{type:"text",id:"name",property:"name",required:true,label:"Name"},{type:"reminder",id:"reminder",label:"Reminder"},{type:"jira-dates",id:"jira-dates"}]},"jira-agile-sprint-calendar":{id:"jira-agile-sprint-calendar",name:"JIRA Agile Sprints",customHandler:d.CustomSubmitter.JiraAgileSprints,hiddenFromEventCreation:!Confluence.TeamCalendars.hasJiraLink,fields:[{type:"jira-hidden-fields",id:"",property:"",required:true,label:""},{type:"jira-server-select",id:"server",property:"server",label:"Server",required:true},{type:"jira-project-select",id:"project",property:"project",label:"Project",required:true},{type:"text",id:"name",property:"title",required:true,label:"Name"},{type:"reminder",id:"reminder",label:"Reminder"}]},"jira-project-releases-calendar":{id:"jira-project-releases-calendar",name:"JIRA Project Releases",customHandler:d.CustomSubmitter.JiraProjectReleases,hiddenFromEventCreation:!Confluence.TeamCalendars.hasJiraLink,fields:[{type:"jira-hidden-fields",id:"",property:"",required:true,label:""},{type:"jira-server-select",id:"server",property:"server",label:"Server",required:true},{type:"jira-project-select",id:"project",property:"project",label:"Project",required:true},{type:"text",id:"name",property:"title",required:true,label:"Name"},{type:"reminder",id:"reminder",label:"Reminder"}]}},CustomEventType:{id:"custom",name:"Event",fields:[{type:"text",id:"what",property:"title",label:"What",required:true,copyto:"description"},{type:"user",id:"who",label:"Who",property:"what"},{type:"when",id:"simple"},{type:"repeats2",id:"simple"},{type:"reminder",id:"reminder",label:"Reminder"},{type:"text",id:"where",property:"where",label:"Where"},{type:"page",id:"url",property:"workingUrl",label:"Related page"},{type:"textarea",id:"description",property:"description",label:"Description",size:5}]}};return a});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:event-edit', location = 'com/atlassian/confluence/extra/calendar3/components/manage-event/event-edit/event-edit-dialog-combat.js' */
require(["tc/event-edit-dialog"],function(a){if(!Confluence.TeamCalendars.Dialogs){Confluence.TeamCalendars.Dialogs={}}Confluence.TeamCalendars.Dialogs.getEditEventDialog=function(d,c,e,b){return new a().getEditEventDialog(d,c,e,b)}});
}catch(e){WRMCB(e)};