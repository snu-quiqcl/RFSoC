"use strict";(self._cf=self._cf||[]).push([[73088],{756042:(e,t,a)=>{a.d(t,{Hh:()=>o,GV:()=>s,CJ:()=>l,tP:()=>i,Ps:()=>u,r4:()=>c});var r=a(331377);const n=r.ZP`fragment ActionButtonContentFragment on Content{id metadata{currentuser{favourited{isFavourite}}}}`,o=r.ZP`mutation ActionButtonPageStar($id:ID!){favouritePage(favouritePageInput:{pageId:$id}){content{...ActionButtonContentFragment}}}${n}`,s=r.ZP`mutation ActionButtonPageUnstar($id:ID!){unfavouritePage(favouritePageInput:{pageId:$id}){content{...ActionButtonContentFragment}}}${n}`,l=r.ZP`mutation FavoriteSpaceMutation($spaceKey:String!){favouriteSpace(spaceKey:$spaceKey){isSpaceFavourited}}`,i=r.ZP`mutation UnfavoriteSpaceMutation($spaceKey:String!){unfavouriteSpace(spaceKey:$spaceKey){isSpaceFavourited}}`,c=r.ZP`mutation SpaceDirectoryWatchSpaceMutation($spaceId:ID!){watchSpace(watchSpaceInput:{spaceId:$spaceId currentUser:true}){space{id currentUser{isWatched}}}}`,u=r.ZP`mutation SpaceDirectoryUnWatchSpaceMutation($spaceId:ID!){unwatchSpace(watchSpaceInput:{spaceId:$spaceId currentUser:true}){space{id currentUser{isWatched}}}}`},84914:(e,t,a)=>{a.d(t,{n:()=>f});var r=a(991332),n=a(122551),o=a(464984),s=a(603494),l=a(499082),i=a(325834),c=a(975568),u=a(756042),d=a(698275);const p=(0,o.defineMessages)({starErrorTitle:{id:"action-buttons.page.star.error.title",defaultMessage:"We're having trouble starring this page"},unstarErrorTitle:{id:"action-buttons.page.unstar.error.title",defaultMessage:"We're having trouble unstarring this page"},errorDescription:{id:"action-buttons.error.description",defaultMessage:"Refresh the page and try again."}}),m=({contentId:e,isStarred:t,onStar:a,onUnstar:o,analytics:s,intl:m,children:f})=>{const _=((e,t)=>{const{createAnalyticsEvent:a}=(0,i._)(),o=JSON.stringify(null==t?void 0:t.attributes);return(0,n.useCallback)((n=>{if(!t)return;const{source:o,containerId:s,attributes:l}=t;a({type:"sendTrackEvent",data:(0,r.Z)({action:n,actionSubject:"favouritePage",source:o,attributes:l,objectId:e},s&&{containerId:s})}).fire()}),[a,null==t?void 0:t.source,o])})(e,s);(0,c.n)("page-star-button"),(0,c.n)("page-unstar-button");const[g,{error:v}]=(0,l.Db)(u.Hh,{variables:{id:e},onCompleted:()=>{_("created")},optimisticResponse:{favouritePage:{__typename:"FavouritePagePayload",content:{__typename:"Content",id:e,metadata:{__typename:"ContentMetadata",currentuser:{__typename:"ContentMetadata_CurrentUserMetadataProvider_currentuser",favourited:{__typename:"FavouritedSummary",isFavourite:!0}}}}}}}),[y,{error:b}]=(0,l.Db)(u.GV,{variables:{id:e},onCompleted:()=>{_("deleted")},optimisticResponse:{unfavouritePage:{__typename:"UnfavouritePagePayload",content:{__typename:"Content",id:e,metadata:{__typename:"ContentMetadata",currentuser:{__typename:"ContentMetadata_CurrentUserMetadataProvider_currentuser",favourited:null}}}}}}),E=(0,n.useCallback)((e=>{e.preventDefault(),t?(o&&o(e),y().catch((e=>{}))):(a&&a(e),g().catch((e=>{})))}),[t,a,g,o,y]);return(0,n.useEffect)((()=>{var e;null!==(e=window)&&void 0!==e&&e.__SSR_EVENTS_CAPTURE__&&window.__SSR_EVENTS_CAPTURE__.favoriteButton&&(E(window.__SSR_EVENTS_CAPTURE__.favoriteButton),delete window.__SSR_EVENTS_CAPTURE__.favoriteButton)}),[]),n.createElement(n.Fragment,null,f({toggle:E}),v&&n.createElement(d.L,{title:m.formatMessage(p.starErrorTitle),description:m.formatMessage(p.errorDescription),error:v}),b&&n.createElement(d.L,{title:m.formatMessage(p.unstarErrorTitle),description:m.formatMessage(p.errorDescription),error:b}))};m.displayName="PageStarComponent";const f=(0,s.ZP)(m)},915934:(e,t,a)=>{a.d(t,{z:()=>Z});var r=a(991332),n=a(415911),o=a(122551),s=a(464984),l=a(603494),i=a(612642),c=a(131436),u=a(141690),d=a(187992),p=a(395937),m=a(57198),f=a(417130),_=a(559214),g=a(414762),v=a(521713),y=a(84914);const b=(0,s.defineMessages)({star:{id:"action-buttons.page.star.label",defaultMessage:"Star this page"},unstar:{id:"action-buttons.page.unstar.label",defaultMessage:"Unstar this page"}}),E=e=>{let{intl:t,size:a,outlineAppearance:s,tooltipPosition:l,shortcut:E,label:Z}=e,h=(0,n.Z)(e,["intl","size","outlineAppearance","tooltipPosition","shortcut","label"]);const S="small"===a?"compact":"default",w="subtle"===s?v.cn:void 0,C=h.isStarred?t.formatMessage(b.unstar):t.formatMessage(b.star),P=E?o.createElement(f.oW,{shortcut:E,contentBefore:C}):C,I=null!=Z?Z:C;return o.createElement(y.n,(0,r.Z)({},h),(({toggle:e})=>o.createElement(o.Fragment,null,o.createElement(m.Z,{content:P,position:l||"top",hideTooltipOnClick:!0},o.createElement("div",null,h.isStarred?o.createElement(p.Z,{"data-id":"page-unstar-button","data-test-id":"page-unstar-button",spacing:S,appearance:"subtle",onClick:e,iconBefore:o.createElement(u.default,{label:"",primaryColor:(0,i.Z)("color.icon.accent.yellow",c.Z3),size:a}),"aria-label":I,"aria-pressed":!0}):o.createElement(v.m_,null,o.createElement(p.Z,{"data-id":"page-star-button","data-test-id":"page-star-button",spacing:S,appearance:"subtle",onClick:e,iconBefore:o.createElement(d.default,{label:"",size:a}),component:w,"aria-label":I,"aria-pressed":!1})))),E&&o.createElement(_.S,{accelerator:g.STAR_BUTTON_SHORTCUT,listener:e}))))};E.displayName="PageStarButtonComponent";const Z=(0,l.ZP)(E)},521713:(e,t,a)=>{a.d(t,{DY:()=>u,Fe:()=>d,_L:()=>p,vE:()=>m,cn:()=>f,m_:()=>_});var r=a(991332),n=a(415911),o=a(122551),s=a(358280),l=a(962285),i=a(612642),c=a(131436);a(809023),a(682433),a(826836),a(810502),a(215326),a(25586),a(726744),a(506840),a(803253),a(234119),a(371861),a(899283),a(744778),a(319272),a(456928),a(354326),a(187469),a(374914),a(814420);const u=(0,o.forwardRef)(((e,t)=>{let{as:a="div",style:l}=e,i=(0,n.Z)(e,["as","style"]);return o.createElement(a,(0,r.Z)((0,r.Z)({},i),{},{style:l,ref:t,className:(0,s.Z)(["_1dzqglyw",i.className])}))}));const d=(0,o.forwardRef)(((e,t)=>{let{as:a="div",style:l}=e,i=(0,n.Z)(e,["as","style"]);return o.createElement(a,(0,r.Z)((0,r.Z)({},i),{},{style:l,ref:t,className:(0,s.Z)(["_1e0cglyw _1dzq1ule",i.className])}))}));const p=(0,o.forwardRef)(((e,t)=>{let{as:a="button",style:c}=e,u=(0,n.Z)(e,["as","style"]);return o.createElement(a,(0,r.Z)((0,r.Z)({},u),{},{style:(0,r.Z)((0,r.Z)({},c),{},{"--_1k0ws82":(0,l.Z)((0,i.Z)("color.background.neutral.subtle","transparent")),"--_s9bzdf":(0,l.Z)((0,i.Z)("color.background.neutral.subtle.hovered","rgba(9, 30, 66, 0.08)"))}),ref:t,className:(0,s.Z)(["_1e0c1txw _4cvr1h6o _1bah1h6o _4t3izwfg _1bsbzwfg _19itglyw _2rko1l7b _11q7131e _80omtlke _19lc5qxx",u.className])}))}));const m=(0,o.forwardRef)(((e,t)=>{let{as:a="button",style:u}=e,d=(0,n.Z)(e,["as","style"]);return o.createElement(a,(0,r.Z)((0,r.Z)({},d),{},{style:(0,r.Z)((0,r.Z)({},u),{},{"--_1k0ws82":(0,l.Z)((0,i.Z)("color.background.neutral.subtle","transparent")),"--_s9bzdf":(0,l.Z)((0,i.Z)("color.background.neutral.subtle.hovered","rgba(9, 30, 66, 0.08)")),"--_9eu1jn":(0,l.Z)((0,i.Z)("color.text.subtle",c.Mx))}),ref:t,className:(0,s.Z)(["_1e0c1txw _4cvr1h6o _1bah1h6o _4t3izwfg _1bsbzwfg _19itglyw _2rko1l7b _11q7131e _80omtlke _19lc5qxx _syaz173l _1fh1sstu",d.className])}))}));const f=(0,o.forwardRef)(((e,t)=>{let{as:a="button",style:u}=e,d=(0,n.Z)(e,["as","style"]);return o.createElement(a,(0,r.Z)((0,r.Z)({},d),{},{style:(0,r.Z)((0,r.Z)({},u),{},{"--_nkpel":(0,l.Z)((0,i.Z)("color.text.subtlest",c.Bn)),"--_9eu1jn":(0,l.Z)((0,i.Z)("color.text.subtle",c.Mx))}),ref:t,className:(0,s.Z)(["_1t4p1rj9 _ll8psstu",d.className])}))}));const _=(0,o.forwardRef)(((e,t)=>{let{as:a="div",style:l}=e,i=(0,n.Z)(e,["as","style"]);return o.createElement(a,(0,r.Z)((0,r.Z)({},i),{},{style:l,ref:t,className:(0,s.Z)(["_bgrb1eg2 _yfoxkb7n",i.className])}))}))},698275:(e,t,a)=>{a.d(t,{L:()=>s});var r=a(122551),n=a(699239),o=a(961634);const s=(0,n.r)((({flags:e,title:t,description:a,error:n})=>((0,r.useEffect)((()=>{e.showErrorFlag({id:"action-button-error",title:t,description:a})}),[t,a,e]),r.createElement(o.X,{error:n}))))},406521:(e,t,a)=>{a.d(t,{r:()=>r});const r=a(122551).createContext(undefined);r.displayName="ExperienceContext"},994449:(e,t,a)=>{a.d(t,{D:()=>s});var r=a(122551),n=a(451379),o=a(406521);function s({name:e,error:t,attributes:a}){const s=(0,r.useContext)(o.r),l=(0,r.useContext)(n.F);return(0,r.useEffect)((()=>l.fail({name:e||s,error:t,attributes:a})),[l,e,s,t,a]),null}},148821:(e,t,a)=>{a.r(t),a.d(t,{FavouriteButton:()=>x});var r=a(122551),n=a(507080),o=a(780044),s=a(199319),l=a(990862),i=a(494609),c=a(526938),u=a(661315),d=a(940362),p=a(806297),m=a(170915),f=a(158466),_=a(991332),g=a(415911),v=a(358280),y=a(499082),b=a(994449),E=a(186483),Z=a(961634),h=a(259220),S=a(915934),w=a(414762),C=a(905657),P=a(187992);a(577544),a(123259),a(679928);const I=(0,r.forwardRef)(((e,t)=>{let{as:a=C.Z,style:n}=e,o=(0,g.Z)(e,["as","style"]);return r.createElement(a,(0,_.Z)((0,_.Z)({},o),{},{style:n,ref:t,className:(0,v.Z)(["_701w1ul9 _1yxxyh40 _w8sqyh40",o.className])}))}));const N=()=>r.createElement(u.u,{metricName:d.xl,isPlaceholder:!0},r.createElement(I,{"data-test-id":"page-favourite-button-placeholder",appearance:"subtle",iconBefore:r.createElement(P.default,{label:"StarIcon"}),isDisabled:!0}));N.displayName="FavouriteButtonPlaceholder";const R=a(331377).ZP`query FavouriteButtonQuery($contentId:ID!){singleContent(id:$contentId){id type metadata{currentuser{favourited{isFavourite}}}operations{operation targetType}}}`;var F=a(41036);a(183705);const M=(0,r.forwardRef)(((e,t)=>{let{as:a="div",style:n}=e,o=(0,g.Z)(e,["as","style"]);return r.createElement(a,(0,_.Z)((0,_.Z)({},o),{},{style:n,ref:t,className:(0,v.Z)(["_1ul91ul9",o.className])}))}));const T=({contentId:e,onRender:t})=>{var a,n,o,l,i,c;const{data:u,loading:d,error:p}=(0,y.aM)(R,{variables:{contentId:e},fetchPolicy:window.__SSR_RENDERED__?"cache-first":"cache-and-network"}),m=null==u||null===(a=u.singleContent)||void 0===a?void 0:a.type,f=Boolean(null==u||null===(n=u.singleContent)||void 0===n||null===(o=n.operations)||void 0===o?void 0:o.filter((e=>(null==e?void 0:e.targetType)===m&&"read"===(null==e?void 0:e.operation))).length);if((0,r.useEffect)((()=>{t&&u&&t()})),p)return r.createElement(r.Fragment,null,r.createElement(b.D,{name:s.p3J,error:p}),r.createElement(Z.X,{error:p}));if(!u&&d)return r.createElement(N,null);const _=Boolean(null==u||null===(l=u.singleContent)||void 0===l||null===(i=l.metadata.currentuser)||void 0===i||null===(c=i.favourited)||void 0===c?void 0:c.isFavourite);return r.createElement(r.Fragment,null,f&&r.createElement(M,null,r.createElement(S.z,{contentId:e,isStarred:_,shortcut:w.STAR_BUTTON_SHORTCUT,tooltipPosition:"bottom",analytics:{source:"FavouriteButton",attributes:{componentVersion:"v3",pageType:m}}})),r.createElement(E.F,{name:s.p3J,attributes:{isFavouritedByCurrentUser:_}}),r.createElement(h.M,{key:e,metric:F.Z,customData:{isVisible:f}}))},x=({contentId:e})=>{const{isLoggedIn:t}=(0,f.D)(),a=(0,r.useRef)(!1),_=(0,r.useRef)(),g=(0,r.useCallback)((()=>{!a.current&&_.current&&(a.current=!0,_.current(l.k.PAGE_FAVOURITE))}),[]);return t?r.createElement(p.S,{attribution:m.x.DISCO},r.createElement(c.q,{key:e,metric:F.Z}),r.createElement(o.U,{id:e,name:s.p3J}),r.createElement(n.xs,{to:[i.F]},(({addItem:t,markItem:a})=>(t(l.k.PAGE_FAVOURITE),_.current=a,r.createElement(u.u,{metricName:d.xl},r.createElement(T,{contentId:e,onRender:g})))))):null};x.displayName="FavouriteButton"},41036:(e,t,a)=>{a.d(t,{Z:()=>o});var r=a(172033),n=a(202049);const o=(0,r.is)({key:n.Fm,ssr:Boolean(window.__SSR_RENDERED__)?{doneAsFmp:!0}:void 0})},699239:(e,t,a)=>{a.d(t,{r:()=>i});var r=a(991332),n=a(29298),o=a(122551),s=a(507080),l=a(185346);function i(e){var t;return t=class extends o.Component{render(){return o.createElement(s.xs,{to:[l.Q]},(t=>o.createElement(e,(0,r.Z)((0,r.Z)({},this.props),{},{flags:t}))))}},(0,n.Z)(t,"displayName",`withFlags(${e.displayName||e.name})`),t}},141690:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,n=(r=a(122551))&&r.__esModule?r:{default:r},o=a(386056);const s=e=>n.default.createElement(o.Icon,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><path d="M12.072 17.284l-3.905 2.053a1 1 0 01-1.451-1.054l.745-4.349-3.159-3.08a1 1 0 01.554-1.705l4.366-.635 1.953-3.956a1 1 0 011.794 0l1.952 3.956 4.366.635a1 1 0 01.555 1.705l-3.16 3.08.746 4.349a1 1 0 01-1.45 1.054l-3.906-2.053z" fill="currentColor" fill-rule="evenodd"/></svg>'},e));s.displayName="StarFilledIcon";var l=s;t.default=l},187992:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,n=(r=a(122551))&&r.__esModule?r:{default:r},o=a(386056);const s=e=>n.default.createElement(o.Icon,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><path d="M12 16.373l3.98 2.193-.76-4.655 3.276-3.347-4.524-.69L12 5.687l-1.972 4.189-4.524.689L8.78 13.91l-.762 4.655L12 16.373zm0 2.283l-3.016 1.662a2 2 0 01-2.939-2.075l.599-3.656-2.57-2.624a2 2 0 011.129-3.377l3.47-.528 1.518-3.224a2 2 0 013.618 0l1.519 3.224 3.47.528a2 2 0 011.127 3.377l-2.569 2.624.599 3.656a2 2 0 01-2.94 2.075L12 18.656z" fill="currentColor"/></svg>'},e));s.displayName="StarIcon";var l=s;t.default=l}}]);
//# sourceMappingURL=73088.9dt2iAs57s.js.map