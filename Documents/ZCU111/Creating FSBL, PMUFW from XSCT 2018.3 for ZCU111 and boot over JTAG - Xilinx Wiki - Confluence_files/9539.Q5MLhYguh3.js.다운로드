(self._cf=self._cf||[]).push([[9539],{505198:(t,e,n)=>{"use strict";n.r(e),n.d(e,{RendererContentState:()=>m,RendererContentStateImpl:()=>f});var s=n(122551),r=n(499082),c=n(801683),a=n(170915),o=n(590726),i=n(90995),u=n(745454),h=n(968889);let l;!function(t){t.GLOBAL="GLOBAL",t.MILLIS="MILLIS",t.USER="USER",t.USER_FRIENDLY="USER_FRIENDLY"}(l||(l={}));const d=n(331377).ZP`query RendererContentState($contentId:ID!$isDraft:Boolean!$format:GraphQLDateFormat){singleContent(id:$contentId){id contentState(isDraft:$isDraft){id name color}contentStateLastUpdated(format:$format){value}}}`,f=({contentId:t,isPagePreview:e,hasSeparator:n})=>{var c,a,f;const{data:m,refetch:v}=(0,r.aM)(d,{fetchPolicy:"cache-and-network",variables:{contentId:t,isDraft:e,format:l.USER_FRIENDLY}});if(!m)return null;const b=null==m||null===(c=m.singleContent)||void 0===c||null===(a=c.contentStateLastUpdated)||void 0===a?void 0:a.value,E=null==m||null===(f=m.singleContent)||void 0===f?void 0:f.contentState;return s.createElement(s.Fragment,null,E&&s.createElement(h.R,{contentId:t,contentState:E,lastUpdatedInfo:b,isPagePreview:e,hasSeparator:n}),s.createElement(o.h,{name:"content-state",types:[i.ai.content],reload:v}),s.createElement(u.h,{event:"reload-content",contentId:t,callback:async()=>{await v()}}))};f.displayName="RendererContentStateImpl";const m=(0,c.m)({attribution:a.x.CONTENT_EXPERIENCE})(f)},735499:(t,e,n)=>{"use strict";n.d(e,{Nd:()=>o,dx:()=>i});var s=n(29298);class r{constructor(t){(0,s.Z)(this,"_cache",void 0),this._cache=t||{}}get data(){return this._cache}get(t){return this._cache[t]}has(t){return this._cache.hasOwnProperty(t)}set(t,e){this._cache[t]=e}delete(t){delete this._cache[t]}get keys(){return Object.keys(this._cache)}get values(){return Object.values(this._cache)}clear(){this._cache={}}}class c{constructor(){(0,s.Z)(this,"incrementor",-1)}ID(){return(++this.incrementor).toString()}reset(){this.incrementor=-1}}class a extends Map{constructor(...t){super(...t),(0,s.Z)(this,"IDs",new c)}subscribe(t){const e=this.IDs.ID();return this.set(e,t),e}unsubscribe(t){this.delete(t)}async dispatch(t){for(const[e,n]of this)await Promise.resolve(n(...t))}}class o extends Map{constructor(t){super(),(0,s.Z)(this,"enableCache",!1),(0,s.Z)(this,"Cache",new r),t&&(this.enableCache=!0)}async stream(t){if(!t.length)return;const e={};for(const n of t)n.type in e?e[n.type].push(n):e[n.type]=[n],this.cache(n.type,n);await Promise.all(Object.keys(e).map((t=>this.dispatch(t,e[t]))))}on(t,e){const n=this.get(t)||new a,s=n.subscribe(e);return this.set(t,n),s}off(t,e){const n=this.get(t);n&&(n.unsubscribe(e),0===n.size&&this.delete(t))}async dispatch(t,...e){const n=this.get(t);n&&await n.dispatch(e)}cache(t,e){if(!this.enableCache)return;const n=this.Cache.get(t)||[];n.push(e),this.Cache.set(t,n)}}class i{constructor(t,e){(0,s.Z)(this,"type",void 0),(0,s.Z)(this,"Bus",void 0),(0,s.Z)(this,"listener",void 0),this.Bus=e,this.type=t}register(t){this.listener=this.Bus.on(this.type,t)}unregister(){this.listener&&this.Bus.off(this.type,this.listener)}}},259873:(t,e,n)=>{"use strict";n.d(e,{EventBus:()=>r.Nd,EventBusSubscriber:()=>r.dx});var s=n(579868);n.o(s,"EventBus")&&n.d(e,{EventBus:function(){return s.EventBus}}),n.o(s,"EventBusSubscriber")&&n.d(e,{EventBusSubscriber:function(){return s.EventBusSubscriber}});var r=n(735499)},579868:(t,e,n)=>{"use strict";var s=n(631748);n.o(s,"EventBus")&&n.d(e,{EventBus:function(){return s.EventBus}}),n.o(s,"EventBusSubscriber")&&n.d(e,{EventBusSubscriber:function(){return s.EventBusSubscriber}})},631748:()=>{},758105:(t,e,n)=>{"use strict";n.d(e,{U:()=>s});const s=new(n(259873).EventBus)},745454:(t,e,n)=>{"use strict";n.d(e,{h:()=>r});var s=n(812949);const r=t=>((0,s.k)(t),null)},812949:(t,e,n)=>{"use strict";n.d(e,{k:()=>c});var s=n(122551),r=n(758105);const c=({event:t,callback:e,contentId:n})=>{(0,s.useEffect)((()=>{const s=r.U.on(t,(async s=>{for(const a of s)if(a.contentId===n)try{await e(s);break}catch(c){r.U.stream([{type:"reload-error",event:t}])}}));return()=>r.U.off(t,s)}),[t,n])}},90995:(t,e,n)=>{"use strict";n.d(e,{ai:()=>c,GL:()=>a,qC:()=>i,yc:()=>u});var s=n(991332),r=n(122551);let c,a;!function(t){t.content="content",t.comment="comment"}(c||(c={})),function(t){t[t.immediate=0]="immediate",t[t.normal=1]="normal",t[t.background=2]="background"}(a||(a={}));const o=async(t,e,n,s)=>{const r=Object.keys(t).reduce(((e,n)=>{const s=t[n],r=Number(s.priority||a.immediate);return e[r]?e[r].push(s):e[r]=[s],e}),[]);for(const c of r){const t=n.current===e;if(c&&t){const t=c.map((t=>t.reload(s)));await Promise.all(t)}}},i=r.createContext({registerReloader:()=>{},reloaders:{[c.content]:async()=>{},[c.comment]:async()=>{}}}),u=(0,r.memo)((({contentId:t,children:e})=>{const n=(0,r.useRef)(t),a=(0,r.useRef)(!1),[u,h]=(0,r.useState)({}),[l,d]=(0,r.useState)({});(0,r.useLayoutEffect)((()=>()=>{a.current=!0}),[]),(0,r.useLayoutEffect)((()=>(n.current=t,()=>{a.current||(h({}),d({}))})),[t]);const f=(0,r.useCallback)((t=>{t.types.forEach((e=>{(e===c.comment?d:h)((e=>(0,s.Z)((0,s.Z)({},e),{},{[t.name]:t})))}))}),[h,d]),m=(0,r.useMemo)((()=>({contentId:t,registerReloader:f,reloaders:{[c.content]:e=>o(u,t,n,e),[c.comment]:e=>o(l,t,n,e)}})),[t,f,u,l]);return r.createElement(i.Provider,{value:m},e)}))},590726:(t,e,n)=>{"use strict";n.d(e,{h:()=>r});var s=n(602722);const r=t=>((0,s.t)(t),null)},602722:(t,e,n)=>{"use strict";n.d(e,{t:()=>c});var s=n(122551),r=n(90995);const c=t=>{const{contentId:e,registerReloader:n}=(0,s.useContext)(r.qC);(0,s.useEffect)((()=>{n(t)}),[e,t.reload,t.name])}}}]);
//# sourceMappingURL=9539.Q5MLhYguh3.js.map