WRMCB=function(e){var c=console;if(c&&c.log&&c.error){c.log('Error running batched script.');c.error(e);}}
;
try {
/* module-key = 'confluence.web.resources:linkpopup-resources', location = 'includes/js/linkpage.js' */
define("confluence/linkpage",["ajs","jquery","confluence-keyboard-shortcuts/confluence-keyboard-shortcuts","skate","aui/flag"],function(b,c,f,g,m){var d=null,n=function(a,e){d=(new b.Dialog(600,225,"link-page-popup")).addHeader("Link to this Page").addPanel("Link to this Page","\x3cform id\x3d'link-page-popup-form' class\x3d'aui'\x3e\x3cfieldset\x3e\x3c/fieldset\x3e\x3c/form\x3e").addCancel("Close",function(a){d.hide();return!1});
f.keyboardShortcuts&&f.keyboardShortcuts.enabled&&d.addHelpText(b.format("Shortcut tip: Pressing \u003cb\u003e{0}\u003c/b\u003e also opens this dialog box","k"));a=[{label:"Link",id:"link",value:a},{label:"Tiny Link",id:"tiny-link",value:e}];c.each(a,function(){c("#link-page-popup-form fieldset").append(b.format("\x3cdiv class\x3d'field-group'\x3e\x3clabel for\x3d''link-popup-field-{0}''\x3e{1}:\x3c/label\x3e\x3cinput id\x3d''link-popup-field-{0}'' readonly\x3d''readonly'' value\x3d'''' class\x3d''text'' type\x3d''text''\x3e\x3c/div\x3e",
this.id,this.label)).find("input:last").val(this.value)});a=c("#link-page-popup-form fieldset input.text");a.focus(function(){c(this).select()});a.mouseup(function(a){a.preventDefault()})},h=function(){m({type:"error",body:"There was an error communicating with the server, please try again later.",close:"auto"})},k=function(a,b){d||n(a,b);var c=d.popup.element.find("#link-popup-field-link"),e=d.popup.element.find("#link-popup-field-tiny-link");c.val(a);e.val(b);d.show();e.select()},l=function(a){a.preventDefault();a=c("link[rel\x3dcanonical]").attr("href");
var d=c("link[rel\x3dshortlink]").attr("href");a&&d?k(a,d):c.ajax({type:"GET",dataType:"json",url:b.contextPath()+"/rest/api/content/"+b.Meta.get("page-id"),error:function(){h()},success:function(a){if(a||a._links){var c=b.Meta.get("base-url")+a._links.webui;a=b.Meta.get("base-url")+a._links.tinyui;k(c,a)}else h()}})};return{init:function(){g("action-link-page",{type:g.types.CLASS,attached:function(a){c(a).on("click",l)},detached:function(a){c(a).off("click",l)}})}}});
require("confluence/module-exporter").safeRequire("confluence/linkpage",function(b){b.init()});
}catch(e){WRMCB(e)};