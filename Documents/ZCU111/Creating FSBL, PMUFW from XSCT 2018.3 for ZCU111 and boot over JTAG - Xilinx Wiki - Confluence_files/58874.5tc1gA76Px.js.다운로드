(self._cf=self._cf||[]).push([[58874],{778758:e=>{e.exports=function(e){return e.split("")}},885909:e=>{var t=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;e.exports=function(e){return e.match(t)||[]}},138671:e=>{e.exports=function(e){return function(t){return null==e?void 0:e[t]}}},863565:(e,t,r)=>{var n=r(370245);e.exports=function(e,t,r){var o=e.length;return r=void 0===r?o:r,!t&&r>=o?e:n(e,t,r)}},196394:(e,t,r)=>{var n=r(863565),o=r(809433),a=r(479697),i=r(277255);e.exports=function(e){return function(t){t=i(t);var r=o(t)?a(t):void 0,s=r?r[0]:t.charAt(0),l=r?n(r,1).join(""):t.slice(1);return s[e]()+l}}},754429:(e,t,r)=>{var n=r(330472),o=r(894),a=r(155355),i=RegExp("['’]","g");e.exports=function(e){return function(t){return n(a(o(t).replace(i,"")),e,"")}}},178204:(e,t,r)=>{var n=r(138671)({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"});e.exports=n},809433:e=>{var t=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return t.test(e)}},423448:e=>{var t=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;e.exports=function(e){return t.test(e)}},479697:(e,t,r)=>{var n=r(778758),o=r(809433),a=r(977545);e.exports=function(e){return o(e)?a(e):n(e)}},977545:e=>{var t="[\\ud800-\\udfff]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",n="\\ud83c[\\udffb-\\udfff]",o="[^\\ud800-\\udfff]",a="(?:\\ud83c[\\udde6-\\uddff]){2}",i="[\\ud800-\\udbff][\\udc00-\\udfff]",s="(?:"+r+"|"+n+")"+"?",l="[\\ufe0e\\ufe0f]?",c=l+s+("(?:\\u200d(?:"+[o,a,i].join("|")+")"+l+s+")*"),d="(?:"+[o+r+"?",r,a,i,t].join("|")+")",u=RegExp(n+"(?="+n+")|"+d+c,"g");e.exports=function(e){return e.match(u)||[]}},618062:e=>{var t="\\u2700-\\u27bf",r="a-z\\xdf-\\xf6\\xf8-\\xff",n="A-Z\\xc0-\\xd6\\xd8-\\xde",o="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",a="["+o+"]",i="\\d+",s="[\\u2700-\\u27bf]",l="["+r+"]",c="[^\\ud800-\\udfff"+o+i+t+r+n+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",u="[\\ud800-\\udbff][\\udc00-\\udfff]",f="["+n+"]",h="(?:"+l+"|"+c+")",p="(?:"+f+"|"+c+")",m="(?:['’](?:d|ll|m|re|s|t|ve))?",v="(?:['’](?:D|LL|M|RE|S|T|VE))?",g="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",y="[\\ufe0e\\ufe0f]?",I=y+g+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",d,u].join("|")+")"+y+g+")*"),w="(?:"+[s,d,u].join("|")+")"+I,b=RegExp([f+"?"+l+"+"+m+"(?="+[a,f,"$"].join("|")+")",p+"+"+v+"(?="+[a,f+h,"$"].join("|")+")",f+"?"+h+"+"+m,f+"+"+v,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",i,w].join("|"),"g");e.exports=function(e){return e.match(b)||[]}},435020:(e,t,r)=>{var n=r(430721),o=r(754429)((function(e,t,r){return t=t.toLowerCase(),e+(r?n(t):t)}));e.exports=o},430721:(e,t,r)=>{var n=r(277255),o=r(807563);e.exports=function(e){return o(n(e).toLowerCase())}},894:(e,t,r)=>{var n=r(178204),o=r(277255),a=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,i=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");e.exports=function(e){return(e=o(e))&&e.replace(a,n).replace(i,"")}},807563:(e,t,r)=>{var n=r(196394)("toUpperCase");e.exports=n},155355:(e,t,r)=>{var n=r(885909),o=r(423448),a=r(277255),i=r(618062);e.exports=function(e,t,r){return e=a(e),void 0===(t=r?void 0:t)?o(e)?i(e):n(e):e.match(t)||[]}},608259:function(e,t){!function(e){const t=Symbol("newer"),r=Symbol("older");class n{constructor(e,t){"number"!=typeof e&&(t=e,e=0),this.size=0,this.limit=e,this.oldest=this.newest=void 0,this._keymap=new Map,t&&(this.assign(t),e<1&&(this.limit=this.size))}_markEntryAsUsed(e){e!==this.newest&&(e[t]&&(e===this.oldest&&(this.oldest=e[t]),e[t][r]=e[r]),e[r]&&(e[r][t]=e[t]),e[t]=void 0,e[r]=this.newest,this.newest&&(this.newest[t]=e),this.newest=e)}assign(e){let n,a=this.limit||Number.MAX_VALUE;this._keymap.clear();let i=e[Symbol.iterator]();for(let s=i.next();!s.done;s=i.next()){let e=new o(s.value[0],s.value[1]);if(this._keymap.set(e.key,e),n?(n[t]=e,e[r]=n):this.oldest=e,n=e,0==a--)throw new Error("overflow")}this.newest=n,this.size=this._keymap.size}get(e){var t=this._keymap.get(e);return t?(this._markEntryAsUsed(t),t.value):void 0}set(e,n){var a=this._keymap.get(e);return a?(a.value=n,this._markEntryAsUsed(a),this):(this._keymap.set(e,a=new o(e,n)),this.newest?(this.newest[t]=a,a[r]=this.newest):this.oldest=a,this.newest=a,++this.size,this.size>this.limit&&this.shift(),this)}shift(){var e=this.oldest;if(e)return this.oldest[t]?(this.oldest=this.oldest[t],this.oldest[r]=void 0):(this.oldest=void 0,this.newest=void 0),e[t]=e[r]=void 0,this._keymap.delete(e.key),--this.size,[e.key,e.value]}find(e){let t=this._keymap.get(e);return t?t.value:void 0}has(e){return this._keymap.has(e)}delete(e){var n=this._keymap.get(e);return n?(this._keymap.delete(n.key),n[t]&&n[r]?(n[r][t]=n[t],n[t][r]=n[r]):n[t]?(n[t][r]=void 0,this.oldest=n[t]):n[r]?(n[r][t]=void 0,this.newest=n[r]):this.oldest=this.newest=void 0,this.size--,n.value):void 0}clear(){this.oldest=this.newest=void 0,this.size=0,this._keymap.clear()}keys(){return new i(this.oldest)}values(){return new s(this.oldest)}entries(){return this}[Symbol.iterator](){return new a(this.oldest)}forEach(e,r){"object"!=typeof r&&(r=this);let n=this.oldest;for(;n;)e.call(r,n.value,n.key,this),n=n[t]}toJSON(){for(var e=new Array(this.size),r=0,n=this.oldest;n;)e[r++]={key:n.key,value:n.value},n=n[t];return e}toString(){for(var e="",r=this.oldest;r;)e+=String(r.key)+":"+r.value,(r=r[t])&&(e+=" < ");return e}}function o(e,n){this.key=e,this.value=n,this[t]=void 0,this[r]=void 0}function a(e){this.entry=e}function i(e){this.entry=e}function s(e){this.entry=e}e.LRUMap=n,a.prototype[Symbol.iterator]=function(){return this},a.prototype.next=function(){let e=this.entry;return e?(this.entry=e[t],{done:!1,value:[e.key,e.value]}):{done:!0,value:void 0}},i.prototype[Symbol.iterator]=function(){return this},i.prototype.next=function(){let e=this.entry;return e?(this.entry=e[t],{done:!1,value:e.key}):{done:!0,value:void 0}},s.prototype[Symbol.iterator]=function(){return this},s.prototype.next=function(){let e=this.entry;return e?(this.entry=e[t],{done:!1,value:e.value}):{done:!0,value:void 0}}}(t)},93375:(e,t,r)=>{"use strict";r.d(t,{J:()=>ie});var n=r(991332),o=r(122551),a=r(507080),i=r(185346),s=r(409150),l=r(984348),c=r(755295),d=r(415911),u=r(524798),f=r(976701),h=r(987359),p=r(476530),m=r(633079),v=r(388571),g=r(17786),y=r(158466),I=r(432399),w=r(616158),b=r(863305),k=r(861635),E=r(987528),S=r(333125),x=r(853556),C=r(917465),T=r(661013),_=r(772610),P=r(977421),Z=r(89557),$=r(95221);const A="confluence.frontend.emoji.ssr.renderer",j="confluence.frontend.emoji.ssr.renderer.guest.users",R=(e,t={})=>{var r,o,a,i;const s=!!window.__SSR_RENDERED__,l=!!t[A],c=!e.isLicensed||!e.isLoggedIn,d=!!t[j],u=null!==(r=null==e?void 0:e.cloudId)&&void 0!==r?r:"",f=null!==(o=null==e?void 0:e.userId)&&void 0!==o?o:void 0,h=null==e?void 0:e.disableUpload,p=null!==(a=null==e?void 0:e.emojiSSRConfig)&&void 0!==a?a:{},m=null!==(i=null==e?void 0:e.source)&&void 0!==i?i:"VIEW",v=(e=>{const{isSSR:t,isSSRFeatureEnabled:r,hasCloudId:n,isGuestFeatureEnabled:o,isGuestUser:a}=e;return!(!(t&&r&&n)||a&&(!o||!a))})({isSSR:s,isSSRFeatureEnabled:l,hasCloudId:!!u,isGuestFeatureEnabled:d,isGuestUser:c}),g=v?(0,n.Z)({optimisticImageApi:{getUrl:e=>`/gateway/api/emoji/${u}/${e.id}/path`}},p):void 0;return(0,n.Z)({cloudId:u,userId:f,disableUpload:h,source:m},v&&{emojiSSRConfig:g})};var N=r(797370),U=r(157265),D=r(704932),M=r(79551),F=r(849238),O=r(81754),H=r(273522);r(91745);const L="mediaProvider unavailable, must use initialAuth",K=({contentId:e,isExternalShare:t,mediaToken:r})=>async n=>{if(e){const{viewMediaClientConfig:o}=await(0,U.Pp)({contentId:e,isExternalShare:t,mediaToken:r});return o.authProvider(n)}throw new Error(L)},z=e=>{if(window.__SSR_RENDERED__)return(e=>({mode:"client",config:{authProvider:K(e),initialAuth:window.__MEDIA_CONFIG__}}))(e)};var B=r(580441),q=r(579849),V=r(831388),W=r(242517),Q=r(323083),G=r(637446),J=r(401012),X=r(235950),Y=r(693552),ee=r(961634),te=r(443033),re=r(315677),ne=r(643375);var oe=r(490777);(0,w.j)("ADFRenderer");const ae=(0,o.memo)((e=>{const{document:t,dataProviders:r,extensionHandlers:a={},getExtensionHandlers:i=(()=>({})),eventHandlers:s,appearance:l="default",adfStage:c="stage0",portal:w,onComplete:L,onRendered:K,renderWhenReady:ae,allowStickyHeaders:ie=!0,allowPlaceholderText:se=!1,isTruncatedContent:le,maxHeight:ce,fadeOutHeight:de,flags:ue,offsetTop:fe,mediaToken:he}=e,pe=(0,d.Z)(e,["document","dataProviders","extensionHandlers","getExtensionHandlers","eventHandlers","appearance","adfStage","portal","onComplete","onRendered","renderWhenReady","allowStickyHeaders","allowPlaceholderText","isTruncatedContent","maxHeight","fadeOutHeight","flags","offsetTop","mediaToken"]),me=(0,u.Z)(),ve=window.__SSR_SMARTLINKS__,ge=(0,X.xQ)(),ye=(0,X.r6)(ve,ge),Ie=ge&&!(0,g.O)(),{cloudId:we,userId:be,featureFlagClient:ke,featureFlags:Ee,isLicensed:Se,isLoggedIn:xe}=(0,y.D)(),{spaceKey:Ce,contentId:Te}=(0,o.useContext)(Z.z1),{openCoreInvites:_e,userRole:Pe}=(0,o.useContext)(q.l),[Ze,$e]=(0,o.useState)(!1),Ae=e.contentId||Te,{canViewUserProfile:je,error:Re}=(0,W.t)(),Ne=(0,I.Z)("confluence.frontend.task.batching.interval",3e3),Ue=(0,o.useRef)(new O.u(Ne)),De=(0,b.M)(),Me=(0,o.useCallback)((e=>{((e,t)=>{const r={contentId:e,tasks:t.map((e=>{const{objectKey:t,state:r}=e,n="DONE"===r?"CHECKED":"UNCHECKED";return{taskId:t.localId,status:n}})),trigger:"VIEW_PAGE"};return(0,re.WQ)().mutate({mutation:ne.u,variables:r}).catch((e=>{(0,te.getAnalyticsWebClient)().then((t=>{t.sendOperationalEvent({source:"page",action:"batchTaskUpdate",actionSubject:"checkbox",attributes:{error:e.message||String(e),stack:e.stack}})}))}))})(Ae,e).then((()=>$e(!0)))}),[Ae,$e]),Fe=(0,o.useCallback)(((e,t)=>{Ue.current.add({objectKey:e,state:t})}),[Ue]);(0,o.useEffect)((()=>(t&&(0,oe.a)(),K&&K(),Ue.current.onFlush(Me),()=>{t&&(0,oe.X)()})),[Ae,Ue,Me]);(0,o.useEffect)((()=>{$e(!1)}),[Ae]);const Oe=(0,o.useMemo)((()=>{if(we)return R({cloudId:we,userId:be,isLicensed:Se,isLoggedIn:xe},{[A]:ke.getBooleanValue(A,{default:!1}),[j]:ke.getBooleanValue(j,{default:!1})})}),[we,be,Se,xe,ke]),He=(0,o.useMemo)((()=>{if(Oe)return(0,B.bJ)(Oe.cloudId,Oe.userId,Oe.disableUpload,Oe.emojiSSRConfig)}),[Oe]),{isExternalShareRequest:Le}=(0,o.useContext)(V.k),{push:Ke}=(0,o.useContext)(_.M);let ze=a;i&&(ze=Object.assign(i(),a)),ke.getBooleanValue(T.mE,{default:!1})||(ze=(0,n.Z)((0,n.Z)({},ze),(0,N.d)()));const Be="mobile"!==l&&ie,{shimAdfUrls:qe}=(0,P.f)(),Ve=(0,J.L)(),We=(0,Y.J)("renderer"),Qe=(0,o.useCallback)((e=>{L&&L(e)}),[L]);if(!t)return null;const Ge=(({hasViewUserProfilePermission:e,handleProfileCardActions:t,handleActionToggle:r,handleInviteItemClick:n,getDataProviders:o,providerFactory:a,isExternalShare:i,contentId:s,spaceKey:l,push:c,cloudId:d,userId:u,userRole:f,flags:p,featureFlags:g,intl:y,mediaToken:I,emojiResourceParams:w})=>{const b={};if(o&&Object.assign(b,o()),(s||I)&&(b.mediaProvider=(0,U.Pp)({contentId:s,isExternalShare:i,mediaToken:I}),b.taskDecisionProvider=Promise.resolve(new D.Y(y,p,s,r))),d&&u&&(b.mentionProvider=(0,M.Z)(d,u,void 0,void 0,n,f).then((e=>e.mentionResource)).catch((e=>Promise.reject()))),w&&d&&(b.emojiProvider=(0,B.T5)(m.ZP,w)),d&&e&&(b.profilecardProvider=(0,F.t)(d,t(c,u),g)),s&&l&&(b.contextIdentifierProvider=Promise.resolve({containerId:l,objectId:s,product:"confluence"})),b.cardProvider=Promise.resolve(new h.V),Object.keys(b).length){a=a||v.Z.create({});for(const e of Object.keys(b))a.setProvider(e,b[e])}return a})({contentId:Ae,spaceKey:Ce,cloudId:we,userId:be,flags:ue,featureFlags:Ee,push:Ke,intl:me,providerFactory:r,isExternalShare:Le,handleActionToggle:Fe,handleProfileCardActions:(e,t)=>r=>{var n;const a=(0,k.p)(r,null,C.b),i=!(!r||null==De||null===(n=De.followedUsers)||void 0===n||!n.includes(r));return[{label:me.formatMessage({id:"view.profile"}),callback:()=>{e((0,k.p)(r,null,C.b))},link:a},{label:o.createElement(E.w,{followed:i}),id:"feed-follow-user",callback:De.getToggleFollowUser(r,i,"adf-renderer"),shouldRender:e=>De.renderFeedFollow&&Boolean(r)&&r!==t&&"active"===(null==e?void 0:e.status)}]},hasViewUserProfilePermission:je,handleInviteItemClick:_e,userRole:Pe,mediaToken:he,emojiResourceParams:Oe}),Je=qe(t);return o.createElement(p.G,(0,n.Z)((0,n.Z)((0,n.Z)({},(0,$.z)()),ye),{},{featureFlags:We}),("full-page"===l||"full-width"===l)&&o.createElement(Q.D,{"data-testid":"pageLoadMarkTestId",name:"onBeforeAkRenderer"}),o.createElement(G.A,{featureFlags:Ee,objectId:Ae},o.createElement(f.ZP,(0,n.Z)((0,n.Z)({enableSsrInlineScripts:Boolean(!1),adfStage:c,document:Je,appearance:l,stickyHeaders:Be&&{offsetTop:fe},extensionHandlers:ze,eventHandlers:s,featureFlags:Ve,dataProviders:Ge,portal:w,onComplete:Qe,allowColumnSorting:!0,allowHeadingAnchorLinks:{allowNestedHeaderLinks:!0,activeHeadingId:e.queryHash},allowAltTextOnImages:!0,media:{allowLinking:!0,featureFlags:(0,H.N)(Ee),ssr:z({contentId:Ae,isExternalShare:Le,mediaToken:he})},emojiResourceConfig:He,allowCopyToClipboard:!0},pe),{},{useSpecBasedValidator:!0,truncated:le,maxHeight:ce,fadeOutHeight:de,analyticsEventSeverityTracking:(e=>{if(!e)return;const t=e["confluence.frontend.fabric.renderer.ttr-severity-tracking"];if("string"==typeof t)try{return JSON.parse(t)}catch(r){0}})(Ee),unsupportedContentLevelsTracking:(e=>{if(!e)return;const t=e["confluence.frontend.fabric.renderer.unsupported-content-levels-tracking"];if("string"==typeof t)try{return JSON.parse(t)}catch(r){0}})(Ee),allowPlaceholderText:se,allowCustomPanels:!0,smartLinks:{ssr:Ie}})),ae&&ae()),o.createElement(x.N,{contentId:Ae,shouldRefetch:Ze}),Re&&o.createElement(ee.X,{error:Re}),o.createElement(S.K,{feedConfigError:De.feedConfigError,mutationError:De.mutationError,showErrorFlag:!0}))})),ie=(0,o.memo)((e=>{const{includeTopNav:t}=(0,o.useContext)(s.D);return o.createElement(a.xs,{to:[i.Q,l.S,c.f]},((r,a,i)=>{const s=a.getTotalHeight({includeTopNav:t})+i.getFloatingHeight();return o.createElement(ae,(0,n.Z)({flags:r,offsetTop:s},e))}))}));ie.displayName="ADFRenderer"},490777:(e,t,r)=>{"use strict";r.d(t,{a:()=>s,X:()=>l});var n=r(700406);const o=new Map,a=e=>{if(!e.isUserCollection){return o.get(null==e?void 0:e.fileId)||(()=>{const t=fetch("/wiki/rest/internal/1.0/eventnotifier/notify",{method:"POST",body:JSON.stringify({attachmentViewed:{fileStoreId:e.fileId}}),headers:{"Content-Type":"application/json"}});var r,n;return r=e.fileId,n=t,o.set(r,n)&&setTimeout((()=>o.delete(r)),3e3),t})()}};let i=!1;const s=()=>{i||(n.h.on("media-viewed",a),i=!0)},l=()=>{n.h.off("media-viewed",a),i=!1}},661013:(e,t,r)=>{"use strict";r.d(t,{mE:()=>n,r9:()=>o,AD:()=>a});const n="confluence.frontend.editor.referentiality2",o="confluence.frontend.referentiality.connections-panel",a="confluence.frontend.ecosystem.insert.fragment-mark"},323083:(e,t,r)=>{"use strict";r.d(t,{D:()=>a});var n=r(122551),o=r(257848);const a=({name:e})=>{const t=o.n.getPageLoadMetric();return(0,n.useEffect)((()=>{t.mark(e)}),[t,e]),null}},927191:(e,t,r)=>{"use strict";r.d(t,{p:()=>n});const n=e=>{e=e.replace(/[,$%]/g,"");const t=Number(e);return Number.isNaN(t)?null:t}},797370:(e,t,r)=>{"use strict";r.d(t,{d:()=>g});var n=r(122551),o=r(806297),a=r(170915),i=r(991332),s=r(415911),l=r(962285),c=r(358280),d=r(28201);r(421988),r(544402);const u=(0,n.forwardRef)(((e,t)=>{let{as:r="div",style:o}=e,a=(0,s.Z)(e,["as","style"]);return n.createElement(r,(0,i.Z)((0,i.Z)({},a),{},{style:(0,i.Z)((0,i.Z)({},o),{},{"--_17kpc20":(0,l.Z)(a.height,"px")}),ref:t,className:(0,c.Z)(["",a.height?"_4t3ilqd0":"_4t3i1wug",a.className])}))}));const f=e=>{var t,r,o;const a=e.height||(null===(t=e.chartGroup)||void 0===t||null===(r=t.customizeTab)||void 0===r||null===(o=r.styleField)||void 0===o?void 0:o.height);return n.createElement(u,{height:Number(a)||350})};f.displayName="ChartPlaceholder";const h=(0,d.ZR)({__loadable_id__:"TP8Y6",name:"Chart",loader:async()=>(await Promise.all([r.e(78248),r.e(54936),r.e(11216),r.e(52364),r.e(1235),r.e(41232),r.e(50715),r.e(59418)]).then(r.bind(r,930717))).Chart,loading:f});var p=r(927191);function m(e,t){let r=t(e);if(r)return r;if(Array.isArray(e.content))for(const n of e.content)if(n&&(r=m(n,t),r))return r;return null}const v=(e,t)=>{const r=m(t,(t=>{if(t.attrs&&e.localId&&e.localId===t.attrs.localId)return t}));if(!r)return n.createElement(h,(0,i.Z)((0,i.Z)({},e.parameters),{},{data:null}));let o=null;const a=(r.marks||[]).find((e=>"dataConsumer"===e.type));var s,l;a&&(null!=a&&null!==(s=a.attrs)&&void 0!==s&&null!==(l=s.sources)&&void 0!==l&&l.length&&(o=a.attrs.sources[0]));const c=m(t,(e=>{if(e.attrs&&e.attrs.localId===o)return e}));return n.createElement(h,(0,i.Z)((0,i.Z)({},e.parameters),{},{data:c,parseNumber:p.p}))};v.displayName="extensionHandlerRenderer";const g=()=>{const e={"com.atlassian.chart":(...e)=>n.createElement(o.S,{attribution:a.x.CONTENT_EXPERIENCE},v(...e))};return e}},853556:(e,t,r)=>{"use strict";r.d(t,{N:()=>l});var n=r(122551),o=r(222690),a=r(354323),i=r(315677),s=r(772610);const l=({contentId:e,shouldRefetch:t})=>{const{history:r}=(0,n.useContext)(s.M),l=(0,a.u)(),c=(0,o.M)();return(0,n.useEffect)((()=>{let n;return t&&e&&(n=null==r?void 0:r.listen((async()=>{try{await(0,i.WQ)().query({query:c,context:{single:!0},fetchPolicy:"network-only",variables:{contentId:e,spaceKey:l}})}catch(t){}}))),()=>{n&&n()}}),[t]),null}},235950:(e,t,r)=>{"use strict";r.d(t,{xQ:()=>o,r6:()=>a});var n=r(122551);const o=()=>Boolean(window.__SSR_RENDERED__),a=(e,t)=>(0,n.useMemo)((()=>e&&t?{storeOptions:{initialState:e}}:{}),[e,t])},758724:(e,t,r)=>{"use strict";r.d(t,{ac:()=>h,Uh:()=>d,Tn:()=>f});var n=r(930769),o=r(520607),a=r(515819);function i(){i=function(e,t){return new r(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function r(e,n,a){var i=new RegExp(e,n);return t.set(i,a||t.get(e)),(0,o.Z)(i,r.prototype)}function s(e,r){var n=t.get(r);return Object.keys(n).reduce((function(t,r){var o=n[r];if("number"==typeof o)t[r]=e[o];else{for(var a=0;void 0===e[o[a]]&&a+1<o.length;)a++;t[r]=e[o[a]]}return t}),Object.create(null))}return(0,a.Z)(r,RegExp),r.prototype.exec=function(t){var r=e.exec.call(this,t);if(r){r.groups=s(r,this);var n=r.indices;n&&(n.groups=s(n,this))}return r},r.prototype[Symbol.replace]=function(r,o){if("string"==typeof o){var a=t.get(this);return e[Symbol.replace].call(this,r,o.replace(/\$<([^>]+)>/g,(function(e,t){var r=a[t];return"$"+(Array.isArray(r)?r.join("$"):r)})))}if("function"==typeof o){var i=this;return e[Symbol.replace].call(this,r,(function(){var e=arguments;return"object"!=(0,n.Z)(e[e.length-1])&&(e=[].slice.call(e)).push(s(e,i)),o.apply(this,e)}))}return e[Symbol.replace].call(this,r,o)},i.apply(this,arguments)}const s=/<script([^>]*)\/*>/gi,l=i(/^(["']*)(.*?)\1$/,{value:2}),c=/\s+/;function d(e,t=!1){if(t)return Array.isArray(e)?e.map((e=>({src:e}))):[];if("string"!=typeof e)return[];const r=[];for(const[,n]of e.matchAll(s))r.push(Object.fromEntries(n.split(c).filter((e=>e)).map((e=>{const t=e.indexOf("=");if(-1!==t){var r,n;const o=e.substring(0,t),a=e.substring(t+1),i=a.match(l);return[o,null!==(r=null==i||null===(n=i.groups)||void 0===n?void 0:n.value)&&void 0!==r?r:a]}return[e,e]}))));return r}function u(e){const t=Object.entries(e).map((([e,t])=>t&&e!==t?`${e}="${t}"`:e)).join(" ");return t?` ${t}`:""}function f(e){return d(e).filter((e=>"com.atlassian.plugins.jquery:jquery"!==e["data-wrm-key"])).map((e=>`<script${u(e)}><\/script>`)).join("\n")}function h(e){return d(e).map((e=>(e.defer="defer",`<script${u(e)}><\/script>`))).join("")}},960538:(e,t,r)=>{"use strict";r.d(t,{s:()=>n});const n=e=>{const t={};for(const r in e)r.startsWith("confluence.frontend.fabric.editor.")&&(t[r.replace("confluence.frontend.fabric.editor.","")]=e[r]);return t}},401012:(e,t,r)=>{"use strict";r.d(t,{L:()=>i});var n=r(122551),o=r(158466),a=r(960538);const i=()=>{const{featureFlags:e}=(0,o.D)();return(0,n.useMemo)((()=>(0,a.s)(e)),[e])}},52936:(e,t,r)=>{"use strict";r.d(t,{H:()=>m});var n=r(991332),o=r(415911),a=r(122551),i=r(962285),s=r(358280),l=r(407552),c=r(131436),d=r(612642),u=r(790632),f=r(587331);const h=(0,u.Z)("span",{target:"e1o0kwod0"})((0,f.nk)(),";");r(698297),r(593940),r(472980),r(416473),r(682176),r(48043),r(909140),r(870141),r(234119),r(801699),r(686413),r(23139),r(733682),r(778289),r(563952);const p=(0,a.forwardRef)(((e,t)=>{let{as:r="span",style:l}=e,u=(0,o.Z)(e,["as","style"]);return a.createElement(r,(0,n.Z)((0,n.Z)({},u),{},{style:(0,n.Z)((0,n.Z)({},l),{},{"--_1xysrii":(0,i.Z)((0,d.Z)("color.background.neutral",c.os)),"--_8q155l":(0,i.Z)(u.size),"--_thgtwa":(0,i.Z)(u.margin)}),ref:t,className:(0,s.Z)(["_1e0c1o8l _11q71c3z _1bsb1l5u _4t3i1l5u _1wyb1l5u _vwz41l5u _2rko1l7b",u.margin?"_19pk1d9j _2hwx1d9j _otyr1d9j _18u01d9j":"_19pkidpf _2hwxi2wt _otyridpf _18u0idpf",u.className])}))}));const m=e=>a.createElement(l.ZP,{entranceDirection:"left"},(t=>a.createElement(h,(0,n.Z)((0,n.Z)({},t),{},{"data-testid":"emoji-placeholder","data-css-target":"emoji-placeholder"}),a.createElement(p,{size:`${e.height||26}px`,margin:e.loadingMargin}))));m.displayName="EmojiPlaceholder"},637446:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(122551),o=r(830993),a=r(295171),i=r(202905);const s=e=>{const{objectId:t,featureFlags:r={},children:s,source:l}=e,c=(0,n.useCallback)((e=>{const n=r["confluence.frontend.fabric.editor.analytics-instance-name-attribute"];e.update((e=>{let r=(0,i.m)(e,{objectId:t,rendererSource:l});return n&&(r=(0,i.m)(r,{instance:n})),r}))}),[t,r,l]);return n.createElement(o.Z,{onEvent:c,channel:a.XD.editor},n.createElement(o.Z,{onEvent:c,channel:a.XD.media},s))};s.displayName="RendererAnalyticsListener"},202905:(e,t,r)=>{"use strict";r.d(t,{m:()=>o,r:()=>a});var n=r(991332);function o(e,t){return(0,n.Z)((0,n.Z)({},e),{},{attributes:(0,n.Z)((0,n.Z)({},e.attributes),t)})}const a=(e,t)=>Number.isFinite(e)&&Number.isFinite(t)?Math.round(e+t):void 0},95221:(e,t,r)=>{"use strict";r.d(t,{z:()=>f});var n=r(991332),o=r(415911),a=r(122551),i=r(358280),s=r(69210),l=r(810602),c=r(917068),d=r(19978);r(880239),r(719321),r(137909),r(405035),r(983237),r(294805),r(563952),r(156704),r(341645),r(319272);const u=(0,a.forwardRef)(((e,t)=>{let{as:r="span",style:s}=e,l=(0,o.Z)(e,["as","style"]);return a.createElement(r,(0,n.Z)((0,n.Z)({},l),{},{style:s,ref:t,className:(0,i.Z)(["_1bah1h6o _1reo15vq _18m915vq _1e0c1o8l _19pk1wug _2hwx1wug _otyr1wug _18u01wug _1ul97vkz _1wyb7vkz",l.className])}))}));const f=(0,s.default)((()=>({renderers:{emoji:(e,t="SmartCard",r="page")=>a.createElement(c.e,null,(n=>a.createElement(d.g.Provider,{value:n},a.createElement(l.gN,{emoji:e,height:16,context:"smartCard",wrapper:u,parentComponent:t,contentType:r}))))}})))},157265:(e,t,r)=>{"use strict";r.d(t,{Sy:()=>S,Xj:()=>$,Pp:()=>Z,j7:()=>x,hx:()=>P});var n=r(700406),o=r(858872),a=r(206674),i=r(999217),s=r.n(i),l=r(315677),c=r(401487),d=r(902195),u=r(331377);const f=u.ZP`query ExternalShareMediaDownloadTokenQuery($contentId:ID!){singleContent(id:$contentId){id body{atlas_doc_format{mediaToken{token}}}}mediaConfiguration{clientId fileStoreUrl}}`,h=u.ZP`mutation FileUploadMutation($size:Int!$contentType:String!$mimeType:String!$fileName:String!$pageId:String!$fileStoreId:String!$minorEdit:Boolean$renderEditorHTML:Boolean$collectionName:String!$uploadSource:String)@experimental{experimentalFileUpload(size:$size contentType:$contentType mimeType:$mimeType fileName:$fileName pageId:$pageId fileStoreId:$fileStoreId minorEdit:$minorEdit renderEditorHTML:$renderEditorHTML collectionName:$collectionName uploadSource:$uploadSource)}`,p=u.ZP`query MediaDownloadTokenQuery($contentId:ID$status:[String]$missingContentId:Boolean=false){content(id:$contentId status:$status)@skip(if:$missingContentId){nodes{id body{atlas_doc_format{mediaToken{token}}}}}mediaConfiguration{clientId fileStoreUrl}}`,m=u.ZP`query MediaUploadTokenQuery($contentId:ID!){contentMediaSession(contentId:$contentId){token{value}configuration{clientId fileStoreUrl}collection}}`;let v=!0;const g=e=>(0,l.WQ)().query({query:p,variables:{contentId:e,status:["current","draft","archived"],missingContentId:!e},context:{allowOnExternalPage:!0},fetchPolicy:v?"cache-first":"network-only"}).then((t=>{v=!1;try{y(e)(null==t?void 0:t.errors)}catch(r){}return t}),(t=>{try{y(e)(null==t?void 0:t.graphQLErrors,null==t?void 0:t.networkError)}catch(r){}throw t})),y=s()((e=>{let t;return(e,r)=>{if(r&&(e=(e||[]).concat(r)),e){const r={};for(const a of e){var n;const e=a.message||String(a)||(null===(n=a.originalError)||void 0===n?void 0:n.message)||String(a.originalError),{path:i}=a,s=Array.isArray(i)&&i.join(".")||e;if(s){const n=(0,d.e)(a)||e;var o;if(n)r[s]=n,(null===(o=t)||void 0===o?void 0:o[s])===n&&(0,c.Xb)(a)}}t=r}else t=void 0}})),I=e=>(0,l.WQ)().query({query:f,variables:{contentId:e},context:{allowOnExternalPage:!0},fetchPolicy:"network-only"}),w=()=>{},b=e=>e.contentId&&e.contentType?t=>{const{id:r,name:n,size:o,mimeType:a}=t,{contentId:i,contentType:s}=e;(e=>{(0,l.WQ)().mutate({mutation:h,variables:e})})({size:o,contentType:s,mimeType:a,fileName:n,pageId:i,fileStoreId:r,minorEdit:!0,renderEditorHTML:!1,collectionName:`contentId-${i}`,uploadSource:"fabric-editor"})}:w,k={clientId:"",fileStoreUrl:""},E=(0,o.c)((async({contentId:e,isExternalShare:t})=>{var r,n,o,a,i;const s=await(t?I:g)(e),l=null==s?void 0:s.data,c=t?null==l?void 0:l.singleContent:null==l||null===(r=l.content)||void 0===r||null===(n=r.nodes)||void 0===n?void 0:n[0];return{token:(null==c||null===(o=c.body)||void 0===o||null===(a=o.atlas_doc_format)||void 0===a||null===(i=a.mediaToken)||void 0===i?void 0:i.token)||"",config:(null==l?void 0:l.mediaConfiguration)||k}}),(e=>e.token)),S=e=>async()=>{const t=await e();return{token:t.token||"",clientId:t.config.clientId||"",baseUrl:t.config.fileStoreUrl||""}},x=async e=>{var t,r,n,o,i,s,l,c;const{collectionId:d,templateId:u,spaceKey:f}=(0,a.K5)(e);if(d||u)return(0,a.n0)({collectionId:d,spaceKey:f,templateId:u});const h=await g(e),{clientId:p="",fileStoreUrl:m=""}=(null==h||null===(t=h.data)||void 0===t?void 0:t.mediaConfiguration)||{};return{clientId:p,token:(null==h||null===(r=h.data)||void 0===r||null===(n=r.content)||void 0===n||null===(o=n.nodes)||void 0===o||null===(i=o[0])||void 0===i||null===(s=i.body)||void 0===s||null===(l=s.atlas_doc_format)||void 0===l||null===(c=l.mediaToken)||void 0===c?void 0:c.token)||"",baseUrl:m||""}},C=(0,o.c)((async e=>{var t,r;const n=await(o=e.contentId,(0,l.WQ)().query({query:m,variables:{contentId:o},fetchPolicy:"no-cache"}));var o;const a=null==n||null===(t=n.data)||void 0===t?void 0:t.contentMediaSession;return{token:(null==a||null===(r=a.token)||void 0===r?void 0:r.value)||"",config:(null==a?void 0:a.configuration)||k,collectionId:(null==a?void 0:a.collection)||""}}),(e=>e.token)),T=async e=>(await C.getValue(e)).collectionId,_=async e=>({authProvider:S((()=>C.getValue(e))),getAuthFromContext:x}),P=async e=>({authProvider:S((async()=>{let t=await E.getValue(e);return e.mediaToken&&(t.token=e.mediaToken),t.token||(t=await E.forceGetValue(e)),t})),getAuthFromContext:x}),Z=async e=>({viewMediaClientConfig:await P(e)}),$=async e=>{j(e);const[t,r,n]=await Promise.all([P(e),_(e),T(e)]);return{viewMediaClientConfig:t,uploadParams:{collection:n},uploadMediaClientConfig:r}};let A;const j=e=>{A&&n.h.off("file-added",A),A=b(e),n.h.on("file-added",A)}},849238:(e,t,r)=>{"use strict";r.d(t,{t:()=>o});var n=r(911508);function o(e,t,r){return Promise.resolve({cloudId:e,resourceClient:(0,n.F)(e,r),getActions:t})}},643375:(e,t,r)=>{"use strict";r.d(t,{u:()=>n});const n=r(331377).ZP`mutation SetBatchedTaskStatus($contentId:ID!$tasks:[InlineTask]!$trigger:PageUpdateTrigger=VIEW_PAGE){setBatchedTaskStatus(batchedInlineTasksInput:{contentId:$contentId tasks:$tasks trigger:$trigger}){success}}`},81754:(e,t,r)=>{"use strict";r.d(t,{u:()=>o});var n=r(29298);class o{constructor(e){this.flushIntervalMs=e,(0,n.Z)(this,"flushIntervalId",void 0),(0,n.Z)(this,"onFlushCallback",void 0),(0,n.Z)(this,"currentBatch",[]),(0,n.Z)(this,"add",(e=>{this.scheduleFlush(),this.currentBatch=this.currentBatch.filter((t=>t.objectKey.localId!==e.objectKey.localId)),this.currentBatch.push(e)})),(0,n.Z)(this,"flush",(()=>{const e=this.renewBatch();if(this.unscheduleFlush(),0!==e.length)try{this.onFlushCallback&&this.onFlushCallback(e)}catch(t){setTimeout((()=>{throw console.error('"onFlush" callback threw the below error. Please make sure your callbacks have proper error handling'),t}),0)}}))}onFlush(e){if(!(e instanceof Function))throw new Error(`"onFlush" callback is supposed to be a function; saw ${typeof e} instead`);this.onFlushCallback=e}forceFlush(){this.flush()}renewBatch(){const e=this.currentBatch;return this.currentBatch=[],e}scheduleFlush(){this.flushIntervalId||(this.flushIntervalId=window.setInterval(this.flush,this.flushIntervalMs))}unscheduleFlush(){this.flushIntervalId&&(window.clearInterval(this.flushIntervalId),this.flushIntervalId=void 0)}}},704932:(e,t,r)=>{"use strict";r.d(t,{Y:()=>s});var n=r(29298),o=r(315677);const a=r(331377).ZP`mutation SetTaskStatusMutation($contentId:ID!$taskId:ID!$status:TaskStatus!){setTaskStatus(inlineTasksInput:{cid:$contentId taskId:$taskId status:$status trigger:VIEW_PAGE}){success}}`;const i=(0,r(464984).defineMessages)({flagTitle:{id:"fabric-media-support.tasklist.error.flag.title",defaultMessage:"Something went wrong"},flagDescription:{id:"fabric-media-support.tasklist.error.flag.description",defaultMessage:"An error occurred while trying to change a task's status. Please try again later."}});class s{constructor(e,t,r,o){this.intl=e,this.flags=t,this.contentId=r,this.toggleTaskCallback=o,(0,n.Z)(this,"_toggleTaskCallback",void 0),this._toggleTaskCallback=o}toggleTask(e,t){return this._toggleTaskCallback?(this._toggleTaskCallback(e,t),Promise.resolve(t)):(0,o.WQ)().mutate({mutation:a,variables:{contentId:this.contentId,taskId:e.localId,status:"DONE"===t?"CHECKED":"UNCHECKED"}}).then((e=>{var r,n;return(null==e||null===(r=e.data)||void 0===r||null===(n=r.setTaskStatus)||void 0===n?void 0:n.success)||!1||this.showErrorFlag(),t})).catch((e=>{this.showErrorFlag()}))}showErrorFlag(){this.flags.showErrorFlag({title:this.intl.formatMessage(i.flagTitle),description:this.intl.formatMessage(i.flagDescription)})}notifyRecentUpdates(e){}subscribe(e,t){}unsubscribe(e,t){}unsubscribeRecentUpdates(e){}}},206674:(e,t,r)=>{"use strict";r.d(t,{j_:()=>E,Dq:()=>S,n0:()=>w,K5:()=>I,$m:()=>y});var n=r(991332),o=r(858872),a=r(157265),i=r(315677),s=r(401487),l=r(596207),c=r(170915),d=r(331377);const u=d.ZP`query TemplateMediaSessionDownloadQuery($spaceKey:String$templateIds:[String]!$collectionId:String){templateMediaSession(spaceKey:$spaceKey templateIds:$templateIds collectionId:$collectionId){collections{key value}configuration{fileStoreUrl clientId}downloadToken{value duration}}}`,f=d.ZP`query TemplateMediaSessionUploadQuery($spaceKey:String$templateIds:[String]!$collectionId:String){templateMediaSession(spaceKey:$spaceKey templateIds:$templateIds collectionId:$collectionId){collections{key value}configuration{fileStoreUrl clientId}uploadToken{value duration}}}`,h=async({spaceKey:e,templateIds:t,collectionId:r=null})=>(0,i.WQ)().query({query:u,variables:{spaceKey:e||null,templateIds:t,collectionId:r},fetchPolicy:"network-only"}).catch((e=>{(0,l.U)().submitError(e,{attribution:c.x.TAILORED_EXPERIENCES}),(0,s.Xb)(e)})),p=e=>e.length,m=(e,t,r)=>(e=>!e||""===e)(e)||(e=>!/^[0-9]+$/.test(e))(e)&&r||!t?[]:[e],v=(0,o.c)((async e=>{var t,r,n,o;const a=await(async({spaceKey:e,templateIds:t,collectionId:r=null})=>(0,i.WQ)().query({query:f,variables:{spaceKey:e||null,templateIds:t,collectionId:r},fetchPolicy:"no-cache"}).catch((e=>{(0,l.U)().submitError(e,{attribution:c.x.TAILORED_EXPERIENCES}),(0,s.Xb)(e)})))({spaceKey:e.spaceKey,templateIds:e.templateIds,collectionId:e.collectionId}),d=null==a||null===(t=a.data)||void 0===t?void 0:t.templateMediaSession,u=(null==d||null===(r=d.collections)||void 0===r||null===(n=r[0])||void 0===n?void 0:n.value)||"";return{token:(null==d||null===(o=d.uploadToken)||void 0===o?void 0:o.value)||"",config:(null==d?void 0:d.configuration)||{fileStoreUrl:"",clientId:""},collectionId:u}}),(e=>e.token)),g=(0,o.c)((async e=>{var t,r,n,o,a;const i=await h({spaceKey:e.spaceKey,templateIds:e.templateIds,collectionId:e.collectionId});return{token:(null==i||null===(t=i.data)||void 0===t||null===(r=t.templateMediaSession)||void 0===r||null===(n=r.downloadToken)||void 0===n?void 0:n.value)||"",config:(null==i||null===(o=i.data)||void 0===o||null===(a=o.templateMediaSession)||void 0===a?void 0:a.configuration)||{fileStoreUrl:"",clientId:""}}}),(e=>e.token)),y=async e=>{const t=m(e.templateId,!e.collectionId,!0);return(await v.getValue((0,n.Z)((0,n.Z)({},e),{},{templateIds:t,collectionId:p(t)?null:e.collectionId}))).collectionId},I=e=>{let t,r,n=null;try{({collectionId:t,templateId:r,spaceKey:n}=JSON.parse(e))}catch(o){}return{collectionId:t,templateId:r,spaceKey:n}},w=async({templateId:e,collectionId:t,spaceKey:r})=>{var n,o,a,i,s;const l=await h({templateIds:e?[e]:[],collectionId:e?null:t,spaceKey:r}),{clientId:c="",fileStoreUrl:d=""}=(null==l||null===(n=l.data)||void 0===n||null===(o=n.templateMediaSession)||void 0===o?void 0:o.configuration)||{};return{clientId:c,token:(null==l||null===(a=l.data)||void 0===a||null===(i=a.templateMediaSession)||void 0===i||null===(s=i.downloadToken)||void 0===s?void 0:s.value)||"",baseUrl:d}},b=async e=>{const{collectionId:t,templateId:r,spaceKey:n}=I(e);return"string"!=typeof t&&"string"!=typeof r?(0,a.j7)(e):w({collectionId:t,spaceKey:n,templateId:r})},k=e=>({authProvider:(0,a.Sy)((async()=>g.getValue(e))),getAuthFromContext:b}),E=e=>Promise.resolve({viewMediaClientConfig:k(e)}),S=async e=>{let t=!0,r=e.collectionId;const o=(i=e,{authProvider:(0,a.Sy)((async()=>{const e=m(i.templateId,t,!1);return t=!1,g.getValue((0,n.Z)((0,n.Z)({},i),{},{templateIds:e,collectionId:p(e)?null:r}))})),getAuthFromContext:e=>(t=!1,b(e))});var i;const s=(e=>({authProvider:(0,a.Sy)((()=>{const t=m(e.templateId,!r,!0);return v.getValue((0,n.Z)((0,n.Z)({},e),{},{templateIds:t,collectionId:p(t)?null:r}))})),getAuthFromContext:e=>b(e)}))(e),l=await y(e);return r=l||null,{viewMediaClientConfig:o,uploadParams:{collection:l},uploadMediaClientConfig:s}}},858872:(e,t,r)=>{"use strict";function n(e){this.message=e}r.d(t,{c:()=>u}),n.prototype=new Error,n.prototype.name="InvalidCharacterError";var o="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new n("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,o,a=0,i=0,s="";o=t.charAt(i++);~o&&(r=a%4?64*r+o:o,a++%4)?s+=String.fromCharCode(255&r>>(-2*a&6)):0)o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(o);return s};function a(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(o(e).replace(/(.)/g,(function(e,t){var r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r})))}(t)}catch(e){return o(t)}}function i(e){this.message=e}i.prototype=new Error,i.prototype.name="InvalidTokenError";const s=function(e,t){if("string"!=typeof e)throw new i("Invalid token specified");var r=!0===(t=t||{}).header?0:1;try{return JSON.parse(a(e.split(".")[r]))}catch(e){throw new i("Invalid token specified: "+e.message)}};var l=r(405124),c=r.n(l);const d=[-1/0,null,null];function u(e,t,r=6e4){const o={};async function a(a,i){let l="";try{l=JSON.stringify(a)}catch(p){}const[u,f,h]=o[l]||d;if(i||u<=Date.now()||!c()(f,a)){const i=await e(a);let c=null;try{c=t(i)}catch(n){0}let u=null;if(c)if(isNaN(c))if("string"==typeof c)try{u=1e3*s(c).exp-r}catch(n){0}else 0;else u=Number(c);return o[l]=null===u?d:[u,a,i],i}return h}return{forceGetValue:e=>a(e,!0),getValue:e=>a(e,!1)}}},273522:(e,t,r)=>{"use strict";r.d(t,{N:()=>o,U:()=>a});var n=r(483565);function o(e){return e?{newCardExperience:Boolean(e["confluence.frontend.media.cards.new.experience"]),timestampOnVideo:Boolean(e["confluence.frontend.media.timestamp.on.video"]),folderUploads:Boolean(e["confluence.frontend.media.picker.folder.uploads"]),captions:Boolean(e["confluence.frontend.fabric.editor.media.captions"]),mediaInline:Boolean(e["confluence.frontend.fabric.editor.media.inline"]),memoryCacheLogging:Boolean(e["confluence-frontend-media-card-memory-cache-logging"])}:{}}const a=()=>({newCardExperience:(0,n.TW)("confluence.frontend.media.cards.new.experience"),timestampOnVideo:(0,n.TW)("confluence.frontend.media.timestamp.on.video"),folderUploads:(0,n.TW)("confluence.frontend.media.picker.folder.uploads"),captions:(0,n.TW)("confluence.frontend.fabric.editor.media.captions"),memoryCacheLogging:(0,n.TW)("confluence-frontend-media-card-memory-cache-logging")})},693552:(e,t,r)=>{"use strict";r.d(t,{J:()=>i});var n=r(122551),o=r(158466),a=r(565414);const i=e=>{const{featureFlagClient:t,featureFlags:r}=(0,o.D)();return(0,n.useMemo)((()=>(0,a.yM)(t,r,e)),[t,r,e])}},565414:(e,t,r)=>{"use strict";r.d(t,{yM:()=>f});var n=r(991332),o=r(69210),a=r(937613);const i="confluence.frontend.fabric.editor.show-hover-preview",s="confluence.frontend.fabric.editor.lp-link-picker",l={[i]:{key:i,featureName:"showHoverPreview",isEditor:!1,isRenderer:!0,isTracking:!0},[s]:{key:s,featureName:"lpLinkPicker",isEditor:!0,isRenderer:!1,isTracking:!0}},c=e=>{try{const t=e instanceof Map?Object.fromEntries(e):e;return Object.entries(t).reduce(((e,[t,r])=>{const o=((e,t)=>{if(e.startsWith("confluence.frontend.linkingPlatform.")){const r=e.substring(e.lastIndexOf(".")+1);if(r){const n=e.split("."),o=n.includes("exposure");return{featureName:r,key:e,isEditor:n.includes("editor"),isRenderer:n.includes("renderer"),isTracking:o,value:t}}}if(l[e])return(0,n.Z)((0,n.Z)({},l[e]),{},{value:t})})(t,r);return o?[...e,o]:e}),[])}catch(t){return[]}},d=(0,o.default)(((e,t)=>{const r=c(t);return((e,t)=>{try{t.filter((({isTracking:e})=>e)).forEach((({key:t})=>{e.trackFeatureFlag(t,{triggerReason:a.s.Manual})}))}catch(r){return}})(e,r),r})),u=e=>e.reduce(((e,{featureName:t,value:r})=>(0,n.Z)((0,n.Z)({},e),{},{[t]:r})),{}),f=(0,o.default)(((e,t,r)=>{const n=d(e,t);return u("editor"===r?n.filter((({isEditor:e})=>e)):"renderer"===r?n.filter((({isRenderer:e})=>e)):n)}))},861635:(e,t,r)=>{"use strict";r.d(t,{p:()=>o,Rq:()=>a,Cc:()=>i,ns:()=>c});var n=r(917465);const o=(e,t,r="")=>e?`${r}/people/${e}?ref=confluence${t?`&src=${encodeURIComponent(t)}`:""}`:"",a=async(e,t)=>e?`${n.b}/people/${e}?ref=confluence${t?`&src=${encodeURIComponent(t)}`:""}`:"",i=(e,t,r="")=>e?`${r}/people/team/${e}?ref=confluence${t?`&src=${encodeURIComponent(t)}`:""}`:"",s=e=>e.getAttribute("data-account-id"),l=e=>{const t={class:"className"},r={};return(e=>Array.from(e.attributes).map((e=>e.name)))(e).forEach((n=>{r[t[n]||n]=e.getAttribute(n)})),r.dangerouslySetInnerHTML={__html:e.innerHTML},r};function c(e){return e.filter(s).map((e=>{const t=l(e);t["data-user-hover-bound"]="true",t.href=o(t["data-account-id"],null);const r=window.document.createElement("span");return e.parentNode?(e.parentNode.replaceChild(r,e),{props:t,placeholder:r}):{}}))}},432399:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(158466),o=r(619241);const a=(e,t,r)=>{const a=(0,n.D)();(0,o.x)(e,r);const i=parseInt(String(null==a?void 0:a.featureFlags[e]),10);return isNaN(i)?t:i}},354323:(e,t,r)=>{"use strict";r.d(t,{u:()=>i});var n=r(122551),o=r(89557),a=r(772610);function i(e){var t,r;const{spaceKey:i}=(0,n.useContext)(o.z1),{match:s}=(0,n.useContext)(a.M),l=null==s||null===(t=s.params)||void 0===t?void 0:t.spaceKey;if(e)return e;if(i)return i;if(l)return l;const c=null===(r=document.querySelector("meta#confluence-space-key"))||void 0===r?void 0:r.content;return null!=c?c:null}},91745:(e,t,r)=>{"use strict";r.d(t,{fN:()=>l,wg:()=>i,gs:()=>s});var n=r(29298),o=r(758724);class a{constructor(){(0,n.Z)(this,"resource",void 0),this.resource=""}reset(){this.resource=""}add(e){return this.resource+=e,this}addDeferTags(e){return this.resource+=(0,o.ac)(e),this}get(){return this.resource}}new class{constructor(){(0,n.Z)(this,"errors",void 0),this.errors=[]}submitError(e,t){this.errors.push({error:{message:e.message,stack:e.stack},meta:t})}getErrors(){return this.errors}};const i=new a,s=new a,l=(new a,new class{constructor(){(0,n.Z)(this,"object",null)}set(e){this.object=e}get(){return this.object}})},369642:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=(n=r(122551))&&n.__esModule?n:{default:n},a=r(386056);const i=e=>o.default.createElement(a.Icon,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><g fill-rule="evenodd"><circle fill="currentColor" cx="12" cy="12" r="10"/><circle fill="inherit" cx="12" cy="18" r="1"/><path d="M15.89 9.05a3.975 3.975 0 00-2.957-2.942C10.321 5.514 8.017 7.446 8 9.95l.005.147a.992.992 0 00.982.904c.552 0 1-.447 1.002-.998a2.004 2.004 0 014.007-.002c0 1.102-.898 2-2.003 2H12a1 1 0 00-1 .987v2.014a1.001 1.001 0 002.004 0v-.782c0-.217.145-.399.35-.472A3.99 3.99 0 0015.89 9.05" fill="inherit"/></g></svg>'},e));i.displayName="QuestionCircleIcon";var s=i;t.default=s},987359:(e,t,r)=>{"use strict";r.d(t,{V:()=>u,X:()=>f});r(73377);var n=r(395223),o=r.n(n),a=r(148529);class i{buildInlineAdf(e){return{type:"inlineCard",attrs:{url:e}}}buildBlockAdf(e){return{type:"blockCard",attrs:{url:e}}}buildEmbedAdf(e){return{type:"embedCard",attrs:{url:e,layout:"wide"}}}toAdf(e,t){switch(t){case"inline":return this.buildInlineAdf(e);case"block":return this.buildBlockAdf(e);case"embed":return this.buildEmbedAdf(e)}}}var s=r(792501),l=r(631513),c=r(240713),d=r(226751);class u{constructor(e,t){this.baseUrl=t||(0,s.SV)(e),this.resolverUrl=(0,s.rV)(e,t),this.transformer=new i,this.requestHeaders={Origin:this.baseUrl},this.providersLoader=new(o())((e=>this.batchProviders(e)),{batchScheduleFn:e=>setTimeout(e,50)}),this.cardClient=new c.Z(e,t)}async batchProviders(e){const t=await this.fetchProvidersData();return e.map((()=>t))}async check(e){try{const t=await this.cardClient.fetchData(e);if("not_found"!==(0,d.l)(t))return!0}catch(t){return!1}}async fetchProvidersData(){const e=`${this.resolverUrl}/providers`,t=await l.W("post",e,void 0,this.requestHeaders);return{patterns:t.providers.reduce(((e,t)=>e.concat(t.patterns)),[]),userPreferences:t.userPreferences}}async loadProviderData(){try{this.providersData=await this.providersLoader.load("providersData")}catch(e){return console.error("failed to fetch /providers",e),void this.providersLoader.clear("providerData")}}async findPattern(e){return!!(await this.findPatternData(e))||!!(await this.check(e))}doesUrlMatchPath(e,t){const r=new RegExp(/^[a-zA-Z0-9]/).test(e)?"(^|[^a-zA-Z0-9])":"",n=new RegExp(/[a-zA-Z0-9]$/).test(e)?"($|[^a-zA-Z0-9])":"",o=e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");return new RegExp(`${r}${o}${n}`).test(t)}async findUserPreference(e){var t;this.providersData||await this.loadProviderData();const r=null===(t=this.providersData)||void 0===t?void 0:t.userPreferences;if(r){const{defaultAppearance:t,appearances:n}=r,o=n.filter((({urlSegment:t})=>this.doesUrlMatchPath(t,e)));if(o.length>0){return o.reduce(((e,t)=>e.urlSegment.length>t.urlSegment.length?e:t)).appearance}if("inline"!==t)return t}}async findPatternData(e){var t;return this.providersData||await this.loadProviderData(),null===(t=this.providersData)||void 0===t?void 0:t.patterns.find((t=>e.match(t.source)))}getHardCodedAppearance(e){if((e=>e.match(/^https:\/\/.*?\/jira\/software\/(c\/)?projects\/[^\/]+?\/boards\/.*?\/roadmap\/?/))(e)||(e=>e.match(/^https:\/\/.*?\/jira\/polaris\/projects\/[^\/]+?\/ideas\/view\/\d+$|^https:\/\/.*?\/secure\/JiraProductDiscoveryAnonymous\.jspa\?hash=\w+|^https:\/\/.*?\/jira\/polaris\/share\/\w+/))(e)||(e=>e.match(/^https:\/\/.*?\/jira\/core\/projects\/[^\/]+?\/(timeline|calendar|list|board|summary|(form\/[^\/]+?))\/?/))(e)||(e=>e.match(/^https:\/\/(.*?\.)?giphy\.com\/(gifs|media|clips)\//))(e)||(e=>e.match(/^https:\/\/[^/]+\/jira\/(core|software(\/c)?|servicedesk)\/projects\/\w+\/forms\/form\/direct\/\d+\/\d+.*$/))(e))return"embed"}async canBeResolvedAsEmbed(e){try{const t=await this.cardClient.fetchData(e),r=t&&t.data;if(!r)return!1;if("resolved"!==(0,d.l)(t))return!1;return!!(0,a.A)(r,"web")}catch(t){return!1}}async resolve(e,t,r){try{if(!0===r)return this.transformer.toAdf(e,t);const n=this.getHardCodedAppearance(e),[o,a]=await Promise.all([this.findPatternData(e),this.findUserPreference(e)]);if(!1===r&&"url"===a)return Promise.reject(void 0);if(!!o||await this.check(e)){const i=null==o?void 0:o.defaultView;let s=void 0===r?n||t:a||n||i||t;if(s===a&&"embed"===a){await this.canBeResolvedAsEmbed(e)||(s="inline")}return this.transformer.toAdf(e,s)}}catch(n){console.warn(`Error when trying to check Smart Card url "${e}"${n instanceof Error?` - ${n.name} ${n.message}`:""}`,n)}return Promise.reject(void 0)}}const f=new u}}]);
//# sourceMappingURL=58874.5tc1gA76Px.js.map