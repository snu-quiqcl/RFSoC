WRMCB=function(e){var c=console;if(c&&c.log&&c.error){c.log('Error running batched script.');c.error(e);}}
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-create-content-plugin:create-from-template-macro-browser-resources', location = 'com/atlassian/confluence/plugins/createcontent/js/create-from-template-macro-fields.js' */
AJS.toInit(function(f){function b(h,i){Confluence.Blueprint.Dialog.requestWebItems(h,false).done(function(j){var k=Confluence.Blueprint.Dialog.loadedWebitems[h];if(_.isEmpty(k)){AJS.log("create-from-template-macro-fields: No Create dialog web items found for spaceKey >"+h+"<");return}i(j,k)}).fail(function(){AJS.log("create-from-template-macro-fields: requestWebItems call for spaceKey >"+h+"< failed")})}function c(h,i,j){b(i,function(l,m){var k=h.val();h.empty();_.each(m,function(n){var p=n.itemModuleCompleteKey;if((p=="com.atlassian.confluence.plugins.confluence-create-content-plugin:create-blank-page"||p=="com.atlassian.confluence.plugins.confluence-create-content-plugin:create-blog-post")){return}if(!(n.templateId||n.contentBlueprintId)){return}var o=f("<option></option>").text(n.name);o.attr("data-template-id",n.templateId);o.attr("data-blueprint-module-complete-key",n.blueprintModuleCompleteKey);o.attr("data-content-blueprint-id",n.contentBlueprintId);o.attr("data-create-result",n.createResult);o.val(n.templateId||n.contentBlueprintId);h.append(o);if(n.blueprintModuleCompleteKey&&j&&j.blueprintModuleCompleteKey&&n.blueprintModuleCompleteKey===j.blueprintModuleCompleteKey){j.templateName=n.contentBlueprintId}});h.val(k)})}var g={fields:{spacekey:{spaceKey:function e(k){var j=AJS.MacroBrowser.ParameterFields.spacekey(k),h=j.input.val();var i=function(){var l=j.input.val();if(l!=h){c(AJS.MacroBrowser.fields.templateName.input,l,null)}h=l};j.input.bind("selected.autocomplete-content",i);j.input.blur(i);return j}}},beforeParamsSet:function a(i,h){i.buttonLabel=i.buttonLabel||i.createButtonLabel||"Create from template";i.spaceKey=AJS.Meta.get("space-key");c(f("#macro-param-templateName"),i.spaceKey,i);return i},beforeParamsRetrieved:function d(j,k,h){var i=AJS.MacroBrowser.fields.templateName.input.find("option:selected");j.blueprintModuleCompleteKey=i.data("blueprint-module-complete-key");j.contentBlueprintId=i.data("content-blueprint-id");j.templateId=i.attr("data-template-id");j.createResult=i.data("create-result");return j}};AJS.MacroBrowser.setMacroJsOverride("create-from-template",g)});
}catch(e){WRMCB(e)};