WRMCB=function(e){var c=console;if(c&&c.log&&c.error){c.log('Error running batched script.');c.error(e);}}
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:content-resolver-v5', location = 'v5/js/iframe/host/content-resolver.js' */
!function(){function e(e){var t={};_.keys(e).forEach((function(n){t["ac."+n]=e[n]}));return t}function t(e){var t,n=e.getResponseHeader("Date"),o=Math.round(Date.parse(n)/1e3),a=Math.round(Date.now()/1e3);if(!isNaN(o)){t=Math.abs(a-o);window.connectHost.setJwtClockSkew(t+60)}}function n(n,o){return AJS.$.Deferred((function(a){var r=function(e){var t=e.addon_key+"__"+e.key;if(window._AP&&window._AP.cacheableIframeUrls&&window._AP.cacheableIframeUrls[t])return window._AP.cacheableIframeUrls[t]}(n);if(!r||o){var i={"plugin-key":n.addon_key,"product-context":JSON.stringify(n.options.productContext||{}),key:n.key,width:n.width||"100%",height:n.height||"100%",classifier:n.classifier||"raw"};n.options.contentClassifier&&(i.classifier=[n.options.contentClassifier,i.classifier]);var s,c,d=function(e,t){var n={};_.keys(e).forEach((function(o){t(o,e[o])&&(n[o]=e[o])}));return n}(n.options.customData||{},(function(e,t){return!_.isObject(t)&&(!("string"==typeof t||t instanceof String)||t.length<255)})),l=window.connectHost&&window.connectHost.trackContentResolverEvent,u=(s=n.addon_key,c=n.key,AJS.contextPath()+"/plugins/servlet/ac/"+encodeURIComponent(s)+"/"+encodeURIComponent(c));AJS.$.ajax(u,{dataType:"json"===n.classifier?"json":"html",data:AJS.$.extend({},i,e(d)),type:"POST"}).then((function(e,n,r){t(r);o?a.resolve(window._AP._convertConnectOptions(e)):require(["ac/create"],(function(t){a.resolve(window._AP._convertConnectOptions(e))}))})).fail((function(e,o,r){t(e);if(l&&e.status){var i={extension:n,attrs:{contentResolverUrl:u,httpStatusCode:e.status,errorText:r||e.statusText,responseText:"string"==typeof e.responseText?e.responseText.substring(0,1e3):"",traceId:e.getResponseHeader("atl-traceid")}};window.connectHost.trackContentResolverEvent(!1,i)}a.reject({addon_key:n.addon_key,key:n.key,options:n.options},{text:"Unable to retrieve addon module URL. Please check your specified module key."})}))}else a.resolve(window._AP._convertConnectOptions({addon_key:n.addon_key,key:n.key,url:r,productCtx:JSON.stringify(n.options.productContext||{})}))})).promise()}function o(e){return function(t){if("set_inner_iframe_url"===t.data.type){if(e&&e.getBooleanFeatureFlag&&e.getBooleanFeatureFlag("com.atlassian.connect.resolve_inner_iframe_url")){t.data.iframeData.classifier="json";return n(t.data.iframeData,!0).then((function(n){n.id=t.data.extension_id;e.registerExistingExtension(n.id,{extension:n});t.source.location=n.url}))}t.data.iframeData.url&&0===t.data.iframeData.url.indexOf("http")&&(t.source.location=t.data.iframeData.url)}}}define("ac/content-resolver",(function(){return{resolveByExtension:n,getIframeUrlSetter:o}}));_AP.util.awaitGlobal("connectHost",(function(e){e.registerContentResolver.resolveByExtension(n);window.addEventListener("message",o(e))}))}();
}catch(e){WRMCB(e)};