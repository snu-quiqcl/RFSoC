(self._cf=self._cf||[]).push([[52753],{170250:(e,t,n)=>{var r=n(725719);e.exports=function(e,t){return!!(null==e?0:e.length)&&r(e,t,0)>-1}},904408:e=>{e.exports=function(e,t,n){for(var r=-1,s=null==e?0:e.length;++r<s;)if(n(t,e[r]))return!0;return!1}},697729:e=>{e.exports=function(e,t,n,r){for(var s=e.length,i=n+(r?1:-1);r?i--:++i<s;)if(t(e[i],i,e))return i;return-1}},725719:(e,t,n)=>{var r=n(697729),s=n(999079),i=n(545324);e.exports=function(e,t,n){return t==t?i(e,t,n):r(e,s,n)}},999079:e=>{e.exports=function(e){return e!=e}},545324:e=>{e.exports=function(e,t,n){for(var r=n-1,s=e.length;++r<s;)if(e[r]===t)return r;return-1}},47194:(e,t,n)=>{"use strict";n.d(t,{l:()=>s});var r=n(122551);const s=(0,r.createContext)({count:0,setCount:()=>{}})},944997:(e,t,n)=>{"use strict";let r;n.d(t,{O:()=>r}),function(e){e[e.DEFAULT=6e4]="DEFAULT",e[e.CREATE_PAGE=3e4]="CREATE_PAGE",e[e.CREATE_DIALOG_LOAD=6e4]="CREATE_DIALOG_LOAD",e[e.MACRO_LOAD=6e4]="MACRO_LOAD",e[e.EDITOR_LOAD=9e4]="EDITOR_LOAD",e[e.EDITOR_PUBLISH=6e4]="EDITOR_PUBLISH",e[e.TEMPLATE_EDITOR_LOAD=9e4]="TEMPLATE_EDITOR_LOAD",e[e.TEMPLATE_EDITOR_PUBLISH=6e4]="TEMPLATE_EDITOR_PUBLISH",e[e.IN_EDITOR_TEMPLATE_PANEL_LOAD=2e4]="IN_EDITOR_TEMPLATE_PANEL_LOAD",e[e.IN_EDITOR_TEMPLATES_UPDATE_CONTENT_REFRESH_EDITOR=9e4]="IN_EDITOR_TEMPLATES_UPDATE_CONTENT_REFRESH_EDITOR",e[e.HOME=2e4]="HOME",e[e.NAVIGATION_LOAD=3e4]="NAVIGATION_LOAD",e[e.PAGE_LOAD=6e4]="PAGE_LOAD",e[e.SPACE_DIRECTORY=6e4]="SPACE_DIRECTORY",e[e.SPACE_VIEWS=2e4]="SPACE_VIEWS",e[e.TEMPLATE_GALLERY_TEMPLATE_DETAIL_UPDATE=2e4]="TEMPLATE_GALLERY_TEMPLATE_DETAIL_UPDATE",e[e.TEMPLATE_PREVIEW=2e4]="TEMPLATE_PREVIEW"}(r||(r={}))},534322:(e,t,n)=>{"use strict";n.d(t,{t:()=>r});class r extends Error{constructor(e){super(e),this.name="ExperienceTimeoutError"}}},66909:(e,t,n)=>{"use strict";n.d(t,{T:()=>a});var r=n(29298),s=n(69210);class i{constructor(){(0,r.Z)(this,"callbacks",new Map)}start(){let e;document.addEventListener("freeze",(()=>{e=performance.now()})),document.addEventListener("resume",(()=>{if("number"!=typeof e)return;const t=performance.now();for(const n of this.callbacks.values())n(t-e)}))}subscribe(e,t){this.callbacks.set(e,t)}unsubscribe(e){this.callbacks.delete(e)}}const a=(0,s.default)((()=>new i))},972416:(e,t,n)=>{"use strict";n.d(t,{y:()=>o});var r=n(29298),s=n(69210),i=n(616158);class a{constructor({maxIntervalsToStore:e}={}){(0,r.Z)(this,"inactivityIntervals",[]),(0,r.Z)(this,"logger",(0,i.j)("TabInactivityTracker")),(0,r.Z)(this,"maxIntervalsToStore",void 0),(0,r.Z)(this,"onVisibilityChange",(()=>{document.hidden?(this.inactivityIntervals.length>=this.maxIntervalsToStore&&this.inactivityIntervals.splice(this.maxIntervalsToStore-1),this.inactivityIntervals.unshift([window.performance.now(),null])):0===this.inactivityIntervals.length||null!=this.inactivityIntervals[0][1]?this.logger.error`Invariant violation: tab is currently active, but inactivity intervals are in inconsistent state`:this.inactivityIntervals[0][1]=window.performance.now()}));this.maxIntervalsToStore="number"==typeof e?e:100}initialize(){return document.hidden&&this.onVisibilityChange(),document.addEventListener("visibilitychange",this.onVisibilityChange),{teardown:()=>{document.removeEventListener("visibilitychange",this.onVisibilityChange)}}}getInactiveMillisecondsSince(e){let t=0;for(const[n,r]of this.inactivityIntervals){const s=r||window.performance.now();if(e>s)break;t+=s-Math.max(n,e)}return t}}const o=(0,s.default)((()=>{const e=new a;return e.initialize(),e}))},451379:(e,t,n)=>{"use strict";n.d(t,{F:()=>i,Q:()=>a});var r=n(991332),s=n(122551);const i=(0,s.createContext)({start(){},succeed(){},fail(){},abort(){},stopOnError(){},subscribe:()=>()=>{},getExperienceState:()=>null});function a(e){const t=t=>s.createElement(i.Consumer,null,(n=>s.createElement(e,(0,r.Z)((0,r.Z)({},t),{},{experienceTracker:n}))));return t.displayName=`withExperienceTracker(${e.displayName||e.name})`,t}},735499:(e,t,n)=>{"use strict";n.d(t,{Nd:()=>o,dx:()=>c});var r=n(29298);class s{constructor(e){(0,r.Z)(this,"_cache",void 0),this._cache=e||{}}get data(){return this._cache}get(e){return this._cache[e]}has(e){return this._cache.hasOwnProperty(e)}set(e,t){this._cache[e]=t}delete(e){delete this._cache[e]}get keys(){return Object.keys(this._cache)}get values(){return Object.values(this._cache)}clear(){this._cache={}}}class i{constructor(){(0,r.Z)(this,"incrementor",-1)}ID(){return(++this.incrementor).toString()}reset(){this.incrementor=-1}}class a extends Map{constructor(...e){super(...e),(0,r.Z)(this,"IDs",new i)}subscribe(e){const t=this.IDs.ID();return this.set(t,e),t}unsubscribe(e){this.delete(e)}async dispatch(e){for(const[t,n]of this)await Promise.resolve(n(...e))}}class o extends Map{constructor(e){super(),(0,r.Z)(this,"enableCache",!1),(0,r.Z)(this,"Cache",new s),e&&(this.enableCache=!0)}async stream(e){if(!e.length)return;const t={};for(const n of e)n.type in t?t[n.type].push(n):t[n.type]=[n],this.cache(n.type,n);await Promise.all(Object.keys(t).map((e=>this.dispatch(e,t[e]))))}on(e,t){const n=this.get(e)||new a,r=n.subscribe(t);return this.set(e,n),r}off(e,t){const n=this.get(e);n&&(n.unsubscribe(t),0===n.size&&this.delete(e))}async dispatch(e,...t){const n=this.get(e);n&&await n.dispatch(t)}cache(e,t){if(!this.enableCache)return;const n=this.Cache.get(e)||[];n.push(t),this.Cache.set(e,n)}}class c{constructor(e,t){(0,r.Z)(this,"type",void 0),(0,r.Z)(this,"Bus",void 0),(0,r.Z)(this,"listener",void 0),this.Bus=t,this.type=e}register(e){this.listener=this.Bus.on(this.type,e)}unregister(){this.listener&&this.Bus.off(this.type,this.listener)}}},259873:(e,t,n)=>{"use strict";n.d(t,{EventBus:()=>s.Nd,EventBusSubscriber:()=>s.dx});var r=n(579868);n.o(r,"EventBus")&&n.d(t,{EventBus:function(){return r.EventBus}}),n.o(r,"EventBusSubscriber")&&n.d(t,{EventBusSubscriber:function(){return r.EventBusSubscriber}});var s=n(735499)},579868:(e,t,n)=>{"use strict";var r=n(631748);n.o(r,"EventBus")&&n.d(t,{EventBus:function(){return r.EventBus}}),n.o(r,"EventBusSubscriber")&&n.d(t,{EventBusSubscriber:function(){return r.EventBusSubscriber}})},631748:()=>{},147543:(e,t,n)=>{"use strict";n.d(t,{RX:()=>a,Fo:()=>o,OG:()=>c});var r=n(853102),s=n(251846);const i="Session expired";class a extends s.K{constructor(e,t){super(`${e} Session expired`,t)}}function o(e){var t,n;if(!e)return!1;if(e instanceof a)return!0;if(-1!=((null!=(n=e)?n.message:n)||"").indexOf(i))return!0;return 401==(null!=(t=e)&&null!=(t=t.extensions)?t.statusCode:t)}function c(e){if(!e)return!1;if(o(e))return!0;if((0,r.MS)(e)){const{graphQLErrors:t,networkError:n}=e;if(o(n))return!0;if((t||[]).some(o))return!0}return!1}},528365:(e,t,n)=>{"use strict";n.d(t,{tl:()=>o,tv:()=>c,Oi:()=>u,es:()=>l,So:()=>d,_N:()=>f});var r=n(991332),s=n(917068),i=n(443033),a=n(596207);const o=e=>{window.performance&&window.performance.clearMarks&&e.forEach((e=>window.performance.clearMarks(e)))},c=e=>{if(window.performance&&window.performance.getEntriesByName){const t=window.performance.getEntriesByName(e);return t&&t[0]}},u=(e,t)=>{const n=c(e),r=c(t);if(n&&r)return Math.abs(n.startTime-r.startTime)},l=e=>{const t=c(e);if(t)return t.startTime},d=({subject:e,subjectId:t=""})=>{const n=`${e}.${t}.start`;o([n,`${e}.${t}.end`]),window.performance.mark(n)},h=async({details:e,subject:t,subjectId:n,includeFeatureFlags:o})=>{const c=`${t}.${n}.end`;window.performance.mark(c);const l=u(`${t}.${n}.start`,c);if(void 0!==l)try{const a=(0,i.getAnalyticsWebClient)(),c=o?(0,s.g)():Promise.resolve({featureFlags:{}}),[u,{featureFlags:d}]=await Promise.all([a,c]),h=((e={})=>Object.keys(e).filter((t=>e[t])).reduce(((t,n)=>(t[n]=e[n],t)),{}))(d);u.sendOperationalEvent({tags:["performance"],source:"confluence-frontend",action:"done",actionSubject:t,actionSubjectId:n,attributes:(0,r.Z)({featureFlags:h,duration:l},e)})}catch(d){(0,a.U)().submitError(d,{attribution:"unknown"})}},f=({subject:e,subjectId:t="",details:n={},includeFeatureFlags:r=!1})=>{c(`${e}.${t}.end`)||h({details:n,includeFeatureFlags:r,subject:e,subjectId:t})}},57230:(e,t,n)=>{"use strict";n.d(t,{E:()=>o});var r=n(29298),s=n(913879);class i{constructor(e={}){(0,r.Z)(this,"store",void 0),this.store=e}serialize(e){if(Array.isArray(e))return`[${e.map(this.serialize,this).join(",")}]`;if("object"==typeof e){return`{${Object.entries(null!=e?e:{}).filter((e=>void 0!==e[1])).sort(((e,t)=>e[0]<t[0]?-1:e[0]>t[0]?1:0)).map((([e,t])=>`${e}:${this.serialize(t)}`)).join(",")}}`}return String(e)}toHashKey({name:e,variables:t}){return`${e}:${this.serialize(null!=t?t:{})}`}load(e,t,{refetchIfNotClaimed:n=!0}={}){const r=this.toHashKey(e);return(!this.store[r]||n&&(0,s.wp)(this.store[r]))&&(this.store[r]=(0,s.LW)(t())),this.store[r]}claim(e,t){const n=this.toHashKey(e),r=this.store[n];return r?r.catch((()=>(delete this.store[n],null))).then((e=>(delete this.store[n],t?t(e):e&&e.data?e:null))):Promise.resolve(null)}}let a=null;function o(){return null===a&&(window.QUERY_PRELOADER_RESULTS||(window.QUERY_PRELOADER_RESULTS={}),a=new i(window.QUERY_PRELOADER_RESULTS)),a}},536347:(e,t,n)=>{"use strict";n.d(t,{b:()=>c});var r=n(984218),s=n(443709),i=n(616158),a=n(57230);const o=(0,i.j)("PreloadedQueryLink"),c=()=>new r.ApolloLink(((e,t)=>{const{operationName:n,variables:r}=e;return n?new s.Z((s=>{let i=null;return(0,a.E)().claim({name:n,variables:r}).then((r=>{r?(o.debug`Query matched: ${n} ${r}`,s.next(r),s.complete()):i=t(e).subscribe({next:s.next.bind(s),error:s.error.bind(s),complete:s.complete.bind(s)})})),()=>{i&&i.unsubscribe()}})):t(e)}))},758105:(e,t,n)=>{"use strict";n.d(t,{U:()=>r});const r=new(n(259873).EventBus)},812949:(e,t,n)=>{"use strict";n.d(t,{k:()=>i});var r=n(122551),s=n(758105);const i=({event:e,callback:t,contentId:n})=>{(0,r.useEffect)((()=>{const r=s.U.on(e,(async r=>{for(const a of r)if(a.contentId===n)try{await t(r);break}catch(i){s.U.stream([{type:"reload-error",event:e}])}}));return()=>s.U.off(e,r)}),[e,n])}},90995:(e,t,n)=>{"use strict";n.d(t,{ai:()=>i,GL:()=>a,qC:()=>c,yc:()=>u});var r=n(991332),s=n(122551);let i,a;!function(e){e.content="content",e.comment="comment"}(i||(i={})),function(e){e[e.immediate=0]="immediate",e[e.normal=1]="normal",e[e.background=2]="background"}(a||(a={}));const o=async(e,t,n,r)=>{const s=Object.keys(e).reduce(((t,n)=>{const r=e[n],s=Number(r.priority||a.immediate);return t[s]?t[s].push(r):t[s]=[r],t}),[]);for(const i of s){const e=n.current===t;if(i&&e){const e=i.map((e=>e.reload(r)));await Promise.all(e)}}},c=s.createContext({registerReloader:()=>{},reloaders:{[i.content]:async()=>{},[i.comment]:async()=>{}}}),u=(0,s.memo)((({contentId:e,children:t})=>{const n=(0,s.useRef)(e),a=(0,s.useRef)(!1),[u,l]=(0,s.useState)({}),[d,h]=(0,s.useState)({});(0,s.useLayoutEffect)((()=>()=>{a.current=!0}),[]),(0,s.useLayoutEffect)((()=>(n.current=e,()=>{a.current||(l({}),h({}))})),[e]);const f=(0,s.useCallback)((e=>{e.types.forEach((t=>{(t===i.comment?h:l)((t=>(0,r.Z)((0,r.Z)({},t),{},{[e.name]:e})))}))}),[l,h]),E=(0,s.useMemo)((()=>({contentId:e,registerReloader:f,reloaders:{[i.content]:t=>o(u,e,n,t),[i.comment]:t=>o(d,e,n,t)}})),[e,f,u,d]);return s.createElement(c.Provider,{value:E},t)}))},602722:(e,t,n)=>{"use strict";n.d(t,{t:()=>i});var r=n(122551),s=n(90995);const i=e=>{const{contentId:t,registerReloader:n}=(0,r.useContext)(s.qC);(0,r.useEffect)((()=>{n(e)}),[t,e.reload,e.name])}},997077:(e,t,n)=>{"use strict";n.d(t,{S:()=>a,H:()=>c});var r=n(122551),s=n(538639),i=n(772610);function a(){return d("click",l,!1),d("mousedown",u,!0),null}function o(e){return e instanceof HTMLElement&&e.isContentEditable}function c(e,t){if(!("button"in e)||0!==e.button)return;if(e.ctrlKey||e.shiftKey||e.altKey||e.metaKey)return;const{target:n}=e;if(!(n&&n instanceof Element))return;const r=n.closest("a");if(!r)return;if(!(r instanceof HTMLAnchorElement)||"hash"in r&&r.hash)return;const i=r.closest("[contenteditable]"),a=n.closest("[contenteditable]");if(o(i)||o(a))return;if(r.target&&"_self"!==r.target)return;const{href:c}=r;if(!c)return;if(!t||"function"!=typeof t.matchRoute)return;const u=t.matchRoute(c);return!u||u.name!==s.T3.name&&u.name!==s._2.name?c:void 0}function u(e,{preloadRoute:t},n){t(n)}function l(e,{push:t},n){e.preventDefault(),t(n,Boolean(s.LH.match(window.location.pathname)))}function d(e,t,n){const s=(0,r.useContext)(i.M),a=(0,r.useMemo)((()=>function(e,t){return n=>{if(n.defaultPrevented)return;const r=c(n,t);r&&e(n,t,r)}}(t,s)),[t,s]);(0,r.useEffect)((()=>(a&&window.addEventListener(e,a,n),()=>{a&&window.removeEventListener(e,a,n)})),[a,e,n])}},917068:(e,t,n)=>{"use strict";n.d(t,{e:()=>d,g:()=>l});var r=n(29298),s=n(122551),i=n(913879),a=n(158238),o=n(991332),c=n(997811),u=n(115181);const l=()=>window.__SESSION_DATA_PROMISE__?window.__SESSION_DATA_PROMISE__:window.__SESSION_DATA_PROMISE__=(0,i.LW)(async function(e={}){if(window.USE_MOCKED_SESSION_DATA)return new Promise((e=>{window.MOCK_SESSION_DATA_RESOLVE=e}));if(window.__SESSION_DATA__)return window.__SESSION_DATA__;const t=window.GLOBAL_APOLLO_CLIENT_URI||"/cgraphql";return window.__SESSION_DATA__=u.H.run("fetch:SessionDataQuery",(()=>fetch(`${t}?q=SessionDataQuery`,(0,c.I)({method:"POST",credentials:"include",referrerPolicy:"same-origin",headers:(0,o.Z)({"X-APOLLO-OPERATION-NAME":"SessionDataQuery","Content-Type":"application/json"},e.headers),body:JSON.stringify({query:"\nquery SessionDataQuery @SLA {\n  tenant {\n    shard\n    cloudId\n    environment\n    activationId\n    editions {\n      edition\n    }\n  }\n  userForAnalytics: user {\n    id\n  }\n  user(current: true) {\n    id\n    displayName\n    confluence {\n      accountId\n      userKey\n      locale\n    }\n    timeZone\n  }\n  featureFlags(extraTargeting: true, first: 800) {\n    nodes {\n      id\n      value\n      explanation {\n        ruleIndex\n        ruleId\n        kind\n      }\n    }\n  }\n}\n"})})).then((async e=>{if(!e.ok)throw new Error(`Cannot load session data: ${e.statusText}`);const t=(await e.json()).data;return window.__SESSION_DATA__=t,t}))))}().then(a.K));class d extends s.Component{constructor(e){super(e),(0,r.Z)(this,"_mount",void 0),(0,r.Z)(this,"state",{});const t=l();this._mount=!0,(0,i.wp)(t)?this.state={sessionData:(0,i.NA)(t)}:t.then((e=>{this._mount&&this.setState({sessionData:e})}))}componentWillUnmount(){this._mount=!1}render(){const{sessionData:e}=this.state;return e?this.props.children(e):!0===this.props.renderChildrenWhenLoading?this.props.children({loading:!0}):null}}d.displayName="SessionData"},505841:(e,t,n)=>{"use strict";n.d(t,{B:()=>w});var r=n(991332),s=n(69210),i=n(405124),a=n.n(i),o=n(937613),c=n(443033);const u={sendOperationalEvent:e=>(0,c.getAnalyticsWebClient)().then((t=>{t.sendOperationalEvent(e)}))},l=(0,s.default)(((e={})=>new o.Z({flags:e,analyticsHandler:u})),a());var d=n(510555),h=n(596207);let f={},E={};const m=(e,t)=>{const n=(e=>{if(!e&&!window.location.href)return{};const t=new URL(e||window.location.href);return new URLSearchParams(t.search)})(t);for(const r in f)void 0!==e[r]&&("true"!==n.get(f[r])?"false"===n.get(f[r])&&(e[r]=!1):e[r]=!0)};function v(e){return"true"===e||"false"!==e&&("object"==typeof e?JSON.stringify(e):e)}function _(e,t){return e.reduce(((e,n)=>(e[n.id]=t(n),e)),{})}const p=(e,t,n)=>t.hasOwnProperty(e)?(0,r.Z)((0,r.Z)({},n[e]),{},{value:t[e]}):n[e];function T(e){return"object"==typeof e&&"value"in e?(0,r.Z)((0,r.Z)({},e.explanation?{explanation:(0,r.Z)({},e.explanation)}:{}),{},{value:v(e.value)}):{value:v(e),explanation:void 0}}const w=(0,s.default)(((e,t)=>{const n=e?_(e,T):{},r=(0,d.RW)(n,p),s=l();s.setFlags(r);const{original:i,withOverrides:a}=(e=>{const t=_(e,(e=>v(e.value)));return{original:t,withOverrides:(0,d.RW)(t,((e,t,n)=>t.hasOwnProperty(e)?t[e]:n[e]))}})(e);return((e,t)=>{for(const s in E){const i=e[E[s].rolloutFF];if("string"==typeof i)try{const r=JSON.parse(i);var n;e[s]=t?e[s]&&(r.enabledLastDigits.includes(t.substr(-1))||(null===(n=r.enabledUserIds)||void 0===n?void 0:n.includes(t))):e[s]&&r.includeAnonUsers}catch(r){(0,h.U)().submitError(r,{attribution:"backbone"})}}})(a,t),m(a),{originalFeatureFlags:i,featureFlagsWithOverrides:a,featureFlagClient:s}}))},115181:(e,t,n)=>{"use strict";n.d(t,{H:()=>s});var r=n(29298);const s=new class{constructor(){(0,r.Z)(this,"measures",void 0),(0,r.Z)(this,"startTime",void 0),this.measures={},this.startTime=0}setStartTime(){this.startTime=performance.now()>>0}run(e,t){return t()}markMeasureStart(e){this.measures[e]={startTime:(performance.now()>>0)-this.startTime,duration:0}}markMeasureEnd(e){var t;null!==(t=this.measures[e])&&void 0!==t&&t.startTime&&(this.measures[e].duration=(performance.now()>>0)-this.startTime-this.measures[e].startTime)}getMeasures(){return Object.entries(this.measures).sort(((e,t)=>e[1].startTime-t[1].startTime)).reduce(((e,[t,n])=>(e[t]=n,e)),{})}clearMeasures(){this.measures={}}}},574409:(e,t,n)=>{"use strict";n.d(t,{aX:()=>s,V:()=>i});const r={uuid:null,pageId:"",routeName:"",transitionId:0,routingTimestamp:0,currentSavedTimestamp:0},s=()=>(r.currentSavedTimestamp=performance.now(),{uuid:r.uuid,contentId:r.pageId,isInitial:0===r.transitionId,isSSR:Boolean(window.__SSR_RENDERED__),routingDuration:r.currentSavedTimestamp-r.routingTimestamp}),i=(e="",t,n,s)=>{var i;const c=null==t||null===(i=t.params)||void 0===i?void 0:i.contentId,u=s.userId;if(r.pageId!==c||r.routeName!==e){let t;t=u?o(e,c,s):a(),r.uuid=t,r.routeName=e,r.pageId=c,r.transitionId=n,r.routingTimestamp=performance.now()}},a=()=>"10000000-1000-4000-8000-100000000000".replace(/1|0/g,(function(){return(0|16*Math.random()).toString(16)})),o=(e,t,n)=>{const{userId:r,cloudId:s}=n;return`${e=e||"route"}-${t=t||"page"}-${r}-${s}-${Date.now()}`}},729501:(e,t,n)=>{"use strict";n.d(t,{s:()=>i});var r=n(122551);const s=(0,r.createContext)(void 0),i=()=>Math.min((0,r.useContext)(s)||0,6)}}]);
//# sourceMappingURL=52753.L7UUwfeLD7.js.map